local LogService = game:GetService("LogService")

for _, c in pairs(getconnections(LogService.MessageOut)) do
    c:Disable()
end

LogService.MessageOut:Connect(function(msg, msgType)
    if typeof(msg) == "string" then
        if msg:find("Signal not found") 
        or msg:find("Infinite yield possible") 
        or msgType == Enum.MessageType.MessageOutput then
            return
        end
    end
    print(msg)
end)

local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/china-ui/refs/heads/main/main%20(6).lua"))()
local flagFile = "update_popup_seen3.txt"

local function hasSeen()
    if isfile and isfile(flagFile) then
        return true
    end
    return false
end

local function markSeen()
    if writefile then
        writefile(flagFile, "true")
    end
end

if not hasSeen() then
    WindUI:Popup({
        Title = "更新提醒/update",
        Icon = "sparkles",
        Content = "脚本已更新请前往更新日志查看详细/the script has been updated please go to the update log for details",
        Buttons = {
            {
                Title = "继续/continue",
                Icon = "arrow-right",
                Variant = "Primary",
                Callback = function()
                    markSeen()
                end
            }
        }
    })
end
local Window = WindUI:CreateWindow({
    Title = "Kanl Hub",
    Icon = "sword",
    IconThemed = true,
    Author = "join it :)",
    Folder = "CloudHub",
    Size = UDim2.fromOffset(500, 400),
    Transparent = true,
    Theme = "Dark",
    User = {
        Enabled = true,
        Callback = function() end,
        Anonymous = false
    },
    SideBarWidth = 200,
    ScrollBarEnabled = true
})

Window:CreateTopbarButton("theme-switcher", "moon", function()
    WindUI:SetTheme(WindUI:GetCurrentTheme() == "Dark" and "Light" or "Dark")
    WindUI:Notify({
        Title = "提示",
        Content = "当前主题: "..WindUI:GetCurrentTheme(),
        Duration = 2
    })
end, 990)
local PaidTag = Window:Tag({
    Title = "付费版/paid version",
    Radius = 999,
    Color = Color3.fromRGB(0, 255, 0),
})

local RunService = game:GetService("RunService")

local FPSTag = Window:Tag({
    Title = "-- FPS",
    Radius = 999,
    Color = Color3.fromRGB(255, 255, 255),
})

local lastTime = tick()
local frameCount = 0
local fps = 0

task.spawn(function()
    while true do
        frameCount += 1
        local now = tick()
        if now - lastTime >= 1 then
            fps = frameCount / (now - lastTime)
            frameCount = 0
            lastTime = now

            FPSTag:SetTitle(string.format("%.0f FPS", fps))

            if fps >= 60 then
                FPSTag:SetColor(Color3.fromRGB(0, 255, 0))
            elseif fps >= 30 then
                FPSTag:SetColor(Color3.fromRGB(255, 255, 0))
            else
                FPSTag:SetColor(Color3.fromRGB(255, 0, 0))
            end
        end
        task.wait()
    end
end)

Window:SetToggleKey(Enum.KeyCode.K)

local AboutTab = Window:Tab({
    Title = "更新日志/update",
    Icon = "solar:info-square-bold",
    IconColor = Grey,
    IconShape = "Square",
})

local AboutSection = AboutTab:Section({
    Title = "更新日期/updates ‖ 12.13",
    Opened = false,
})

local lines = {
    "添加更新日志，我为什么要在脚本里添加更新日志而不是在群里通知？因为我懒 ‖ i'm adding update logs to the script instead of notifying in the group because i'm lazy",
    "添加亡命速递服务器 ‖ add Deadly Delivery sever",
    "优化了摧毁师队友挡在前面子追没用的问题 ‖ optimized the issue where defuse division's allies standing in front prevented the projectile from working",
    "终极战场添加保存配置功能，你可以打开你比较喜欢用的功能然后保存配置，下次运行脚本的时候就不用再次繁琐打开这么多功能了 ‖ added config save functionality for ultimate battleground, you can turn on your favorite features and save the config, so you won't have to go through the tedious process of turning on so many features again next time you run the script"
}

AboutSection:Space({ Columns = 1 })

for _, line in ipairs(lines) do
    AboutSection:Section({
        Title = line,
        Opened = true,
    })

    AboutSection:Space({ Columns = 2.5 })
end
local AboutSection = AboutTab:Section({
    Title = "更新日期/updates ‖ 12.15",
    Opened = false,
})

local lines = {
    "摧毁师添加快速切枪 ‖ Defuse division adds fast equip function",
    "添加doors和英雄战场 ‖ add doors and heroes battleground"
}

AboutSection:Space({ Columns = 1 })

for _, line in ipairs(lines) do
    AboutSection:Section({
        Title = line,
        Opened = true,
    })

    AboutSection:Space({ Columns = 2.5 })
end
local AboutSection = AboutTab:Section({
    Title = "更新日期/updates ‖ 12.17",
    Opened = true,
})

local lines = {
    "添加三个新服务器，分别是一路向西、极速传奇和凌晨三点后 ‖ add three new servers,WESTBOUND,Legends Of Speed and After 3 AM",
    "添加doors和英雄战场 ‖ add doors and heroes battleground"
}

AboutSection:Space({ Columns = 1 })

for _, line in ipairs(lines) do
    AboutSection:Section({
        Title = line,
        Opened = true,
    })

    AboutSection:Space({ Columns = 2.5 })
end
local AboutSection = AboutTab:Section({
    Title = "更新日期/updates ‖ 12.19(最新更新/latest update)",
    Opened = true,
})

local lines = {
    "添加三个新服务器，分别是自然灾害、莱克星顿和紧急汉堡 ‖ add three new server.Natural Disaster Survival,Lexington & Concord and Emergency Hamburger"
}

AboutSection:Space({ Columns = 1 })

for _, line in ipairs(lines) do
    AboutSection:Section({
        Title = line,
        Opened = true,
    })

    AboutSection:Space({ Columns = 2.5 })
end
AboutTab:Paragraph({
    Title = " ",
    Desc = " ",
    Image = "",
    Thumbnail = "https://raw.githubusercontent.com/dream77239/sss/refs/heads/main/1765547370409.jpeg",
    ThumbnailSize = 300
})

local Tab = Window:Tab({
    Title = "选择语言/Select Language",
    Icon = "smile",
    Locked = false,
})
local function createMusicUI()
local Tab = Window:Tab({  
    Title = "音乐/music",  
    Icon = "music",  
    Locked = false,
})
local HttpService = game:GetService("HttpService")
local SoundService = game:GetService("SoundService")

local folderPath = "Workspace/kanl music/"

if not isfolder(folderPath) then
    makefolder(folderPath)
end

local musicList = {
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231409754112102/Prefabricated_love.mp3?ex=68f9064c&is=68f7b4cc&hm=d2fdc94fc4ae1f2bdc47871ceb2c975be89d8447b1d22ab5d30e6a7817a09978",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430229341559586946/saravia.mp3?ex=68f9045f&is=68f7b2df&hm=e953d9081c58513776c14bde7b6df7cfb38a9cdb339a091bbc19da4a1b45b823",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430229845534834828/dead_bed.mp3?ex=68f904d7&is=68f7b357&hm=309f72ebe7e2cb29e59c4e39a9a9619c8d8f5f70c9f2b4d3c316011d6a742dac",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430229961880637480/lifeline.mp3?ex=68f904f3&is=68f7b373&hm=c785f8722342f4008e68bdeaaf26a4f1a4d0eb8839bca9827893b3a7a3af63f1",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430230320728248481/goldenhour.mp3?ex=68f90548&is=68f7b3c8&hm=0922c79c2294e13d93b025bf3194533a2ee6e7777ad9bcb20e54aa550497c8d3",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430230321168777267/8fae938dd7c28c21.mp3?ex=68f90548&is=68f7b3c8&hm=871db7a03cdcc8cccba4705f583e309c0c5fc1466780ff839b54b2a2ef76b7ef",
    "https://cdn.discordapp.com/attachments/1410098416016687187/1430380478258741359/Cry_for_me.mp3?ex=68f99121&is=68f83fa1&hm=15632742be579eae8116c91cb8d8c0510ea9bfbee60be8a42a2f937115a02e2a&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430380584357597364/Heaven.mp3?ex=68f9913a&is=68f83fba&hm=ae4cc1b609b8f38025b43a3fa486256c1ba91c251b7e135bae5d4022e228ee7d&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430380852772339814/skyblue.mp3?ex=68f9917a&is=68f83ffa&hm=f02787a3ba55406cd095b9706c0a73eb05a4a73b831a2835819191223727f49a&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430230936846467132/DIA_DELICIA.mp3?ex=68f905db&is=68f7b45b&hm=6dad742c25622e1376729e882ad70f3b3c03e30dc703f38bcd5a325bc1baf768",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430230937152782356/mente.mp3?ex=68f905db&is=68f7b45b&hm=81220b9a9fe5edaefd481287f15fd5cd82a712e73a9145ef10fb38c881c8c789",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231126315765892/Monaco_1990.mp3?ex=68f90608&is=68f7b488&hm=586f6e0f83cd75541da15b2787b65c57462cd9d895ce52047523b46300b3c9f9",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231126664020113/Montagem_Bandido.mp3?ex=68f90609&is=68f7b489&hm=6de0790941cb6d189f69564afa1f1c32c8979cdd9584a97ce0efc56fc2c78cfa",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231224722522293/Montagem_Bandido_slow.mp3?ex=68f90620&is=68f7b4a0&hm=f1e768072258e55b8c3cdb99154ca3cfa82b9862cea6815debd5b61a2a9cbf41",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231225343148062/Montagem_Supersonic.mp3?ex=68f90620&is=68f7b4a0&hm=fa30f0bea5cbcf24e989fcda00cde25ae4abc6baf3b66b94ed3cc4a82f53b0f4",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231343735767050/Montagem_Supersonic_slow.mp3?ex=68f9063c&is=68f7b4bc&hm=2f4de0df5837cdaaddb67aae3ceedc1fc5b69db6fb8fc24cc20ddd3c5b30071c",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430231344029499402/vemvem.mp3?ex=68f9063c&is=68f7b4bc&hm=cd04d0cae2a14d2d5be703d8af2b3db391c7763d0f54b90f49835e28d333dc03",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430230937513361569/vs.mp3?ex=68f905db&is=68f7b45b&hm=53bce489e1ae9037b8b7ab8ced4415864d72ca9f3926fbd92c9ce98394466a1d",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430381041700438031/S1KE.mp3?ex=68f991a7&is=68f84027&hm=22b742a8223163269d68665354bdb0190856f6a5643ecb93f66abe59c9528c37&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430381042023403651/Towards_the_Light.mp3?ex=68f991a7&is=68f84027&hm=8574139466e72906d448297d8ebd61275bc1c477ce25dbfa77a44b224b920efd&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430381047828185179/way_down_we_go.mp3?ex=68f991a8&is=68f84028&hm=88a5fbfef6fb7b3173712162e5f73472eb7e493ab2d382caea35f13467721993&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430381048218521734/x-gr.mp3?ex=68f991a9&is=68f84029&hm=c14482c511a3a1f3fde27a99056cc72dba8dc0a2761b4da58ff8297aeb0af00b&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430386014190571551/shadow_of_the_sun.mp3?ex=68f99649&is=68f844c9&hm=ab3a56fdfc1b325b018e15a081717157940b1d3cca9f3e4899939fdafa4a51c9&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430387532553519224/x-tali.mp3?ex=68f997b3&is=68f84633&hm=f28532c801a1fa030827af462d99028fff8155c51fef7e8097facf4026131d2c&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430388425730687056/why_not.mp3?ex=68f99888&is=68f84708&hm=134a9f1381334d8a298d2740472fcec13afe26c8a5dea489661d400c37b0abc1&",
    "https://cdn.discordapp.com/attachments/1419501684547391541/1430391390587846686/tek_it.mp3?ex=68f99b4a&is=68f849ca&hm=1a6e4c837472fe6c343db63f10c298d66c68c214d15c1d414a2f0c5735e0d76b&",
    "https://cdn.discordapp.com/attachments/1410098416016687187/1430524586566615210/past_lives.mp3?ex=68fa1757&is=68f8c5d7&hm=009d9bcb34efba542312a265c003545b4b8ca628ec116180c18396fa73720ab1&"
}

local sounds = {}

task.spawn(function()
    for _, url in pairs(musicList) do
        local fileName = url:match("/([^/]+)%.mp3") .. ".mp3"
        local fullPath = folderPath .. fileName
        if not isfile(fullPath) then
            task.spawn(function()
                local ok, data = pcall(function()
                    return game:HttpGet(url)
                end)
                if ok and data then
                    writefile(fullPath, data)
                end
            end)
        end
    end
end)

task.delay(2, function()
    local function createMusicUI()
        local files = listfiles(folderPath)
        for _, filePath in pairs(files) do
            if filePath:sub(-4):lower() == ".mp3" then
                local title = filePath:match("([^/]+)%.mp3$")
                local sound = Instance.new("Sound")
                sound.SoundId = getcustomasset(filePath)
                sound.Looped = true
                sound.Volume = 1
                sound.Parent = SoundService
                sounds[title] = sound

                Tab:Toggle({
                    Title = title,
                    Value = false,
                    Callback = function(state)
                        if state then
                            for t, s in pairs(sounds) do
                                if s ~= sound then
                                    s:Stop()
                                end
                            end
                            sound:Play()
                        else
                            sound:Stop()
                        end
                    end
                })
            end
        end

        Tab:Slider({
            Title = "音量",
            Value = {
                Min = 1,
                Max = 3,
                Default = 1,
            },
            Callback = function(vol)
                for _, s in pairs(sounds) do
                    s.Volume = vol
                end
            end
        })
    end
    createMusicUI()
end)
end
local function zrzheng()
local HttpService = cloneref(game:GetService("HttpService"))

local isfunctionhooked = clonefunction(isfunctionhooked)

if isfunctionhooked(game.HttpGet) or isfunctionhooked(getnamecallmethod) or isfunctionhooked(request) then
    return
end

local lp = game:GetService("Players").LocalPlayer
local Character = lp.Character
local hrp = Character.HumanoidRootPart

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "tablet"
        else
            return "mobile"
        end
    else
        return "pc"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "mobile" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "tablet" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local displayName = game.Players.LocalPlayer.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "player", Opened = false, Icon = "user"}),
    ZN = Window:Section({ Title = "disaster", Opened = false, Icon = "package-open"}),
    Auto = Window:Section({ Title = "auto", Opened = false, Icon = "pocket-knife"})
}

local TabHandles = {
    Announcement = Tabs.Pl:Tab({ Title = "announcement", Icon = "folder"}),
    Player = Tabs.Pl:Tab({ Title = "player", Icon = "folder"}),
    ZN1 = Tabs.ZN:Tab({ Title = "predict disaster", Icon = "folder"}),
}

TabHandles.Announcement:Paragraph({
    Title = "welcome distinguished user",
    Desc = "this script will always be updated thanks to whitelist users",
    Image = "info",
    ImageSize = 15
})

TabHandles.Announcement:Paragraph({
    Title = "player",
    Desc = "respected user: " .. game.Players.LocalPlayer.Name .. " welcome",
    Image = "user",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "device",
    Desc = "your device: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "executor",
    Desc = "your executor: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

TabHandles.Player:Slider({
    Title = "walkspeed",
    Desc = "player speed",
    Step = 1,
    Value = {
        Min = 16,
        Max = 200,
        Default = 16,
    },
    Callback = function(value)
        if game:GetService("Players").LocalPlayer.Character and game:GetService("Players").LocalPlayer.Character:FindFirstChild("Humanoid") then
            game:GetService("Players").LocalPlayer.Character.Humanoid.WalkSpeed = value
        end
    end
})

TabHandles.Player:Slider({
    Title = "jump height",
    Desc = "player jump height",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        if game:GetService("Players").LocalPlayer.Character and game:GetService("Players").LocalPlayer.Character:FindFirstChild("Humanoid") then
            game:GetService("Players").LocalPlayer.Character.Humanoid.JumpHeight = value
        end
    end
})

TabHandles.Player:Slider({
    Title = "field of view",
    Desc = "camera fov",
    Step = 1,
    Value = {
        Min = 70,
        Max = 120,
        Default = 70,
    },
    Callback = function(value)
        if camera then
            camera.FieldOfView = value
        end
    end
})

TabHandles.Player:Button({
    Title = "remove fall damage",
    Desc = "remove",
    Callback = function()
        if game:GetService("Players").LocalPlayer.Character:FindFirstChild("FallDamageScript") then
            game:GetService("Players").LocalPlayer.Character.FallDamageScript:Destroy()
        end
        game:GetService("Players").LocalPlayer.Character.ChildAdded:Connect(function(v)
            if v.Name == "FallDamageScript" then
                v:Destroy()
            end
        end)
    end
})

TabHandles.ZN1:Toggle({
    Title = "predict disaster",
    Desc = "disaster",
    Value = false,
    Callback = function(state)
        local SurvivalTag
        SurvivalTag = Character:FindFirstChild("SurvivalTag") or nil
        Character.ChildAdded:Connect(function(v)
            if v.Name == "SurvivalTag" then
                SurvivalTag = v
            end
        end)
        if SurvivalTag then
            local disastertable = {
                ["Blizzard"] = "blizzard",
                ["Sandstorm"] = "sandstorm",
                ["Tornado"] = "tornado",
                ["Volcanic Eruption"] = "volcanic eruption",
                ["Flash Flood"] = "flash flood",
                ["Deadly Virus"] = "deadly virus",
                ["Tsunami"] = "tsunami",
                ["Acid Rain"] = "acid rain",
                ["Fire"] = "fire",
                ["Meteor Shower"] = "meteor shower",
                ["Earthquake"] = "earthquake",
                ["Thunder Storm"] = "thunder storm",
                ["Avalanche"] = "avalanche",
                ["Lightning"] = "lightning"
            }
            if disastertable[SurvivalTag.Value] then
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "disaster",
                    Text = disastertable[SurvivalTag.Value],
                    Duration = 5
                })
            end
        end
    end
})
end
local function lkxdeng()
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera
local RunService = game:GetService("RunService")
local old
local main = {
    enable = false,
    friendcheck = false,
}

local function getClosestHead()
    local closestHead
    local closestDistance = math.huge
    
    if not LocalPlayer.Character then return end
    if not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
    
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local skip = false
            if player.Team == LocalPlayer.Team then
                if not skip and main.friendcheck then
                    if LocalPlayer:IsFriendsWith(player.UserId) then
                        skip = true
                    end
                end
                if not skip then
                    local character = player.Character
                    local root = character:FindFirstChild("HumanoidRootPart")
                    local head = character:FindFirstChild("Head")
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    local forcefield = character:FindFirstChild("ForceField")
                    
                    if root and head and humanoid and not forcefield and humanoid.Health > 0 then
                        local distance = (root.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                        if distance < closestDistance then
                            closestHead = head
                            closestDistance = distance
                        end
                    end
                end
            end
        end
    end
    return closestHead
end

old = hookmetamethod(game, "__namecall", newcclosure(function(self, ...)
    local method = getnamecallmethod()
    local args = {...}
    if main.enable and method == "Raycast" and not checkcaller() then
        local origin = args[1] or Camera.CFrame.Position
        local closestHead = getClosestHead()
        if closestHead then
            return {
                Instance = closestHead,
                Position = closestHead.Position,
                Normal = (origin - closestHead.Position).Unit,
                Material = Enum.Material.Plastic,
                Distance = (closestHead.Position - origin).Magnitude
            }
        end
    end
    return old(self, ...)
end))

MainSection = Window:Section({
    Title = "main",
    Opened = true,
})

Main = MainSection:Tab({ Title = "main", Icon = "Sword" })

Main:Toggle({
    Title = "enable silent aim",
    Image = "bird",
    Value = false,
    Callback = function(state)
        main.enable = state
    end
})

Main:Toggle({
    Title = "enable friend check",
    Image = "bird",
    Value = false,
    Callback = function(state)
        main.friendcheck = state
    end
})
end
local function jjhbeng()
local Tab = Window:Tab({
    Title = "features",
    Icon = "bird",
    Locked = false,
})

local PlayerSection = Tab:Section({ 
    Title = "player",
})

local AimbotSection = Tab:Section({ 
    Title = "aimbot",
})

PlayerSection:Toggle({
    Title = "anti fall damage",
    Value = false,
    Callback = function(state)
        if state then
            coon = game:GetService("RunService").RenderStepped:Connect(function()
                if workspace:Raycast(game.Players.LocalPlayer.Character.HumanoidRootPart.Position, Vector3.new(0, -20, 0)).Instance ~= nil and 
                   game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity.Y < -30 then 
                    game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
                end
            end)
        else
            if coon then coon:Disconnect() end
        end
    end
})

PlayerSection:Toggle({
    Title = "anti ragdoll",
    Value = false,
    Callback = function(state)
        antiragdoll = state
        if antiragdoll then
            coon2 = game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("Health"):Connect(function()
                game.Players.LocalPlayer.Character.Humanoid.Health = 100
            end)
        else
            if coon2 then coon2:Disconnect() end
        end
    end
})

PlayerSection:Toggle({
    Title = "infinite stamina",
    Callback = function(state)
        if state then
            local func 
            for i,v in pairs(getgc(true)) do
                if type(v) == "function" and getinfo(v).name == "setStamina" then
                    func = v
                end
            end
            if func then
                hookfunction(func,function(...)
                    local args = {...}
                    return args[1],math.huge
                end)
            end
        else
            local func 
            for i,v in pairs(getgc(true)) do
                if type(v) == "function" and getinfo(v).name == "setStamina" then
                    func = v
                end
            end
            if func then
                restorefunction(func)
            end
        end
    end
})

local teams = {}
for i,v in pairs(game:GetService("Teams"):GetChildren()) do
    table.insert(teams, v.Name)
end
enemy = false
aimbot = false

AimbotSection:Dropdown({
    Title = "select enemy team",
    Values = teams,
    Callback = function(state) 
        if state ~= "select enemy team" then
            enemy = state
        end
    end
})

AimbotSection:Toggle({
    Title = "aimbot",
    Value = false,
    Callback = function(state)
        aimbot = state
        local function canaim(ye)
            return game:GetService("Players").LocalPlayer:DistanceFromCharacter(ye) < 3
        end
        while aimbot do
            task.wait()
            if game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool") and canaim(workspace.Camera.CFrame.Position) then
                local plr = nil
                local distance = math.huge
                for a,b in pairs(game.Players:GetPlayers()) do
                    if b.Team and b.Team.Name == enemy then
                        pcall(function()
                            local Dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - b.Character.Head.Position).magnitude
                            if Dist < distance then
                                distance = Dist
                                plr = b
                            end
                        end)
                    end
                end
                if plr ~= nil then
                    workspace.Camera.CameraType = Enum.CameraType.Follow
                    workspace.Camera.CFrame = CFrame.new(workspace.Camera.CFrame.Position, plr.Character.Head.Position)
                end
            end
        end
    end
})
end

local function zrzh()
local HttpService = cloneref(game:GetService("HttpService"))

local isfunctionhooked = clonefunction(isfunctionhooked)

if isfunctionhooked(game.HttpGet) or isfunctionhooked(getnamecallmethod) or isfunctionhooked(request) then
    return
end

local lp = game:GetService("Players").LocalPlayer
local Character = lp.Character
local hrp = Character.HumanoidRootPart

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "平板"
        else
            return "手机"
        end
    else
        return "电脑"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "手机" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "平板" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local displayName = game.Players.LocalPlayer.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "玩家", Opened = false, Icon = "user"}),
    ZN = Window:Section({ Title = "灾难", Opened = false, Icon = "package-open"}),
    Auto = Window:Section({ Title = "自动", Opened = false, Icon = "pocket-knife"})
}

local TabHandles = {
    Announcement = Tabs.Pl:Tab({ Title = "公告", Icon = "folder"}),
    Player = Tabs.Pl:Tab({ Title = "玩家", Icon = "folder"}),
    ZN1 = Tabs.ZN:Tab({ Title = "预测灾难", Icon = "folder"}),
    
}

TabHandles.Announcement:Paragraph({
    Title = "欢迎尊贵的用户",
    Desc = "此脚本会一直更新 感谢白名单使用者",
    Image = "info",
    ImageSize = 15
})

TabHandles.Announcement:Paragraph({
    Title = "玩家",
    Desc = "尊敬的用户: " .. game.Players.LocalPlayer.Name .. "欢迎使用",
    Image = "user",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "设备",
    Desc = "你的使用设备: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "设备",
    Desc = "你的注入器: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

TabHandles.Player:Slider({
    Title = "玩家速度",
    Desc = "玩家的速度",
    Step = 1,
    Value = {
        Min = 16,
        Max = 200,
        Default = 16,
    },
    Callback = function(value)
        if game:GetService("Players").LocalPlayer.Character and game:GetService("Players").LocalPlayer.Character:FindFirstChild("Humanoid") then
            game:GetService("Players").LocalPlayer.Character.Humanoid.WalkSpeed = value
        end
    end
})

TabHandles.Player:Slider({
    Title = "玩家跳跃高度",
    Desc = "玩家的跳跃高度",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        if game:GetService("Players").LocalPlayer.Character and game:GetService("Players").LocalPlayer.Character:FindFirstChild("Humanoid") then
            game:GetService("Players").LocalPlayer.Character.Humanoid.JumpHeight = value
        end
    end
})

TabHandles.Player:Slider({
    Title = "玩家镜头FOV",
    Desc = "玩家的镜头",
    Step = 1,
    Value = {
        Min = 70,
        Max = 120,
        Default = 70,
    },
    Callback = function(value)
        if camera then
            camera.FieldOfView = value
        end
    end
})

TabHandles.Player:Button({
    Title = "删除摔落伤害",
    Desc = "删除",
    Callback = function()
        game:GetService("Players").LocalPlayer.Character.FallDamageScript:Destroy()
        game:GetService("Players").LocalPlayer.Character.ChildAdded:Connect(function()
            if v.Name == "FallDamageScript" then
                v:Destroy()
            end
        end)
    end
})

TabHandles.ZN1:Toggle({
    Title = "预测灾难",
    Desc = "灾难",
    Value = false,
    Callback = function(state)
local SurvivalTag
SurvivalTag = Character:FindFirstChild("SurvivalTag") or nil
Character.ChildAdded:Connect(function(v)
    if v.Name == "SurvivalTag" then
        SurvivalTag = v
    end
end)
if SurvivalTag then
    local disastertable = {
        ["Blizzard"] = "暴风雪",
        ["Sandstorm"] = "沙尘暴",
        ["Tornado"] = "龙卷风",
        ["Volcanic Eruption"] = "火山",
        ["Flash Flood"] = "洪水",
        ["Deadly Virus"] = "病毒",
        ["Tsunami"] = "海啸",
        ["Acid Rain"] = "酸雨",
        ["Fire"] = "火焰",
        ["Meteor Shower"] = "流星雨",
        ["Earthquake"] = "地震",
        ["Thunder Storm"] = "暴风雨",
        ["Avalanche"] = "雪崩",
        ["Lightning"] = "闪电"
    }
    if disastertable[SurvivalTag.Value] then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "灾难",
            Text = disastertable[SurvivalTag.Value],
            Duration = 5
        })
    end
end
    end
})
end
local function lkxd()
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera
local RunService = game:GetService("RunService")
local old
local main = {
    enable = false,
    friendcheck = false,
}

local function getClosestHead()
    local closestHead
    local closestDistance = math.huge
    
    if not LocalPlayer.Character then return end
    if not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
    
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local skip = false
            if player.Team == LocalPlayer.Team then
                if not skip and main.friendcheck then
                    if LocalPlayer:IsFriendsWith(player.UserId) then
                        skip = true
                    end
                end
                if not skip then
                    local character = player.Character
                    local root = character:FindFirstChild("HumanoidRootPart")
                    local head = character:FindFirstChild("Head")
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    local forcefield = character:FindFirstChild("ForceField")
                    
                    if root and head and humanoid and not forcefield and humanoid.Health > 0 then
                        local distance = (root.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                        if distance < closestDistance then
                            closestHead = head
                            closestDistance = distance
                        end
                    end
                end
            end
        end
    end
    return closestHead
end

old = hookmetamethod(game, "__namecall", newcclosure(function(self, ...)
    local method = getnamecallmethod()
    local args = {...}
    if main.enable and method == "Raycast" and not checkcaller() then
        local origin = args[1] or Camera.CFrame.Position
        local closestHead = getClosestHead()
        if closestHead then
            return {
                Instance = closestHead,
                Position = closestHead.Position,
                Normal = (origin - closestHead.Position).Unit,
                Material = Enum.Material.Plastic,
                Distance = (closestHead.Position - origin).Magnitude
            }
        end
    end
    return old(self, ...)
end))

MainSection = Window:Section({
    Title = "主菜单功能",
    Opened = true,
})

Main = MainSection:Tab({ Title = "功能", Icon = "Sword" })

Main:Toggle({
    Title = "开启子弹追踪",
    Image = "bird",
    Value = false,
    Callback = function(state)
        main.enable = state
    end
})

Main:Toggle({
    Title = "开启好友验证",
    Image = "bird",
    Value = false,
    Callback = function(state)
        main.friendcheck = state
    end
})
end
local function jjhb()
local Tab = Window:Tab({
    Title = "功能",
    Icon = "bird", -- optional
    Locked = false,
})

local PlayerSection = Tab:Section({ 
    Title = "玩家",
})

local AimbotSection = Tab:Section({ 
    Title = "自瞄",
})
PlayerSection:Toggle({
    Title = "防坠落伤害",
    Value = false,
    Callback = function(state)
        if state then
            coon = game:GetService("RunService").RenderStepped:Connect(function()
                if workspace:Raycast(game.Players.LocalPlayer.Character.HumanoidRootPart.Position, Vector3.new(0, -20, 0)).Instance ~= nil and 
                   game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity.Y < -30 then 
                    game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
                end
            end)
        else
            coon:Disconnect()
        end
    end
})

PlayerSection:Toggle({
    Title = "防倒地",
    Value = false,
    Callback = function(state)
        antiragdoll = state
        if antiragdoll then
            coon2 = game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("Health"):Connect(function()
                game.Players.LocalPlayer.Character.Humanoid.Health = 100
            end)
        else
            coon2:Disconnect()
        end
    end
})

PlayerSection:Toggle({
    Title = "无限体力",
    Callback = function(state)
        if state then
            local func 
            for i,v in pairs(getgc(true)) do
                if type(v) == "function" and getinfo(v).name == "setStamina" then
                    func = v
                end
            end
            hookfunction(func,function(...)
                local args = {...}
                return args[1],math.huge
            end)
        else
            local func 
            for i,v in pairs(getgc(true)) do
                if type(v) == "function" and getinfo(v).name == "setStamina" then
                    func = v
                end
            end
            hookfunction(func,function(...)
                local args = {...}
                return args[1],math.huge
            end)
            restorefunction(func)
        end
    end
})

local teams = {}
for i,v in pairs(game:GetService("Teams"):GetChildren()) do
    table.insert(teams, v.Name)
end
enemy = false
aimbot = false
AimbotSection:Dropdown({
    Title = "选择敌方队伍",
    Values = teams,
    Callback = function(state) 
        if state ~= "选择敌方队伍" then
            enemy = state
        end
    end
})

AimbotSection:Toggle({
    Title = "自瞄",
    Value = false,
    Callback = function(state)
        aimbot = state
        local function canaim(ye)
            return game:GetService("Players").LocalPlayer:DistanceFromCharacter(ye) < 3
        end
        while aimbot do
            wait()
            if game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool") and canaim(workspace.Camera.CFrame.Position) then
                local plr = nil
                local distance = math.huge
                for a,b in pairs(game.Players:GetPlayers()) do
                    if b.Team.Name == enemy then
                        pcall(function()
                            local Dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - b.Character.Head.Position).magnitude
                            if Dist < distance then
                                distance = Dist
                                plr = b
                            end
                        end)
                    end
                end
                if plr ~= nil then
                    workspace.Camera.CameraType = "Follow"
                    workspace.Camera.CFrame = CFrame.new(workspace.Camera.CFrame.Position,plr.Character.Head.Position)
                end
            end
        end
    end
})
end
local function jjhb()
local Tab = Window:Tab({
    Title = "功能",
    Icon = "bird", -- optional
    Locked = false,
})

local PlayerSection = Tab:Section({ 
    Title = "玩家",
})

local AimbotSection = Tab:Section({ 
    Title = "自瞄",
})
PlayerSection:Toggle({
    Title = "防坠落伤害",
    Value = false,
    Callback = function(state)
        if state then
            coon = game:GetService("RunService").RenderStepped:Connect(function()
                if workspace:Raycast(game.Players.LocalPlayer.Character.HumanoidRootPart.Position, Vector3.new(0, -20, 0)).Instance ~= nil and 
                   game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity.Y < -30 then 
                    game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
                end
            end)
        else
            coon:Disconnect()
        end
    end
})

PlayerSection:Toggle({
    Title = "防倒地",
    Value = false,
    Callback = function(state)
        antiragdoll = state
        if antiragdoll then
            coon2 = game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("Health"):Connect(function()
                game.Players.LocalPlayer.Character.Humanoid.Health = 100
            end)
        else
            coon2:Disconnect()
        end
    end
})

PlayerSection:Toggle({
    Title = "无限体力",
    Callback = function(state)
        if state then
            local func 
            for i,v in pairs(getgc(true)) do
                if type(v) == "function" and getinfo(v).name == "setStamina" then
                    func = v
                end
            end
            hookfunction(func,function(...)
                local args = {...}
                return args[1],math.huge
            end)
        else
            local func 
            for i,v in pairs(getgc(true)) do
                if type(v) == "function" and getinfo(v).name == "setStamina" then
                    func = v
                end
            end
            hookfunction(func,function(...)
                local args = {...}
                return args[1],math.huge
            end)
            restorefunction(func)
        end
    end
})

local teams = {}
for i,v in pairs(game:GetService("Teams"):GetChildren()) do
    table.insert(teams, v.Name)
end
enemy = false
aimbot = false
AimbotSection:Dropdown({
    Title = "选择敌方队伍",
    Values = teams,
    Callback = function(state) 
        if state ~= "选择敌方队伍" then
            enemy = state
        end
    end
})

AimbotSection:Toggle({
    Title = "自瞄",
    Value = false,
    Callback = function(state)
        aimbot = state
        local function canaim(ye)
            return game:GetService("Players").LocalPlayer:DistanceFromCharacter(ye) < 3
        end
        while aimbot do
            wait()
            if game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool") and canaim(workspace.Camera.CFrame.Position) then
                local plr = nil
                local distance = math.huge
                for a,b in pairs(game.Players:GetPlayers()) do
                    if b.Team.Name == enemy then
                        pcall(function()
                            local Dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - b.Character.Head.Position).magnitude
                            if Dist < distance then
                                distance = Dist
                                plr = b
                            end
                        end)
                    end
                end
                if plr ~= nil then
                    workspace.Camera.CameraType = "Follow"
                    workspace.Camera.CFrame = CFrame.new(workspace.Camera.CFrame.Position,plr.Character.Head.Position)
                end
            end
        end
    end
})
end
local function ylxx()
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local mt = getrawmetatable(game)
local oldNamecall = mt.__namecall
local fallImmuneEnabled = false

local gunStatsModule = require(ReplicatedStorage.GunScripts.GunStats)
local backup = {}
for i, stat in pairs(gunStatsModule) do
    backup[i] = {}
    for k, v in pairs(stat) do
        backup[i][k] = v
    end
end

local function restoreStats()
    for i, stat in pairs(gunStatsModule) do
        for k, v in pairs(backup[i]) do
            stat[k] = v
        end
    end
end

Tab:Toggle({
    Title = "免疫摔落伤害",
    Value = false,
    Callback = function(state)
        fallImmuneEnabled = state
        setreadonly(mt, false)
        mt.__namecall = newcclosure(function(remote, ...)
            if fallImmuneEnabled and getnamecallmethod() == "FireServer" and remote.Name == "ChangeCharacter" then
                local args = {...}
                if args[1] == "Damage" then
                    return nil
                end
            end
            return oldNamecall(remote, ...)
        end)
        setreadonly(mt, true)
    end
})

Tab:Toggle({
    Title = "无后座",
    Value = false,
    Callback = function(state)
        restoreStats()
        if state then
            for _, gunStat in pairs(gunStatsModule) do
                if gunStat.FanFire ~= nil then gunStat.FanFire = true end
                if gunStat.camShakeResist ~= nil then gunStat.camShakeResist = 0 end
                if gunStat.prepTime ~= nil then gunStat.prepTime = 0 end
                if gunStat.equipTime ~= nil then gunStat.equipTime = 0 end
                if gunStat.Spread ~= nil then gunStat.Spread = 0 end
                if gunStat.InstantFireAnimation ~= nil then gunStat.InstantFireAnimation = true end
            end
        end
    end
})

Tab:Toggle({
    Title = "秒换弹",
    Value = false,
    Callback = function(state)
        restoreStats()
        if state then
            for _, gunStat in pairs(gunStatsModule) do
                if gunStat.FanFire ~= nil then gunStat.FanFire = true end
                if gunStat.prepTime ~= nil then gunStat.prepTime = 0 end
                if gunStat.equipTime ~= nil then gunStat.equipTime = 0 end
                if gunStat.camShakeResist ~= nil then gunStat.camShakeResist = 0 end
                if gunStat.ReloadAnimationSpeed ~= nil then gunStat.ReloadAnimationSpeed = 10 end
                if gunStat.ReloadSpeed ~= nil then gunStat.ReloadSpeed = 0 end
                if gunStat.Spread ~= nil then gunStat.Spread = 0 end
                if gunStat.InstantFireAnimation ~= nil then gunStat.InstantFireAnimation = true end
            end
        end
    end
})

Tab:Toggle({
    Title = "子弹无分散",
    Value = false,
    Callback = function(state)
        restoreStats()
        if state then
            for _, gunStat in pairs(gunStatsModule) do
                if gunStat.FanFire ~= nil then gunStat.FanFire = true end
                if gunStat.prepTime ~= nil then gunStat.prepTime = 0 end
                if gunStat.equipTime ~= nil then gunStat.equipTime = 0 end
                if gunStat.camShakeResist ~= nil then gunStat.camShakeResist = 0 end
                if gunStat.ReloadAnimationSpeed ~= nil then gunStat.ReloadAnimationSpeed = 10 end
                if gunStat.ReloadSpeed ~= nil then gunStat.ReloadSpeed = 0 end
                if gunStat.Spread ~= nil then gunStat.Spread = 0 end
                if gunStat.HipFireAccuracy ~= nil then gunStat.HipFireAccuracy = 0 end
                if gunStat.ZoomAccuracy ~= nil then gunStat.ZoomAccuracy = 0 end
                if gunStat.InstantFireAnimation ~= nil then gunStat.InstantFireAnimation = true end
            end
        end
    end
})
end
local function jscq()
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

Interstellar = Interstellar or {}
Interstellar.autobirth = false
Interstellar.hoop = false
Interstellar.mainexe = false
Interstellar.autochest = false

Tab:Toggle({
    Title = "自动重生",
    Value = false,
    Callback = function(state)
        Interstellar.autobirth = state
        if state then
            task.spawn(function()
                while Interstellar.autobirth do
                    if LocalPlayer.leaderstats.Rebirths.Value >= Interstellar.birth then
                        LocalPlayer:Kick("已自动重生到"..Interstellar.birth)
                        break
                    end
                    ReplicatedStorage.rEvents.rebirthEvent:FireServer("rebirthRequest")
                    task.wait()
                end
            end)
        end
    end
})

Tab:Toggle({
    Title = "吸全部环",
    Value = false,
    Callback = function(state)
        Interstellar.hoop = state
        if state then
            task.spawn(function()
                while Interstellar.hoop do
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        for _, hoop in ipairs(workspace.Hoops:GetChildren()) do
                            if hoop.Name == "Hoop" then
                                hoop.CFrame = char.HumanoidRootPart.CFrame
                            end
                        end
                    end
                    task.wait()
                end
            end)
        end
    end
})

Tab:Toggle({
    Title = "自动参赛",
    Value = false,
    Callback = function(state)
        Interstellar.mainexe = state
        if state then
            task.spawn(function()
                while Interstellar.mainexe do
                    ReplicatedStorage.rEvents.raceEvent:FireServer("joinRace")
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        if game.PlaceId == 3101667897 then
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Grassland.finishPart.CFrame
                            task.wait(0.1)
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Magma.finishPart.CFrame
                            task.wait(0.1)
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Desert.finishPart.CFrame
                        elseif game.PlaceId == 3276265788 then
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Speedway.finishPart.CFrame
                        elseif game.PlaceId == 3232996272 then
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Starway.finishPart.CFrame
                        end
                    end
                    task.wait(0.3)
                end
            end)
        end
    end
})

Tab:Toggle({
    Title = "自动宝箱",
    Value = false,
    Callback = function(state)
        Interstellar.autochest = state
        if state then
            task.spawn(function()
                while Interstellar.autochest do
                    for _, v in pairs(ReplicatedStorage.chestRewards:GetChildren()) do
                        ReplicatedStorage.rEvents.checkChestRemote:InvokeServer(v.Name)
                    end
                    task.wait(5)
                end
            end)
        end
    end
})
end
local function lcsdh()
local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local MainTab = Window:Tab({
        Title = "主页",
        Icon = "zap",
        Locked = false,
    })
    
    MainTab:Paragraph({
        Title = "欢迎使用凌晨三点后脚本",
        Desc = "感谢使用",
        Image = "rbxassetid://77151669177766",
        ImageSize = 42,
        Thumbnail = "rbxassetid://100291624074476",
        ThumbnailSize = 120
    })
    
    MainTab:Paragraph({
        Title = "By长夜月-WBTHX",
        Desc = "当前服务器ID: " .. game.PlaceId, 
    })
    
    local executorName = getExecutorName()
    
    MainTab:Paragraph({
        Title = "注入器",
        Desc = ": " .. executorName, 
    })
    
    local GeneralTab = Window:Tab({
        Title = "透视区",
        Icon = "zap",
        Locked = false,
    })

    local shadowManEspEnabled = false
    local shadowManEspLoop = nil
    GeneralTab:Toggle({
        Title = "怪物透",
        Callback = function(state)
            shadowManEspEnabled = state
            
            if state then
                if not _G.ShadowManEspLoop then _G.ShadowManEspLoop = {} end

                local EspList = {
                    FillTransparency = 0.5,
                    OutlineTransparency = 0
                }

                local Players = game:GetService("Players")
                local localPlayer = Players.LocalPlayer

                local function checkShadowMan()
                    local shadowMan = workspace.CurrentMonsters:FindFirstChild("ShadowMan")
                    if shadowMan and not shadowMan:FindFirstChild('ShadowManEspHighlight') then
                        local h = Instance.new('Highlight')
                        h.FillColor = Color3.new(0.2, 0.2, 0.2)
                        h.FillTransparency = EspList.FillTransparency
                        h.OutlineTransparency = EspList.OutlineTransparency
                        h.OutlineColor = Color3.new(1, 0, 0)
                        h.Name = 'ShadowManEspHighlight'
                        h.Parent = shadowMan

                        local biliGui = Instance.new("BillboardGui")
                        biliGui.Name = "ShadowManEspBillboardGui"
                        biliGui.AlwaysOnTop = true
                        biliGui.Size = UDim2.new(0, 200, 0, 50)
                        biliGui.StudsOffset = Vector3.new(0, 3, 0)
                        
                        if shadowMan:FindFirstChild("HumanoidRootPart") then
                            biliGui.Adornee = shadowMan.HumanoidRootPart
                        else
                            biliGui.Adornee = shadowMan
                        end
                        
                        biliGui.Parent = shadowMan
                        
                        local nameLabel = Instance.new("TextLabel")
                        nameLabel.Name = "NameLabel"
                        nameLabel.Size = UDim2.new(1, 0, 0.4, 0)
                        nameLabel.Position = UDim2.new(0.5, 0, 0.2, 0)
                        nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                        nameLabel.BackgroundTransparency = 1
                        nameLabel.TextColor3 = Color3.new(1, 1, 1)
                        nameLabel.Text = "怪物"
                        nameLabel.TextScaled = true
                        nameLabel.Font = Enum.Font.SourceSansBold
                        
                        local nameStroke = Instance.new("UIStroke")
                        nameStroke.Color = Color3.new(0, 0, 0)
                        nameStroke.Thickness = 2
                        nameStroke.Parent = nameLabel
                        
                        local distanceLabel = Instance.new("TextLabel")
                        distanceLabel.Name = "DistanceLabel"
                        distanceLabel.Size = UDim2.new(1, 0, 0.3, 0)
                        distanceLabel.Position = UDim2.new(0.5, 0, 0.6, 0)
                        distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                        distanceLabel.BackgroundTransparency = 1
                        distanceLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
                        distanceLabel.TextScaled = true
                        distanceLabel.Font = Enum.Font.SourceSans
                        
                        local distanceStroke = Instance.new("UIStroke")
                        distanceStroke.Color = Color3.new(0, 0, 0)
                        distanceStroke.Thickness = 1
                        distanceStroke.Parent = distanceLabel
                        
                        local healthLabel = Instance.new("TextLabel")
                        healthLabel.Name = "HealthLabel"
                        healthLabel.Size = UDim2.new(1, 0, 0.3, 0)
                        healthLabel.Position = UDim2.new(0.5, 0, 0.9, 0)
                        healthLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                        healthLabel.BackgroundTransparency = 1
                        healthLabel.TextColor3 = Color3.new(0.5, 1, 0.5)
                        healthLabel.TextScaled = true
                        healthLabel.Font = Enum.Font.SourceSans
                        
                        local healthStroke = Instance.new("UIStroke")
                        healthStroke.Color = Color3.new(0, 0, 0)
                        healthStroke.Thickness = 1
                        healthStroke.Parent = healthLabel
                        
                        nameLabel.Parent = biliGui
                        distanceLabel.Parent = biliGui
                        healthLabel.Parent = biliGui
                        
                        _G.ShadowManEspLoop.updateConnection = game:GetService('RunService').RenderStepped:Connect(function()
                            if not shadowManEspEnabled then
                                if _G.ShadowManEspLoop.updateConnection then
                                    _G.ShadowManEspLoop.updateConnection:Disconnect()
                                end
                                return
                            end
                            
                            local character = localPlayer.Character
                            local currentHumanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
                            
                            if shadowMan and shadowMan.Parent and currentHumanoidRootPart then
                                local shadowManRoot = shadowMan:FindFirstChild('HumanoidRootPart') or shadowMan:GetPivot().Position
                                local distance = (currentHumanoidRootPart.Position - shadowManRoot.Position).Magnitude
                                distanceLabel.Text = "距离: " .. string.format('%.1f', distance) .. "m"
                                
                                local humanoid = shadowMan:FindFirstChildOfClass("Humanoid")
                                if humanoid then
                                    healthLabel.Text = "血量: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)
                                    
                                    local healthPercent = humanoid.Health / humanoid.MaxHealth
                                    if healthPercent > 0.7 then
                                        healthLabel.TextColor3 = Color3.new(0.5, 1, 0.5)
                                    elseif healthPercent > 0.3 then
                                        healthLabel.TextColor3 = Color3.new(1, 1, 0.5)
                                    else
                                        healthLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
                                    end
                                else
                                    healthLabel.Text = "血量: 未知"
                                end
                            else
                                if _G.ShadowManEspLoop.updateConnection then
                                    _G.ShadowManEspLoop.updateConnection:Disconnect()
                                end
                            end
                        end)
                    end
                end
                
                checkShadowMan()
            else
                if _G.ShadowManEspLoop and _G.ShadowManEspLoop.updateConnection then
                    _G.ShadowManEspLoop.updateConnection:Disconnect()
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name == "ShadowManEspHighlight" or obj.Name == "ShadowManEspBillboardGui" then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local brassKeyEspEnabled = false
    local brassKeyEspLoop = nil
    GeneralTab:Toggle({
        Title = "黄铜钥匙透",
        Callback = function(state)
            brassKeyEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local brassKeyEspObjects = {}

                local EspSettings = {
                    FillColor = Color3.fromRGB(181, 166, 66),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0,
                    Enabled = true
                }

                local function createBrassKeyEsp(keyModel)
                    if not keyModel or not keyModel.Parent then return end
                    if brassKeyEspObjects[keyModel] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "BrassKeyESP_Highlight"
                    highlight.Adornee = keyModel
                    highlight.FillColor = EspSettings.FillColor
                    highlight.FillTransparency = EspSettings.FillTransparency
                    highlight.OutlineColor = EspSettings.OutlineColor
                    highlight.OutlineTransparency = EspSettings.OutlineTransparency
                    highlight.Parent = keyModel
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "BrassKeyESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = keyModel:FindFirstChild("Handle") or keyModel:FindFirstChild("PrimaryPart") or keyModel
                    billboard.Parent = keyModel
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
                    nameLabel.Text = "黄铜钥匙"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    for _, child in ipairs(keyModel:GetDescendants()) do
                        if child:IsA("BasePart") then
                            local partHighlight = Instance.new("Highlight")
                            partHighlight.Name = "BrassKeyESP_PartHighlight"
                            partHighlight.Adornee = child
                            partHighlight.FillColor = EspSettings.FillColor
                            partHighlight.FillTransparency = EspSettings.FillTransparency + 0.1
                            partHighlight.OutlineColor = EspSettings.OutlineColor
                            partHighlight.OutlineTransparency = EspSettings.OutlineTransparency
                            partHighlight.Parent = child
                        end
                    end
                    
                    brassKeyEspObjects[keyModel] = {Highlight = highlight, Billboard = billboard, Model = keyModel}
                end

                local function removeBrassKeyEsp(keyModel)
                    if brassKeyEspObjects[keyModel] then
                        local esp = brassKeyEspObjects[keyModel]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        
                        for _, child in ipairs(keyModel:GetDescendants()) do
                            if child:IsA("BasePart") and child:FindFirstChild("BrassKeyESP_PartHighlight") then
                                child.BrassKeyESP_PartHighlight:Destroy()
                            end
                        end
                        
                        brassKeyEspObjects[keyModel] = nil
                    end
                end

                local function cleanupAllBrassKeyESP()
                    for keyModel, _ in pairs(brassKeyEspObjects) do
                        removeBrassKeyEsp(keyModel)
                    end
                    brassKeyEspObjects = {}
                end

                local function scanForBrassKeys()
                    if not brassKeyEspEnabled then return end
                    
                    for _, obj in pairs(Workspace:GetDescendants()) do
                        if obj:IsA("Model") then
                            local lowerName = obj.Name:lower()
                            if lowerName:find("brass") and (lowerName:find("key") or lowerName:find("keys")) then
                                createBrassKeyEsp(obj)
                            end
                        end
                    end
                end

                local function updateBrassKeyDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    
                    if not rootPart then return end
                    
                    for keyModel, esp in pairs(brassKeyEspObjects) do
                        if keyModel and keyModel.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - keyModel.Position).Magnitude
                                distanceTextLabel.Text = "距离: " .. string.format("%.1f", distance) .. "m"
                            end
                        else
                            removeBrassKeyEsp(keyModel)
                        end
                    end
                end

                local function startBrassKeyEspLoop()
                    if brassKeyEspLoop then return end
                    
                    scanForBrassKeys()
                    
                    local scanTimer = 0
                    brassKeyEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not brassKeyEspEnabled then
                            if brassKeyEspLoop then
                                brassKeyEspLoop:Disconnect()
                                brassKeyEspLoop = nil
                            end
                            cleanupAllBrassKeyESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForBrassKeys()
                        end
                        updateBrassKeyDistances()
                    end)
                end

                startBrassKeyEspLoop()
            else
                if brassKeyEspLoop then
                    brassKeyEspLoop:Disconnect()
                    brassKeyEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("BrassKeyESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local flashlightEspEnabled = false
    local flashlightEspLoop = nil
    GeneralTab:Toggle({
        Title = "手电透",
        Callback = function(state)
            flashlightEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local flashlightEspObjects = {}

                local FlashlightSettings = {
                    FillColor = Color3.fromRGB(255, 255, 0),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0
                }

                local function createFlashlightEsp(flashlightModel)
                    if not flashlightModel or not flashlightModel.Parent then return end
                    if flashlightEspObjects[flashlightModel] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "FlashlightESP_Highlight"
                    highlight.Adornee = flashlightModel
                    highlight.FillColor = FlashlightSettings.FillColor
                    highlight.FillTransparency = FlashlightSettings.FillTransparency
                    highlight.OutlineColor = FlashlightSettings.OutlineColor
                    highlight.OutlineTransparency = FlashlightSettings.OutlineTransparency
                    highlight.Parent = flashlightModel
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "FlashlightESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = flashlightModel
                    billboard.Parent = flashlightModel
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
                    nameLabel.Text = "手电筒"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    flashlightEspObjects[flashlightModel] = {Highlight = highlight, Billboard = billboard}
                end

                local function removeFlashlightEsp(flashlightModel)
                    if flashlightEspObjects[flashlightModel] then
                        local esp = flashlightEspObjects[flashlightModel]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        flashlightEspObjects[flashlightModel] = nil
                    end
                end

                local function cleanupAllFlashlightESP()
                    for flashlightModel, _ in pairs(flashlightEspObjects) do
                        removeFlashlightEsp(flashlightModel)
                    end
                    flashlightEspObjects = {}
                end

                local function scanForFlashlights()
                    if not flashlightEspEnabled then return end
                    
                    local pickups = Workspace:FindFirstChild("Pickups")
                    if pickups then
                        local flashlight = pickups:FindFirstChild("Flashlight")
                        if flashlight then
                            if flashlight:IsA("Model") then
                                createFlashlightEsp(flashlight)
                            else
                                for _, flashlightItem in ipairs(flashlight:GetChildren()) do
                                    if flashlightItem:IsA("Model") or flashlightItem:IsA("BasePart") then
                                        createFlashlightEsp(flashlightItem)
                                    end
                                end
                            end
                        end
                    end
                    
                    for flashlightModel, esp in pairs(flashlightEspObjects) do
                        if not flashlightModel or not flashlightModel.Parent then
                            removeFlashlightEsp(flashlightModel)
                        end
                    end
                end

                local function updateFlashlightDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    for flashlightModel, esp in pairs(flashlightEspObjects) do
                        if flashlightModel and flashlightModel.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - flashlightModel.Position).Magnitude
                                distanceTextLabel.Text = "距离: " .. string.format("%.1f", distance) .. "m"
                            end
                        end
                    end
                end

                local function startFlashlightEspLoop()
                    if flashlightEspLoop then return end
                    
                    scanForFlashlights()
                    
                    local scanTimer = 0
                    flashlightEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not flashlightEspEnabled then
                            if flashlightEspLoop then
                                flashlightEspLoop:Disconnect()
                                flashlightEspLoop = nil
                            end
                            cleanupAllFlashlightESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForFlashlights()
                        end
                        updateFlashlightDistances()
                    end)
                end

                startFlashlightEspLoop()
            else
                if flashlightEspLoop then
                    flashlightEspLoop:Disconnect()
                    flashlightEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("FlashlightESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local fuelEspEnabled = false
    local fuelEspLoop = nil
    GeneralTab:Toggle({
        Title = "汽油透",
        Callback = function(state)
            fuelEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local fuelEspObjects = {}

                local FuelSettings = {
                    FillColor = Color3.fromRGB(255, 100, 0),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0
                }

                local function createFuelEsp(fuelModel)
                    if not fuelModel or not fuelModel.Parent then return end
                    if fuelEspObjects[fuelModel] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "FuelESP_Highlight"
                    highlight.Adornee = fuelModel
                    highlight.FillColor = FuelSettings.FillColor
                    highlight.FillTransparency = FuelSettings.FillTransparency
                    highlight.OutlineColor = FuelSettings.OutlineColor
                    highlight.OutlineTransparency = FuelSettings.OutlineTransparency
                    highlight.Parent = fuelModel
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "FuelESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = fuelModel
                    billboard.Parent = fuelModel
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(255, 150, 0)
                    nameLabel.Text = "汽油"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    fuelEspObjects[fuelModel] = {Highlight = highlight, Billboard = billboard}
                end

                local function removeFuelEsp(fuelModel)
                    if fuelEspObjects[fuelModel] then
                        local esp = fuelEspObjects[fuelModel]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        fuelEspObjects[fuelModel] = nil
                    end
                end

                local function cleanupAllFuelESP()
                    for fuelModel, _ in pairs(fuelEspObjects) do
                        removeFuelEsp(fuelModel)
                    end
                    fuelEspObjects = {}
                end

                local function scanForFuel()
                    if not fuelEspEnabled then return end
                    
                    local pickups = Workspace:FindFirstChild("Pickups")
                    if pickups then
                        local fuel = pickups:FindFirstChild("Fuel")
                        if fuel then
                            if fuel:IsA("Model") then
                                createFuelEsp(fuel)
                            else
                                for _, fuelItem in ipairs(fuel:GetChildren()) do
                                    if fuelItem:IsA("Model") or fuelItem:IsA("BasePart") then
                                        createFuelEsp(fuelItem)
                                    end
                                end
                            end
                        end
                    end
                    
                    for fuelModel, esp in pairs(fuelEspObjects) do
                        if not fuelModel or not fuelModel.Parent then
                            removeFuelEsp(fuelModel)
                        end
                    end
                end

                local function updateFuelDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    for fuelModel, esp in pairs(fuelEspObjects) do
                        if fuelModel and fuelModel.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - fuelModel.Position).Magnitude
                                distanceTextLabel.Text = "距离: " .. string.format("%.1f", distance) .. "m"
                            end
                        end
                    end
                end

                local function startFuelEspLoop()
                    if fuelEspLoop then return end
                    
                    scanForFuel()
                    
                    local scanTimer = 0
                    fuelEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not fuelEspEnabled then
                            if fuelEspLoop then
                                fuelEspLoop:Disconnect()
                                fuelEspLoop = nil
                            end
                            cleanupAllFuelESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForFuel()
                        end
                        updateFuelDistances()
                    end)
                end

                startFuelEspLoop()
            else
                if fuelEspLoop then
                    fuelEspLoop:Disconnect()
                    fuelEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("FuelESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local vehicleEspEnabled = false
    local vehicleEspLoop = nil
    GeneralTab:Toggle({
        Title = "汽车透",
        Callback = function(state)
            vehicleEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local vehicleEspObjects = {}

                local VehicleSettings = {
                    FillColor = Color3.fromRGB(0, 100, 255),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0
                }

                local function createVehicleEsp(vehiclePart)
                    if not vehiclePart or not vehiclePart.Parent then return end
                    if vehicleEspObjects[vehiclePart] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "VehicleESP_Highlight"
                    highlight.Adornee = vehiclePart
                    highlight.FillColor = VehicleSettings.FillColor
                    highlight.FillTransparency = VehicleSettings.FillTransparency
                    highlight.OutlineColor = VehicleSettings.OutlineColor
                    highlight.OutlineTransparency = VehicleSettings.OutlineTransparency
                    highlight.Parent = vehiclePart
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "VehicleESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = vehiclePart
                    billboard.Parent = vehiclePart
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
                    nameLabel.Text = "汽车"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    vehicleEspObjects[vehiclePart] = {Highlight = highlight, Billboard = billboard}
                end

                local function removeVehicleEsp(vehiclePart)
                    if vehicleEspObjects[vehiclePart] then
                        local esp = vehicleEspObjects[vehiclePart]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        vehicleEspObjects[vehiclePart] = nil
                    end
                end

                local function cleanupAllVehicleESP()
                    for vehiclePart, _ in pairs(vehicleEspObjects) do
                        removeVehicleEsp(vehiclePart)
                    end
                    vehicleEspObjects = {}
                end

                local function scanForVehicles()
                    if not vehicleEspEnabled then return end
                    
                    local vehicles = Workspace:FindFirstChild("Vehicles")
                    if vehicles then
                        local chryslerValiant = vehicles:FindFirstChild("ChryslerValiant")
                        if chryslerValiant then
                            local bodyWork = chryslerValiant:FindFirstChild("BodyWork")
                            if bodyWork then
                                createVehicleEsp(bodyWork)
                            end
                        end
                    end
                    
                    for vehiclePart, esp in pairs(vehicleEspObjects) do
                        if not vehiclePart or not vehiclePart.Parent then
                            removeVehicleEsp(vehiclePart)
                        end
                    end
                end

                local function updateVehicleDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    for vehiclePart, esp in pairs(vehicleEspObjects) do
                        if vehiclePart and vehiclePart.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - vehiclePart.Position).Magnitude
                                distanceTextLabel.Text = "距离: " .. string.format("%.1f", distance) .. "m"
                            end
                        end
                    end
                end

                local function startVehicleEspLoop()
                    if vehicleEspLoop then return end
                    
                    scanForVehicles()
                    
                    local scanTimer = 0
                    vehicleEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not vehicleEspEnabled then
                            if vehicleEspLoop then
                                vehicleEspLoop:Disconnect()
                                vehicleEspLoop = nil
                            end
                            cleanupAllVehicleESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForVehicles()
                        end
                        updateVehicleDistances()
                    end)
                end

                startVehicleEspLoop()
            else
                if vehicleEspLoop then
                    vehicleEspLoop:Disconnect()
                    vehicleEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("VehicleESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local allEspEnabled = false
    local mainEspLoop = nil
    GeneralTab:Toggle({
        Title = "一键透视",
        Callback = function(state)
            allEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local espObjects = {}

                local EspConfig = {
                    Pickups = {
                        Enabled = true,
                        Color = Color3.fromRGB(0, 255, 0),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 1, 1),
                        TextColor = Color3.fromRGB(100, 255, 100),
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    },
                    ShadowMan = {
                        Enabled = true,
                        Color = Color3.fromRGB(128, 0, 128),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 0, 0),
                        TextColor = Color3.fromRGB(255, 0, 255),
                        DisplayName = "暗影怪物",
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    },
                    FrontFenceGate = {
                        Enabled = true,
                        Color = Color3.fromRGB(255, 165, 0),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 1, 0),
                        TextColor = Color3.fromRGB(255, 200, 0),
                        DisplayName = "仓库大门",
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop,
                        NoHighlight = true,
                        LabelOnly = true
                    },
                    ChryslerValiant = {
                        Enabled = true,
                        Color = Color3.fromRGB(0, 100, 255),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 1, 1),
                        TextColor = Color3.fromRGB(100, 200, 255),
                        DisplayName = "汽车",
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    },
                    General = {
                        UpdateInterval = 2,
                        BillboardSize = UDim2.new(0, 120, 0, 50),
                        NameFontSize = 14,
                        DistanceFontSize = 12,
                        AlwaysOnTop = true
                    }
                }

                local function createESP(target, config, customName)
                    if not target or not target.Parent then return nil end
                    if espObjects[target] then return espObjects[target] end
                    
                    local adornee = target
                    local position = Vector3.new(0, 0, 0)
                    
                    if target:IsA("Model") then
                        local primaryPart = target.PrimaryPart or target:FindFirstChildWhichIsA("BasePart")
                        if primaryPart then
                            adornee = primaryPart
                            position = primaryPart.Position
                        else
                            position = target:GetPivot().Position
                        end
                    else
                        position = target.Position
                    end
                    
                    local highlight = nil
                    
                    if not config.NoHighlight then
                        highlight = Instance.new("Highlight")
                        highlight.Name = "ESP_Highlight"
                        highlight.Adornee = adornee
                        highlight.FillColor = config.Color
                        highlight.FillTransparency = config.Transparency
                        highlight.OutlineColor = config.OutlineColor
                        highlight.OutlineTransparency = 0
                        highlight.Enabled = true
                        highlight.DepthMode = config.DepthMode or Enum.HighlightDepthMode.AlwaysOnTop
                        highlight.Parent = target
                    end
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "ESP_Billboard"
                    billboard.AlwaysOnTop = config.AlwaysOnTop
                    billboard.Size = EspConfig.General.BillboardSize
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = adornee
                    billboard.Enabled = true
                    billboard.Parent = target
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.6, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.3, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = config.TextColor
                    nameLabel.Text = customName or config.DisplayName or target.Name
                    nameLabel.TextSize = EspConfig.General.NameFontSize
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 1.5
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.4, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.8, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.Text = "计算中..."
                    distanceLabel.TextSize = EspConfig.General.DistanceFontSize
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    espObjects[target] = {
                        Highlight = highlight,
                        Billboard = billboard,
                        Target = target,
                        Position = position,
                        Config = config,
                        Name = customName or config.DisplayName or target.Name
                    }
                    
                    return espObjects[target]
                end

                local function removeESP(target)
                    if espObjects[target] then
                        local esp = espObjects[target]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        espObjects[target] = nil
                    end
                end

                local function cleanupAllESP()
                    for target, esp in pairs(espObjects) do
                        removeESP(target)
                    end
                    espObjects = {}
                end

                local function scanPickups()
                    if not allEspEnabled then return end
                    
                    local pickups = Workspace:FindFirstChild("Pickups")
                    if not pickups then return end
                    
                    for _, item in ipairs(pickups:GetChildren()) do
                        if (item:IsA("Model") or item:IsA("BasePart")) and not espObjects[item] then
                            createESP(item, EspConfig.Pickups)
                        end
                    end
                end

                local function scanShadowMan()
                    if not allEspEnabled then return end
                    
                    local currentMonsters = Workspace:FindFirstChild("CurrentMonsters")
                    if currentMonsters then
                        local shadowMan = currentMonsters:FindFirstChild("ShadowMan")
                        if shadowMan and not espObjects[shadowMan] then
                            createESP(shadowMan, EspConfig.ShadowMan)
                        end
                    end
                    
                    for _, model in pairs(Workspace:GetDescendants()) do
                        if model:IsA("Model") and (model.Name:lower():find("shadow") or model.Name == "ShadowMan") then
                            if not espObjects[model] then
                                createESP(model, EspConfig.ShadowMan)
                            end
                        end
                    end
                end

                local function scanFrontFenceGate()
                    if not allEspEnabled then return end
                    
                    local frontFenceGate = Workspace:FindFirstChild("FrontFenceGate")
                    if frontFenceGate and not espObjects[frontFenceGate] then
                        createESP(frontFenceGate, EspConfig.FrontFenceGate)
                    end
                end

                local function scanChryslerValiant()
                    if not allEspEnabled then return end
                    
                    local vehicles = Workspace:FindFirstChild("Vehicles")
                    if vehicles then
                        local chryslerValiant = vehicles:FindFirstChild("ChryslerValiant")
                        if chryslerValiant then
                            local bodyWork = chryslerValiant:FindFirstChild("BodyWork")
                            if bodyWork and not espObjects[bodyWork] then
                                createESP(bodyWork, EspConfig.ChryslerValiant)
                            end
                        end
                    end
                    
                    for _, model in pairs(Workspace:GetDescendants()) do
                        if model:IsA("Model") and (model.Name:lower():find("chrysler") or model.Name:lower():find("valiant")) then
                            if not espObjects[model] then
                                createESP(model, EspConfig.ChryslerValiant)
                            end
                        end
                    end
                end

                local function updateESPDistances()
                    if not allEspEnabled then return end
                    
                    local character = localPlayer.Character
                    if not character then return end
                    
                    local rootPart = character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    local playerPos = rootPart.Position
                    
                    for target, esp in pairs(espObjects) do
                        if target and target.Parent then
                            if esp.Target:IsA("Model") then
                                local primaryPart = esp.Target.PrimaryPart or esp.Target:FindFirstChildWhichIsA("BasePart")
                                if primaryPart then
                                    esp.Position = primaryPart.Position
                                else
                                    esp.Position = esp.Target:GetPivot().Position
                                end
                            else
                                esp.Position = esp.Target.Position
                            end
                            
                            local distance = (playerPos - esp.Position).Magnitude
                            
                            if esp.Billboard then
                                esp.Billboard.Enabled = true
                            end
                            
                            if esp.Highlight then
                                esp.Highlight.Enabled = true
                            end
                            
                            local distanceLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceLabel then
                                if distance < 1000 then
                                    distanceLabel.Text = string.format("%.1f米", distance)
                                else
                                    distanceLabel.Text = string.format("%.1f公里", distance / 1000)
                                end
                                
                                if distance < 500 then
                                    distanceLabel.TextColor3 = Color3.new(0, 1, 0)
                                elseif distance < 250 then
                                    distanceLabel.TextColor3 = Color3.new(1, 1, 0)
                                else
                                    distanceLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
                                end
                            end
                        else
                            removeESP(target)
                        end
                    end
                end

                local function performScan()
                    if not allEspEnabled then return end
                    
                    scanPickups()
                    scanShadowMan()
                    scanFrontFenceGate()
                    scanChryslerValiant()
                end

                local function startMainLoop()
                    if mainEspLoop then return end
                    
                    performScan()
                    
                    local scanTimer = 0
                    local updateTimer = 0
                    local scanInterval = 1.0
                    local updateInterval = 0.1
                    
                    mainEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not allEspEnabled then
                            if mainEspLoop then
                                mainEspLoop:Disconnect()
                                mainEspLoop = nil
                            end
                            cleanupAllESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        updateTimer = updateTimer + deltaTime
                        
                        if scanTimer >= scanInterval then
                            scanTimer = 0
                            performScan()
                        end
                        
                        if updateTimer >= updateInterval then
                            updateTimer = 0
                            updateESPDistances()
                        end
                    end)
                end

                startMainLoop()
            else
                if mainEspLoop then
                    mainEspLoop:Disconnect()
                    mainEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("ESP_") or obj.Name:find("_ESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local WeaponsTab = Window:Tab({
        Title = "枪械功能区",
        Icon = "gun",
        Locked = false,
    })
    
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local RunService = game:GetService("RunService")

    -- 通用武器修改设置
    local weaponSettings = {
        enabled = false,
        noRecoilEnabled = false,
        infiniteAmmoEnabled = false,
        rapidFireEnabled = false,
        fireRateMultiplier = 2.0,
        recoilMultiplier = 0.0,
        ammoValue = 9999999,
        originalValues = {}
    }

    local weaponConnections = {}

    local function modifyWeaponProperties()
        if not weaponSettings.enabled then
            return false
        end
        
        if not player.Character then
            return false
        end
        
        local backpack = player:FindFirstChild("Backpack")
        if not backpack then
            return false
        end
        
        local tools = {}
        
        -- 从背包获取所有工具
        for _, item in ipairs(backpack:GetChildren()) do
            if item:IsA("Tool") then
                table.insert(tools, item)
            end
        end
        
        -- 从角色手中获取工具
        local character = player.Character
        for _, item in ipairs(character:GetChildren()) do
            if item:IsA("Tool") then
                table.insert(tools, item)
            end
        end
        
        for _, tool in ipairs(tools) do
            -- 保存原始值
            if not weaponSettings.originalValues[tool] then
                weaponSettings.originalValues[tool] = {}
            end
            
            -- 修改无后坐力
            if weaponSettings.noRecoilEnabled then
                local recoilValue = tool:FindFirstChild("Recoil")
                if recoilValue and (recoilValue:IsA("NumberValue") or recoilValue:IsA("IntValue")) then
                    if weaponSettings.originalValues[tool].recoil == nil then
                        weaponSettings.originalValues[tool].recoil = recoilValue.Value
                    end
                    recoilValue.Value = weaponSettings.originalValues[tool].recoil * weaponSettings.recoilMultiplier
                end
                
                -- 检查其他可能的反冲属性
                for _, descendant in ipairs(tool:GetDescendants()) do
                    local descendantName = descendant.Name:lower()
                    if descendant:IsA("NumberValue") or descendant:IsA("IntValue") then
                        if descendantName:find("recoil") or descendantName:find("kick") or descendantName:find("spread") then
                            if weaponSettings.originalValues[tool][descendantName] == nil then
                                weaponSettings.originalValues[tool][descendantName] = descendant.Value
                            end
                            descendant.Value = 0
                        end
                    end
                end
            end
            
            -- 修改无限弹药
            if weaponSettings.infiniteAmmoEnabled then
                local ammoValue = tool:FindFirstChild("Ammo")
                if ammoValue and (ammoValue:IsA("IntValue") or ammoValue:IsA("NumberValue")) then
                    if weaponSettings.originalValues[tool].ammo == nil then
                        weaponSettings.originalValues[tool].ammo = ammoValue.Value
                    end
                    ammoValue.Value = weaponSettings.ammoValue
                end
                
                -- 检查其他可能的弹药属性
                for _, descendant in ipairs(tool:GetDescendants()) do
                    local descendantName = descendant.Name:lower()
                    if descendant:IsA("NumberValue") or descendant:IsA("IntValue") then
                        if descendantName:find("ammo") or descendantName:find("bullets") or descendantName:find("rounds") then
                            if weaponSettings.originalValues[tool][descendantName] == nil then
                                weaponSettings.originalValues[tool][descendantName] = descendant.Value
                            end
                            descendant.Value = weaponSettings.ammoValue
                        end
                    end
                end
            end
            
            -- 修改射速
            if weaponSettings.rapidFireEnabled then
                local fireRateValue = tool:FindFirstChild("FireRate")
                if fireRateValue and (fireRateValue:IsA("NumberValue") or fireRateValue:IsA("IntValue")) then
                    if weaponSettings.originalValues[tool].fireRate == nil then
                        weaponSettings.originalValues[tool].fireRate = fireRateValue.Value
                    end
                    fireRateValue.Value = weaponSettings.originalValues[tool].fireRate * weaponSettings.fireRateMultiplier
                end
                
                -- 检查其他可能的射速属性
                for _, descendant in ipairs(tool:GetDescendants()) do
                    local descendantName = descendant.Name:lower()
                    if descendant:IsA("NumberValue") or descendant:IsA("IntValue") then
                        if descendantName:find("firerate") or descendantName:find("cooldown") or descendantName:find("delay") then
                            if weaponSettings.originalValues[tool][descendantName] == nil then
                                weaponSettings.originalValues[tool][descendantName] = descendant.Value
                            end
                            descendant.Value = weaponSettings.originalValues[tool][descendantName] / weaponSettings.fireRateMultiplier
                        end
                    end
                end
            end
        end
        
        return true
    end

    local function restoreOriginalProperties()
        for tool, values in pairs(weaponSettings.originalValues) do
            if tool and tool.Parent then
                for propertyName, originalValue in pairs(values) do
                    if propertyName == "recoil" then
                        local recoilValue = tool:FindFirstChild("Recoil")
                        if recoilValue then
                            recoilValue.Value = originalValue
                        end
                    elseif propertyName == "ammo" then
                        local ammoValue = tool:FindFirstChild("Ammo")
                        if ammoValue then
                            ammoValue.Value = originalValue
                        end
                    elseif propertyName == "fireRate" then
                        local fireRateValue = tool:FindFirstChild("FireRate")
                        if fireRateValue then
                            fireRateValue.Value = originalValue
                        end
                    else
                        -- 处理其他属性
                        for _, descendant in ipairs(tool:GetDescendants()) do
                            if descendant.Name:lower() == propertyName then
                                descendant.Value = originalValue
                            end
                        end
                    end
                end
            end
        end
    end

    local function initWeaponModifier()
        for _, connection in pairs(weaponConnections) do
            if connection then
                connection:Disconnect()
            end
        end
        weaponConnections = {}
        
        if weaponSettings.enabled then
            local success = modifyWeaponProperties()
            
            weaponConnections.characterAdded = player.CharacterAdded:Connect(function(character)
                task.wait(0.5)
                modifyWeaponProperties()
            end)
            
            weaponConnections.heartbeat = RunService.Heartbeat:Connect(function()
                modifyWeaponProperties()
            end)
        else
            restoreOriginalProperties()
        end
    end

    WeaponsTab:Toggle({
        Title = "开启武器修改",
        Default = false,
        Callback = function(state)
            weaponSettings.enabled = state
            initWeaponModifier()
        end
    })

    WeaponsTab:Toggle({
        Title = "无后坐力",
        Default = false,
        Callback = function(state)
            weaponSettings.noRecoilEnabled = state
            if weaponSettings.enabled then
                modifyWeaponProperties()
            end
        end
    })

    WeaponsTab:Toggle({
        Title = "无限弹药",
        Default = false,
        Callback = function(state)
            weaponSettings.infiniteAmmoEnabled = state
            if weaponSettings.enabled then
                modifyWeaponProperties()
            end
        end
    })

    WeaponsTab:Toggle({
        Title = "快速射击",
        Default = false,
        Callback = function(state)
            weaponSettings.rapidFireEnabled = state
            if weaponSettings.enabled then
                modifyWeaponProperties()
            end
        end
    })

    WeaponsTab:Slider({
        Title = "射速倍率",
        Default = 2.0,
        Min = 1.0,
        Max = 10.0,
        Callback = function(value)
            weaponSettings.fireRateMultiplier = value
            if weaponSettings.enabled and weaponSettings.rapidFireEnabled then
                modifyWeaponProperties()
            end
        end
    })

    initWeaponModifier()

    local MonstersTab = Window:Tab({
        Title = "怪物功能区",
        Icon = "ghost",
        Locked = false,
    })
    
    MonstersTab:Toggle({
        Title = "躲避怪物",
        Default = false,
        Callback = function(state)
            local Players = game:GetService("Players")
            local RunService = game:GetService("RunService")

            local player = Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

            local lastTeleportTime = 0
            local teleportCooldown = 0.01
            
            local heartbeatConnection
            local characterAddedConnection
            
            if state then
                heartbeatConnection = RunService.Heartbeat:Connect(function()
                    if not player.Character then return end
                    
                    character = player.Character
                    humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
                    if not humanoidRootPart then return end
                    
                    local shadowman
                    local currentMonsters = workspace:FindFirstChild("CurrentMonsters")
                    if currentMonsters then
                        shadowman = currentMonsters:FindFirstChild("Shadowman")
                    end
                    
                    if not shadowman then
                        local debriObjects = workspace:FindFirstChild("DebriObjects")
                        if debriObjects then
                            shadowman = debriObjects:FindFirstChild("Shadowman")
                        end
                    end
                    
                    if not shadowman then
                        for _, obj in pairs(workspace:GetDescendants()) do
                            if obj.Name:lower():find("shadowman") then
                                if obj:IsA("Model") or obj:IsA("BasePart") then
                                    shadowman = obj
                                    break
                                end
                            end
                        end
                    end
                    
                    if shadowman then
                        local shadowmanPart
                        if shadowman:IsA("Model") then
                            shadowmanPart = shadowman.PrimaryPart or shadowman:FindFirstChild("HumanoidRootPart") or shadowman:FindFirstChild("Torso") or shadowman:FindFirstChildWhichIsA("BasePart")
                        elseif shadowman:IsA("BasePart") then
                            shadowmanPart = shadowman
                        end
                        
                        if shadowmanPart and humanoidRootPart then
                            local distance = (shadowmanPart.Position - humanoidRootPart.Position).Magnitude
                            local currentTime = tick()
                            
                            if distance <= 20 and (currentTime - lastTeleportTime) >= teleportCooldown then
                                local currentPosition = humanoidRootPart.Position
                                local direction = (humanoidRootPart.Position - shadowmanPart.Position).Unit
                                direction = Vector3.new(direction.X, 0, direction.Z).Unit
                                local newPosition = currentPosition + (direction * 40) + Vector3.new(0, 10, 0)
                                humanoidRootPart.CFrame = CFrame.new(newPosition)
                                lastTeleportTime = currentTime
                            end
                        end
                    end
                end)

                characterAddedConnection = player.CharacterAdded:Connect(function(newCharacter)
                    character = newCharacter
                    humanoidRootPart = newCharacter:WaitForChild("HumanoidRootPart")
                end)
            else
                if heartbeatConnection then
                    heartbeatConnection:Disconnect()
                end
                if characterAddedConnection then
                    characterAddedConnection:Disconnect()
                end
            end
        end
    })
    
    local UtilityTab = Window:Tab({
        Title = "实用功能",
        Icon = "settings",
        Locked = false,
    })
    
    UtilityTab:Button({
        Title = "夜视",
        Callback = function()
            local Lighting = game:GetService("Lighting")
            Lighting.Ambient = Color3.new(1, 1, 1)
            Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
        end
    })
    
    UtilityTab:Button({
        Title = "上帝模式",
        Callback = function()
            local player = game.Players.LocalPlayer
            if player.Character then
                local humanoid = player.Character:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid.Health = math.huge
                end
            end
        end
    })
    
    local flyToggle = false
    local flySpeed = 1
    local FLYING = false
    local flyKeyDown, flyKeyUp, mfly1, mfly2
    local IYMouse = game:GetService("UserInputService")

    local function sFLY()
        repeat task.wait() until Players.LocalPlayer and Players.LocalPlayer.Character and Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart") and Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        repeat task.wait() until IYMouse
        if flyKeyDown or flyKeyUp then flyKeyDown:Disconnect(); flyKeyUp:Disconnect() end

        local T = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        local CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
        local lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
        local SPEED = flySpeed

        local function FLY()
            FLYING = true
            local BG = Instance.new('BodyGyro')
            local BV = Instance.new('BodyVelocity')
            BG.P = 9e4
            BG.Parent = T
            BV.Parent = T
            BG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
            BG.CFrame = T.CFrame
            BV.Velocity = Vector3.new(0, 0, 0)
            BV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
            task.spawn(function()
                while FLYING do
                    task.wait()
                    if not flyToggle and Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
                        Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = true
                    end
                    if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0 then
                        SPEED = flySpeed
                    elseif not (CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0) and SPEED ~= 0 then
                        SPEED = 0
                    end
                    if (CONTROL.L + CONTROL.R) ~= 0 or (CONTROL.F + CONTROL.B) ~= 0 or (CONTROL.Q + CONTROL.E) ~= 0 then
                        BV.Velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROL.F + CONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                        lCONTROL = {F = CONTROL.F, B = CONTROL.B, L = CONTROL.L, R = CONTROL.R}
                    elseif (CONTROL.L + CONTROL.R) == 0 and (CONTROL.F + CONTROL.B) == 0 and (CONTROL.Q + CONTROL.E) == 0 and SPEED ~= 0 then
                        BV.Velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (lCONTROL.F + lCONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(lCONTROL.L + lCONTROL.R, (lCONTROL.F + lCONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                    else
                        BV.Velocity = Vector3.new(0, 0, 0)
                    end
                    BG.CFrame = workspace.CurrentCamera.CoordinateFrame
                end
                CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
                lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
                SPEED = 0
                BG:Destroy()
                BV:Destroy()
                if Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
                    Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
                end
            end)
        end
        flyKeyDown = IYMouse.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Keyboard then
                local KEY = input.KeyCode.Name
                if KEY == "W" then
                    CONTROL.F = flySpeed
                elseif KEY == "S" then
                    CONTROL.B = -flySpeed
                elseif KEY == "A" then
                    CONTROL.L = -flySpeed
                elseif KEY == "D" then 
                    CONTROL.R = flySpeed
                elseif KEY == "E" then
                    CONTROL.Q = flySpeed * 2
                elseif KEY == "Q" then
                    CONTROL.E = -flySpeed * 2
                end
                pcall(function() workspace.CurrentCamera.CameraType = Enum.CameraType.Track end)
            end
        end)
        flyKeyUp = IYMouse.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Keyboard then
                local KEY = input.KeyCode.Name
                if KEY == "W" then
                    CONTROL.F = 0
                elseif KEY == "S" then
                    CONTROL.B = 0
                elseif KEY == "A" then
                    CONTROL.L = 0
                elseif KEY == "D" then
                    CONTROL.R = 0
                elseif KEY == "E" then
                    CONTROL.Q = 0
                elseif KEY == "Q" then
                    CONTROL.E = 0
                end
            end
        end)
        FLY()
    end

    local function NOFLY()
        FLYING = false
        if flyKeyDown then flyKeyDown:Disconnect() end
        if flyKeyUp then flyKeyUp:Disconnect() end
        if mfly1 then mfly1:Disconnect() end
        if mfly2 then mfly2:Disconnect() end
        if Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
            Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
        end
        pcall(function() workspace.CurrentCamera.CameraType = Enum.CameraType.Custom end)
    end

    local function UnMobileFly()
        pcall(function()
            FLYING = false
            local root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            if root:FindFirstChild("BodyVelocity") then root:FindFirstChild("BodyVelocity"):Destroy() end
            if root:FindFirstChild("BodyGyro") then root:FindFirstChild("BodyGyro"):Destroy() end
            if Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid") then
                Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid").PlatformStand = false
            end
            if mfly1 then mfly1:Disconnect() end
            if mfly2 then mfly2:Disconnect() end
        end)
    end

    local function MobileFly()
        UnMobileFly()
        FLYING = true

        local root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        local camera = workspace.CurrentCamera
        local v3none = Vector3.new()
        local v3zero = Vector3.new(0, 0, 0)
        local v3inf = Vector3.new(9e9, 9e9, 9e9)

        local controlModule = require(Players.LocalPlayer.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
        local bv = Instance.new("BodyVelocity")
        bv.Name = "BodyVelocity"
        bv.Parent = root
        bv.MaxForce = v3zero
        bv.Velocity = v3zero

        local bg = Instance.new("BodyGyro")
        bg.Name = "BodyGyro"
        bg.Parent = root
        bg.MaxTorque = v3inf
        bg.P = 1000
        bg.D = 50

        mfly1 = Players.LocalPlayer.CharacterAdded:Connect(function()
            local newRoot = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            local newBv = Instance.new("BodyVelocity")
            newBv.Name = "BodyVelocity"
            newBv.Parent = newRoot
            newBv.MaxForce = v3zero
            newBv.Velocity = v3zero

            local newBg = Instance.new("BodyGyro")
            newBg.Name = "BodyGyro"
            newBg.Parent = newRoot
            newBg.MaxTorque = v3inf
            newBg.P = 1000
            newBg.D = 50
        end)

        mfly2 = game:GetService("RunService").RenderStepped:Connect(function()
            root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            camera = workspace.CurrentCamera
            if Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid") and root and root:FindFirstChild("BodyVelocity") and root:FindFirstChild("BodyGyro") then
                local humanoid = Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
                local VelocityHandler = root:FindFirstChild("BodyVelocity")
                local GyroHandler = root:FindFirstChild("BodyGyro")

                VelocityHandler.MaxForce = v3inf
                GyroHandler.MaxTorque = v3inf
                humanoid.PlatformStand = true
                GyroHandler.CFrame = camera.CoordinateFrame
                VelocityHandler.Velocity = v3none

                local direction = controlModule:GetMoveVector()
                if direction.X > 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity + camera.CFrame.RightVector * (direction.X * (flySpeed * 50))
                end
                if direction.X < 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity + camera.CFrame.RightVector * (direction.X * (flySpeed * 50))
                end
                if direction.Z > 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity - camera.CFrame.LookVector * (direction.Z * (flySpeed * 50))
                end
                if direction.Z < 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity - camera.CFrame.LookVector * (direction.Z * (flySpeed * 50))
                end
            end
        end)
    end

    -- 修改飞行速度滑块为指定格式
    UtilityTab:Slider({
        Title = "速度设置",
        Desc = "滑动调整",
        Value = {
            Min = 1,
            Max = 150,
            Default = 1,
        },
        Callback = function(Value)
            flySpeed = Value
            if FLYING then
                task.spawn(function()
                    while FLYING do
                        task.wait(0.1)
                        if game:GetService("UserInputService").TouchEnabled then
                            local root = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                            if root and root:FindFirstChild("BodyVelocity") then
                                local bv = root:FindFirstChild("BodyVelocity")
                                bv.Velocity = bv.Velocity.Unit * (flySpeed * 50)
                            end
                        end
                    end
                end)
            end
        end
    })

    UtilityTab:Toggle({
        Title = "飞行",
        Default = false,
        Callback = function(state)
            flyToggle = state
            if flyToggle then
                if game:GetService("UserInputService").TouchEnabled then
                    MobileFly()
                else
                    sFLY()
                end
            else
                NOFLY()
                UnMobileFly()
            end
        end
    })
end
local function doors()
local a = Window:Tab({
    Title = "主要功能",
    Icon = "home",
    Desc = "Doors"
})

local b = Window:Tab({
    Title = "物品透视",
    Icon = "package-search",
    Desc = "Doors"
})

local c = Window:Tab({
    Title = "怪物透视",
    Icon = "skull-crossbones",
    Desc = "Doors"
})

local d = Window:Tab({
    Title = "怪物提示",
    Icon = "radar",
    Desc = "Doors"
})

local e = Window:Tab({
    Title = "物品刷新提示",
    Icon = "home",
    Desc = "Doors"
})

local Lighting = game:GetService("Lighting")
local espTasks = {}

local function guanbi(itemName)
    for _, item in pairs(workspace:GetDescendants()) do
        if item.Name == itemName and item:IsA("Model") then
            local billboard = item:FindFirstChild("ItemMarker")
            local highlight = item:FindFirstChild("DoorHighlight")
            if billboard then 
                billboard:Destroy() 
            end
            if highlight then 
                highlight:Destroy() 
            end
        end
    end
end

local function hanshu(name, yanse, gaoliangyanse, zhongwm)
    for _, item in pairs(workspace:GetDescendants()) do
        if item.Name == name and item:IsA("Model") then
            if not item:FindFirstChild("ItemMarker") then
                local billboard = Instance.new("BillboardGui")
                billboard.Name = "ItemMarker"
                billboard.Size = UDim2.new(0, 200, 0, 50)
                billboard.StudsOffset = Vector3.new(0, 3, 0)
                billboard.AlwaysOnTop = true
                billboard.Enabled = true

                local textLabel = Instance.new("TextLabel")
                textLabel.Size = UDim2.new(1, 0, 1, 0)
                textLabel.BackgroundTransparency = 1
                textLabel.Text = zhongwm
                textLabel.TextColor3 = yanse
                textLabel.TextScaled = true
                textLabel.Parent = billboard
                billboard.Parent = item
            end
            
            if not item:FindFirstChild("DoorHighlight") then
                local highlight = Instance.new("Highlight")
                highlight.Name = "DoorHighlight"
                highlight.Adornee = item
                highlight.FillColor = gaoliangyanse
                highlight.FillTransparency = 0.6
                highlight.OutlineColor = gaoliangyanse
                highlight.OutlineTransparency = 0
                highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                highlight.Parent = item
            end
        end
    end
end

local function createItemESP(itemName, color, highlightColor, displayName, toggleKey)
    return function(value)
        if value then
            guanbi(itemName)
            
            local taskRunning = true
            local taskId = tick()
            espTasks[toggleKey] = {id = taskId, running = taskRunning}
            
            task.spawn(function()
                while taskRunning and espTasks[toggleKey] and espTasks[toggleKey].id == taskId do
                    hanshu(itemName, color, highlightColor, displayName)
                    task.wait(0.5)
                end
            end)
        else
            if espTasks[toggleKey] then
                espTasks[toggleKey].running = false
                espTasks[toggleKey] = nil
            end
            
            guanbi(itemName)
        end
    end
end

a:Toggle({
    Title = "跳跃",
    Desc = "获得跳跃能力",
    Callback = function(value)
        local LocalPlayer = game.Players.LocalPlayer
        if LocalPlayer.Character then
            LocalPlayer.Character:SetAttribute("CanJump", value)
        end
        
        LocalPlayer.CharacterAdded:Connect(function(newCharacter)
            task.wait(1.5)
            newCharacter:SetAttribute("CanJump", value)
        end)
    end
})

a:Button({
    Title = "删除Seek触手",
    Desc = "删除游戏中Seek追逐战的触手",
    Callback = function()
        for _, a in pairs(workspace:GetDescendants()) do
            if a.Name == "Seek_Arm" then
                a:Destroy()
            end
        end
    end
})

a:Button({
    Title = "Seek",
    Desc = "删除游戏中Seek",
    Callback = function()
        for _, a in pairs(workspace:GetDescendants()) do
            if a.Name == "SeekMoving" then
                a:Destroy()
            end
        end
    end
})

b:Toggle({
    Title = "门",
    Desc = "透视门",
    Callback = createItemESP("Door", Color3.fromRGB(255, 165, 0), Color3.fromRGB(0, 255, 0), "门", "door")
})

b:Toggle({
    Title = "钥匙",
    Desc = "透视钥匙",
    Callback = createItemESP("KeyObtain", Color3.fromRGB(255, 165, 0), Color3.fromRGB(0, 255, 0), "钥匙", "key")
})

b:Toggle({
    Title = "十字架",
    Desc = "透视十字架",
    Callback = createItemESP("Crucifix", Color3.fromRGB(139, 69, 19), Color3.fromRGB(139, 69, 19), "十字架", "crucifix")
})

b:Toggle({
    Title = "手电筒",
    Desc = "透视手电筒",
    Callback = createItemESP("Flashlight", Color3.fromRGB(30, 144, 255), Color3.fromRGB(30, 144, 255), "手电筒", "flashlight")
})

b:Toggle({
    Title = "电池",
    Desc = "透视电池",
    Callback = createItemESP("Battery", Color3.fromRGB(255, 215, 0), Color3.fromRGB(255, 215, 0), "电池", "battery")
})

b:Toggle({
    Title = "蜡烛",
    Desc = "透视蜡烛",
    Callback = createItemESP("Candle", Color3.fromRGB(255, 165, 0), Color3.fromRGB(255, 165, 0), "蜡烛", "candle")
})

b:Toggle({
    Title = "打火机",
    Desc = "透视打火机",
    Callback = createItemESP("Lighter", Color3.fromRGB(255, 69, 0), Color3.fromRGB(255, 69, 0), "打火机", "lighter")
})

b:Toggle({
    Title = "绷带",
    Desc = "透视绷带",
    Callback = createItemESP("BandagePack", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "绷带包", "bandage")
})

b:Toggle({
    Title = "金币",
    Desc = "透视金币",
    Callback = createItemESP("GoldPile", Color3.fromRGB(255, 215, 0), Color3.fromRGB(255, 215, 0), "金币", "gold")
})

a:Button({
    Title = "清理所有透视",
    Desc = "清除所有透视效果",
    Callback = function()
        for taskKey, taskInfo in pairs(espTasks) do
            taskInfo.running = false
        end
        espTasks = {}
        
        local items = {"Door", "KeyObtain", "Crucifix", "Flashlight", "Battery", "Candle", "Lighter", "BandagePack", "GoldPile"}
        for _, itemName in ipairs(items) do
            guanbi(itemName)
        end
    end
})

a:Button({
    Title = "夜视",
    Desc = "好清楚",
    Callback = function()
        Lighting.Brightness = 2
        Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
        Lighting.GlobalShadows = false
        Lighting.ClockTime = 14
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
        if Lighting:FindFirstChild("Atmosphere") then
            Lighting.Atmosphere:Destroy()
        end
    end
})

d:Toggle({
    Title = "rush",
    Desc = "rush检测",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "RushMoving" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "Rush来了快躲避",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "Eyes",
    Desc = "Eyes检测",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "Eyes" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "Eyes来了别看他",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "Ambush",
    Desc = "Ambush检测",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "AmbushMoving" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "AmbushMoving来了快躲避",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "A60",
    Desc = "A60检测",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "A60" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "A60来了快躲避",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "A120",
    Desc = "120检测",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "A120" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "A120来了快躲避",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "Screech",
    Desc = "Screech",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "Screech" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "Screech来了快看看他",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

a:Toggle({
    Title = "Seek",
    Desc = "Seek检测",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "SeekMoving" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "怪物检测",
                            Content = "seek来了快跑",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

c:Toggle({
    Title = "rush",
    Desc = "透视rush",
    Callback = createItemESP("RushMoving", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "rush", "rush")
})

c:Toggle({
    Title = "Ambush",
    Desc = "透视Ambush",
    Callback = createItemESP("AmbushMoving", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "Ambush", "ambush")
})

c:Toggle({
    Title = "A60",
    Desc = "透视A60",
    Callback = createItemESP("A60", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "A60", "a60")
})

c:Toggle({
    Title = "A120",
    Desc = "透视A120",
    Callback = createItemESP("A120", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "A120", "a120")
})

c:Toggle({
    Title = "FigureRig",
    Desc = "透视FigureRig",
    Callback = createItemESP("FigureRig", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "FigureRig", "figurerig")
})
end
local function doorseng()
local a = Window:Tab({
    Title = "main functions",
    Icon = "home",
    Desc = "Doors"
})

local b = Window:Tab({
    Title = "item esp",
    Icon = "package-search",
    Desc = "Doors"
})

local c = Window:Tab({
    Title = "monster esp",
    Icon = "skull-crossbones",
    Desc = "Doors"
})

local d = Window:Tab({
    Title = "monster alert",
    Icon = "radar",
    Desc = "Doors"
})

local e = Window:Tab({
    Title = "item refresh alert",
    Icon = "home",
    Desc = "Doors"
})

local Lighting = game:GetService("Lighting")
local espTasks = {}

local function guanbi(itemName)
    for _, item in pairs(workspace:GetDescendants()) do
        if item.Name == itemName and item:IsA("Model") then
            local billboard = item:FindFirstChild("ItemMarker")
            local highlight = item:FindFirstChild("DoorHighlight")
            if billboard then 
                billboard:Destroy() 
            end
            if highlight then 
                highlight:Destroy() 
            end
        end
    end
end

local function hanshu(name, yanse, gaoliangyanse, zhongwm)
    for _, item in pairs(workspace:GetDescendants()) do
        if item.Name == name and item:IsA("Model") then
            if not item:FindFirstChild("ItemMarker") then
                local billboard = Instance.new("BillboardGui")
                billboard.Name = "ItemMarker"
                billboard.Size = UDim2.new(0, 200, 0, 50)
                billboard.StudsOffset = Vector3.new(0, 3, 0)
                billboard.AlwaysOnTop = true
                billboard.Enabled = true

                local textLabel = Instance.new("TextLabel")
                textLabel.Size = UDim2.new(1, 0, 1, 0)
                textLabel.BackgroundTransparency = 1
                textLabel.Text = zhongwm
                textLabel.TextColor3 = yanse
                textLabel.TextScaled = true
                textLabel.Parent = billboard
                billboard.Parent = item
            end
            
            if not item:FindFirstChild("DoorHighlight") then
                local highlight = Instance.new("Highlight")
                highlight.Name = "DoorHighlight"
                highlight.Adornee = item
                highlight.FillColor = gaoliangyanse
                highlight.FillTransparency = 0.6
                highlight.OutlineColor = gaoliangyanse
                highlight.OutlineTransparency = 0
                highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                highlight.Parent = item
            end
        end
    end
end

local function createItemESP(itemName, color, highlightColor, displayName, toggleKey)
    return function(value)
        if value then
            guanbi(itemName)
            
            local taskRunning = true
            local taskId = tick()
            espTasks[toggleKey] = {id = taskId, running = taskRunning}
            
            task.spawn(function()
                while taskRunning and espTasks[toggleKey] and espTasks[toggleKey].id == taskId do
                    hanshu(itemName, color, highlightColor, displayName)
                    task.wait(0.5)
                end
            end)
        else
            if espTasks[toggleKey] then
                espTasks[toggleKey].running = false
                espTasks[toggleKey] = nil
            end
            
            guanbi(itemName)
        end
    end
end

a:Toggle({
    Title = "jump",
    Desc = "gain jump ability",
    Callback = function(value)
        local LocalPlayer = game.Players.LocalPlayer
        if LocalPlayer.Character then
            LocalPlayer.Character:SetAttribute("CanJump", value)
        end
        
        LocalPlayer.CharacterAdded:Connect(function(newCharacter)
            task.wait(1.5)
            newCharacter:SetAttribute("CanJump", value)
        end)
    end
})

a:Button({
    Title = "delete seek tentacles",
    Desc = "delete seek chase tentacles in the game",
    Callback = function()
        for _, a in pairs(workspace:GetDescendants()) do
            if a.Name == "Seek_Arm" then
                a:Destroy()
            end
        end
    end
})

a:Button({
    Title = "seek",
    Desc = "delete seek in the game",
    Callback = function()
        for _, a in pairs(workspace:GetDescendants()) do
            if a.Name == "SeekMoving" then
                a:Destroy()
            end
        end
    end
})

b:Toggle({
    Title = "door",
    Desc = "door esp",
    Callback = createItemESP("Door", Color3.fromRGB(255, 165, 0), Color3.fromRGB(0, 255, 0), "door", "door")
})

b:Toggle({
    Title = "key",
    Desc = "key esp",
    Callback = createItemESP("KeyObtain", Color3.fromRGB(255, 165, 0), Color3.fromRGB(0, 255, 0), "key", "key")
})

b:Toggle({
    Title = "crucifix",
    Desc = "crucifix esp",
    Callback = createItemESP("Crucifix", Color3.fromRGB(139, 69, 19), Color3.fromRGB(139, 69, 19), "crucifix", "crucifix")
})

b:Toggle({
    Title = "flashlight",
    Desc = "flashlight esp",
    Callback = createItemESP("Flashlight", Color3.fromRGB(30, 144, 255), Color3.fromRGB(30, 144, 255), "flashlight", "flashlight")
})

b:Toggle({
    Title = "battery",
    Desc = "battery esp",
    Callback = createItemESP("Battery", Color3.fromRGB(255, 215, 0), Color3.fromRGB(255, 215, 0), "battery", "battery")
})

b:Toggle({
    Title = "candle",
    Desc = "candle esp",
    Callback = createItemESP("Candle", Color3.fromRGB(255, 165, 0), Color3.fromRGB(255, 165, 0), "candle", "candle")
})

b:Toggle({
    Title = "lighter",
    Desc = "lighter esp",
    Callback = createItemESP("Lighter", Color3.fromRGB(255, 69, 0), Color3.fromRGB(255, 69, 0), "lighter", "lighter")
})

b:Toggle({
    Title = "bandage",
    Desc = "bandage esp",
    Callback = createItemESP("BandagePack", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "bandage pack", "bandage")
})

b:Toggle({
    Title = "gold",
    Desc = "gold esp",
    Callback = createItemESP("GoldPile", Color3.fromRGB(255, 215, 0), Color3.fromRGB(255, 215, 0), "gold coin", "gold")
})

a:Button({
    Title = "clear all esp",
    Desc = "clear all esp effects",
    Callback = function()
        for taskKey, taskInfo in pairs(espTasks) do
            taskInfo.running = false
        end
        espTasks = {}
        
        local items = {"Door", "KeyObtain", "Crucifix", "Flashlight", "Battery", "Candle", "Lighter", "BandagePack", "GoldPile"}
        for _, itemName in ipairs(items) do
            guanbi(itemName)
        end
    end
})

a:Button({
    Title = "night vision",
    Desc = "very clear",
    Callback = function()
        Lighting.Brightness = 2
        Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
        Lighting.GlobalShadows = false
        Lighting.ClockTime = 14
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
        if Lighting:FindFirstChild("Atmosphere") then
            Lighting.Atmosphere:Destroy()
        end
    end
})

d:Toggle({
    Title = "rush",
    Desc = "rush detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "RushMoving" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "rush is coming quickly hide",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "eyes",
    Desc = "eyes detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "Eyes" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "eyes is coming don't look at it",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "ambush",
    Desc = "ambush detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "AmbushMoving" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "ambushmoving is coming quickly hide",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "a60",
    Desc = "a60 detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "A60" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "a60 is coming quickly hide",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "a120",
    Desc = "a120 detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "A120" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "a120 is coming quickly hide",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

d:Toggle({
    Title = "screech",
    Desc = "screech detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "Screech" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "screech is coming quickly look at it",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

a:Toggle({
    Title = "seek",
    Desc = "seek detection",
    Callback = function(value)
        local a = value
        if value then
            while a do
                for _, b in pairs(workspace:GetDescendants()) do
                    if b.Name == "SeekMoving" and b:IsA("Model") then
                        WindUI:Notify({
                            Title = "monster detected",
                            Content = "seek is coming quickly run",
                            Duration = 2
                        })
                    end
                end
                task.wait(0.5)
            end
        end
    end
})

c:Toggle({
    Title = "rush",
    Desc = "rush esp",
    Callback = createItemESP("RushMoving", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "rush", "rush")
})

c:Toggle({
    Title = "ambush",
    Desc = "ambush esp",
    Callback = createItemESP("AmbushMoving", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "ambush", "ambush")
})

c:Toggle({
    Title = "a60",
    Desc = "a60 esp",
    Callback = createItemESP("A60", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "a60", "a60")
})

c:Toggle({
    Title = "a120",
    Desc = "a120 esp",
    Callback = createItemESP("A120", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "a120", "a120")
})

c:Toggle({
    Title = "figurerig",
    Desc = "figurerig esp",
    Callback = createItemESP("FigureRig", Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 0, 0), "figurerig", "figurerig")
})

end
local function yxcz()
local NoStu = false
local lp = game:GetService("Players").LocalPlayer
local Character = lp.Character or lp.CharacterAdded:Wait()
local hrp = Character:WaitForChild("HumanoidRootPart")
local RunService = game:GetService("RunService")
local PlayerList = {}

local function GetPlayer()
    PlayerList = {}
    for _, v in pairs(game.Players:GetChildren()) do
	    if v.Name ~= lp.Name then
		    table.insert(PlayerList, v.Name)
	    end
    end
end

GetPlayer()

local hook
hook = hookmetamethod(Character:FindFirstChild("Humanoid"), "__newindex", function(self, key, value)
    if key == "WalkSpeed" and NoStu then
        return nil   
    end
    return hook(self, key, value)
end)

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "平板"
        else
            return "手机"
        end
    else
        return "电脑"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "手机" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "平板" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)



local playerName = lp.Name
local displayName = lp.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "玩家", Opened = false, Icon = "user"}),
    JS = Window:Section({ Title = "角色", Opened = false, Icon = "person-standing"}),
    ZD = Window:Section({ Title = "战斗", Opened = false, Icon = "hand-fist"})
}

local TabHandles = {
    Announcement = Tabs.Pl:Tab({ Title = "公告", Icon = "folder"}),
    user = Tabs.Pl:Tab({ Title = "玩家", Icon = "folder"}),
    JS1 = Tabs.JS:Tab({ Title = "快速切换角色", Icon = "folder"}),
    ZD1 = Tabs.ZD:Tab({ Title = "自动技能", Icon = "folder"}),
    ZD2 = Tabs.ZD:Tab({ Title = "锁定", Icon = "folder"}),
}

TabHandles.Announcement:Paragraph({
    Title = "欢迎尊贵的用户",
    Desc = "此脚本会一直更新 感谢白名单使用者",
    Image = "info",
    ImageSize = 15
})

TabHandles.Announcement:Paragraph({
    Title = "玩家",
    Desc = "尊敬的用户: " .. lp.Name .. "欢迎使用",
    Image = "user",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "设备",
    Desc = "你的使用设备: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "设备",
    Desc = "你的注入器: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

TabHandles.user:Slider({
    Title = "玩家速度",
    Desc = "修改",
    Value = { 
        Min = 16, 
        Max = 100, 
        Default = 16 
    },
    Step = 1,
    Callback = function(value)
        task.spawn(function()
            while task.wait() do                
                lp.Character:FindFirstChild("Humanoid").WalkSpeed = value
            end
        end)
    end
})

TabHandles.user:Toggle({
    Title = "无僵直",
    Desc = "取消僵直",
    Value = false,
    Callback = function(state)
        NoStu = state
    end
})

TabHandles.JS1:Section({ 
	Title = "选择角色",
	Desc = "选择",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

local Characters
local CharacterUltimate
TabHandles.JS1:Dropdown({
    Title   = "选择角色",
    Values  = {"绿色英雄", "顽强刺客", "蓝色火焰", "碎裂之冰", "爆炸英雄", "暗影之神", "超越光速", "人类建造师", "羽翼之神"},
    Value   = "请选择角色",
    Callback = function(v) 
        local List = {
            ["绿色英雄"] = "GreenHero",
            ["顽强刺客"] = "HeroSlayer",            
            ["蓝色火焰"] = "BlueFlames",
            ["碎裂之冰"] = "SplitIce",
            ["爆炸英雄"] = "ExplosionHero",
            ["暗影之神"] = "DecayingHatred",
            ["超越光速"] = "FullThrottle",
            ["人类建造师"] = "HumanArchitect"
        }
        
        Characters = List[v]
    end
})

TabHandles.JS1:Toggle({
    Title = "是否觉醒",
    Desc = "需要你拥有此角色觉醒",
    Value = false,
    Callback = function(state)
        CharacterUltimate = state
    end
})

TabHandles.JS1:Button({
    Title = "快速切换",
    Desc = "切换",
    Locked = false,
    Callback = function()
        if not Characters then
            WindUI:Notify({
                Title = "错误", 
                Content = "请先选择角色", 
                Duration = 2
             })
            return
        end

        local hum = lp.Character and lp.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum.Health = 0 end

        local newChar = lp.CharacterAdded:Wait()
        newChar:WaitForChild("HumanoidRootPart")

        game:GetService("ReplicatedStorage").Remotes.ChangeCharacter:FireServer(Characters, CharacterUltimate)

        WindUI:Notify({
            Title = "切换",
            Content = "已切换为为 " .. Characters .. (CharacterUltimate and "觉醒状态" or ""),
            Duration = 2
        })
    end
})

TabHandles.ZD1:Section({ 
	Title = "选择玩家",
	Desc = "选择",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

local Player = "未选择"
local SelectPlayer = TabHandles.ZD1:Dropdown({
	Title = "选择玩家",
	Desc = "选择",
	Values = PlayerList,
	Value = "请选择",
	Callback = function(value) 
		Player = value
		WindUI:Notify({
			Title = "选择",
			Content = "选择完成",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.ZD1:Button({
    Title = "刷新列表",
    Desc = "刷新",
    Locked = false,
    Callback = function()
        GetPlayer()
        if PlayerList == {} then
            table.insert(PlayerList, "未找到玩家") 
        end
        SelectPlayer:Refresh(PlayerList)
    end
})

TabHandles.ZD1:Section({ 
	Title = "执行操作",
	Desc = "操作",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

local AutoTpToPlayer = nil
TabHandles.ZD1:Toggle({
    Title = "传送击杀玩家",
    Desc = "传送",
    Value = false,
    Callback = function(state)
        if state then
            AutoTpToPlayer = RunService.RenderStepped:Connect(function()
                for _, v in pairs(game.Players:GetPlayers()) do
                    if v.Name == Player and v.Character:FindFirstChild("HumanoidRootPart") then
                        lp.Character:FindFirstChild("HumanoidRootPart").CFrame = v.Character:FindFirstChild("HumanoidRootPart").CFrame * CFrame.new(0, 0, 4)
                        for _, v in pairs(lp.Backpack:GetChildren()) do
                            game:GetService("Players").LocalPlayer.Character:WaitForChild("Main"):WaitForChild("RemoteEvent"):FireServer("UsingMoveCustom", v, false)
                        end
                    end
                end
            end)
        else
            if AutoTpToPlayer then
                AutoTpToPlayer:Disconnect()
                AutoTpToPlayer = nil       
            end
        end
    end
})

TabHandles.ZD2:Section({ 
	Title = "选择玩家",
	Desc = "选择",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

local Player2 = "未选择"
local SelectPlayer2 = TabHandles.ZD2:Dropdown({
	Title = "选择玩家",
	Desc = "选择",
	Values = PlayerList,
	Value = "请选择",
	Callback = function(value) 
		Player2 = value
		WindUI:Notify({
			Title = "选择",
			Content = "选择完成",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.ZD2:Button({
    Title = "刷新列表",
    Desc = "刷新",
    Locked = false,
    Callback = function()
        GetPlayer()
        if PlayerList == {} then
            table.insert(PlayerList, "未找到玩家") 
        end
        SelectPlayer2:Refresh(PlayerList)
    end
})

TabHandles.ZD2:Section({ 
	Title = "执行操作",
	Desc = "操作",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

local AutoLookPlayer = nil
TabHandles.ZD2:Toggle({
    Title = "静默自瞄玩家",
    Desc = "自瞄",
    Value = false,
    Callback = function(state)
        if state then
            AutoLookPlayer = RunService.RenderStepped:Connect(function()
                for _, v in pairs(game.Players:GetPlayers()) do
                    if v.Name == Player2 and v.Character:FindFirstChild("HumanoidRootPart") then
                        local Pos1 = lp.Character:FindFirstChild("HumanoidRootPart").Position
                        local Pos2 = v.Character:FindFirstChild("HumanoidRootPart").Position
                        
                        lp.Character:FindFirstChild("HumanoidRootPart").CFrame = CFrame.new(Pos1, Vector3.new(Pos2.X, Pos1.Y, Pos2.Z))
                    end
                end
            end)
        else
            if AutoLookPlayer then
                AutoLookPlayer:Disconnect()
                AutoLookPlayer = nil       
            end
        end
    end
})
end
local function yxczeng()
local NoStu = false
local lp = game:GetService("Players").LocalPlayer
local Character = lp.Character or lp.CharacterAdded:Wait()
local hrp = Character:WaitForChild("HumanoidRootPart")
local RunService = game:GetService("RunService")
local PlayerList = {}

local function GetPlayer()
    PlayerList = {}
    for _, v in pairs(game.Players:GetChildren()) do
	    if v.Name ~= lp.Name then
		    table.insert(PlayerList, v.Name)
	    end
    end
end

GetPlayer()

local hook
hook = hookmetamethod(Character:FindFirstChild("Humanoid"), "__newindex", function(self, key, value)
    if key == "WalkSpeed" and NoStu then
        return nil   
    end
    return hook(self, key, value)
end)

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "tablet"
        else
            return "phone"
        end
    else
        return "computer"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "phone" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "tablet" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local playerName = lp.Name
local displayName = lp.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "players", Opened = false, Icon = "user"}),
    JS = Window:Section({ Title = "character", Opened = false, Icon = "person-standing"}),
    ZD = Window:Section({ Title = "combat", Opened = false, Icon = "hand-fist"})
}

local TabHandles = {
    Announcement = Tabs.Pl:Tab({ Title = "announcement", Icon = "folder"}),
    user = Tabs.Pl:Tab({ Title = "players", Icon = "folder"}),
    JS1 = Tabs.JS:Tab({ Title = "quick switch character", Icon = "folder"}),
    ZD1 = Tabs.ZD:Tab({ Title = "auto skill", Icon = "folder"}),
    ZD2 = Tabs.ZD:Tab({ Title = "lock-on", Icon = "folder"}),
}

TabHandles.Announcement:Paragraph({
    Title = "welcome honorable user",
    Desc = "this script will be continuously updated thanks to whitelist users",
    Image = "info",
    ImageSize = 15
})

TabHandles.Announcement:Paragraph({
    Title = "player",
    Desc = "dear user: " .. lp.Name .. " welcome to use",
    Image = "user",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "device",
    Desc = "your device: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "device",
    Desc = "your injector: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

TabHandles.user:Slider({
    Title = "player speed",
    Desc = "modify",
    Value = { 
        Min = 16, 
        Max = 100, 
        Default = 16 
    },
    Step = 1,
    Callback = function(value)
        task.spawn(function()
            while task.wait() do                
                lp.Character:FindFirstChild("Humanoid").WalkSpeed = value
            end
        end)
    end
})

TabHandles.user:Toggle({
    Title = "no stun",
    Desc = "cancel stun",
    Value = false,
    Callback = function(state)
        NoStu = state
    end
})

TabHandles.JS1:Section({ 
	Title = "select character",
	Desc = "select",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

local Characters
local CharacterUltimate
TabHandles.JS1:Dropdown({
    Title   = "select character",
    Values  = {"green hero", "tough assassin", "blue flames", "shattered ice", "explosion hero", "shadow god", "beyond lightspeed", "human builder", "winged god"},
    Value   = "please select character",
    Callback = function(v) 
        local List = {
            ["green hero"] = "GreenHero",
            ["tough assassin"] = "HeroSlayer",            
            ["blue flames"] = "BlueFlames",
            ["shattered ice"] = "SplitIce",
            ["explosion hero"] = "ExplosionHero",
            ["shadow god"] = "DecayingHatred",
            ["beyond lightspeed"] = "FullThrottle",
            ["human builder"] = "HumanArchitect"
        }
        
        Characters = List[v]
    end
})

TabHandles.JS1:Toggle({
    Title = "is awakened",
    Desc = "requires you to own this character's awakening",
    Value = false,
    Callback = function(state)
        CharacterUltimate = state
    end
})

TabHandles.JS1:Button({
    Title = "quick switch",
    Desc = "switch",
    Locked = false,
    Callback = function()
        if not Characters then
            WindUI:Notify({
                Title = "error", 
                Content = "please select a character first", 
                Duration = 2
             })
            return
        end

        local hum = lp.Character and lp.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum.Health = 0 end

        local newChar = lp.CharacterAdded:Wait()
        newChar:WaitForChild("HumanoidRootPart")

        game:GetService("ReplicatedStorage").Remotes.ChangeCharacter:FireServer(Characters, CharacterUltimate)

        WindUI:Notify({
            Title = "switch",
            Content = "switched to " .. Characters .. (CharacterUltimate and " awakened state" or ""),
            Duration = 2
        })
    end
})

TabHandles.ZD1:Section({ 
	Title = "select player",
	Desc = "select",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

local Player = "not selected"
local SelectPlayer = TabHandles.ZD1:Dropdown({
	Title = "select player",
	Desc = "select",
	Values = PlayerList,
	Value = "please select",
	Callback = function(value) 
		Player = value
		WindUI:Notify({
			Title = "select",
			Content = "selection complete",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.ZD1:Button({
    Title = "refresh list",
    Desc = "refresh",
    Locked = false,
    Callback = function()
        GetPlayer()
        if PlayerList == {} then
            table.insert(PlayerList, "player not found") 
        end
        SelectPlayer:Refresh(PlayerList)
    end
})

TabHandles.ZD1:Section({ 
	Title = "execute operation",
	Desc = "operation",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

local AutoTpToPlayer = nil
TabHandles.ZD1:Toggle({
    Title = "teleport kill player",
    Desc = "teleport",
    Value = false,
    Callback = function(state)
        if state then
            AutoTpToPlayer = RunService.RenderStepped:Connect(function()
                for _, v in pairs(game.Players:GetPlayers()) do
                    if v.Name == Player and v.Character:FindFirstChild("HumanoidRootPart") then
                        lp.Character:FindFirstChild("HumanoidRootPart").CFrame = v.Character:FindFirstChild("HumanoidRootPart").CFrame * CFrame.new(0, 0, 4)
                        for _, v in pairs(lp.Backpack:GetChildren()) do
                            game:GetService("Players").LocalPlayer.Character:WaitForChild("Main"):WaitForChild("RemoteEvent"):FireServer("UsingMoveCustom", v, false)
                        end
                    end
                end
            end)
        else
            if AutoTpToPlayer then
                AutoTpToPlayer:Disconnect()
                AutoTpToPlayer = nil       
            end
        end
    end
})

TabHandles.ZD2:Section({ 
	Title = "select player",
	Desc = "select",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

local Player2 = "not selected"
local SelectPlayer2 = TabHandles.ZD2:Dropdown({
	Title = "select player",
	Desc = "select",
	Values = PlayerList,
	Value = "please select",
	Callback = function(value) 
		Player2 = value
		WindUI:Notify({
			Title = "select",
			Content = "selection complete",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.ZD2:Button({
    Title = "refresh list",
    Desc = "refresh",
    Locked = false,
    Callback = function()
        GetPlayer()
        if PlayerList == {} then
            table.insert(PlayerList, "player not found") 
        end
        SelectPlayer2:Refresh(PlayerList)
    end
})

TabHandles.ZD2:Section({ 
	Title = "execute operation",
	Desc = "operation",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

local AutoLookPlayer = nil
TabHandles.ZD2:Toggle({
    Title = "silent aim player",
    Desc = "aim",
    Value = false,
    Callback = function(state)
        if state then
            AutoLookPlayer = RunService.RenderStepped:Connect(function()
                for _, v in pairs(game.Players:GetPlayers()) do
                    if v.Name == Player2 and v.Character:FindFirstChild("HumanoidRootPart") then
                        local Pos1 = lp.Character:FindFirstChild("HumanoidRootPart").Position
                        local Pos2 = v.Character:FindFirstChild("HumanoidRootPart").Position
                        
                        lp.Character:FindFirstChild("HumanoidRootPart").CFrame = CFrame.new(Pos1, Vector3.new(Pos2.X, Pos1.Y, Pos2.Z))
                    end
                end
            end)
        else
            if AutoLookPlayer then
                AutoLookPlayer:Disconnect()
                AutoLookPlayer = nil       
            end
        end
    end
})

end
local function chs()
local Tab = Window:Tab({
    Title = "子追",
    Icon = "crosshair",
    Locked = false,
})
Tab:Button({
    Title = "绕过反作弊",
    Callback = function()
    for i,v in next, getgc(true) do 
    if typeof(v) == 'function' and getfenv(v).script and getfenv(v).script.Parent == nil then 
        if not isourclosure(v) then 
            local source = debug.info(v, 's') 
            if source ~= '[C]' and not source:find('Network') and not source:find('PlayerGui.Client') then 
                hookfunction(v, function()
                    return coroutine.yield() 
                end) 
            end 
        end 
    end 
end
end
})
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

local aimbotEnabled = false
local hitPartName = "Head"
local fovRadius = 250
local wallCheckEnabled = false
local hitChance = 100

local cachedTarget = nil
local lastUpdate = 0
local updateDelay = 0.1

local FOV_Circle = Drawing.new("Circle")
FOV_Circle.Visible = false
FOV_Circle.Radius = fovRadius
FOV_Circle.Color = Color3.fromRGB(255,255,255)
FOV_Circle.Thickness = 1
FOV_Circle.Transparency = 1
FOV_Circle.Filled = false
FOV_Circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)

Camera:GetPropertyChangedSignal("ViewportSize"):Connect(function()
    FOV_Circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
end)

local function getTeamValue(player)
    local state = player:FindFirstChild("PlayerStates")
    if state and state:FindFirstChild("Team") then
        return state.Team.Value
    end
    return nil
end

local function isFriendly(player)
    local myTeam = getTeamValue(LocalPlayer)
    local otherTeam = getTeamValue(player)
    return myTeam ~= nil and myTeam == otherTeam
end

local function updateTarget()
    if not aimbotEnabled then
        cachedTarget = nil
        return
    end

    local closest = nil
    local dist = math.huge
    local camCF = Camera.CFrame
    local camPos = camCF.Position
    local camLook = camCF.LookVector

    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and not isFriendly(p) then
            local c = p.Character
            if c then
                local part
                if hitPartName == "随机" then
                    local parts = {"Head","HumanoidRootPart","Left Arm","Right Arm","Left Leg","Right Leg"}
                    part = c:FindFirstChild(parts[math.random(1,#parts)])
                else
                    part = c:FindFirstChild(hitPartName)
                end

                local hum = c:FindFirstChildOfClass("Humanoid")
                if part and hum and hum.Health > 0 and not c:FindFirstChild("ForceField") then
                    local dir = part.Position - camPos
                    local mag = dir.Magnitude
                    local angle = math.deg(math.acos(camLook:Dot(dir.Unit)))

                    if angle <= (fovRadius/10) and mag < dist then
                        if wallCheckEnabled then
                            local rp = RaycastParams.new()
                            rp.FilterDescendantsInstances = {LocalPlayer.Character, c}
                            rp.FilterType = Enum.RaycastFilterType.Blacklist
                            if Workspace:Raycast(camPos, dir, rp) then
                                continue
                            end
                        end
                        dist = mag
                        closest = part
                    end
                end
            end
        end
    end

    cachedTarget = closest
end

RunService.RenderStepped:Connect(function()
    if tick() - lastUpdate > updateDelay then
        lastUpdate = tick()
        updateTarget()
    end
end)

local function getTarget()
    return cachedTarget
end

local old
old = hookmetamethod(game, "__namecall", function(self, ...)
    local m = getnamecallmethod()
    if not checkcaller() and self == Workspace and (m == "Raycast" or m == "FindPartOnRay") then
        local target = getTarget()
        if target and math.random(1,100) <= hitChance then
            local args = {...}
            local origin, direction
            if m == "Raycast" then
                origin, direction = args[1], args[2]
            else
                local r = args[1]
                if typeof(r) == "Ray" then
                    origin, direction = r.Origin, r.Direction
                end
            end
            if origin and direction then
                return {
                    Instance = target,
                    Position = target.Position,
                    Normal = (target.Position - origin).Unit,
                    Material = Enum.Material.Plastic
                }
            end
        end
        return old(self, ...)
    end
    return old(self, ...)
end)

local indicatorEnabled = false
local indicatorLine = Drawing.new("Line")
indicatorLine.Visible = false
indicatorLine.Thickness = 1
indicatorLine.Transparency = 1
indicatorLine.Color = Color3.fromRGB(255,255,255)

local function pointInFOV(pos)
    local v, onScreen = Camera:WorldToViewportPoint(pos)
    if not onScreen then return false end
    local dx = v.X - FOV_Circle.Position.X
    local dy = v.Y - FOV_Circle.Position.Y
    return (dx*dx + dy*dy) <= (fovRadius*fovRadius)
end

RunService.RenderStepped:Connect(function()
    if not indicatorEnabled or not aimbotEnabled then
        indicatorLine.Visible = false
        return
    end

    local target = cachedTarget
    if not target then
        indicatorLine.Visible = false
        return
    end

    local char = target.Parent
    if not char then
        indicatorLine.Visible = false
        return
    end

    local player = Players:GetPlayerFromCharacter(char)
    if not player or isFriendly(player) then
        indicatorLine.Visible = false
        return
    end

    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum or hum.Health <= 0 then
        indicatorLine.Visible = false
        return
    end

    if wallCheckEnabled then
        local rp = RaycastParams.new()
        rp.FilterDescendantsInstances = {LocalPlayer.Character, char}
        rp.FilterType = Enum.RaycastFilterType.Blacklist
        if Workspace:Raycast(Camera.CFrame.Position, (target.Position - Camera.CFrame.Position), rp) then
            indicatorLine.Visible = false
            return
        end
    end

    local pos3d = target.Position
    if not pointInFOV(pos3d) then
        indicatorLine.Visible = false
        return
    end

    local screenPos, onScreen = Camera:WorldToViewportPoint(pos3d)
    if not onScreen then
        indicatorLine.Visible = false
        return
    end

    indicatorLine.From = Vector2.new(FOV_Circle.Position.X, FOV_Circle.Position.Y)
    indicatorLine.To = Vector2.new(screenPos.X, screenPos.Y)
    indicatorLine.Visible = true
end)

Tab:Toggle({
    Title = "子弹追踪",
    Value = false,
    Callback = function(s)
        aimbotEnabled = s
        FOV_Circle.Visible = s
    end
})

local Weapons = game:GetService("ReplicatedStorage").Import.Assets.Weapons
local cache = {}

local function apply()
    for _,d in ipairs(Weapons:GetDescendants()) do
        if d.Name == "EquipTime" and d:IsA("ValueBase") then
            if cache[d] == nil then
                cache[d] = d.Value
            end
            d.Value = 0
        end
    end
end

local function restore()
    for d,v in pairs(cache) do
        if d and d.Parent then
            d.Value = v
        end
    end
end

Tab:Toggle({
    Title = "快速切枪",
    Value = false,
    Callback = function(state)
        if state then
            apply()
        else
            restore()
        end
    end
})

Tab:Slider({
    Title = "fov大小",
    Value = {Min = 100, Max = 300, Default = 250},
    Callback = function(v)
        fovRadius = tonumber(v)
        FOV_Circle.Radius = fovRadius
    end
})

Tab:Dropdown({
    Title = "命中部位",
    Multi = false,
    AllowNone = false,
    Value = "Head",
    Values = {"Head","HumanoidRootPart","Left Arm","Right Arm","Left Leg","Right Leg","随机"},
    Callback = function(n)
        hitPartName = n
    end
})

Tab:Toggle({
    Title = "墙壁检测",
    Value = false,
    Callback = function(s)
        wallCheckEnabled = s
    end
})

Tab:Slider({
    Title = "子追命中几率",
    Value = {Min = 1, Max = 100, Default = 100},
    Callback = function(v)
        hitChance = tonumber(v)
    end
})

Tab:Toggle({
    Title = "指示子追目标",
    Value = false,
    Callback = function(state)
        indicatorEnabled = state
        if not state then
            indicatorLine.Visible = false
        end
    end
})
local Tab = Window:Tab({
    Title = "透视",
    Icon = "eye",
    Locked = false,
})
local localPlayer = game.Players.LocalPlayer
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local espEnabled = false
local hpESPEnabled = false
local playerDistanceEspEnabled = false

local espConnections = {}
local hpESPConnections = {}
local playerDistanceLabels = {}
local updateConnection

local function getTeamValue(player)
    local state = player:FindFirstChild("PlayerStates")
    if state and state:FindFirstChild("Team") then
        return state.Team.Value
    end
    return nil
end

local function isFriendly(player)
    local myTeam = getTeamValue(localPlayer)
    local otherTeam = getTeamValue(player)
    return myTeam ~= nil and myTeam == otherTeam
end

local function updateESPColor(player)
    if player.Character then
        local esp = player.Character:FindFirstChild("PlayerESP")
        if esp then
            esp.FillColor = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
            esp.OutlineColor = esp.FillColor
        end
        local root = player.Character:FindFirstChild("HumanoidRootPart")
        if root then
            local hp = root:FindFirstChild("HpESP")
            if hp and hp:FindFirstChildOfClass("TextLabel") then
                hp:FindFirstChildOfClass("TextLabel").TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
            end
            local distance = root:FindFirstChild("DistanceESP")
            if distance and distance:FindFirstChildOfClass("TextLabel") then
                distance:FindFirstChildOfClass("TextLabel").TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
            end
        end
    end
end

local function createESP(player)
    if player == localPlayer then return end
    local function addESP(character)
        if character:FindFirstChild("PlayerESP") then return end
        local root = character:FindFirstChild("HumanoidRootPart")
        if not root then return end
        local highlight = Instance.new("Highlight")
        highlight.Name = "PlayerESP"
        highlight.Adornee = character
        highlight.FillColor = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
        highlight.OutlineColor = highlight.FillColor
        highlight.FillTransparency = 0.6
        highlight.OutlineTransparency = 0
        highlight.Parent = character
    end
    if player.Character then addESP(player.Character) end
    espConnections[player] = player.CharacterAdded:Connect(function(char)
        repeat task.wait() until char:FindFirstChild("HumanoidRootPart")
        addESP(char)
        updateESPColor(player)
    end)
end

local function removeESP()
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Character then
            local esp = player.Character:FindFirstChild("PlayerESP")
            if esp then esp:Destroy() end
        end
    end
end

local function enableESP()
    for _, player in ipairs(Players:GetPlayers()) do
        createESP(player)
    end
    espConnections["PlayerAdded"] = Players.PlayerAdded:Connect(function(player)
        createESP(player)
    end)
end

local function disableESP()
    removeESP()
    for _, c in pairs(espConnections) do
        if c then pcall(function() c:Disconnect() end) end
    end
    espConnections = {}
end

Tab:Toggle({
    Title = "玩家透视",
    Value = false,
    Callback = function(state)
        espEnabled = state
        if state then
            enableESP()
        else
            disableESP()
        end
    end
})

local function createHPEsp(player)
    if player == localPlayer then return end
    local function addBillboard(character)
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local root = character:FindFirstChild("HumanoidRootPart")
        if not humanoid or not root then return end
        if root:FindFirstChild("HpESP") then return end
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "HpESP"
        billboard.AlwaysOnTop = true
        billboard.Size = UDim2.new(0,200,0,25)
        billboard.StudsOffset = Vector3.new(0,-15,0)
        billboard.Parent = root
        local hpLabel = Instance.new("TextLabel")
        hpLabel.BackgroundTransparency = 1
        hpLabel.Size = UDim2.new(1,0,1,0)
        hpLabel.TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
        hpLabel.TextSize = 13
        hpLabel.Font = Enum.Font.SourceSansBold
        hpLabel.Text = "HP:"..math.floor(humanoid.Health)
        hpLabel.Parent = billboard
        humanoid.HealthChanged:Connect(function()
            if hpLabel then
                hpLabel.Text = "HP:"..math.floor(humanoid.Health)
            end
        end)
    end
    if player.Character then addBillboard(player.Character) end
    hpESPConnections[player] = player.CharacterAdded:Connect(function(char)
        repeat task.wait() until char:FindFirstChild("HumanoidRootPart") and char:FindFirstChildOfClass("Humanoid")
        addBillboard(char)
        updateESPColor(player)
    end)
end

local function removeHPEsp()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character then
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local esp = root:FindFirstChild("HpESP")
                if esp then esp:Destroy() end
            end
        end
    end
end

local function enableHPEsp()
    for _, player in ipairs(Players:GetPlayers()) do
        createHPEsp(player)
    end
    hpESPConnections["PlayerAdded"] = Players.PlayerAdded:Connect(function(player)
        createHPEsp(player)
    end)
end

local function disableHPEsp()
    removeHPEsp()
    for _, c in pairs(hpESPConnections) do
        if c then pcall(function() c:Disconnect() end) end
    end
    hpESPConnections = {}
end

Tab:Toggle({
    Title = "玩家血量透视",
    Value = false,
    Callback = function(state)
        hpESPEnabled = state
        if state then
            enableHPEsp()
        else
            disableHPEsp()
        end
    end
})

local function createPlayerDistanceEsp(player)
    if not player.Character then return end
    local head = player.Character:FindFirstChild("Head")
    if not head then return end
    if head:FindFirstChild("DistanceESP") then return end
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "DistanceESP"
    billboard.AlwaysOnTop = true
    billboard.Size = UDim2.new(0,200,0,25)
    billboard.StudsOffset = Vector3.new(0,15,0)
    billboard.Parent = head
    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.Size = UDim2.new(1,0,1,0)
    distanceLabel.TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
    distanceLabel.TextSize = 13
    distanceLabel.Font = Enum.Font.SourceSansBold
    distanceLabel.Parent = billboard
    playerDistanceLabels[player] = distanceLabel
end

local function removePlayerDistanceEsp(player)
    if playerDistanceLabels[player] then
        if playerDistanceLabels[player].Parent then
            playerDistanceLabels[player].Parent:Destroy()
        end
        playerDistanceLabels[player] = nil
    end
end

local function updatePlayerDistanceEsp()
    local localChar = localPlayer.Character
    if not localChar or not localChar:FindFirstChild("HumanoidRootPart") then return end
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            createPlayerDistanceEsp(player)
            local distance = (localChar.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
            if playerDistanceLabels[player] then
                playerDistanceLabels[player].Text = "stun:"..math.floor(distance)
            end
            updateESPColor(player)
        end
    end
end

local function addPlayerDistanceEsp()
    updateConnection = RunService.RenderStepped:Connect(updatePlayerDistanceEsp)
    Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function()
            if playerDistanceEspEnabled then createPlayerDistanceEsp(player) end
        end)
    end)
end

local function removePlayerDistanceEspAll()
    for player, _ in pairs(playerDistanceLabels) do
        removePlayerDistanceEsp(player)
    end
    if updateConnection then updateConnection:Disconnect() end
    playerDistanceLabels = {}
end

Tab:Toggle({
    Title = "显示距离",
    Value = false,
    Callback = function(state)
        playerDistanceEspEnabled = state
        if state then
            addPlayerDistanceEsp()
        else
            removePlayerDistanceEspAll()
        end
    end
})
local Tab = Window:Tab({
    Title = "设置",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "更改ui颜色",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function chseng()
local Tab = Window:Tab({
    Title = "silent aim",
    Icon = "crosshair",
    Locked = false,
})
Tab:Button({
    Title = "bypass anti cheat",
    Callback = function()
    for i,v in next, getgc(true) do 
    if typeof(v) == 'function' and getfenv(v).script and getfenv(v).script.Parent == nil then 
        if not isourclosure(v) then 
            local source = debug.info(v, 's') 
            if source ~= '[C]' and not source:find('Network') and not source:find('PlayerGui.Client') then 
                hookfunction(v, function()
                    return coroutine.yield() 
                end) 
            end 
        end 
    end 
end
end
})
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

local aimbotEnabled = false
local hitPartName = "Head"
local fovRadius = 250
local wallCheckEnabled = false
local hitChance = 100

local cachedTarget = nil
local lastUpdate = 0
local updateDelay = 0.1

local FOV_Circle = Drawing.new("Circle")
FOV_Circle.Visible = false
FOV_Circle.Radius = fovRadius
FOV_Circle.Color = Color3.fromRGB(255,255,255)
FOV_Circle.Thickness = 1
FOV_Circle.Transparency = 1
FOV_Circle.Filled = false
FOV_Circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)

Camera:GetPropertyChangedSignal("ViewportSize"):Connect(function()
    FOV_Circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
end)

local function getTeamValue(player)
    local state = player:FindFirstChild("PlayerStates")
    if state and state:FindFirstChild("Team") then
        return state.Team.Value
    end
    return nil
end

local function isFriendly(player)
    local myTeam = getTeamValue(LocalPlayer)
    local otherTeam = getTeamValue(player)
    return myTeam ~= nil and myTeam == otherTeam
end

local function updateTarget()
    if not aimbotEnabled then
        cachedTarget = nil
        return
    end

    local closest = nil
    local dist = math.huge
    local camCF = Camera.CFrame
    local camPos = camCF.Position
    local camLook = camCF.LookVector

    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and not isFriendly(p) then
            local c = p.Character
            if c then
                local part
                if hitPartName == "随机" then
                    local parts = {"Head","HumanoidRootPart","Left Arm","Right Arm","Left Leg","Right Leg"}
                    part = c:FindFirstChild(parts[math.random(1,#parts)])
                else
                    part = c:FindFirstChild(hitPartName)
                end

                local hum = c:FindFirstChildOfClass("Humanoid")
                if part and hum and hum.Health > 0 and not c:FindFirstChild("ForceField") then
                    local dir = part.Position - camPos
                    local mag = dir.Magnitude
                    local angle = math.deg(math.acos(camLook:Dot(dir.Unit)))

                    if angle <= (fovRadius/10) and mag < dist then
                        if wallCheckEnabled then
                            local rp = RaycastParams.new()
                            rp.FilterDescendantsInstances = {LocalPlayer.Character, c}
                            rp.FilterType = Enum.RaycastFilterType.Blacklist
                            if Workspace:Raycast(camPos, dir, rp) then
                                continue
                            end
                        end
                        dist = mag
                        closest = part
                    end
                end
            end
        end
    end

    cachedTarget = closest
end

RunService.RenderStepped:Connect(function()
    if tick() - lastUpdate > updateDelay then
        lastUpdate = tick()
        updateTarget()
    end
end)

local function getTarget()
    return cachedTarget
end

local old
old = hookmetamethod(game, "__namecall", function(self, ...)
    local m = getnamecallmethod()
    if not checkcaller() and self == Workspace and (m == "Raycast" or m == "FindPartOnRay") then
        local target = getTarget()
        if target and math.random(1,100) <= hitChance then
            local args = {...}
            local origin, direction
            if m == "Raycast" then
                origin, direction = args[1], args[2]
            else
                local r = args[1]
                if typeof(r) == "Ray" then
                    origin, direction = r.Origin, r.Direction
                end
            end
            if origin and direction then
                return {
                    Instance = target,
                    Position = target.Position,
                    Normal = (target.Position - origin).Unit,
                    Material = Enum.Material.Plastic
                }
            end
        end
        return old(self, ...)
    end
    return old(self, ...)
end)

local indicatorEnabled = false
local indicatorLine = Drawing.new("Line")
indicatorLine.Visible = false
indicatorLine.Thickness = 1
indicatorLine.Transparency = 1
indicatorLine.Color = Color3.fromRGB(255,255,255)

local function pointInFOV(pos)
    local v, onScreen = Camera:WorldToViewportPoint(pos)
    if not onScreen then return false end
    local dx = v.X - FOV_Circle.Position.X
    local dy = v.Y - FOV_Circle.Position.Y
    return (dx*dx + dy*dy) <= (fovRadius*fovRadius)
end

RunService.RenderStepped:Connect(function()
    if not indicatorEnabled or not aimbotEnabled then
        indicatorLine.Visible = false
        return
    end

    local target = cachedTarget
    if not target then
        indicatorLine.Visible = false
        return
    end

    local char = target.Parent
    if not char then
        indicatorLine.Visible = false
        return
    end

    local player = Players:GetPlayerFromCharacter(char)
    if not player or isFriendly(player) then
        indicatorLine.Visible = false
        return
    end

    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum or hum.Health <= 0 then
        indicatorLine.Visible = false
        return
    end

    if wallCheckEnabled then
        local rp = RaycastParams.new()
        rp.FilterDescendantsInstances = {LocalPlayer.Character, char}
        rp.FilterType = Enum.RaycastFilterType.Blacklist
        if Workspace:Raycast(Camera.CFrame.Position, (target.Position - Camera.CFrame.Position), rp) then
            indicatorLine.Visible = false
            return
        end
    end

    local pos3d = target.Position
    if not pointInFOV(pos3d) then
        indicatorLine.Visible = false
        return
    end

    local screenPos, onScreen = Camera:WorldToViewportPoint(pos3d)
    if not onScreen then
        indicatorLine.Visible = false
        return
    end

    indicatorLine.From = Vector2.new(FOV_Circle.Position.X, FOV_Circle.Position.Y)
    indicatorLine.To = Vector2.new(screenPos.X, screenPos.Y)
    indicatorLine.Visible = true
end)

Tab:Toggle({
    Title = "silent aim",
    Value = false,
    Callback = function(s)
        aimbotEnabled = s
        FOV_Circle.Visible = s
    end
})

local Weapons = game:GetService("ReplicatedStorage").Import.Assets.Weapons
local cache = {}

local function apply()
    for _,d in ipairs(Weapons:GetDescendants()) do
        if d.Name == "EquipTime" and d:IsA("ValueBase") then
            if cache[d] == nil then
                cache[d] = d.Value
            end
            d.Value = 0
        end
    end
end

local function restore()
    for d,v in pairs(cache) do
        if d and d.Parent then
            d.Value = v
        end
    end
end

Tab:Toggle({
    Title = "fast equiptime",
    Value = false,
    Callback = function(state)
        if state then
            apply()
        else
            restore()
        end
    end
})

Tab:Slider({
    Title = "fov size",
    Value = {Min = 100, Max = 300, Default = 250},
    Callback = function(v)
        fovRadius = tonumber(v)
        FOV_Circle.Radius = fovRadius
    end
})

Tab:Dropdown({
    Title = "hit part",
    Multi = false,
    AllowNone = false,
    Value = "Head",
    Values = {"Head","HumanoidRootPart","Left Arm","Right Arm","Left Leg","Right Leg","随机"},
    Callback = function(n)
        hitPartName = n
    end
})

Tab:Toggle({
    Title = "wallcheck",
    Value = false,
    Callback = function(s)
        wallCheckEnabled = s
    end
})

Tab:Slider({
    Title = "silent aim hit chance",
    Value = {Min = 1, Max = 100, Default = 100},
    Callback = function(v)
        hitChance = tonumber(v)
    end
})

Tab:Toggle({
    Title = "display sub pursuit target",
    Value = false,
    Callback = function(state)
        indicatorEnabled = state
        if not state then
            indicatorLine.Visible = false
        end
    end
})
local Tab = Window:Tab({
    Title = "esp",
    Icon = "eye",
    Locked = false,
})
local localPlayer = game.Players.LocalPlayer
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local espEnabled = false
local hpESPEnabled = false
local playerDistanceEspEnabled = false

local espConnections = {}
local hpESPConnections = {}
local playerDistanceLabels = {}
local updateConnection

local function getTeamValue(player)
    local state = player:FindFirstChild("PlayerStates")
    if state and state:FindFirstChild("Team") then
        return state.Team.Value
    end
    return nil
end

local function isFriendly(player)
    local myTeam = getTeamValue(localPlayer)
    local otherTeam = getTeamValue(player)
    return myTeam ~= nil and myTeam == otherTeam
end

local function updateESPColor(player)
    if player.Character then
        local esp = player.Character:FindFirstChild("PlayerESP")
        if esp then
            esp.FillColor = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
            esp.OutlineColor = esp.FillColor
        end
        local root = player.Character:FindFirstChild("HumanoidRootPart")
        if root then
            local hp = root:FindFirstChild("HpESP")
            if hp and hp:FindFirstChildOfClass("TextLabel") then
                hp:FindFirstChildOfClass("TextLabel").TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
            end
            local distance = root:FindFirstChild("DistanceESP")
            if distance and distance:FindFirstChildOfClass("TextLabel") then
                distance:FindFirstChildOfClass("TextLabel").TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
            end
        end
    end
end

local function createESP(player)
    if player == localPlayer then return end
    local function addESP(character)
        if character:FindFirstChild("PlayerESP") then return end
        local root = character:FindFirstChild("HumanoidRootPart")
        if not root then return end
        local highlight = Instance.new("Highlight")
        highlight.Name = "PlayerESP"
        highlight.Adornee = character
        highlight.FillColor = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
        highlight.OutlineColor = highlight.FillColor
        highlight.FillTransparency = 0.6
        highlight.OutlineTransparency = 0
        highlight.Parent = character
    end
    if player.Character then addESP(player.Character) end
    espConnections[player] = player.CharacterAdded:Connect(function(char)
        repeat task.wait() until char:FindFirstChild("HumanoidRootPart")
        addESP(char)
        updateESPColor(player)
    end)
end

local function removeESP()
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Character then
            local esp = player.Character:FindFirstChild("PlayerESP")
            if esp then esp:Destroy() end
        end
    end
end

local function enableESP()
    for _, player in ipairs(Players:GetPlayers()) do
        createESP(player)
    end
    espConnections["PlayerAdded"] = Players.PlayerAdded:Connect(function(player)
        createESP(player)
    end)
end

local function disableESP()
    removeESP()
    for _, c in pairs(espConnections) do
        if c then pcall(function() c:Disconnect() end) end
    end
    espConnections = {}
end

Tab:Toggle({
    Title = "player esp",
    Value = false,
    Callback = function(state)
        espEnabled = state
        if state then
            enableESP()
        else
            disableESP()
        end
    end
})

local function createHPEsp(player)
    if player == localPlayer then return end
    local function addBillboard(character)
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local root = character:FindFirstChild("HumanoidRootPart")
        if not humanoid or not root then return end
        if root:FindFirstChild("HpESP") then return end
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "HpESP"
        billboard.AlwaysOnTop = true
        billboard.Size = UDim2.new(0,200,0,25)
        billboard.StudsOffset = Vector3.new(0,-15,0)
        billboard.Parent = root
        local hpLabel = Instance.new("TextLabel")
        hpLabel.BackgroundTransparency = 1
        hpLabel.Size = UDim2.new(1,0,1,0)
        hpLabel.TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
        hpLabel.TextSize = 13
        hpLabel.Font = Enum.Font.SourceSansBold
        hpLabel.Text = "HP:"..math.floor(humanoid.Health)
        hpLabel.Parent = billboard
        humanoid.HealthChanged:Connect(function()
            if hpLabel then
                hpLabel.Text = "HP:"..math.floor(humanoid.Health)
            end
        end)
    end
    if player.Character then addBillboard(player.Character) end
    hpESPConnections[player] = player.CharacterAdded:Connect(function(char)
        repeat task.wait() until char:FindFirstChild("HumanoidRootPart") and char:FindFirstChildOfClass("Humanoid")
        addBillboard(char)
        updateESPColor(player)
    end)
end

local function removeHPEsp()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character then
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local esp = root:FindFirstChild("HpESP")
                if esp then esp:Destroy() end
            end
        end
    end
end

local function enableHPEsp()
    for _, player in ipairs(Players:GetPlayers()) do
        createHPEsp(player)
    end
    hpESPConnections["PlayerAdded"] = Players.PlayerAdded:Connect(function(player)
        createHPEsp(player)
    end)
end

local function disableHPEsp()
    removeHPEsp()
    for _, c in pairs(hpESPConnections) do
        if c then pcall(function() c:Disconnect() end) end
    end
    hpESPConnections = {}
end

Tab:Toggle({
    Title = "HP esp",
    Value = false,
    Callback = function(state)
        hpESPEnabled = state
        if state then
            enableHPEsp()
        else
            disableHPEsp()
        end
    end
})

local function createPlayerDistanceEsp(player)
    if not player.Character then return end
    local head = player.Character:FindFirstChild("Head")
    if not head then return end
    if head:FindFirstChild("DistanceESP") then return end
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "DistanceESP"
    billboard.AlwaysOnTop = true
    billboard.Size = UDim2.new(0,200,0,25)
    billboard.StudsOffset = Vector3.new(0,15,0)
    billboard.Parent = head
    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.Size = UDim2.new(1,0,1,0)
    distanceLabel.TextColor3 = isFriendly(player) and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
    distanceLabel.TextSize = 13
    distanceLabel.Font = Enum.Font.SourceSansBold
    distanceLabel.Parent = billboard
    playerDistanceLabels[player] = distanceLabel
end

local function removePlayerDistanceEsp(player)
    if playerDistanceLabels[player] then
        if playerDistanceLabels[player].Parent then
            playerDistanceLabels[player].Parent:Destroy()
        end
        playerDistanceLabels[player] = nil
    end
end

local function updatePlayerDistanceEsp()
    local localChar = localPlayer.Character
    if not localChar or not localChar:FindFirstChild("HumanoidRootPart") then return end
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            createPlayerDistanceEsp(player)
            local distance = (localChar.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
            if playerDistanceLabels[player] then
                playerDistanceLabels[player].Text = "stun:"..math.floor(distance)
            end
            updateESPColor(player)
        end
    end
end

local function addPlayerDistanceEsp()
    updateConnection = RunService.RenderStepped:Connect(updatePlayerDistanceEsp)
    Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function()
            if playerDistanceEspEnabled then createPlayerDistanceEsp(player) end
        end)
    end)
end

local function removePlayerDistanceEspAll()
    for player, _ in pairs(playerDistanceLabels) do
        removePlayerDistanceEsp(player)
    end
    if updateConnection then updateConnection:Disconnect() end
    playerDistanceLabels = {}
end

Tab:Toggle({
    Title = "display distance",
    Value = false,
    Callback = function(state)
        playerDistanceEspEnabled = state
        if state then
            addPlayerDistanceEsp()
        else
            removePlayerDistanceEspAll()
        end
    end
})
local Tab = Window:Tab({
Title = "settings",
Icon = "settings",
Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
table.insert(themeValues, name)
end

Tab:Dropdown({
Title = "change ui color",
Multi = false,
AllowNone = false,
Value = nil,
Values = themeValues,
Callback = function(theme)
WindUI:SetTheme(theme)
end
})
end
local function skts()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local Tab = Window:Tab({
    Title ="主要",
    Icon = "drama",
    Locked = false,
})

Tab:Toggle({
    Title = "绘制鲨鱼",
    Default = true,
    Callback = function(value)
        local sharks = workspace:FindFirstChild("Sharks")
        if not sharks then return end
        
        local function processShark(shark)
            if shark:IsA("BasePart") then
                if value then
                    shark.BrickColor = BrickColor.new("Bright red")
                    shark.Material = Enum.Material.Neon
                    
                    local highlight = Instance.new("Highlight")
                    highlight.FillColor = Color3.new(1, 0, 0)
                    highlight.OutlineColor = Color3.new(1, 0.5, 0.5)
                    highlight.Parent = shark
                else
                    shark.BrickColor = BrickColor.new("Medium stone grey")
                    shark.Material = Enum.Material.Plastic
                    
                    local highlight = shark:FindFirstChildOfClass("Highlight")
                    if highlight then
                        highlight:Destroy()
                    end
                end
            end
        end
        
        if sharks:IsA("Model") or sharks:IsA("Folder") then
            for _, child in pairs(sharks:GetDescendants()) do
                processShark(child)
            end
        else
            processShark(sharks)
        end
    end
})

local highlightConnections = {}
local highlightStorage = nil

Tab:Toggle({
    Title = "绘制玩家",
    Default = false,
    Callback = function(state)
        if state then
            local CoreGui = game:GetService("CoreGui")
            local Players = game:GetService("Players")
            
            highlightStorage = Instance.new("Folder")
            highlightStorage.Parent = CoreGui
            highlightStorage.Name = "Highlight_Storage"
            
            local function Highlight(plr)
                if not highlightStorage or not highlightStorage.Parent then return end
                
                local Highlight = Instance.new("Highlight")
                Highlight.Name = plr.Name
                Highlight.FillColor = Color3.fromRGB(0, 0, 255)
                Highlight.DepthMode = "AlwaysOnTop"
                Highlight.FillTransparency = 0.5
                Highlight.OutlineColor = Color3.fromRGB(255,255,255)
                Highlight.OutlineTransparency = 0
                Highlight.Parent = highlightStorage
                
                local plrchar = plr.Character
                if plrchar then
                    Highlight.Adornee = plrchar
                end

                highlightConnections[plr] = plr.CharacterAdded:Connect(function(char)
                    task.wait(1)
                    if Highlight and Highlight.Parent then
                        Highlight.Adornee = char
                    end
                end)
            end

            highlightConnections.playerAdded = Players.PlayerAdded:Connect(Highlight)
            
            for _, v in pairs(Players:GetPlayers()) do
                Highlight(v)
            end

            highlightConnections.playerRemoving = Players.PlayerRemoving:Connect(function(plr)
                if highlightStorage and highlightStorage.Parent then
                    local plrHighlight = highlightStorage:FindFirstChild(plr.Name)
                    if plrHighlight then
                        plrHighlight:Destroy()
                    end
                end
                if highlightConnections[plr] then
                    highlightConnections[plr]:Disconnect()
                    highlightConnections[plr] = nil
                end
            end)
            
        else
            if highlightStorage then
                highlightStorage:Destroy()
                highlightStorage = nil
            end
            
            for key, connection in pairs(highlightConnections) do
                if connection and typeof(connection) == "RBXScriptConnection" then
                    connection:Disconnect()
                end
            end
            highlightConnections = {}
        end
    end
})

local remote = nil
local player = game.Players.LocalPlayer
local sharkName = nil
local runningConnection = nil

local function hookRemote()
    local remotesFolder = game:GetService("ReplicatedStorage"):WaitForChild("Projectiles"):WaitForChild("Events"):WaitForChild("Weapons"):WaitForChild("remotes")
    
    for _, child in ipairs(remotesFolder:GetChildren()) do
        if child:IsA("RemoteEvent") or child:IsA("RemoteFunction") then
            local oldFire = child.FireServer
            local oldInvoke = child.InvokeServer
            
            if child:IsA("RemoteEvent") then
                child.FireServer = function(self, ...)
                    remote = self.Name
                    return oldFire(self, ...)
                end
            else
                child.InvokeServer = function(self, ...)
                    remote = self.Name
                    return oldInvoke(self, ...)
                end
            end
        end
    end
end

local function getShark()
    local sharksFolder = workspace:FindFirstChild("Sharks")
    if sharksFolder then
        for _, shark in ipairs(sharksFolder:GetChildren()) do
            if shark:IsA("Model") and shark:FindFirstChild("Humanoid") and shark.Humanoid.Health > 0 then
                sharkName = shark.Name
                return shark
            end
        end
    end
    sharkName = nil
    return nil
end

local function KillShark()
    local character = player.Character
    if not character then return end
    
    local backpack = player:FindFirstChild("Backpack")
    if not backpack then return end
    
    for _, tool in ipairs(backpack:GetChildren()) do
        if tool:IsA("Tool") then
            tool.Parent = character
        end
    end
    
    if sharkName and remote then
        local shark = workspace:WaitForChild("Sharks"):FindFirstChild(sharkName)
        if shark then
            local remoteEvent = game:GetService("ReplicatedStorage"):WaitForChild("Projectiles"):WaitForChild("Events"):WaitForChild("Weapons"):WaitForChild("remotes"):FindFirstChild(remote)
            if remoteEvent then
                for i = 1, 10 do
                    remoteEvent:FireServer(shark)
                    task.wait(0.1)
                end
            end
        end
    end
end

Tab:Toggle({
    Title = "自动刷鲨鱼[先打一下鲨鱼]",
    Default = false,
    Callback = function(on)
        if on then
            hookRemote()
            
            runningConnection = RunService.Heartbeat:Connect(function(dt)
                if player.Team and player.Team.Name ~= "Shark" then
                    local character = player.Character
                    if not character then return end
                    
                    local hrp = character:FindFirstChild("HumanoidRootPart")
                    if not hrp then return end
                    
                    local shark = getShark()
                    if not shark then
                        local chinook = workspace:FindFirstChild("Chinook")
                        local interior = chinook and chinook:FindFirstChild("interior")
                        if interior then
                            hrp.CFrame = interior.CFrame
                        end
                    else
                        KillShark()
                        
                        local center = Vector3.new(0, -100, 0)
                        local radius = 1000
                        local angle = tick() % (2 * math.pi)
                        
                        local x = center.X + math.cos(angle) * radius
                        local z = center.Z + math.sin(angle) * radius
                        
                        hrp.CFrame = CFrame.new(Vector3.new(x, center.Y, z), center)
                    end
                end
            end)
        else
            if runningConnection then
                runningConnection:Disconnect()
                runningConnection = nil
            end
        end
    end
})

end
local function forsake()
local Lighting = game:GetService("Lighting")
local Light1 = Lighting.Ambient
local Light2 = Lighting.OutdoorAmbient
local LocalPlayer = game:GetService("Players").LocalPlayer
local camera = workspace.CurrentCamera
local RunService = game:GetService('RunService')
local ReplicatedStorage = game:GetService('ReplicatedStorage')
local PlayerList = {}

local currentCharacter = LocalPlayer.Character
local currentHumanoidRootPart = currentCharacter and currentCharacter:FindFirstChild("HumanoidRootPart")

LocalPlayer.CharacterAdded:Connect(function(character)
    currentCharacter = character
    currentHumanoidRootPart = character:WaitForChild("HumanoidRootPart")
end)

LocalPlayer.CharacterRemoving:Connect(function()
    currentCharacter = nil
    currentHumanoidRootPart = nil
end)

local EspList = {
    FillTransparency = 0.5,
    OutlineTransparency = 0,
}
local SkillState = {
    Stud = false,
    NotStopNoliVoidRush = false
}

for _, v in pairs(game.Players:GetChildren()) do
    if v.Name ~= LocalPlayer.Name then
        table.insert(PlayerList, v.Name)
    end
end

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "平板"
        else
            return "手机"
        end
    else
        return "电脑"
    end
end

local function notify(title, content, duration, IconImage)
    local Image = IconImage == '' and 'info' or IconImage
    WindUI:Notify({
        Title = title,
        Content = content,
        Icon = Image,
        IconThemed = true,
        Duration = duration or 5,
    })
end

local function CheckName(Name)
    if LocalPlayer.Character.Name ~= Name then
        notify('提示', '你的角色并不是' .. Name .. '!', 2, 'user')
        return
    end
end

local AddHitboxState = false

function AddHitbox(distanceMultiplier, duration)
    local startTime = tick()
    AddHitboxState = true

    while tick() - startTime < duration and AddHitboxState do
        RunService.Heartbeat:Wait()

        local character = LocalPlayer.Character
        local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
        if not humanoidRootPart then continue end

        local originalVelocity = humanoidRootPart.Velocity
        local currentSpeed = originalVelocity.Magnitude
        
        local boostForce = distanceMultiplier * 6
        if currentSpeed >= 26 then
            boostForce = boostForce * 0.3
        elseif currentSpeed >= 20 then
            boostForce = boostForce * 0.6
        end
        
        humanoidRootPart.Velocity = originalVelocity * boostForce + (humanoidRootPart.CFrame.LookVector * boostForce)
        RunService.RenderStepped:Wait()
        humanoidRootPart.Velocity = originalVelocity
    end

    AddHitboxState = false
end

function StopAddHitbox()
    AddHitboxState = false
end

game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
    if SkillState.Stud == true and game.Players.LocalPlayer.Character.Humanoid.WalkSpeed < 16 then
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
    end
end)

game.Players.LocalPlayer.CharacterAdded:Connect(function()
    game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
        if SkillState.Stud == true and game.Players.LocalPlayer.Character.Humanoid.WalkSpeed < 16 then
            game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
        end
    end)
end)

local deviceType = getDeviceType()
local uiSize = deviceType == "手机" and UDim2.fromOffset(500, 400) or deviceType == "平板" and UDim2.fromOffset(550, 450) or UDim2.fromOffset(600, 500)
local uiPosition = UDim2.new(0.5, 0, 0.5, 0)


local playerName = LocalPlayer.Name
local displayName = LocalPlayer.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "玩家", Opened = false, Icon = "user"}),
    Esp = Window:Section({ Title = "透视", Opened = false, Icon = "eye"}),
    FDJ = Window:Section({ Title = "发电机", Opened = false, Icon = "circuit-board"}),
    Skill = Window:Section({ Title = "技能", Opened = false, Icon = "hand-fist"}),
    Item = Window:Section({ Title = "物品", Opened = false, Icon = "vault"})
}

local TabHandles = {
    Player = Tabs.Pl:Tab({ Title = "玩家", Icon = "folder"}),
    TL = Tabs.Pl:Tab({ Title = "体力", Icon = "folder"}),
    ESP1 = Tabs.Esp:Tab({ Title = "透视", Icon = "folder"}),
    ESP2 = Tabs.Esp:Tab({ Title = "透视设置", Icon = "folder"}),
    Sk1 = Tabs.Skill:Tab({ Title = "技能", Icon = "folder"}),
    Sk3 = Tabs.Skill:Tab({ Title = "反技能", Icon = "folder"}),
    Sk2 = Tabs.Skill:Tab({ Title = "碰撞箱", Icon = "folder"}),
    Sk4 = Tabs.Skill:Tab({ Title = "击杀", Icon = "folder"}),
    FDJ1 = Tabs.FDJ:Tab({ Title = "修发电机", Icon = "folder"}),
    FDJ2 = Tabs.FDJ:Tab({ Title = "自动传送修机", Icon = "folder"}),
    WP1 = Tabs.Item:Tab({ Title = "传送物品", Icon = "folder"}),
    WP2 = Tabs.Item:Tab({ Title = "捡拾物品", Icon = "folder"}),
    WP3 = Tabs.Item:Tab({ Title = "披萨", Icon = "folder"})
}

local PL1 = TabHandles.Player:Section({ 
    Title = "基础玩家设置",
    Desc = "玩家",
    Icon = 'user',
    ImageSize = 30,
    Opened = true,
})

TabHandles.Player:Slider({
    Title = "玩家走路速度",
    Desc = "速度",
    Step = 1,
    Value = { Min = 16, Max = 300, Default = 12 },
    Callback = function(value)
        local character = LocalPlayer.Character
        if character then
            local humanoid = character:FindFirstChild('Humanoid')
            if humanoid then
                humanoid:SetAttribute('BaseSpeed', value)
            end
        end
    end
})

TabHandles.Player:Slider({
    Title = "玩家FOV",
    Desc = "视野距离",
    Step = 1,
    Value = { Min = 70, Max = 120, Default = 70 },
    Callback = function(value)
        local playerData = LocalPlayer:FindFirstChild('PlayerData')
        if playerData then
            local settings = playerData:FindFirstChild('Settings')
            if settings then
                local gameSettings = settings:FindFirstChild('Game')
                if gameSettings then
                    local fov = gameSettings:FindFirstChild('FieldOfView')
                    if fov then
                        fov.Value = tonumber(value)
                    end
                end
            end
        end
    end
})

TabHandles.Player:Toggle({
    Title = "高亮",
    Desc = "高亮环境",
    Value = false,
    Callback = function(state) 
        if state then
            Lighting.Ambient = Color3.fromRGB(255, 255, 255)
            Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
        else
            Lighting.Ambient = Light1
            Lighting.OutdoorAmbient = Light2  
        end
    end
})

TabHandles.Player:Toggle({
    Title = "去除雾",
    Desc = "去除",
    Value = false,
    Callback = function(state) 
        if state then
            Lighting.Atmosphere.Density = 0
        else
            Lighting.Atmosphere.Density = 0.65
        end
    end
})

TabHandles.Player:Toggle({
    Title = "防止杀手墙",
    Desc = "防止",
    Value = false,
    Callback = function(state)
        if state then
            for _, v in pairs(workspace:GetDescendants()) do
                if v.name ~= 'KillerDoors' then
                    return
                end
                for _, wall in pairs(v:GetChildren()) do
                    wall.CanCollide = false
                end
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if v.name ~= 'KillerDoors' then
                    return
                end
                for _, wall in pairs(v:GetChildren()) do
                    wall.CanCollide = true
                end
            end
        end
    end
})


local PL2 = TabHandles.Player:Section({ 
    Title = "其他玩家设置",
    Desc = "玩家",
    Icon = 'user',
    ImageSize = 30,
    Opened = true,
})

TabHandles.Player:Toggle({
    Title = "显示对话框",
    Desc = "显示",
    Callback = function(state)
        game.TextChatService.ChatWindowConfiguration.Enabled = state
    end
})

local SprintingModule = require(game:GetService("ReplicatedStorage"):FindFirstChild("Systems"):FindFirstChild("Character"):FindFirstChild("Game"):FindFirstChild("Sprinting"))

local TL1 = TabHandles.TL:Section({ 
    Title = "体力设置",
    Desc = "体力",
    Icon = 'footprints',
    ImageSize = 30,
    Opened = true,
})

TabHandles.TL:Toggle({
    Title = "无限体力",
    Desc = "无限",
    Value = false,
    Callback = function(state) 
        SprintingModule.StaminaLossDisabled = state
        if state then
            for _, v in pairs(getgc(true)) do
                if type(v) == 'table' and rawget(v, 'StaminaLoss') and state then
                    rawset(v, 'StaminaLoss', 0)
                end
            end
        else
            for _, v in pairs(getgc(true)) do
                if type(v) == 'table' and rawget(v, 'StaminaLoss') and state then
                    rawset(v, 'StaminaLoss', 21)
                end
            end
        end
    end
})

TabHandles.TL:Divider()

TabHandles.TL:Input({
    Title = "输入最大体力值",
    Desc = "输入",
    Value = "100",
    Callback = function(value) 
        pcall(function() SprintingModule.MaxStamina = tonumber(value) end)
        for _, v in pairs(getgc(true)) do
            if type(v) == 'table' and rawget(v, 'MaxStamina') then
                rawset(v, 'MaxStamina', tonumber(value))
            end
        end
    end
})

TabHandles.TL:Input({
    Title = "输入体力恢复速度",
    Desc = "输入",
    Value = "20",
    Callback = function(value) 
        pcall(function() SprintingModule.StaminaGain = tonumber(value) end)
        for _, v in pairs(getgc(true)) do
            if type(v) == 'table' and rawget(v, 'StaminaGain') then
                rawset(v, 'StaminaGain', tonumber(value))
            end
        end
    end
})

TabHandles.TL:Input({
    Title = "输入体力消耗速度",
    Desc = "输入",
    Value = "20",
    Callback = function(value) 
        pcall(function() SprintingModule.StaminaLoss = tonumber(value) end)
        for _, v in pairs(getgc(true)) do
            if type(v) == 'table' and rawget(v, 'StaminaLoss') then
                rawset(v, 'StaminaLoss', tonumber(value))
            end
        end
    end
})

TabHandles.TL:Divider()

TabHandles.TL:Input({
    Title = "输入奔跑速度",
    Desc = "输入",
    Value = "26",
    Callback = function(value) 
        pcall(function() SprintingModule.SprintSpeed = tonumber(value) end)
        local gc = getgc(true)
        for _, v in pairs(getgc(true)) do
            if type(v) == 'table' and rawget(v, 'SprintSpeed') then
                rawset(v, 'SprintSpeed', tonumber(value))
            end
        end
    end
})

local ESP1 = TabHandles.ESP1:Section({ 
    Title = "物品透视",
    Desc = "透视",
    Icon = 'eye',
    ImageSize = 30,
    Opened = true,
})

local function createEsp(item, name, color, displayName, showHealth)
    local h = Instance.new('Highlight')
    h.FillColor = color
    h.FillTransparency = EspList.FillTransparency
    h.OutlineTransparency = EspList.OutlineTransparency
    h.Name = name .. 'EspHighlight'
    h.Parent = item

    local biliGui = Instance.new("BillboardGui")
    biliGui.Name = name .. "EspBillboardGui"
    biliGui.AlwaysOnTop = true
    biliGui.Size = UDim2.new(0, 150, 0, 20)
    biliGui.StudsOffset = Vector3.new(0, 1.3, 0)
    
    if item:FindFirstChild("HumanoidRootPart") then
        biliGui.Adornee = item.HumanoidRootPart
    else
        biliGui.Adornee = item
    end
    
    biliGui.Parent = item
        
    local textLabel = Instance.new("TextLabel")
    textLabel.Name = "BiliText"
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
    textLabel.AnchorPoint = Vector2.new(0.5, 0.5)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = color
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.SourceSansBold
        
    local uiStroke = Instance.new("UIStroke")
    uiStroke.Color = Color3.new(0, 0, 0)
    uiStroke.Thickness = 1
    uiStroke.Parent = textLabel
        
    textLabel.Parent = biliGui
    
    local connection = game:GetService('RunService').RenderStepped:Connect(function()
        if item and item.Parent and currentHumanoidRootPart then
            local itemRoot = item:FindFirstChild('HumanoidRootPart') or item:FindFirstChild('ItemRoot')
            local itemPosition = itemRoot and itemRoot.Position or item:GetPivot().Position
            local distance = (currentHumanoidRootPart.Position - itemPosition).Magnitude
            
            local healthText = ""
            if showHealth then
                local humanoid = item:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    healthText = "(" .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth) .. ')'
                end
            end
            
            textLabel.Text = displayName .. "[" .. string.format('%.0f', distance) .. "m]" .. healthText
        else
            connection:Disconnect()
        end
    end)
    
    return connection
end

TabHandles.ESP1:Toggle({
    Title = "透视可乐",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        if state then
            if not _G.ColaEspLoop then _G.ColaEspLoop = {} end
            
            local function checkColas()
                for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
                    if Item.Name == 'BloxyCola' and not Item:FindFirstChild('ColaEspHighlight') then
                        createEsp(Item, "Cola", Color3.new(0.380392, 0.576471, 1), "可乐")
                    end
                end
            end
            
            checkColas()
            
            _G.ColaEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkColas()
            end)
            
        else
            if _G.ColaEspLoop and _G.ColaEspLoop.connection then
                _G.ColaEspLoop.connection:Disconnect()
                _G.ColaEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'ColaEspHighlight' or Esp.Name == 'ColaEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视医疗包",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        if state then
            if not _G.MedkitEspLoop then _G.MedkitEspLoop = {} end
            
            local function checkMedkits()
                for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
                    if Item.Name == 'Medkit' and not Item:FindFirstChild('MedkitEspHighlight') then
                        createEsp(Item, "Medkit", Color3.new(0.396078, 1, 0.396078), "医疗包")
                    end
                end
            end
            
            checkMedkits()
            
            _G.MedkitEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkMedkits()
            end)
            
        else
            if _G.MedkitEspLoop and _G.MedkitEspLoop.connection then
                _G.MedkitEspLoop.connection:Disconnect()
                _G.MedkitEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'MedkitEspHighlight' or Esp.Name == 'MedkitEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视披萨",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.PizzaEspLoop then _G.PizzaEspLoop = {} end
            
            local function checkPizza()
                for _, Item in pairs(workspace.Map.Ingame:GetChildren()) do
                    if not Item:FindFirstChild('PizzaEspHighlight') and Item.Name == 'Pizza' then
                        createEsp(Item, "Pizza", Color3.new(0.984314, 1, 0.152941), "披萨", true)
                    end
                end
            end
            
            checkPizza()
            
            _G.PizzaEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkPizza()
            end)
            
        else
            if _G.PizzaEspLoop and _G.PizzaEspLoop.connection then
                _G.PizzaEspLoop.connection:Disconnect()
                _G.PizzaEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'PizzaEspHighlight' or Esp.Name == 'PizzaEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

local ESP2 = TabHandles.ESP1:Section({ 
    Title = "实体透视",
    Desc = "透视",
    Icon = 'eye',
    ImageSize = 30,
    Opened = true,
})

TabHandles.ESP1:Toggle({
    Title = "透视发电机",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.GeneratorEspLoop then _G.GeneratorEspLoop = {} end
            
            local function checkGenerators()
                for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
                    if Item.Name == 'Generator' and not Item:FindFirstChild('GeneratorEspHighlight') then
                        createEsp(Item, "Generator", Color3.new(0.654902, 0.694118, 0.0941176), "发电机")
                    end
                end
            end
            
            checkGenerators()
            
            _G.GeneratorEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkGenerators()
            end)
            
        else
            if _G.GeneratorEspLoop and _G.GeneratorEspLoop.connection then
                _G.GeneratorEspLoop.connection:Disconnect()
                _G.GeneratorEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'GeneratorEspHighlight' or Esp.Name == 'GeneratorEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视假发电机",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.FakeGeneratorEspLoop then _G.FakeGeneratorEspLoop = {} end
            
            local function checkFakeGenerators()
                for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
                    if Item.Name == 'FakeGenerator' and not Item:FindFirstChild('FakeGeneratorEspHighlight') then
                        createEsp(Item, "FakeGenerator", Color3.new(0.5, 0, 1), "假发电机")
                    end
                end
            end
            
            checkFakeGenerators()
            
            _G.FakeGeneratorEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkFakeGenerators()
            end)
            
        else
            if _G.FakeGeneratorEspLoop and _G.FakeGeneratorEspLoop.connection then
                _G.FakeGeneratorEspLoop.connection:Disconnect()
                _G.FakeGeneratorEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'FakeGeneratorEspHighlight' or Esp.Name == 'FakeGeneratorEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视幸存者",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.SurvivorsEspLoop then _G.SurvivorsEspLoop = {} end
            
            local function checkSurvivors()
                for _, Item in pairs(workspace.Players.Survivors:GetChildren()) do
                    if not Item:FindFirstChild('SurvivorsEspHighlight') then
                        createEsp(Item, "Survivors", Color3.new(0.223529, 1, 0.909804), "幸存者(" .. Item.Name .. ")", true)
                    end
                end
            end
            
            checkSurvivors()
            
            _G.SurvivorsEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkSurvivors()
            end)
            
        else
            if _G.SurvivorsEspLoop and _G.SurvivorsEspLoop.connection then
                _G.SurvivorsEspLoop.connection:Disconnect()
                _G.SurvivorsEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'SurvivorsEspHighlight' or Esp.Name == 'SurvivorsEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视杀手",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.KillEspLoop then _G.KillEspLoop = {} end
            
            local function checkKillers()
                for _, Item in pairs(workspace.Players.Killers:GetChildren()) do
                    if not Item:FindFirstChild('KillEspHighlight') then
                        createEsp(Item, "Kill", Color3.new(1, 0, 0), "杀手(" .. Item.Name .. ")", true)
                    end
                end
            end
            
            checkKillers()
            
            _G.KillEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkKillers()
            end)
            
        else
            if _G.KillEspLoop and _G.KillEspLoop.connection then
                _G.KillEspLoop.connection:Disconnect()
                _G.KillEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'KillEspHighlight' or Esp.Name == 'KillEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视小孩分身",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.ChildCloneEspLoop then _G.ChildCloneEspLoop = {} end
            
            local function checkChildClones()
                for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
                    if Item.Name == 'ChildClone' and not Item:FindFirstChild('ChildCloneEspHighlight') then
                        createEsp(Item, "ChildClone", Color3.new(1, 0, 0), "小孩分身", true)
                    end
                end
            end
            
            checkChildClones()
            
            _G.ChildCloneEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkChildClones()
            end)
            
        else
            if _G.ChildCloneEspLoop and _G.ChildCloneEspLoop.connection then
                _G.ChildCloneEspLoop.connection:Disconnect()
                _G.ChildCloneEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'ChildCloneEspHighlight' or Esp.Name == 'ChildCloneEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视1x1分身",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.ZombieEspLoop then _G.ZombieEspLoop = {} end
            
            local function checkZombie()
                for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
                    if Item.Name == 'Zombie' and not Item:FindFirstChild('ZombieEspHighlight') then
                        createEsp(Item, "Zombie", Color3.new(1, 0, 0), "1X1分身", true)
                    end
                end
            end
            
            checkZombie()
            
            _G.ZombieEspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                checkZombie()
            end)
            
        else
            if _G.ZombieEspLoop and _G.ZombieEspLoop.connection then
                _G.ZombieEspLoop.connection:Disconnect()
                _G.ZombieEspLoop = nil
            end
            for _, Esp in pairs(workspace:GetDescendants()) do
                if Esp.Name == 'ZombieEspHighlight' or Esp.Name == 'ZombieEspBillboardGui' then
                    Esp:Destroy()
                end
            end
        end
    end
})

TabHandles.ESP1:Toggle({
    Title = "透视007n7分身",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        if state then
            if not _G.n7EspLoop then _G.n7EspLoop = {} end
            
            local function check007n7()
                for _, Item in pairs(workspace.Map.Ingame:GetChildren()) do
                    if Item.Name == '007n7' and not Item:FindFirstChild('007n7EspHighlight') then
                        createEsp(Item, "007n7", Color3.new(0.5, 0, 1), "007n7分身", true)
                    end
                end
            end
            
            check007n7()
            
            _G.n7EspLoop.connection = game:GetService('RunService').Heartbeat:Connect(function()
                check007n7()
            end)
            
        else
            if _G.n7EspLoop and _G.n7EspLoop.connection then
                _G.n7EspLoop.connection:Disconnect()
                _G.n7EspLoop = nil
            end
            
            for _, Item in pairs(workspace.Map.Ingame:GetChildren()) do
                if Item.Name == '007n7' then
                    local highlight = Item:FindFirstChild('007n7EspHighlight')
                    if highlight then
                        highlight:Destroy()
                    end
                    local billboard = Item:FindFirstChild('HumanoidRootPart'):FindFirstChild('007n7EspBillboardGui')
                    if billboard then
                        billboard:Destroy()
                    end
                end
            end
        end
    end
})

ESPS = TabHandles.ESP2:Section({ 
    Title = "透视设置",
    Desc = "设置",
    Icon = 'settings',
    ImageSize = 30,
    Opened = true,
})

TabHandles.ESP2:Slider({
    Title = "填充透明度",
    Desc = "透明度",
    Step = 0.01,
    Value = { Min = 0, Max = 1, Default = 0.5 },
    Callback = function(value)
        EspList.FillTransparency = tonumber(value)
        for _, Esp in pairs(workspace:GetDescendants()) do
            if string.find(Esp.Name, 'EspHighlight', 1, true) then
                Esp.FillTransparency = tonumber(value)
            end
        end
    end
})

TabHandles.ESP2:Slider({
    Title = "轮廓透明度",
    Desc = "透明度",
    Step = 0.01,
    Value = { Min = 0, Max = 1, Default = 0 },
    Callback = function(value)
        EspList.OutlineTransparency = tonumber(value)
        for _, Esp in pairs(workspace:GetDescendants()) do
            if string.find(Esp.Name, 'EspHighlight', 1, true) then
                Esp.OutlineTransparency = tonumber(value)
            end
        end
    end
})


local XJ1 = TabHandles.FDJ1:Section({ 
    Title = "自动修机",
    Desc = "修机",
    Icon = 'hand',
    ImageSize = 30,
    Opened = true,
})

local WaitTime = 1
local RunState = false
TabHandles.FDJ1:Toggle({
    Title = "自动修发电机",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        RunState = state
        if state then
            while RunState do
                for _, Gen in pairs(workspace:GetDescendants()) do
                    if Gen.Name == 'RE' then
                        Gen:FireServer()
                    end
                end
                wait(WaitTime)
            end
        end
    end
})

TabHandles.FDJ1:Input({
    Title = "输入修机间隔",
    Desc = "输入",
    Value = "1",
    Callback = function(value) 
        WaitTime = tonumber(value)
    end
})

local XJ2 = TabHandles.FDJ2:Section({ 
    Title = "传送修机",
    Desc = "修机",
    Icon = 'spline',
    ImageSize = 30,
    Opened = true,
})

local Gen = TabHandles.FDJ2:Paragraph({ 
    Title = "修机状态: 空闲",
    Desc = "状态",
    Icon = 'info',
    ImageSize = 30,
    Opened = true,
})

local TPRunning = false
local TPMax = 5
local TPTime = 0.1
local RETRY = 3

local function getHumanoidRootPart()
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return character:WaitForChild("HumanoidRootPart")
end

local function stopTP() 
    TPRunning = false 
end

local function startTP()
    if TPRunning then return end
    TPRunning = true
    Gen:SetTitle("修机状态: 正在修机")

    while TPRunning do
        local genList = {}
        local allGeneratorsFinished = true
        
        for _, g in pairs(workspace:GetDescendants()) do
            if g.Name == "Generator" then
                local instances = g:FindFirstChild("Instances")
                local generator = instances and instances:FindFirstChild("Generator")
                local progress = generator and generator:FindFirstChild("Progress")
                local barUI = progress and progress:FindFirstChild("BarUI")
                local bar = barUI and barUI:FindFirstChild("Bar")
                
                if bar and bar:IsA("Frame") then
                    if bar.Size == UDim2.new(1, 0, 1, 0) then
                        continue
                    else
                        allGeneratorsFinished = false
                        local center = g:FindFirstChild("Positions") and g.Positions:FindFirstChild("Center")
                        local remotes = g:FindFirstChild("Remotes")
                        local rf = remotes and remotes:FindFirstChild("RF")
                        local re = remotes and remotes:FindFirstChild("RE")
                        if center and rf and re then
                            table.insert(genList, {cf = center.CFrame, rf = rf, re = re, id = g:GetAttribute("ID") or g.Name})
                            if #genList >= TPMax then break end
                        end
                    end
                else
                    allGeneratorsFinished = false
                    local center = g:FindFirstChild("Positions") and g.Positions:FindFirstChild("Center")
                    local remotes = g:FindFirstChild("Remotes")
                    local rf = remotes and remotes:FindFirstChild("RF")
                    local re = remotes and remotes:FindFirstChild("RE")
                    if center and rf and re then
                        table.insert(genList, {cf = center.CFrame, rf = rf, re = re, id = g:GetAttribute("ID") or g.Name})
                        if #genList >= TPMax then break end
                    end
                end
            end
        end
        
        if allGeneratorsFinished then
            TPRunning = false
            return
        end
        
        if #genList == 0 then 
            TPRunning = false 
            return 
        end

        local function work(entry)
            local root = getHumanoidRootPart()
            if not root then return end

            root.CFrame = entry.cf
            task.wait(0.2)
            for i = 1, RETRY do
                local ok1 = pcall(entry.rf.InvokeServer, entry.rf, "enter", entry.id)
                if ok1 then
                    pcall(entry.re.FireServer, entry.re, entry.id)
                    task.wait(0.1)
                    pcall(entry.rf.InvokeServer, entry.rf, "leave", entry.id)
                    break
                end
            end
        end

        for _, entry in ipairs(genList) do
            if not TPRunning then break end
            work(entry)
            task.wait(TPTime)
        end
        
        task.wait(0.1)
    end
end

TabHandles.FDJ2:Divider()

local Toggle1 = TabHandles.FDJ2:Toggle({
    Title = "传送秒修电机",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        if state then
            task.spawn(startTP)
        else
            TPRunning = false
            Gen:SetTitle("修机状态: 空闲")
        end
    end
})

local SK1 = TabHandles.Sk1:Section({ 
    Title = "通用",
    Desc = "任何角色",
    Icon = 'swords',
    ImageSize = 30,
    Opened = true,
})

TabHandles.Sk1:Toggle({
    Title = "无减速",
    Desc = "防止减速",
    Value = false,
    Callback = function(state) 
        SkillState.Stud = state
    end
})

local SK3 = TabHandles.Sk1:Section({ 
    Title = "机会",
    Desc = "机会技能",
    Icon = 'swords',
    ImageSize = 30,
    Opened = true,
})

local AutoCoinFlip = false
TabHandles.Sk1:Toggle({
    Title = "自动抛硬币",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        if state then
            CheckName('Chance')
        end
        AutoCoinFlip = state
        if state then
            while AutoCoinFlip do
                wait()
                game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Network"):WaitForChild("RemoteEvent"):FireServer("UseActorAbility", 	{buffer.fromstring("\"CoinFlip\"")})
            end
        end
    end
})

local SK3 = TabHandles.Sk1:Section({ 
    Title = "访客",
    Desc = "访客技能",
    Icon = 'swords',
    ImageSize = 30,
    Opened = true,
})

local AutoBlockStud = 10
local AutoBlockState = false

TabHandles.Sk1:Slider({
    Title = "格挡距离",
    Desc = "距离",
    Step = 1,
    Value = { Min = 0, Max = 50, Default = 10 },
    Callback = function(value)
        AutoBlockStud = tonumber(value)
    end
})

TabHandles.Sk1:Toggle({
    Title = "访客自动格挡",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        AutoBlockState = state
        if state then
            CheckName('Guest1337')
        end
        if state then
            while AutoBlockState do
                wait()
                for _, killer in pairs(workspace.Players.Killers:GetChildren()) do
                    local username = killer:GetAttribute("Username")
                    if username == "Guest1337" then
                        local killerHRP = killer:FindFirstChild('HumanoidRootPart')
                        local myHRP = LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
                        if killerHRP and myHRP and (myHRP.Position - killerHRP.Position).Magnitude <= AutoBlockStud then
                            game:GetService("ReplicatedStorage").Modules.Network.RemoteEvent:FireServer("UseActorAbility", "Block")
                        end
                    end            
                end
            end        
        end
    end
})

local SK2 = TabHandles.Sk1:Section({ 
    Title = "Noli",
    Desc = "Noli技能",
    Icon = 'swords',
    ImageSize = 30,
    Opened = true,
})

TabHandles.Sk1:Toggle({
    Title = "Noli转向优化",
    Desc = "Noli优化",
    Value = false,
    Callback = function(state)
        if state then
            CheckName('Noli')
        end
        pcall(function()
            local found = false
            for _, v in pairs(getgc(true)) do
                if type(v) == 'table' and rawget(v, 'VoidRushTurnSpeed') then
                    if state then
                        v.VoidRushTurnSpeed = 100
                    else
                        v.VoidRushTurnSpeed = 1
                    end
                    found = true
                end
            end
        end)
    end
})

local hook
hook = hookmetamethod(game, "__namecall", function(self, ...)
    local args = {...}
    if getnamecallmethod() == "FireServer" and args[1] == LocalPlayer.Name .. 'VoidRushCollision' then
        return nil
    end
    return hook(self, ...)
end)


TabHandles.Sk1:Toggle({
    Title = "Noli冲刺防停止",
    Desc = "Noli优化",
    Value = false,
    Callback = function(state)
        if state then
            CheckName('Noli')
        end
        SkillState.NotStopNoliVoidRush = state
    end
})

local RushNocilp = false
TabHandles.Sk1:Toggle({
    Title = "Noli冲刺无视墙壁",
    Desc = "Noli优化",
    Value = false,
    Callback = function(state)
        if state then
            CheckName('Noli')
        end
        RushNocilp = state
        if state then
            while RushNocilp do
                local Humanoid = LocalPlayer.Character:FindFirstChild('Humanoid')
                local BaseSpeed = Humanoid:GetAttribute('BaseSpeed')
                if Humanoid.WalkSpeed == BaseSpeed * 8 then
                    local character = LocalPlayer.Character
                    character:FindFirstChild('CollisionHitbox').CanCollide = false
                    character:FindFirstChild('CollisionHitbox').CanQuery = false
                    character:FindFirstChild('QueryHitbox').CanCollide = false
                    character:FindFirstChild('QueryHitbox').CanQuery = false
                    character:FindFirstChild('HumanoidRootPart').CanCollide = false
                    character:FindFirstChild('HumanoidRootPart').CanQuery = false
                    character:FindFirstChild('HumanoidRootPart').CanTouch = false

                    task.wait(3.5)

                    character:FindFirstChild('CollisionHitbox').CanCollide = true
                    character:FindFirstChild('CollisionHitbox').CanQuery = true
                    character:FindFirstChild('QueryHitbox').CanCollide = true
                    character:FindFirstChild('QueryHitbox').CanQuery = true
                    character:FindFirstChild('HumanoidRootPart').CanCollide = true
                    character:FindFirstChild('HumanoidRootPart').CanQuery = true
                    character:FindFirstChild('HumanoidRootPart').CanTouch = true                 
                end
                wait()
            end
        end
    end
})

local NotSkill1 = TabHandles.Sk3:Section({ 
    Title = "反1X1技能",
    Desc = "防止",
    Icon = 'swords',
    ImageSize = 30,
    Opened = true,
})

local DestroyPop = false
TabHandles.Sk3:Toggle({
    Title = "防止弹窗",
    Desc = "防止",
    Value = false,
    Callback = function(state)
        DestroyPop = state
    end
})

spawn(function()
    while true do
        if DestroyPop then
            for _, Pop in pairs(LocalPlayer.PlayerGui:FindFirstChild("TemporaryUI"):GetChildren()) do
                if Pop.Name == '1x1x1x1Popup' then
                    Pop:Destroy()
                end
            end
        end
        wait()
    end
end)

local Hit = TabHandles.Sk2:Section({ 
    Title = "优化碰撞箱",
    Desc = "碰撞箱",
    Icon = 'sword',
    ImageSize = 30,
    Opened = true,
})

local HitBoxStud = 2

TabHandles.Sk2:Toggle({
    Title = "启用碰撞增加",
    Desc = "碰撞",
    Value = false,
    Callback = function(state)
        if state then
            AddHitbox(HitBoxStud, math.huge)
        else
            StopAddHitbox()
        end
    end
})

TabHandles.Sk2:Input({
    Title = "增加距离",
    Desc = "距离",
    Value = "2",
    Callback = function(input) 
        HitBoxStud = tonumber(input)
    end
})

TabHandles.Sk2:Divider()

local HitboxTrackerEnabled = false
local HitboxTrackerConnection = nil
local HitStud = 20
local NoKiller = false
local NoSurvivor = false
local NoNPC = false

local function StartHitboxTracker(maxDistance)
    if HitboxTrackerEnabled then return end
    
    HitboxTrackerEnabled = true
    
    local Players = game:GetService('Players')
    local RunService = game:GetService('RunService')
    local Player = Players.LocalPlayer
    local Character = Player.Character or Player.CharacterAdded:Wait()
    local Humanoid = Character:WaitForChild("Humanoid")
    local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

    Player.CharacterAdded:Connect(function(NewCharacter)
        Character = NewCharacter
        Humanoid = Character:WaitForChild("Humanoid")
        HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
        isAttacking = false
    end)

    local RandomGenerator = Random.new()
    local trackDistance = maxDistance or 12

    HitboxTrackerConnection = RunService.Heartbeat:Connect(function()
        if not HitboxTrackerEnabled or not HumanoidRootPart then
            return
        end

        local target
        local nearestDistance = trackDistance

        local function findTarget(objects)
            for _, object in pairs(objects) do
                if object == Character or not object:FindFirstChild("HumanoidRootPart") then
                    continue
                end
                
                if NoKiller and object.Parent == workspace.Players.Killers then
                    continue
                end
                
                if NoSurvivor and object.Parent == workspace.Players.Survivors then
                    continue
                end

                local distance = (object.HumanoidRootPart.Position - HumanoidRootPart.Position).Magnitude

                if distance < nearestDistance then
                    nearestDistance = distance
                    target = object
                end
            end
        end

        findTarget(workspace.Players:GetDescendants())
        if not NoNPC then
            findTarget(workspace.Map:FindFirstChild("NPCs", true):GetChildren())
        end

        task.wait(0.1)

        local oldVelocity = HumanoidRootPart.Velocity
        local neededVelocity =
        (target.HumanoidRootPart.Position + Vector3.new(
            RandomGenerator:NextNumber(-1.5, 1.5),
            0,
            RandomGenerator:NextNumber(-1.5, 1.5)
        ) + (target.HumanoidRootPart.Velocity * (Player:GetNetworkPing() * 1.25))
            - HumanoidRootPart.Position
        ) / (Player:GetNetworkPing() * 1)

        HumanoidRootPart.Velocity = neededVelocity

        RunService.RenderStepped:Wait()

        HumanoidRootPart.Velocity = oldVelocity
        
    end)
end

local function StopHitboxTracker()
    HitboxTrackerEnabled = false
    isAttacking = false
    if HitboxTrackerConnection then
        HitboxTrackerConnection:Disconnect()
        HitboxTrackerConnection = nil
    end
end

TabHandles.Sk2:Toggle({
    Title = "启用碰撞跟踪",
    Desc = "碰撞",
    Value = false,
    Callback = function(state)
        if state then
            StartHitboxTracker(HitStud)
        else
            StopHitboxTracker()
        end
    end
})

TabHandles.Sk2:Input({
    Title = "距离",
    Desc = "距离",
    Value = "20",
    Callback = function(input) 
        HitStud = tonumber(input)
    end
})

TabHandles.Sk2:Divider()

TabHandles.Sk2:Toggle({
    Title = "无视NPC",
    Desc = '击杀',
    Value = false,
    Callback = function(state)
        NoNPC = state
    end
})

TabHandles.Sk2:Toggle({
    Title = "无视幸存者",
    Desc = '击杀',
    Value = false,
    Callback = function(state)
        NoSurvivor = state
    end
})

TabHandles.Sk2:Toggle({
    Title = "无视杀手",
    Desc = '击杀',
    Value = false,
    Callback = function(state)
        NoKiller = state
    end
})

local Hit1 = TabHandles.Sk2:Section({ 
    Title = "修改碰撞体积",
    Desc = "体积",
    Icon = 'atom',
    ImageSize = 30,
    Opened = true,
})

local HitB = 2
local x1, y1, z1 = 2.5, 3.5, 2.5
local Hit1 = Vector3.new(x1 * HitB, y1 * HitB, z1 * HitB)
local x2, y2, z2 = 3, 6, 3
local Hit2 = Vector3.new(x2 * HitB, y2 * HitB, z2 * HitB)

local AddState = false
TabHandles.Sk2:Toggle({
    Title = "启用碰撞增加",
    Desc = "碰撞",
    Value = false,
    Callback = function(state)
        AddState = state
        local character = LocalPlayer.Character
        if state then
            if character then
                while AddState do
                    if character:FindFirstChild('CollisionHitbox') and character:FindFirstChild('QueryHitbox') then
                        character:FindFirstChild('CollisionHitbox').Size = Hit1
                        character:FindFirstChild('QueryHitbox').Size = Hit2
                    end
                    wait()
                end
            end
        else
            if character:FindFirstChild('CollisionHitbox') and character:FindFirstChild('QueryHitbox') then
                character:FindFirstChild('CollisionHitbox').Size = Vector3.new(x1, y1, z1)
                character:FindFirstChild('QueryHitbox').Size = Vector3.new(x2, y2, z2)
            end
        end
    end
})

TabHandles.Sk2:Input({
    Title = "输入碰撞体积",
    Desc = "输入倍数",
    Value = "1",
    Callback = function(input) 
        local newHitB = tonumber(input)
        if newHitB and newHitB > 0 then
            HitB = newHitB
            Hit1 = Vector3.new(x1 * HitB, y1 * HitB, z1 * HitB)
            Hit2 = Vector3.new(x2 * HitB, y2 * HitB, z2 * HitB)
        else
            notify('增加', '请输入数字！', 2, 'atom')
        end
    end
})

local NotHit = false
TabHandles.Sk2:Toggle({
    Title = "取消碰撞体积",
    Desc = "碰撞",
    Value = false,
    Callback = function(state)
        NotHit = state
        local character = LocalPlayer.Character
        if state then
            while NotHit do
                if character then
                    if character:FindFirstChild('CollisionHitbox') and character:FindFirstChild('QueryHitbox') then
                        character:FindFirstChild('CollisionHitbox').Size = Vector3.new(0, 0, 0)
                        character:FindFirstChild('CollisionHitbox').CanCollide = false
                        character:FindFirstChild('CollisionHitbox').CanQuery = false
                        character:FindFirstChild('QueryHitbox').Size = Vector3.new(0, 0, 0)
                        character:FindFirstChild('QueryHitbox').CanCollide = false
                        character:FindFirstChild('QueryHitbox').CanQuery = false
                        character:FindFirstChild('HumanoidRootPart').CanCollide = false
                        character:FindFirstChild('HumanoidRootPart').CanQuery = false
                        character:FindFirstChild('HumanoidRootPart').CanTouch = false
                    end
                end
                wait()
            end
        else
            if character then
                if character:FindFirstChild('CollisionHitbox') and character:FindFirstChild('QueryHitbox') then
                    character:FindFirstChild('CollisionHitbox').Size = Hit1
                    character:FindFirstChild('CollisionHitbox').CanCollide = true
                    character:FindFirstChild('CollisionHitbox').CanQuery = true
                    character:FindFirstChild('QueryHitbox').Size = Hit2
                    character:FindFirstChild('QueryHitbox').CanCollide = true
                    character:FindFirstChild('QueryHitbox').CanQuery = true
                    character:FindFirstChild('HumanoidRootPart').CanCollide = true
                    character:FindFirstChild('HumanoidRootPart').CanQuery = true
                    character:FindFirstChild('HumanoidRootPart').CanTouch = true
                end
            end            
        end
    end
})

local MousePlayer

local SelectPlayer = TabHandles.Sk4:Dropdown({
    Title = "选择玩家",
    Desc = "选择",
    Values = PlayerList,
    Value = "请选择",
    Callback = function(value) 
        MousePlayer = value
    end
})

local AutoKill1 = TabHandles.Sk4:Section({ 
    Title = "传送选择",
    Desc = "传送",
    Icon = 'bone',
    ImageSize = 30,
    Opened = true,
})

TabHandles.Sk4:Button({
    Title = "传送到此玩家",
    Desc = "传送",
    Locked = false,
    Callback = function()
        if not LocalPlayer or not LocalPlayer.Character then return end
        local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        
        for _, v in pairs(workspace.Players.Survivors:GetChildren()) do
            if v:GetAttribute("Username") == MousePlayer then
                local targetHrp = v:FindFirstChild("HumanoidRootPart")
                if targetHrp then
                    hrp.CFrame = targetHrp.CFrame
                    break
                end
            end
        end
    end
})

local WhileTp = false
TabHandles.Sk4:Toggle({
    Title = "重复传送到此玩家",
    Desc = "传送",
    Value = false,
    Callback = function(state)
        WhileTp = state
        
        if state then
            spawn(function()
                while WhileTp do
                    if not LocalPlayer or not LocalPlayer.Character then 
                        task.wait(0.1)
                        continue 
                    end
                    
                    local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if not hrp then 
                        task.wait(0.1)
                        continue 
                    end
                    
                    for _, v in pairs(workspace.Players.Survivors:GetChildren()) do
                        if not WhileTp then break end
                        
                        if v:GetAttribute("Username") == MousePlayer then
                            local targetHrp = v:FindFirstChild("HumanoidRootPart")
                            if targetHrp then
                                hrp.CFrame = targetHrp.CFrame
                            end
                            break
                        end
                    end
                    
                    task.wait(0.1)
                end
            end)
        end
    end
})

local AutoKill2 = TabHandles.Sk4:Section({ 
    Title = "自动击杀",
    Desc = "击杀",
    Icon = 'skull',
    ImageSize = 30,
    Opened = true,
})

local AutoKill = false
TabHandles.Sk4:Toggle({
    Title = "自动击杀",
    Desc = "传送",
    Value = false,
    Callback = function(state)
        AutoKill = state
        
        if state then
            spawn(function()
                while AutoKill do
                    if not LocalPlayer or not LocalPlayer.Character then 
                        task.wait(0.1)
                        continue 
                    end
                    
                    local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if not hrp then 
                        task.wait(0.1)
                        continue 
                    end
                    
                    for _, v in pairs(workspace.Players.Survivors:GetChildren()) do
                        if not AutoKill then break end
                        
                        if v:GetAttribute("Username") == MousePlayer then
                            local targetHrp = v:FindFirstChild("HumanoidRootPart")
                            if targetHrp then
                                hrp.CFrame = targetHrp.CFrame
                                game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Network"):WaitForChild("RemoteEvent"):FireServer("UseActorAbility", {buffer.fromstring("\"Slash\"")})
                                game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Network"):WaitForChild("RemoteEvent"):FireServer("UseActorAbility", {buffer.fromstring("\"Stab\"")})
                                game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Network"):WaitForChild("RemoteEvent"):FireServer("UseActorAbility", {buffer.fromstring("\"Punch\"")})
                                game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Network"):WaitForChild("RemoteEvent"):FireServer("UseActorAbility", {buffer.fromstring("\"Carving Slash\"")})                            
                                                            
                            end
                            break
                        end
                    end
                    
                    task.wait(0.1)
                end
            end)
        end
    end
})

local SelectItem1, SelectItem2 = '未选择'

local WP1 = TabHandles.WP1:Section({ 
    Title = "传送物品",
    Icon = 'package-open',
    ImageSize = 30,
    Opened = true,
})

TabHandles.WP1:Dropdown({
    Title = "选择你要传送的物品",
    Desc = "选择",
    Values = {"可乐", "医疗包"},
    Value = "请选择物品",
    Callback = function(value) 
        local ItemList = {
            ['可乐'] = 'BloxyCola',
            ['医疗包'] = 'Medkit'
        }

        SelectItem1 = ItemList[value]
    end
})

TabHandles.WP1:Button({
    Title = "开始传送",
    Desc = "传送",
    Locked = false,
    Callback = function()
        if SelectItem1 == '未选择' then
            notify('传送物品', '请你选择物品!', 2, 'hand')
        end

        local State = false
        local rootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
        
        for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
            if Item.Name == SelectItem1 then
                State = true
                Item:FindFirstChild('ItemRoot').CFrame = rootPart.CFrame + rootPart.CFrame.LookVector * 4
                break
            end
        end
        
        for _, Item in pairs(workspace:GetChildren()) do
            if Item.Name == SelectItem1 then
                State = true
                if Item:IsA("BasePart") or Item:IsA("Model") then
                    Item:FindFirstChild('ItemRoot').CFrame = rootPart.CFrame + rootPart.CFrame.LookVector * 4
                    break
                end
            end
        end

        if not State then
            notify('传送物品', '未找到物品!', 2, 'hand')
        end
    end
})

TabHandles.WP1:Divider()

TabHandles.WP1:Button({
    Title = "传送所有物品",
    Desc = "传送",
    Locked = false,
    Callback = function()
        local State = false
        local rootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
        
        for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
            if Item.Name == 'BloxyCola' or Item.Name == 'Medkit' then
                State = true
                Item:FindFirstChild('ItemRoot').CFrame = rootPart.CFrame + rootPart.CFrame.LookVector * 4
            end
        end
        for _, Item in pairs(workspace:GetChildren()) do
            if Item.Name == 'BloxyCola' or Item.Name == 'Medkit' then
                State = true
                Item:FindFirstChild('ItemRoot').CFrame = rootPart.CFrame + rootPart.CFrame.LookVector * 4
            end
        end

        if not State then
            notify('传送物品', '未找到物品!', 2, 'hand')
        end
    end
})

local WP2 = TabHandles.WP2:Section({ 
    Title = "捡拾物品",
    Icon = 'hammer',
    ImageSize = 30,
    Opened = true,
})

TabHandles.WP2:Dropdown({
    Title = "选择你要捡起的物品",
    Desc = "选择",
    Values = {"可乐", "医疗包"},
    Value = "请选择物品",
    Callback = function(value) 
        local ItemList = {
            ['可乐'] = 'BloxyCola',
            ['医疗包'] = 'Medkit'
        }

        SelectItem2 = ItemList[value]
    end
})

TabHandles.WP2:Button({
    Title = "开始捡拾",
    Desc = "捡起",
    Locked = false,
    Callback = function()
        if not SelectItem2 then
            notify('捡拾物品', '请你选择物品!', 2, 'hand')
            return
        end

        local State = false
        local rootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
        if not rootPart then return end
        
        for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
            if Item.Name == SelectItem2 then
                State = true
                local oldPos = rootPart.CFrame
                rootPart.CFrame = Item:FindFirstChild('ItemRoot').CFrame * CFrame.new(0, 3, 0)
                task.wait(0.1)
                local itemRoot = Item:FindFirstChild("ItemRoot")
                if itemRoot then
                    local prompt = itemRoot:FindFirstChild('ProximityPrompt')
                    if prompt then
                        fireproximityprompt(prompt)
                    end
                end
                task.wait(0.1)
                rootPart.CFrame = oldPos
            end
        end
        
        for _, Item in pairs(workspace:GetChildren()) do
            if Item.Name == SelectItem2 then
                State = true
                local oldPos = rootPart.CFrame
                rootPart.CFrame = Item:FindFirstChild('ItemRoot').CFrame * CFrame.new(0, 3, 0)
                task.wait(0.1)
                local itemRoot = Item:FindFirstChild("ItemRoot")
                if itemRoot then
                    local prompt = itemRoot:FindFirstChild('ProximityPrompt')
                    if prompt then
                        fireproximityprompt(prompt)
                    end
                end
                task.wait(0.1)
                rootPart.CFrame = oldPos
            end
        end

        if not State then
            notify('捡拾物品', '未找到物品!', 2, 'hand')
        end
    end
})

TabHandles.WP2:Divider()

TabHandles.WP2:Button({
    Title = "捡拾所有物品",
    Desc = "传送",
    Locked = false,
    Callback = function()
        local State = false
        local rootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild('HumanoidRootPart')
        if not rootPart then return end
        
        for _, Item in pairs(workspace.Map.Ingame.Map:GetChildren()) do
            if Item.Name == 'BloxyCola' or Item.Name == 'Medkit' then
                State = true
                local oldPos = rootPart.CFrame
                rootPart.CFrame = Item:FindFirstChild('ItemRoot').CFrame * CFrame.new(0, 3, 0)
                task.wait(0.1)
                local itemRoot = Item:FindFirstChild("ItemRoot")
                if itemRoot then
                    local prompt = itemRoot:FindFirstChild('ProximityPrompt')
                    if prompt then
                        fireproximityprompt(prompt)
                    end
                end
                task.wait(0.1)
                rootPart.CFrame = oldPos
            end
        end
        for _, Item in pairs(workspace:GetChildren()) do
            if Item.Name == 'BloxyCola' or Item.Name == 'Medkit' then
                State = true
                local oldPos = rootPart.CFrame
                rootPart.CFrame = Item:FindFirstChild('ItemRoot').CFrame * CFrame.new(0, 3, 0)
                task.wait(0.1)
                local itemRoot = Item:FindFirstChild("ItemRoot")
                if itemRoot then
                    local prompt = itemRoot:FindFirstChild('ProximityPrompt')
                    if prompt then
                        fireproximityprompt(prompt)
                    end
                end
                task.wait(0.1)
                rootPart.CFrame = oldPos
            end
        end

        if not State then
            notify('捡拾物品', '未找到物品!', 2, 'hand')
        end
    end
})

local WP3 = TabHandles.WP3:Section({ 
    Title = "披萨",
    Icon = 'pizza',
    ImageSize = 30,
    Opened = true,
})

local Health = 75
local AutoEatPizza = false
TabHandles.WP3:Slider({
    Title = "生命阈值",
    Desc = "最小生命",
    Step = 1,
    Value = { Min = 0, Max = 100, Default = 75 },
    Callback = function(value)
        Health = tonumber(value)
    end
})

TabHandles.WP3:Toggle({
    Title = "自动吃披萨",
    Desc = "自动",
    Value = false,
    Callback = function(state) 
        AutoEatPizza = state
        if state then
            while AutoEatPizza do
                wait()
                if LocalPlayer.Character:FindFirstChild('Humanoid').Health > Health then
                    return
                end
                for _, v in pairs(workspace.Map.Ingame:GetChildren()) do
                    if v.Name == 'Pizza' then
                        local oldPos = LocalPlayer.Character:FindFirstChild('HumanoidRootPart').CFrame
                        LocalPlayer.Character:FindFirstChild('HumanoidRootPart').CFrame = v.CFrame
                        task.wait(0.1)
                        LocalPlayer.Character:FindFirstChild('HumanoidRootPart').CFrame = oldPos
                    end
                end
            end
        end
    end
})

Window:OnClose(function()
    if game:GetService("UserInputService").KeyboardEnabled then
        WindUI:Notify({
            Title = "通知",
            Content = "按下B键再次打开",
            Duration = 3
        })    
    end
end)

game.Players.PlayerAdded:Connect(function(Pl)
	table.insert(PlayerList, Pl.Name)
    SelectPlayer:Refresh(PlayerList)
end)

game.Players.PlayerRemoving:Connect(function(Pl)
	table.remove(PlayerList, Pl.Name)
    SelectPlayer:Refresh(PlayerList)
end)
end
local function fmdh()
local gs = function(service)
    return game:GetService(service)
end

local lp = gs("Players").LocalPlayer
local hrp = lp.Character:FindFirstChild("HumanoidRootPart")
local pos = lp.Character.HumanoidRootPart.CFrame + Vector3.new(0, 5, 0)
local ME = game.Players.LocalPlayer.Character.HumanoidRootPart
local Mouse = game:GetService('Players').LocalPlayer:GetMouse()
local CurrentSlot = game.Players.LocalPlayer:WaitForChild("CurrentSaveSlot").Value
local ScriptLoadOrSave = false
local CurrentlySavingOrLoading = game.Players.LocalPlayer:WaitForChild("CurrentlySavingOrLoading")
local mouse = game.Players.LocalPlayer:GetMouse()

local function notify(title, content, duration, Image)
    WindUI:Notify({
        Title = title,
        Content = content,
        Icon = Image or 'info',
        IconThemed = true,
        Duration = duration or 5,
    })
end

local dyzh = {
    axedupe = false,
    soltnumber = "1",
    waterwalk = false,
    awaysday = false,
    awaysdnight = false,
    nofog = false,
    axeflying = false,
    playernamedied = "",
    tptree = "",
    moneyaoumt = 1,
    moneytoplayername = "",
    donationRecipient = tostring(game.Players.LocalPlayer),
    autodropae = false,
    farAxeEquip = nil,
    cuttreeselect = "Generic",
    autofarm = false,
    PlankToBlueprint = nil,
    plankModel = nil,
    blueprintModel = nil,
    saymege = "",
    autosay = false,
    saymount = 1,
    sayfast = false,
    autofarm1 = false,
    bringamount = 1,
    bringtree = false,
    dxmz = "",
    color = 0,
    zlwjia = "",
    mtwjia = nil,
    zix = 1,
    zlz = 3,
    axeFling = nil,
    itemtoopen = "",
    openItem = nil,
    car = nil,
    load = false,
    autobuyamount = 1,
    autopick = false,
    loaddupeaxewaittime = 3.1,
    walkspeed = 16,
    JumpPower = 50,
    pickupaxeamount = 1,
    whthmose = false,
    itemset = nil,
    LoneCaveAxeDetection = nil,
    cuttree = false,
    LoneCaveCharacterAddedDetection = nil,
    LoneCaveDeathDetection = nil,
    lovecavecutcframe = nil,
    lovecavepast = nil,
    zlmt = nil,
    shuzhe = false,
    modwood = false,
    tchonmt = nil,
    cskais = false,
    dledetree = false,
    delereeset = nil,
    treecutset = nil,
    autobuyset = nil,
    wood = 7,
    cswjia = nil,
    boxOpenConnection = nil,
    autobuystop = false,
    dropdown = {},
    autocsdx = nil,
    kuangxiu = nil,
    xzemuban = false,
    daiwp = false,
    stopcar = false
}

spawn(function()
    while task.wait() do
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.Text = "德与中山付费脚本"
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.TextColor3 =
            Color3.fromRGB(255, 255, 255)
        wait(1)
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.Text =
            "德与中山牛逼"
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.TextColor3 =
            Color3.fromRGB(255, 255, 255)
        wait(1)
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.Text =
            "优质良心的脚本"
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.TextColor3 =
            Color3.fromRGB(255, 255, 255)
        wait(1)
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.Text = "谢谢您使用"
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.TextColor3 =
            Color3.fromRGB(255, 255, 255)
        wait(1)
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.Text = lp.Name
        game:GetService("Workspace").Stores.WoodRUs.Parts.PREMIUMSELECTION.SurfaceGui.TextLabel.TextColor3 =
            Color3.fromRGB(255, 255, 255)
        wait(1)
    end
end)
game:GetService("Workspace").Stores.WoodRUs.Parts.OPEN24HOURS.SurfaceGui.TextLabel.Text = "主作者: 各大脚本制作者";
game:GetService("Workspace").Stores.WoodRUs.Parts.OPEN24HOURS.SurfaceGui.TextLabel.TextColor3 =
    Color3.fromRGB(255, 255, 255)
game:GetService("Workspace").Stores.WoodRUs.Parts.SELLWOOD.SurfaceGui.TextLabel.Text = "作者: 汉堡";
game:GetService("Workspace").Stores.WoodRUs.Parts.SELLWOOD.SurfaceGui.TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
game:GetService("Workspace").Stores.WoodRUs.Parts.WOODDROPOFF.SurfaceGui.TextLabel.Text = "感谢使用德与中山";
game:GetService("Workspace").Stores.WoodRUs.Parts.WOODDROPOFF.SurfaceGui.TextLabel.TextColor3 =
    Color3.fromRGB(255, 255, 255)

local function carTeleport(cframe)
    if game.Players.LocalPlayer.Character then
        Character = game.Players.LocalPlayer.Character
        if Character.Humanoid.SeatPart ~= nil then
            Car = Character.Humanoid.SeatPart.Parent
            spawn(function()
                for i = 1, 5 do
                    wait()
                    Car:SetPrimaryPartCFrame(cframe *
                                                 CFrame.Angles(math.rad(Character.HumanoidRootPart.Orientation.x),
                            math.rad(Character.HumanoidRootPart.Orientation.y), 0))
                    game.ReplicatedStorage.Interaction.ClientRequestOwnership:FireServer(Car.Main)
                    game.ReplicatedStorage.Interaction.ClientIsDragging:FireServer(Car.Main)
                end
            end)
        end
    end
end

local function Teleport(GetCFrame)
    lp.Character:FindFirstChild("HumanoidRootPart").CFrame = GetCFrame
end

local function Light(value)
    if value then
        local light = Instance.new('PointLight', lp.Character.Head)
        light.Name = 'dyzh'
        light.Range = 150
        light.Brightness = 1.7
    else
        pcall(function()
            lp.Character.Head.dyzh:remove();
        end);
    end
end

local function getTools()
    lp.Character.Humanoid:UnequipTools()
    local tools = {}
    for _, v in pairs(lp.Backpack:GetChildren()) do
        if v.Name ~= "BlueprintTool" then
            table.insert(tools, v)
        end
    end
    return tools
end

local function getToolStats(toolName)
    if typeof(toolName) ~= "string" then
        toolName = toolName.ToolName.Value
    end
    return require(gs("ReplicatedStorage").AxeClasses['AxeClass_' .. toolName]).new()
end

local getTool = function()
    return lp.Character:FindFirstChild("Tool") or lp.Backpack:FindFirstChild("Tool")
end

local function getBestAxe(treeClass)
    local tools = getTools()
    if #tools == 0 then
        notify("提示", "你需要斧头", 4)
        return false
    end
    local toolStats = {}
    local tool
    for _, v in next, tools do
        if treeClass == "LoneCave" and v.ToolName.Value == "EndTimesAxe" then
            tool = v
            break
        end
        local axeStats = getToolStats(v)
        if axeStats.SpecialTrees and axeStats.SpecialTrees[treeClass] then
            for i, v in next, axeStats.SpecialTrees[treeClass] do
                axeStats[i] = v
            end
        end
        table.insert(toolStats, {
            tool = v,
            damage = axeStats.Damage
        })
    end
    if not tool and treeClass == "LoneCave" then
        notify("提示", "你需要末日斧头", 4)
        return false
    end
    table.sort(toolStats, function(a, b)
        return a.damage > b.damage
    end)
    return true, tool or toolStats[1].tool
end

local function cutPart(event, section, height, tool, treeClass)
    local axeStats = getToolStats(tool)
    if axeStats.SpecialTrees and axeStats.SpecialTrees[treeClass] then
        for i, v in next, axeStats.SpecialTrees[treeClass] do
            axeStats[i] = v
        end
    end
    game:GetService 'ReplicatedStorage'.Interaction.RemoteProxy:FireServer(event, {
        tool = tool,
        faceVector = Vector3.new(-1, 0, 0),
        height = height or 0.3,
        sectionId = section or 1,
        hitPoints = axeStats.Damage,
        cooldown = axeStats.SwingCooldown,
        cuttingClass = "Axe"
    })
end

local treeListener = function(treeClass, callback)
    local childAdded
    childAdded = workspace.LogModels.ChildAdded:Connect(function(child)
        local owner = child:WaitForChild("Owner")
        if owner.Value == lp and child.TreeClass.Value == treeClass then
            childAdded:Disconnect()
            callback(child)
        end
    end)
end

local getBiggestTree = function(treeClass)
    for _, v in next, workspace:children() do
        if tostring(v) == "TreeRegion" then
            for _, g in next, v:children() do
                if g:FindFirstChild("TreeClass") and tostring(g.TreeClass.Value) == treeClass and
                    g:FindFirstChild("Owner") then
                    if g.Owner.Value == nil or tostring(g.Owner.Value) == tostring(game.Players.LocalPlayer) then
                        if #g:children() > 5 and g:FindFirstChild("WoodSection") then
                            for h, j in next, g:children() do
                                if j:FindFirstChild("ID") and j.ID.Value == 1 and j.Size.Y > .5 then
                                    return j;
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return false;
end

local function bringTree(treeClass)
    local success, data = getBestAxe(treeClass)
    if not success then
        return
    end

    local axeStats = getToolStats(data)
    local treeCut = false

    treeListener(treeClass, function(tree)
        tree:WaitForChild('Owner', 60)
        tree.PrimaryPart = tree:FindFirstChild("WoodSection")
        treeCut = true

        task.spawn(function()
            for i = 1, 60 do
                game.ReplicatedStorage.Interaction.ClientIsDragging:FireServer(tree)
                game["Run Service"].Heartbeat:wait()
            end
        end)
        
        task.wait(0.1)
        tree.PrimaryPart = tree.WoodSection
        spawn(function()
            for i = 1, 60 do
                tree.PrimaryPart.Velocity = Vector3.new(0, 0, 0)
                tree:PivotTo(dyzh.treecutset)
                game["Run Service"].Heartbeat:wait()
            end
        end)

        wait(0.5)
        if treeClass == "LoneCave" then
            lp.Character.Head:Destroy()
            lp.CharacterAdded:Wait()
            wait(2)
        end

        Teleport(dyzh.treecutset)
    end)

    if treeClass == "LoneCave" then
        local GM = game.Players.LocalPlayer.Character.HumanoidRootPart.RootJoint
        GM:Clone().Parent = game.Players.LocalPlayer.Character.HumanoidRootPart
        GM:Destroy()
    end
    
    local tree = getBiggestTree(treeClass)
    if not tree then
        notify("提示", "没有找到树", 3)
        return
    end

    spawn(function()
        repeat
            Teleport(tree.CFrame + Vector3.new(3, 3, 0))
            cutPart(tree.Parent.CutEvent, 1, 0.3, data, treeClass)
            game["Run Service"].Heartbeat:wait()
        until treeCut
    end)
end

local function droptool(Position)
    local aQ = game.Players.LocalPlayer.Character;
    if aQ:FindFirstChildOfClass "Tool" then
        local y = aQ:FindFirstChildOfClass "Tool"
        if y:FindFirstChild("ToolName") then
            game.ReplicatedStorage.Interaction.ClientInteracted:FireServer(y, "Drop tool", Position or
                game.Players.LocalPlayer.Character.Head.CFrame)
        end
    end
    for a, b in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
        if b.Name == "Tool" and b.ClassName == "Tool" then
            game.ReplicatedStorage.Interaction.ClientInteracted:FireServer(b, "Drop tool", lp.Character:FindFirstChild("HumanoidRootPart").Position)
        end
    end
end

local function GetTree()
    OldPos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
    for i, v in next, game:GetService("Workspace").LogModels:GetChildren() do
        if v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer then
            if not v.PrimaryPart then
                v.PrimaryPart = v:FindFirstChild("WoodSection")
            end
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(
                v:FindFirstChild("WoodSection").CFrame.p)
            spawn(function()
                for i = 1, 50 do
                    game.ReplicatedStorage.Interaction.ClientIsDragging:FireServer(v)
                    task.wait()
                end
            end)
            for i = 1, 50 do
                task.wait()
                v:PivotTo(OldPos)
            end
            task.wait()
        end
    end
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = OldPos
end

local function GetLog()
    local logFolder = getPlanks();
    local oldPos = game:GetService('Players').LocalPlayer.Character.HumanoidRootPart.CFrame;
    for _, log in next, logFolder do
        if log:FindFirstChild('WoodSection') then

            spawn(function()
                for i = 1, 20 do

                    game:GetService('ReplicatedStorage').Interaction.ClientIsDragging:FireServer(log);
                    task.wait();
                end
            end)
            wait(0.18)
            if not log.PrimaryPart then
                log.PrimaryPart = log.WoodSection;
            end
            log:SetPrimaryPartCFrame(oldPos);
        end
    end
end

local GetShopID = {
    ["WoodRus"] = {
        ["Character"] = workspace.Stores.WoodRUs.Thom,
        ["Name"] = "Thom",
        ["ID"] = tonumber(7)
    },
    ["FurnitureStore"] = {
        ["Character"] = workspace.Stores.FurnitureStore.Corey,
        ["Name"] = "Corey",
        ["ID"] = tonumber(8)
    },
    ["CarStore"] = {
        ["Character"] = workspace.Stores.CarStore.Jenny,
        ["Name"] = "Jenny",
        ["ID"] = tonumber(9)
    },
    ["ShackShop"] = {
        ["Character"] = workspace.Stores.ShackShop.Bob,
        ["Name"] = "Bob",
        ["ID"] = tonumber(10)
    },
    ["FineArt"] = {
        ["Character"] = workspace.Stores.FineArt.Timothy,
        ["Name"] = "Timothy",
        ["ID"] = tonumber(11)
    },
    ["LogicStore"] = {
        ["Character"] = workspace.Stores.LogicStore.Lincoln,
        ["Name"] = "Lincoln",
        ["ID"] = tonumber(12)
    }
}

local BuyItem = function(m)
    game.ReplicatedStorage.NPCDialog.PlayerChatted:InvokeServer(m, "ConfirmPurchase")
end

local function finditem(o)
    for e, h in next, workspace.Stores:children() do
        if h.Name == "ShopItems" and h:FindFirstChild "Box" then
            for i, j in next, h:children() do
                if j.BoxItemName.Value == o then
                    for i, w in next, h:children() do
                        if w.BoxItemName.Value == "Bed1" or w.BoxItemName.Value == "Seat_Couch" then
                            ID = GetShopID.FurnitureStore.ID
                            Cashier = game.Workspace.Stores.FurnitureStore.Corey.HumanoidRootPart.CFrame
                            Counter = game.Workspace.Stores.FurnitureStore.Counter.CFrame + Vector3.new(0, .4, 0)
                        elseif w.BoxItemName.Value == "Sawmill" or w.BoxItemName.Value == "Sawmill2" then
                            ID = GetShopID.WoodRus.ID
                            Cashier = game.Workspace.Stores.WoodRUs.Thom.HumanoidRootPart.CFrame
                            Counter = game.Workspace.Stores.WoodRUs.Counter.CFrame + Vector3.new(0, .4, 0)
                        elseif w.BoxItemName.Value == "Trailer2" or w.BoxItemName.Value == "UtilityTruck2" then
                            ID = GetShopID.CarStore.ID
                            Cashier = game.Workspace.Stores.CarStore.Jenny.HumanoidRootPart.CFrame
                            Counter = game.Workspace.Stores.CarStore.Counter.CFrame + Vector3.new(0, .4, 0)
                        elseif w.BoxItemName.Value == "CanOfWorms" or w.BoxItemName.Value == "Dynamite" then
                            ID = GetShopID.ShackShop.ID
                            Cashier = game.Workspace.Stores.ShackShop.Bob.HumanoidRootPart.CFrame
                            Counter = game.Workspace.Stores.ShackShop.Counter.CFrame + Vector3.new(0, .4, 0)
                        elseif w.BoxItemName.Value == "Painting1" or w.BoxItemName.Value == "Painting2" then
                            ID = GetShopID.FineArt.ID
                            Cashier = game.Workspace.Stores.FineArt.Timothy.HumanoidRootPart.CFrame
                            Counter = game.Workspace.Stores.FineArt.Counter.CFrame + Vector3.new(0, .4, 0)
                        elseif w.BoxItemName.Value == "GateXOR" or w.BoxItemName.Value == "NeonWireOrange" then
                            ID = GetShopID.LogicStore.ID
                            Cashier = game.Workspace.Stores.LogicStore.Lincoln.HumanoidRootPart.CFrame
                            Counter = game.Workspace.Stores.LogicStore.Counter.CFrame + Vector3.new(0, .4, 0)
                        end
                    end
                    return {j, Cashier, ID, Counter}
                end
            end
        end
    end
end

local function autobuyv2(o)
    local item = nil
    local ltem = nil

    item = finditem(o)

    if item == nil then
        notify("德与中山", "没有找到商品或者没有刷新，请你等待", 4)
        repeat
            task.wait()
            item = finditem(o)
        until item ~= nil
    end

    ltem = item[1]

    Teleport(ltem.Main.CFrame)
    task.wait()

    game:GetService('RunService').Stepped:wait()
    for e = 1, 15 do
        game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(ltem)
        ltem:PivotTo(item[4])
        game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(ltem)
        game:GetService('RunService').Stepped:wait()
    end
    Teleport(item[4] + Vector3.new(5, 0, 5))

    repeat
        BuyItem(item[3])
        game:GetService('RunService').Stepped:wait()
    until tostring(ltem.Parent) ~= "ShopItems"

    return o
end

local function autobuy(o, r)
    dyzh.autocsdx = game.Workspace.PlayerModels.ChildAdded:Connect(function(v)
        v:WaitForChild('Owner', 60)
        if v.Owner.Value == lp then
            for i = 1, 20 do
                game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(v)
                v:PivotTo(dyzh.autobuyset)
                game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(v)
                game:GetService('RunService').Stepped:wait()
            end
        end
    end)
    for e = 1, r do
        if dyzh.autobuystop == false then
            autobuyv2(o)
            task.wait()
        end
    end
    spawn(function()
        wait(1)
        dyzh.autocsdx:Disconnect()
        dyzh.autocsdx = nil
    end)
    return o, r
end

local function getCFrame(part)
    local part = part or (lp.Character and lp.Character.HumanoidRootPart)
    if not part then
        return
    end
    return part.CFrame
end

local function getPosition(part)
    return getCFrame(part).Position
end


local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "平板"
        else
            return "手机"
        end
    else
        return "电脑"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "手机" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "平板" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local playerName = lp.Name
local displayName = lp.DisplayName

local Tab1 = Window:Section({ Title = "玩家功能", Opened = false, Icon = "user"})
local Tab = Window:Section({ Title = "基础功能", Opened = false, Icon = "blocks"})
local TabTree = Window:Section({ Title = "树功能", Opened = false, Icon = "tree-pine"})
local Tab2 = Window:Section({ Title = "环境功能", Opened = false, Icon = "sun"})
local Tab3 = Window:Section({ Title = "自动购买", Opened = false, Icon = "shopping-cart"})


local Announcement = Tab1:Tab({ Title = "公告", Icon = "folder" })
local Section3 = Tab1:Tab({ Title = "玩家", Icon = "folder" })
local Sectioncs = Tab1:Tab({ Title = "玩家传送", Icon = "folder" })
local Sectionqccs = Tab1:Tab({ Title = "汽车传送", Icon = "folder" })
local SectionAxe = Tab:Tab({ Title = "斧头", Icon = "folder" })
local Sectionjd = Tab:Tab({ Title = "基地", Icon = "folder" })
local Sectionchuanson = Tab:Tab({ Title = "传送东西", Icon = "folder" })
local Section5 = TabTree:Tab({ Title = "木头", Icon = "folder" })
local Sectionhuanjin = Tab2:Tab({ Title = "环境", Icon = "folder" })
local Sectionautobuy = Tab3:Tab({ Title = "自动购买", Icon = "folder" })


Announcement:Paragraph({
    Title = "欢迎尊贵的用户",
    Desc = "此脚本会一直更新 感谢白名单使用者",
    Image = "info",
    ImageSize = 15
})

Announcement:Paragraph({
    Title = "玩家",
    Desc = "尊敬的用户: " .. lp.Name .. "欢迎使用",
    Image = "user",
    ImageSize = 12
})

Announcement:Paragraph({
    Title = "设备",
    Desc = "你的使用设备: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

Announcement:Paragraph({
    Title = "设备",
    Desc = "你的注入器: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})
Section3:Slider({
    Title = "玩家速度",
    Desc = "玩家的速度",
    Step = 1,
    Value = {
        Min = 16,
        Max = 200,
        Default = 16,
    },
    Callback = function(value)
        spawn(function()
            while task.wait() do
		        lp.Character.Humanoid.WalkSpeed = value
	        end
	    end)
    end
})

Section3:Slider({
    Title = "玩家跳跃高度",
    Desc = "玩家的跳跃高度",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        spawn(function()
            while task.wait() do
		        lp.Character.Humanoid.JumpPower = value
	        end
	    end)
    end
})

Section3:Slider({
    Title = "玩家高度",
    Desc = "玩家的高度",
    Step = 1,
    Value = {
        Min = 0,
        Max = 120,
        Default = 0,
    },
    Callback = function(value)
        lp.Character.Humanoid.HipHeight = value
    end
})

Section3:Toggle({
    Title = "自身发光",
    Desc = "光",
    Value = false,
    Callback = function(state)
        if state then
            Light(true)     
        else
            Light()       
        end
    end
})

Section3:Button({
    Title = "点击传送",
    Desc = "工具",
    Locked = false,
    Callback = function()
        mouse = game.Players.LocalPlayer:GetMouse()
        tool = Instance.new("Tool")
        tool.RequiresHandle = false
        tool.Name = "点击传送工具"
        tool.Activated:connect(function()
            local pos = mouse.Hit + Vector3.new(0, 2.5, 0)
            pos = CFrame.new(pos.X, pos.Y, pos.Z)
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = pos
        end)
        tool.Parent = game.Players.LocalPlayer.Backpack
    end
})


--传送
Sectioncs:Dropdown({
    Title = "传送到地点",
    Desc = "传送",
    Values = {'出生点', '木材反斗城', '土地商店', '桥', '码头', '椰子岛', '洞穴', '鲨鱼斧合成',
     '火山', '沼泽', '家具店', '盒子车行', '连锁逻辑店', '鲍勃的小店', '画廊', '雪山',
     '灵视神殿', '怪人', '小绿盒', '滑雪小屋', '黄金木洞穴', '小鸟斧头', "灯塔", '回家'},
    Value = "请选择",
    Multi = false,
    AllowNone = false,
    Callback = function(b)
        if b == '木材反斗城' then
            Teleport(CFrame.new(270, 4, 60));
        elseif b == '出生点' then
            Teleport(CFrame.new(174, 10.5, 66));
        elseif b == '土地商店' then
            Teleport(CFrame.new(270, 3, -98));
        elseif b == '桥' then
            Teleport(CFrame.new(112, 37, -892));
        elseif b == '码头' then
            Teleport(CFrame.new(1136, 0, -206));
        elseif b == '椰子岛' then
            Teleport(CFrame.new(2614, -4, -34));
        elseif b == '洞穴' then
            Teleport(CFrame.new(3590, -177, 415));
        elseif b == '火山' then
            Teleport(CFrame.new(-1588, 623, 1069));
        elseif b == '沼泽' then
            Teleport(CFrame.new(-1216, 131, -822));
        elseif b == '家具店' then
            Teleport(CFrame.new(486, 3, -1722));
        elseif b == '盒子车行' then
            carTeleport(CFrame.new(509, 3, -1458));
        elseif b == '雪山' then
            Teleport(CFrame.new(1487, 415, 3259));
        elseif b == '连锁逻辑店' then
            Teleport(CFrame.new(4615, 7, -794));
        elseif b == '鲍勃的小店' then
            Teleport(CFrame.new(292, 8, -2544));
        elseif b == '画廊' then
            Teleport(CFrame.new(5217, -166, 721));
        elseif b == '灵视神殿' then
            Teleport(CFrame.new(-1608, 195, 928));
        elseif b == '怪人' then
            Teleport(CFrame.new(1071, 16, 1141));
        elseif b == '小绿盒' then
            Teleport(CFrame.new(-1667, 349, 1474));
        elseif b == '滑雪小屋' then
            Teleport(CFrame.new(1244, 59, 2290));
        elseif b == '黄金木洞穴' then
            Teleport(CFrame.new(-1080, -5, -942));
        elseif b == '鲨鱼斧合成' then
            Teleport(CFrame.new(330.259735, 45.7998505, 1943.30823, 0.972010553, -8.07546598e-08, 0.234937176,
                7.63610259e-08, 1, 2.77986647e-08, -0.234937176, -9.08055142e-09, 0.972010553))
        elseif b == '小鸟斧头' then
            Teleport(CFrame.new(4813.1, 33.5, -978.8));
        elseif b == '灯塔' then
            Teleport(CFrame.new(1464.8, 356.3, 3257.2));
        else
            if b == '回家' then
                for i, v in pairs(game.Workspace.Properties:GetChildren()) do
                    if v.Owner.Value == game.Players.LocalPlayer then
                        Teleport(v.OriginSquare.CFrame + Vector3.new(0, 10, 0))
                    end
                end
            end
        end
    end
})

Sectioncs:Dropdown({
    Title = "传送到树",
    Desc = "传送",
    Values = {"普通树", "沼泽黄金", "樱花", "蓝木", "冰木", "火山木", "橡木", "巧克力木", "白桦木",
     "黄金木", "雪地松", "僵尸木", "大巧克力树", "椰子树", "幻影木"},
    Value = "请选择",
    Multi = false,
    AllowNone = false,
    Callback = function(b)
        if b == '普通树' then
            dyzh.tptree = "Generic"
        elseif b == '沼泽黄金' then
            dyzh.tptree = "GoldSwampy"
        elseif b == '樱花' then
            dyzh.tptree = "Cherry"
        elseif b == '蓝木' then
            dyzh.tptree = "CaveCrawler"
        elseif b == '冰木' then
            dyzh.tptree = "Frost"
        elseif b == '火山木' then
            dyzh.tptree = "Volcano"
        elseif b == '橡木' then
            dyzh.tptree = "Oak"
        elseif b == '巧克力木' then
            dyzh.tptree = "Walnut"
        elseif b == '白桦木' then
            dyzh.tptree = "Birch"
        elseif b == '黄金木' then
            dyzh.tptree = "SnowGlow"
        elseif b == '雪地松' then
            dyzh.tptree = "Pine"
        elseif b == '僵尸木' then
            dyzh.tptree = "GreenSwampy"
        elseif b == '大巧克力树' then
            dyzh.tptree = "Koa"
        elseif b == '椰子树' then
            dyzh.tptree = "Palm"
        elseif b == '幻影木' then
            dyzh.tptree = "LoneCave"
        end
        for i, v in pairs(game.Workspace:GetChildren()) do
            if v.Name == "TreeRegion" then
                for j, k in ipairs(v:GetChildren()) do
                    if k:FindFirstChild("TreeClass") and k.TreeClass.Value == dyzh.tptree then
                        game.Players.LocalPlayer.Character:MoveTo(k.WoodSection.Position)
                        break
                    end
                end
            end
        end
    end
})

Sectionqccs:Dropdown({
    Title = "汽车传送到地点",
    Desc = "汽车传送",
    Values = {'出生点', '木材反斗城', '土地商店', '桥', '码头', '椰子岛', '洞穴', '鲨鱼斧合成',
     '火山', '沼泽', '家具店', '盒子车行', '连锁逻辑店', '鲍勃的小店', '画廊', '雪山',
     '灵视神殿', '怪人', '小绿盒', '滑雪小屋', '黄金木洞穴', '小鸟斧头', "灯塔", '回家'},
    Value = "请选择",
    Multi = false,
    AllowNone = false,
    Callback = function(b)
        if b == '木材反斗城' then
            carTeleport(CFrame.new(270, 4, 60));
        elseif b == '出生点' then
            carTeleport(CFrame.new(174, 10.5, 66));
        elseif b == '土地商店' then
            carTeleport(CFrame.new(270, 3, -98));
        elseif b == '桥' then
            carTeleport(CFrame.new(112, 37, -892));
        elseif b == '码头' then
            carTeleport(CFrame.new(1136, 0, -206));
        elseif b == '椰子岛' then
            carTeleport(CFrame.new(2614, -4, -34));
        elseif b == '洞穴' then
            carTeleport(CFrame.new(3590, -177, 415));
        elseif b == '火山' then
            carTeleport(CFrame.new(-1588, 623, 1069));
        elseif b == '沼泽' then
            carTeleport(CFrame.new(-1216, 131, -822));
        elseif b == '家具店' then
            carTeleport(CFrame.new(486, 3, -1722));
        elseif b == '盒子车行' then
            carTeleport(CFrame.new(509, 3, -1458));
        elseif b == '雪山' then
            carTeleport(CFrame.new(1487, 415, 3259));
        elseif b == '连锁逻辑店' then
            carTeleport(CFrame.new(4615, 7, -794));
        elseif b == '鲍勃的小店' then
            carTeleport(CFrame.new(292, 8, -2544));
        elseif b == '画廊' then
            carTeleport(CFrame.new(5217, -166, 721));
        elseif b == '灵视神殿' then
            carTeleport(CFrame.new(-1608, 195, 928));
        elseif b == '怪人' then
            carTeleport(CFrame.new(1071, 16, 1141));
        elseif b == '小绿盒' then
            carTeleport(CFrame.new(-1667, 349, 1474));
        elseif b == '滑雪小屋' then
            carTeleport(CFrame.new(1244, 59, 2290));
        elseif b == '黄金木洞穴' then
            carTeleport(CFrame.new(-1080, -5, -942));
        elseif b == '鲨鱼斧合成' then
            carTeleport(CFrame.new(330.259735, 45.7998505, 1943.30823, 0.972010553, -8.07546598e-08, 0.234937176,
                7.63610259e-08, 1, 2.77986647e-08, -0.234937176, -9.08055142e-09, 0.972010553))
        elseif b == '小鸟斧头' then
            carTeleport(CFrame.new(4813.1, 33.5, -978.8));
        elseif b == '灯塔' then
            carTeleport(CFrame.new(1464.8, 356.3, 3257.2));
        else
            if b == '回家' then
                for i, v in pairs(game.Workspace.Properties:GetChildren()) do
                    if v.Owner.Value == game.Players.LocalPlayer then
                        carTeleport(v.OriginSquare.CFrame + Vector3.new(0, 10, 0))
                    end
                end
            end
        end
    end
})
--斧头
SectionAxe:Button({
    Title = "掉落所有斧头",
    Desc = "自动",
    Callback = function()
        droptool(lp.Character:FindFirstChild("HumanoidRootPart").Position)
    end
})
SectionAxe:Button({
    Title = "捡起所有斧头",
    Desc = "自动",
    Callback = function()
        for a, b in pairs(workspace.PlayerModels:GetChildren()) do
            if b:FindFirstChild("Owner") and b.Owner.Value == game.Players.LocalPlayer.Name then
                if b:FindFirstChild("Type") and b.Type.Value == "Tool" then
                    game:GetService('ReplicatedStorage').Interaction.ClientInteracted:FireServer(b, 'Pick up tool')

                end
            end
        end
    end
})

local run = false
SectionAxe:Toggle({
    Title = "自动丢弃斧头",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        run = state
        if state then
            while run do
                droptool(lp.Character:FindFirstChild("HumanoidRootPart").Position)
                task.wait(0.1)
            end       
        end
    end
})

local run1 = false
SectionAxe:Toggle({
    Title = "自动捡起斧头",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        run1 = state
        if state then
            while run1 do
                for a, b in pairs(workspace.PlayerModels:GetChildren()) do
                    if b:FindFirstChild("Owner") and b.Owner.Value == game.Players.LocalPlayer.Name then
                        if b:FindFirstChild("Type") and b.Type.Value == "Tool" then
                            game:GetService('ReplicatedStorage').Interaction.ClientInteracted:FireServer(b, 'Pick up tool')
                        end
                    end
                end
                task.wait(0.1)
            end       
        end
    end
})
--基地
Sectionjd:Button({
    Title = "点击土地免费获得",
    Desc = "点击一个土地",
    Callback = function()
        freeland = nil
        WindUI:Notify({
            Title = "德与中山",
            Content = "点击一块土地",
            Icon = "tree-pine",
            IconThemed = true,
            Duration = 5,
        })
                
        if ClickToSelectClick then
            ClickToSelectClick:Disconnect()
        end
        
        ClickToSelectClick = Mouse.Button1Up:Connect(function()
            local Clicked = Mouse.Target  
            if Clicked and Clicked.Parent and tostring(Clicked.Parent.Name) == "Property" then
                local v = Clicked.Parent        
                if v:FindFirstChild("Owner") and v.Owner.Value == nil then
                    game.ReplicatedStorage.PropertyPurchasing.ClientPurchasedProperty:FireServer(v, v.OriginSquare.OriginCFrame.Value.p + Vector3.new(0, 3, 0))
                    wait(0.5)
                    freeland = true
                    ClickToSelectClick:Disconnect()
                else
                    WindUI:Notify({
                        Title = "德与中山",
                        Content = "这块土地有主人了",
                        Icon = "tree-pine",
                        IconThemed = true,
                        Duration = 5,
                    })
                    ClickToSelectClick:Disconnect()
                end
            end
        end)
    end
})

Sectionjd:Button({
    Title = "免费获得土地",
    Desc = "免费",
    Callback = function()
        local tp = true
        for a, b in pairs(workspace.Properties:GetChildren()) do
            if b:FindFirstChild("Owner") and b:FindFirstChild("OriginSquare") and b.Owner.Value == nil then
                game.ReplicatedStorage.PropertyPurchasing.ClientPurchasedProperty:FireServer(
                    b,
                    b.OriginSquare.OriginCFrame.Value.p + Vector3.new(0, 3, 0)
                )
                wait(0.5)

                Instance.new('RemoteEvent', game:GetService('ReplicatedStorage').Interaction).Name = "Ban"

                for i, v in pairs(game.Workspace.Properties:GetChildren()) do
                    if v.Owner.Value == game.Players.LocalPlayer then
                        if tp then
                            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.OriginSquare.CFrame + Vector3.new(0, 10, 0)         end
                        tp = false
                    end
                end
            end
        end
    end
})

Sectionjd:Button({
    Title = "最大土地",
    Desc = "免费",
    Callback = function()
        for i, v in pairs(game:GetService("Workspace").Properties:GetChildren()) do
            if v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer then
                base = v
                square = v.OriginSquare
            end
        end
        function makebase(pos)
            game:GetService("ReplicatedStorage").PropertyPurchasing.ClientExpandedProperty:FireServer(base, pos)
        end
        local spos = square.Position
        makebase(CFrame.new(spos.X + 40, spos.Y, spos.Z))
        makebase(CFrame.new(spos.X - 40, spos.Y, spos.Z))
        makebase(CFrame.new(spos.X, spos.Y, spos.Z + 40))
        makebase(CFrame.new(spos.X, spos.Y, spos.Z - 40))
        makebase(CFrame.new(spos.X + 40, spos.Y, spos.Z + 40))
        makebase(CFrame.new(spos.X + 40, spos.Y, spos.Z - 40))
        makebase(CFrame.new(spos.X - 40, spos.Y, spos.Z + 40))
        makebase(CFrame.new(spos.X - 40, spos.Y, spos.Z - 40))
        makebase(CFrame.new(spos.X + 80, spos.Y, spos.Z))
        makebase(CFrame.new(spos.X - 80, spos.Y, spos.Z))
        makebase(CFrame.new(spos.X, spos.Y, spos.Z + 80))
        makebase(CFrame.new(spos.X, spos.Y, spos.Z - 80))
        makebase(CFrame.new(spos.X + 80, spos.Y, spos.Z + 80))
        makebase(CFrame.new(spos.X + 80, spos.Y, spos.Z - 80))
        makebase(CFrame.new(spos.X - 80, spos.Y, spos.Z + 80))
        makebase(CFrame.new(spos.X - 80, spos.Y, spos.Z - 80))
        makebase(CFrame.new(spos.X + 40, spos.Y, spos.Z + 80))
        makebase(CFrame.new(spos.X - 40, spos.Y, spos.Z + 80))
        makebase(CFrame.new(spos.X + 80, spos.Y, spos.Z + 40))
        makebase(CFrame.new(spos.X + 80, spos.Y, spos.Z - 40))
        makebase(CFrame.new(spos.X - 80, spos.Y, spos.Z + 40))
        makebase(CFrame.new(spos.X - 80, spos.Y, spos.Z - 40))
        makebase(CFrame.new(spos.X + 40, spos.Y, spos.Z - 80))
        makebase(CFrame.new(spos.X - 40, spos.Y, spos.Z - 80))
    end
})

Sectionjd:Divider()

Sectionjd:Button({
    Title = "自动售卖招牌",
    Desc = "自动",
    Callback = function()
        local oldpos = hrp.CFrame
        for i, v in pairs(game:GetService("Workspace").PlayerModels:GetChildren()) do
            if v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer and  v:FindFirstChild("TreeClass").Value == "Sign" then
                game:GetService("ReplicatedStorage"):WaitForChild("Interaction"):WaitForChild("ClientInteracted"):FireServer(v, "Take down sold sign")
                hrp.CFrame = CFrame.new(314.314453, -0.399999797, 80.3591385, -0.997360647, -3.86672667e-08, -0.0726071, -3.54630885e-08, 1, -4.5419501e-08, 0.0726071, -4.272475e-08, -0.997360647)   
                for i = 1, 20 do
                    game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(v)
                    v:PivotTo(hrp.CFrame)
                    game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(v)
                    game:GetService('RunService').Stepped:wait();
                end         
                hrp.CFrame = oldpos
            else
                notify('提示', '未找到基地牌子', 2, 'info')
            end
        end
    end
})

--传送物品
Sectionchuanson:Button({
    Title = "放置传送点",
    Desc = "放置",
    Callback = function()
        for _, part in pairs(workspace:GetChildren()) do
            if part.Name == "waypoint" then
                part:Destroy()
            end                                  
        end
        
        local waypoint = Instance.new("Part")
        waypoint.Name = "waypoint"
        waypoint.BrickColor = BrickColor.new("Bright red")
        waypoint.Material = Enum.Material.Neon
        waypoint.Shape = "Ball"
        waypoint.Transparency = 0.7
        waypoint.Size = Vector3.new(2, 2, 2)
        waypoint.Anchored = true
        waypoint.CanCollide = false        
        waypoint.Position = hrp.Position + Vector3.new(0, 3, 0)                                                                                                                                   
        waypoint.Parent = workspace

        WindUI:Notify({
            Title = "放置传送点",
            Content = "放置完成",
            Duration = 5  
        })
    end
})

Sectionchuanson:Button({
    Title = "删除传送点",
    Desc = "传送",
    Callback = function()
        pcall(function()
            game.Workspace.waypoint:Destroy();
        end)
    end
})

Sectionchuanson:Divider()

local GetClick
Sectionchuanson:Toggle({
    Title = "选择传送物品",
    Desc = "选择",
    Value = false,
    Callback = function(state)
        if state then
            GetClick = Mouse.Button1Down:Connect(function()     
                local Model = Mouse.Target.Parent
                if Model.Parent == workspace.PlayerModels and Model:FindFirstChild('Owner') and Model.Owner.Value == lp then
                    local hl = Instance.new("Highlight")
                    hl.Name = 'SelectHighlight'
                    hl.FillColor = Color3.fromRGB(0, 128, 255)
                    hl.FillTransparency = 0.5
                    hl.OutlineColor = Color3.fromRGB(0, 128, 255)
                    hl.OutlineTransparency = 0
                    hl.Adornee = Model
                    hl.Parent = Model
                end
            end)
        else
            if GetClick then
               GetClick:Disconnect() 
            end
        end
    end
})

Sectionchuanson:Button({
    Title = "删除选择",
    Desc = "删除选择物品",
    Callback = function()
        for _, v in pairs(workspace:GetDescendants()) do
            if v.Name == 'SelectHighlight' then
                v:Destroy()
            end
        end
    end
})

Sectionchuanson:Button({
    Title = "开始传送",
    Desc = "传送物品",
    Callback = function()
        if not workspace:FindFirstChild('waypoint') then
            notify('提示', '你没有放置传送点', 2, 'info')
            return
        end
        local oldpos = hrp.CFrame
        for _, v in pairs(workspace.PlayerModels:GetChildren()) do
            if v:FindFirstChild('SelectHighlight') and v:FindFirstChild('Owner') and v.Owner.Value == lp then
                hrp.CFrame = v:GetPivot()
                for i = 1, 20 do
                    game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(v)
                    v:PivotTo(workspace.waypoint.CFrame)
                    game:GetService("ReplicatedStorage").Interaction.ClientIsDragging:FireServer(v)
                    game:GetService('RunService').Stepped:wait();
                end
                hrp.CFrame = oldpos
            end
        end
    end
})

--木头
Section5:Toggle({
    Title = "拖拽器",
    Desc = "拖拽",
    Value = false,
    Callback = function(state)
        if state then
            workspace.ChildAdded:connect(function(Dragger)
                if tostring(Dragger) == 'Dragger' then
                    local BodyGyro = Dragger:WaitForChild 'BodyGyro'
                    local BodyPosition = Dragger:WaitForChild 'BodyPosition'
                    repeat
                        game:GetService 'RunService'.Stepped:wait()
                    until workspace:FindFirstChild 'Dragger'
                    BodyPosition.P = 120000
                    BodyPosition.D = 1000
                    BodyPosition.maxForce = Vector3.new(1, 1, 1) * 1000000
                    BodyGyro.maxTorque = Vector3.new(1, 1, 1) * 200
                    BodyGyro.P = 1200
                    BodyGyro.D = 140
                end
            end)
        else
            workspace.ChildAdded:connect(function(Dragger)
                if tostring(Dragger) == 'Dragger' then
                    local BodyGyro = Dragger:WaitForChild 'BodyGyro'
                    local BodyPosition = Dragger:WaitForChild 'BodyPosition'
                    repeat
                        game:GetService('RunService').Stepped:wait()
                    until workspace:FindFirstChild 'Dragger'
                    BodyPosition.P = 10000
                    BodyPosition.D = 800
                    BodyPosition.maxForce = Vector3.new(17000, 17000, 17000)
                    BodyGyro.maxTorque = Vector3.new(200, 200, 200)
                    BodyGyro.P = 1200
                    BodyGyro.D = 140
                end
            end)
        end
    end
})
Section5:Button({
    Title = "传送木头",
    Desc = "传送所有你的木头",
    Callback = function()
        GetTree()
    end
})

Section5:Button({
    Title = "传送木板",
    Desc = "传送所有你的木板",
    Callback = function()
        GetLog()
    end
})

Section5:Button({
    Title = "卖木头",
    Desc = "卖你的木头",
    Callback = function()
        local oldpos = lp.Character.HumanoidRootPart.CFrame
        for i, v in next, game:GetService("Workspace").LogModels:GetChildren() do
            if v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer then
                Teleport(v.WoodSection.CFrame)
                spawn(function()
                    for i2, v2 in next, v:GetChildren() do
                        if v2.Name == "WoodSection" then
                            local FreezeWood = Instance.new("BodyVelocity", v2)
                            FreezeWood.Velocity = Vector3.new(0, 0, 0)
                            FreezeWood.P = 100000
                            spawn(function()
                                for i = 1, 50 do
                                    game.ReplicatedStorage.Interaction.ClientIsDragging:FireServer(v)
                                    v:PivotTo(CFrame.new(314.54, -0.5, 86.823))
                                    v2.CFrame = CFrame.new(314.54, -0.5, 86.823)
                                    game.ReplicatedStorage.Interaction.ClientIsDragging:FireServer(v)
                                    game:GetService("RunService").Heartbeat:wait()
                                end
                            end)
                            task.wait(1)
                        end
                    end
                end)
                task.wait(2)
            end
        end
        Teleport(oldpos)
    end
})

Section5:Button({
    Title = "卖木板",
    Desc = "卖你木板",
    Callback = function()
        for _, Plank in pairs(game.Workspace.PlayerModels:GetChildren()) do
            if Plank.Name == "Plank" and Plank:FindFirstChild("Owner") then
                if Plank.Owner.Value == game.Players.LocalPlayer then
                    for i, v in pairs(Plank:GetChildren()) do
                        if v.Name == "WoodSection" then
                            spawn(function()
                                for i = 1, 100 do
                                    wait()
                                    v.CFrame = CFrame.new(Vector3.new(315, -0.296, 85.791)) *
                                               CFrame.Angles(math.rad(90), 0, 0)
                                end
                            end)
                        end
                    end
                    spawn(function()
                        for i = 1, 100 do
                            wait()
                            game.ReplicatedStorage.Interaction.ClientIsDragging:FireServer(Plank)
                        end
                    end)
                end
            end
        end
    end
})


Section5:Divider()

Section5:Dropdown({
    Title = "树列表",
    Desc = "带来树列表",
    Values = {"普通树", '幻影木', "沼泽黄金", "樱花", "蓝木", "冰木", "火山木", "橡木", "巧克力木",
     "白桦木", "黄金木", "雪地松", "僵尸木", "大巧克力树", "椰子树", '南瓜木', '幽灵木'},
    Value = "选择树",
    Callback = function(b)
        if b == '普通树' then
            dyzh.cuttreeselect = "Generic"
        elseif b == '沼泽黄金' then
            dyzh.cuttreeselect = "GoldSwampy"
        elseif b == '樱花' then
            dyzh.cuttreeselect = "Cherry"
        elseif b == '蓝木' then
            dyzh.cuttreeselect = "CaveCrawler"
        elseif b == '冰木' then
            dyzh.cuttreeselect = "Frost"
        elseif b == '火山木' then
            dyzh.cuttreeselect = "Volcano"
        elseif b == '橡木' then
            dyzh.cuttreeselect = "Oak"
        elseif b == '巧克力木' then
            dyzh.cuttreeselect = "Walnut"
        elseif b == '白桦木' then
            dyzh.cuttreeselect = "Birch"
        elseif b == '黄金木' then
            dyzh.cuttreeselect = "SnowGlow"
        elseif b == '雪地松' then
            dyzh.cuttreeselect = "Pine"
        elseif b == '僵尸木' then
            dyzh.cuttreeselect = "GreenSwampy"
        elseif b == '大巧克力树' then
            dyzh.cuttreeselect = "Koa"
        elseif b == '椰子树' then
            dyzh.cuttreeselect = "Palm"
        elseif b == '幽灵木' then
            dyzh.cuttreeselect = "Spooky"
        elseif b == '南瓜木' then
            dyzh.cuttreeselect = "SpookyNeon"
        elseif b == '幻影木' then
            dyzh.cuttreeselect = "LoneCave"
        end
    end
})

Section5:Input({
    Title = "带来树数量",
    Desc = "数量",
    Value = "1",
    Placeholder = "数量",
    Callback = function(text)
        dyzh.bringamount = tonumber(text)
    end
})


Section5:Button({
    Title = "带来树",
    Desc = "带来",
    Callback = function()
        dyzh.bringtree = true
        dyzh.treecutset = lp.Character.HumanoidRootPart.CFrame
        task.wait(0.2)
        for i = 1, dyzh.bringamount do
            if dyzh.bringtree == true then
                task.wait()
                bringTree(dyzh.cuttreeselect)
            end
        end
        task.wait()   
    end
})

--环境
Sectionhuanjin:Toggle({
    Title = "永久白天",
    Desc = "永远",
    Value = false,
    Callback = function(state)
        if state then
            dyzh.awaysday = true
            while task.wait() do
                if dyzh.awaysday == true then
                    game:GetService('Lighting').TimeOfDay = ('12:00:00');
                end
            end
        else
            dyzh.awaysday = false
        end
    end
})

Sectionhuanjin:Toggle({
    Title = "永久黑天",
    Desc = "永远",
    Value = false,
    Callback = function(state)
        if state then
            dyzh.awaysdnight = true
            while task.wait() do
                if dyzh.awaysdnight == true then
                    game:GetService('Lighting').TimeOfDay = ('2:00:00');
                end
            end
        else
            dyzh.awaysdnight = false
        end
    end
})

Sectionhuanjin:Toggle({
    Title = "去除阴影",
    Desc = "阴影",
    Value = false,
    Callback = function(state)
        if state then
            game:GetService("Lighting").GlobalShadows = false
        else
            game:GetService("Lighting").GlobalShadows = true
        end
    end
})

Sectionhuanjin:Button({
    Title = "圣诞节地图",
    Desc = "地图",
    Callback = function()
        for i, v in pairs(game:GetService("Workspace"):GetDescendants()) do
            if v.Name == "Ground" then
                v.BrickColor = BrickColor.new("White")
                v.Material = "Sand"
            end
            if v.Name == "Slate" then
                v.BrickColor = BrickColor.new("White")
            end
            if v.Name == "LeafPart" then
                v.BrickColor = BrickColor.new("White")
                v.Material = "Sand"
            end
            if v.Name == "Sand" then
                v.BrickColor = BrickColor.new("White")
            end
        end
    end
})

Sectionhuanjin:Button({
    Title = "秋天地图",
    Desc = "地图",
    Callback = function()
        for i, v in pairs(game:GetService("Workspace"):GetDescendants()) do
            if v.Name == "Ground" then
                v.BrickColor = BrickColor.new("Burnt Sienna")
                v.Material = "Sand"
            end
            if v.Name == "Slate" then
                v.BrickColor = BrickColor.new("Burnt Sienna")
            end
            if v.Name == "LeafPart" then
                v.BrickColor = BrickColor.new("Burnt Sienna")
                v.Material = "Sand"
            end
        end
    end
})

Sectionhuanjin:Button({
    Title = "万圣节地图",
    Desc = "地图",
    Callback = function()
        loadstring(game:HttpGet 'https://raw.githubusercontent.com/silentben8x/Silent/main/Halloween')()
    end
})

Sectionhuanjin:Button({
    Title = "糖果地图",
    Desc = "地图",
    Callback = function()
        loadstring(
        game:HttpGet 'https://raw.githubusercontent.com/silentben9x/silentwinningmain/main/Willy%20Wonker%20Map%20Theme')()
    end
})

Sectionhuanjin:Button({
    Title = "删除灵视神殿石头",
    Desc = "地图",
    Callback = function()
        workspace.Region_Mountainside.BoulderRegen.Boulder:Destroy()
        workspace.Region_Mountainside.Door.Door:Destroy()
    end
})

Sectionhuanjin:Toggle({
    Title = "删除岩浆",
    Desc = "地图",
    Value = false,
    Callback = function(state)
        for i, v in pairs(game.Workspace.Region_Volcano:GetDescendants()) do
            if v.Name == "TouchInterest" then
                v:Destroy()
            elseif v.Name == "Lava" then
                for n, k in pairs(v:GetChildren()) do
                    if k:IsA("Part") then
                        if state == true then
                            k.Transparency = 1
                        else
                            k.Transparency = 0
                        end
                    end
                end
            end
        end
    end
})

Sectionhuanjin:Toggle({
    Title = "删除水",
    Desc = "地图",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.Workspace.Water:GetChildren()) do
            if v.Name == "Water" then
                if state then
                    v.Transparency = 1;
                else
                    v.Transparency = 0;
                end
            end
        end
    end
})

Sectionhuanjin:Toggle({
    Title = "去除雾",
    Desc = "地图",
    Value = false,
    Callback = function(state)
        if state then
            dyzh.nofog = true
            while task.wait() do
                if dyzh.nofog == true then
                    game:GetService('Lighting').FogEnd = 1000000;
                end
            end
        else
            dyzh.nofog = false
        end
    end
})

Sectionhuanjin:Toggle({
    Title = "水上行走",
    Desc = "地图",
    Value = false,
    Callback = function(state)
        for i, v in next, game.workspace.Water:children() do
            if v.ClassName == 'Part' then
                dyzh.waterwalk, v.CanCollide = state, state;
            end
        end
        for i, v in next, game:GetService('Workspace').Bridge.VerticalLiftBridge.WaterModel:children() do
            if v:IsA('BasePart') then
                v.CanCollide = state;
            end
        end
    end
})

local l
Sectionautobuy:Dropdown({
    Title = "物品列表",
    Desc = "购买",
    Values = {'按钮', '控制杆', '电线', '4/4x1木楔', '3/4x1木楔', '2/4x1木楔', '1/4X1木楔', '3/3x1木楔',
           '2/3x1木楔', '1/3x1木楔', '2/2x1木楔', '1/2x1木楔', '1/1x1木楔', '篱笆', '压力板',
           '1/3木楔', '锯木机01', '锯木机02L', '波纹墙角立柱', '传送带', '普通凳子',
           '倾斜传送带', '3/4木楔', '2/3木楔', '光滑的墙', '光滑墙角', '普通锯木厂', '4/4木楔',
           '光滑墙立柱', '篱笆角', '矮篱笆角', '矮波纹墙', '长桌', '矮篱笆', '光滑墙角立柱',
           '破旧锯木厂', '普通门', '矮光滑墙', '工作灯', '弯传送带', '切换传送带', '宽敞门',
           '3/3木楔', '400元小汽车', '波纹墙立柱', '锯木机02', '漏斗式传送带', '小型地板',
           '小型瓷砖', '矮波纹墙角', '波纹墙', '大型地板', '微型瓷砖', '微型地板', '1/1木楔',
           '左转直式传送带', '银斧头', '切割机', '基础斧头', '右转传送带', '普通斧头',
           '转向传送带支架', '传送带支架', '波纹墙角立柱', '楼梯', '陡峭楼梯', '钢斧',
           '标志杆', '梯子', '大型瓷砖', '瓷砖', '硬化斧', '半截门', '木头清扫机',
           '光滑墙立柱', '沙子袋', '小型拖车', '531式拖车', '小汽车XL', '大卡车', '长沙发',
           '洗碗机', '薄柜子', '冰箱', '火炉', '马桶', '双人沙发', '床', '落地灯', '台灯',
           '微型玻璃板', '小型玻璃板', '玻璃板', '大型玻璃板', '玻璃门', '琥珀色冰柱灯串',
           '红色冰柱灯串', '绿色冰柱灯串', '蓝色冰柱灯串', '烟花发射器', '惊悚冰柱灯串',
           '单人沙发', '双人床', '灯泡', '工作台面', '薄工作台面', '带水槽的工作台面',
           '照明灯', '墙灯', '橱柜角', '宽橱柜角', '橱柜', '炸药', '毛毛虫软糖', '未知标题',
           '困扰装饰画', '户外水彩素描', '阴郁的黄昏海景', '北极灯串', '菠萝画',
           '孤独的长颈鹿', '信号维持器', '与门', '异与门', '木材检测器', '按钮', '压力板',
           'OR门', '拉杆', '信号延时器', '信号变换器', '激光', '激光探测器', '舱门',
           '橙色发光线', '绿色发光线', '黄色发光线', '白色发光线', '紫色发光线',
           '红色发光线', '青色发光线', '蓝色发光线', '定时开关'},
    Value = "请选择",
    Multi = false,
    AllowNone = false,
    Callback = function(selected)
    if a == '按钮' then
        l = 'Button0'
    elseif a == '控制杆' then
        l = 'Lever0'
    elseif a == '电线' then
        l = 'Wire'
    elseif a == '4/4x1木楔' then
        l = 'Wedge1_Thin'
    elseif a == '3/4x1木楔' then
        l = 'Wedge2_Thin'
    elseif a == '2/4x1木楔' then
        l = 'Wedge3_Thin'
    elseif a == '1/4x1木楔' then
        l = 'Wedge4_Thin'
    elseif a == '3/3x1木楔' then
        l = 'Wedge5_Thin'
    elseif a == '2/3x1木楔' then
        l = 'Wedge6_Thin'
    elseif a == '1/3x1木楔' then
        l = 'Wedge7_Thin'
    elseif a == '2/2x1木楔' then
        l = 'Wedge8_Thin'
    elseif a == '1/2x1木楔' then
        l = 'Wedge9_Thin'
    elseif a == '1/1x1木楔' then
        l = 'Wedge10_Thin'
    elseif a == '篱笆' then
        l = 'Wall3TallThin'
    elseif a == '压力板' then
        l = 'PressurePlate'
    elseif a == '1/3木楔' then
        l = 'Wedge7'
    elseif a == '锯木机01' then
        l = 'Sawmill3'
    elseif a == '锯木机02L' then
        l = 'Sawmill4L'
    elseif a == '波纹墙角立柱' then
        l = 'Wall1ShortCorner'
    elseif a == '传送带' then
        l = 'StraightConveyor'
    elseif a == '普通凳子' then
        l = 'Chair1'
    elseif a == '倾斜传送带' then
        l = 'TiltConveyor'
    elseif a == '3/4木楔' then
        l = 'Wedge2'
    elseif a == '2/3木楔' then
        l = 'Wedge6'
    elseif a == '光滑的墙' then
        l = "Wall2"
    elseif a == '光滑墙角' then
        l = 'Wall2TallCorner'
    elseif a == '普通锯木厂' then
        l = 'Sawmill2'
    elseif a == '4/4木楔' then
        l = 'Wedge1'
    elseif a == '光滑墙立柱' then
        l = 'Wall2Short'
    elseif a == '篱笆角' then
        l = 'Wall3TallCorner'
    elseif a == '矮篱笆角' then
        l = 'Wall3Corner'
    elseif a == '矮波纹墙' then
        l = 'Wall1Thin'
    elseif a == '长桌' then
        l = 'Table2'
    elseif a == '矮篱笆' then
        l = 'Wall3'
    elseif a == '光滑墙角立柱' then
        l = 'Wall2ShortCorner'
    elseif a == '破旧锯木厂' then
        l = 'Sawmill'
    elseif a == '普通门' then
        l = 'Door1'
    elseif a == '矮光滑墙' then
        l = 'Wall2'
    elseif a == '工作灯' then
        l = 'WorkLight'
    elseif a == '弯传送带' then
        l = 'TightTurnConveyor'
    elseif a == '切换传送带' then
        l = 'ConveyorSwitch'
    elseif a == '宽敞门' then
        l = 'Door3'
    elseif a == '3/3木楔' then
        l = 'Wedge5'
    elseif a == '400元小汽车' then
        l = 'UtilityTruck'
    elseif a == '波纹墙立柱' then
        l = 'Wall1ShortThin'
    elseif a == '锯木机02' then
        l = 'Sawmill4L'
    elseif a == '漏斗式传送带' then
        l = 'ConveyorFunnel'
    elseif a == '小型地板' then
        l = 'Floor1Small'
    elseif a == '小型瓷砖' then
        l = 'Floor2Small'
    elseif a == '矮波纹墙角' then
        l = 'Wall1Corner'
    elseif a == '波纹墙' then
        l = 'Wall1Tall'
    elseif a == '大型地板' then
        l = 'Floor1Large'
    elseif a == '微型瓷砖' then
        l = 'Floor2Tiny'
    elseif a == '微型地板' then
        l = 'Floor1Tiny'
    elseif a == '1/1木楔' then
        l = 'Wedge10'
    elseif a == '左转直式传送带' then
        l = 'StraightSwitchConveyorLeft'
    elseif a == '银斧头' then
        l = 'SilverAxe'
    elseif a == '切割机' then
        l = 'ChopSaw'
    elseif a == '基础斧头' then
        l = 'BasicHatchet'
    elseif a == '右转传送带' then
        l = 'StraightSwitchConveyorRight'
    elseif a == '普通斧头' then
        l = 'Axe1'
    elseif a == '转向传送带支架' then
        l = 'TightTurnConveyorSupports'
    elseif a == '传送带支架' then
        l = 'ConveyorSupports'
    elseif a == '波纹墙角立柱' then
        l = 'Wall1ShortCorner'
    elseif a == '楼梯' then
        l = 'Stair2'
    elseif a == '陡峭楼梯' then
        l = 'Stair1'
    elseif a == '钢斧' then
        l = 'Axe2'
    elseif a == '标志杆' then
        l = 'Post'
    elseif a == '梯子' then
        l = 'Ladder1'
    elseif a == '大型瓷砖' then
        l = 'Floor2Large'
    elseif a == '瓷砖' then
        l = 'Floor2'
    elseif a == '硬化斧' then
        l = 'Axe3'
    elseif a == '半截门' then
        l = 'Door2'
    elseif a == '木头清扫机' then
        l = 'LogSweeper'
    elseif a == '光滑墙立柱' then
        l = 'Wall2ShortThin'
    elseif a == '沙子袋' then
        l = 'BagOfSand'
    elseif a == '小型拖车' then
        l = 'SmallTrailer'
    elseif a == '531式拖车' then
        l = 'Trailer2'
    elseif a == '小汽车XL' then
        l = 'UtilityTruck2'
    elseif a == '大卡车' then
        l = 'Pickup1'
    elseif a == '长沙发' then
        l = 'Seat_Couch'
    elseif a == '洗碗机' then
        l = 'Dishwasher'
    elseif a == '薄柜子' then
        l = 'Cabinet1Thin'
    elseif a == '冰箱' then
        l = 'Refridgerator'
    elseif a == '马桶' then
        l = 'Toilet'
    elseif a == '双人沙发' then
        l = 'Seat_Loveseat'
    elseif a == '床' then
        l = 'Bed1'
    elseif a == '落地灯' then
        l = 'FloorLamp1'
    elseif a == '台灯' then
        l = 'Lamp1'
    elseif a == '微型玻璃板' then
        l = 'GlassPane1'
    elseif a == '小型玻璃板' then
        l = 'GlassPane2'
    elseif a == '玻璃板' then
        l = 'GlassPane3'
    elseif a == '大型玻璃板' then
        l = 'GlassPane4'
    elseif a == '玻璃门' then
        l = 'GlassDoor1'
    elseif a == '琥珀色冰柱灯串' then
        l = 'IcicleWireAmber'
    elseif a == '红色冰柱灯串' then
        l = 'IcicleWireRed'
    elseif a == '绿色冰柱灯串' then
        l = 'IcicleWireGreen'
    elseif a == '蓝色冰柱灯串' then
        l = 'IcicleWireBlue'
    elseif a == '烟花发射器' then
        l = 'FireworkLauncher'
    elseif a == '惊悚冰柱灯串' then
        l = 'IcicleWireHalloween'
    elseif a == '单人沙发' then
        l = 'Seat_Armchair'
    elseif a == '双人床' then
        l = 'Bed2'
    elseif a == '灯泡' then
        l = 'LightBulb'
    elseif a == '工作台面' then
        l = 'CounterTop1'
    elseif a == '薄工作台面' then
        l = 'CounterTop1Thin'
    elseif a == '带水槽的工作台面' then
        l = 'CounterTop1Sink'
    elseif a == '照明灯' then
        l = 'WallLight2'
    elseif a == '墙灯' then
        l = 'WallLight1'
    elseif a == '橱柜角' then
        l = 'Cabinet1CornerTight'
    elseif a == '宽橱柜角' then
        l = 'Cabinet1CornerWide'
    elseif a == '橱柜' then
        l = 'Cabinet1'
    elseif a == '毛毛虫软糖' then
        l = 'CanOfWorms'
    elseif a == '炸药' then
        l = 'Dynamite'
    elseif a == '未知标题' then
        l = 'Painting1'
    elseif a == '困扰装饰画' then
        l = 'Painting2'
    elseif a == '户外水彩素描' then
        l = 'Painting3'
    elseif a == '阴郁的黄昏海景' then
        l = 'Painting6'
    elseif a == '北极灯串' then
        l = 'Painting7'
    elseif a == '菠萝画' then
        l = 'Painting8'
    elseif a == '孤独的长颈鹿' then
        l = 'Painting9'
    elseif a == '信号维持器' then
        l = 'SignalSustain'
    elseif a == '与门' then
        l = 'GateAND'
    elseif a == '异与门' then
        l = 'GateXOR'
    elseif a == '木材检测器' then
        l = 'WoodChecker'
    elseif a == '按钮' then
        l = 'lutton0'
    elseif a == '压力板' then
        l = 'PressurePlate'
    elseif a == 'OR门' then
        l = 'GateOR'
    elseif a == '拉杆' then
        l = 'Lever0'
    elseif a == '信号延时器' then
        l = 'SignalDelay'
    elseif a == '信号变换器' then
        l = 'GateNOT'
    elseif a == '激光' then
        l = 'Laser'
    elseif a == '激光探测器' then
        l = 'LaserReceiver'
    elseif a == '舱门' then
        l = 'Hatch'
    elseif a == '橙色发光线' then
        l = 'NeonWireOrange'
    elseif a == '绿色发光线' then
        l = 'NeonWireGreen'
    elseif a == '黄色发光线' then
        l = 'NeonWireYellow'
    elseif a == '白色发光线' then
        l = 'NeonWireWhite'
    elseif a == '紫色发光线' then
        l = 'NeonWireViolet'
    elseif a == '红色发光线' then
        l = 'NeonWireRed'
    elseif a == '青色发光线' then
        l = 'NeonWireCyan'
    elseif a == '蓝色发光线' then
        l = 'NeonWireBlue'
    elseif a == '定时开关' then
        l = 'ClockSwitch'
    end
    end
})

Sectionautobuy:Input({
    Title = "购买数量",
    Desc = "数量",
    Value = "1",
    Placeholder = "数量",
    Callback = function(text)
        dyzh.autobuyamount = tonumber(text)
    end
})

Sectionautobuy:Button({
    Title = "开始购买",
    Desc = "开始购买",
    Callback = function()
        dyzh.autobuystop = false
        dyzh.autobuyset = lp.Character.HumanoidRootPart.CFrame
        autobuy(l, dyzh.autobuyamount)
        task.wait()
        Teleport(dyzh.autobuyset)
    end
})

end
local function wmsd()
local Lighting = game:GetService("Lighting")
local Light1 = Lighting.Ambient
local Light2 = Lighting.OutdoorAmbient
local LocalPlayer = game:GetService("Players").LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local camera = workspace.CurrentCamera
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

local esp = {
    FillTransparency  = 0.5,
    OutlineTransparency = 0,
    TextSize = 5
}

local function CreatESP(Color, Name, Parent)
    local h = Instance.new('Highlight', Parent)
    h.FillTransparency = esp.FillTransparency
    h.OutlineTransparency = esp.OutlineTransparency
    h.FillColor = Color
    h.Name = 'Esp' .. tostring(Name)
    local b = Instance.new('BillboardGui',Parent)
    b.AlwaysOnTop = true
    b.Size = UDim2.new(0, 500, 0, 200)
    b.Name = 'Esp' .. tostring(Name) .. 'Bili'
    local t = Instance.new('TextLabel', b)
    t.Size = UDim2.new(0, 500, 0, 200)
    t.TextSize = esp.TextSize
    t.TextColor3 = Color
    t.Name = 'Esp' .. tostring(Name) .. 'Text'
    t.BackgroundTransparency = 1
    t.Text = ''
    local ts = Instance.new('UIStroke', t)
    ts.Thickness = 1
end

local function CreatLine(List, Color)
    local Line = Drawing.new('Line')
    Line.Color = Color
    Line.From = Vector2.new(0, 0)
    Line.To = Vector2.new(0, 0)
    List['Line'] = Line
end

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "平板"
        else
            return "手机"
        end
    else
        return "电脑"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "手机" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "平板" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local playerName = LocalPlayer.Name
local displayName = LocalPlayer.DisplayName

local Tabs = {
    Player = Window:Tab({ Title = "玩家", Opened = false, Icon = "user"}),
    Item = Window:Tab({ Title = "实体功能", Opened = false, Icon = "stretch-horizontal"}),
    ESP = Window:Tab({ Title = "透视功能", Opened = false, Icon = "eye"}),
}

Tabs.Player:Section({ 
    Title = "公告",
    TextSize = 17,
    Icon = 'ampersand',
    IconSize = 30
})

Tabs.Player:Paragraph({
    Title = "欢迎尊贵的用户",
    Desc = "此脚本会一直更新 感谢白名单使用者",
    Image = "info",
    ImageSize = 15
})

Tabs.Player:Paragraph({
    Title = "玩家",
    Desc = "尊敬的用户: " .. LocalPlayer.Name .. "欢迎使用",
    Image = "user",
    ImageSize = 12
})

Tabs.Player:Paragraph({
    Title = "设备",
    Desc = "你的使用设备: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

Tabs.Player:Paragraph({
    Title = "设备",
    Desc = "你的注入器: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

Tabs.Player:Section({ 
    Title = "玩家",
    TextSize = 17,
    Icon = 'user',
    IconSize = 30
})

Tabs.Player:Slider({
    Title = "玩家速度",
    Desc = "玩家的速度",
    Step = 1,
    Value = {
        Min = 16,
        Max = 200,
        Default = 16,
    },
    Callback = function(value)
        if Character and Character:FindFirstChild("Humanoid") then
            task.spawn(function()
                while task.wait() do
                    Character.Humanoid.WalkSpeed = value
                end
            end)
        end
    end
})

Tabs.Player:Toggle({
	Title = "高亮",
	Desc = "高亮环境",
	Value = false,
	Callback = function(state) 
		if state then
			Lighting.Ambient = Color3.fromRGB(255, 255, 255)
			Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
		else
			Lighting.Ambient = Light1
			Lighting.OutdoorAmbient = Light2  
		end
	end
})

Tabs.Item:Section({ 
    Title = "物品",
    TextSize = 17,
    Icon = 'layers-2',
    IconSize = 30
})

local AutoGetItem = false
Tabs.Item:Toggle({
    Title = "物品收集光环",
    Desc = "物品",
    Value = false,
    Callback = function(state) 
        AutoGetItem = state
        if state then
            while AutoGetItem do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA("Tool") then
                        game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.Loots.World:FindFirstChild(v.Name)})
                        game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer(	"\146\022\147\195\199\002\147\203\192s\128\142`\000\000\000\203@tO\022\000\000\000\000\203@z#\225\000\000\000\000\203By\177\167\212\239\016\000")                               
                    end         
                end
                task.wait(0.05)           
            end        
        end
    end
})

local AutoItem = false
Tabs.Item:Toggle({
    Title = "自动赚钱",
    Desc = "物品",
    Value = false,
    Callback = function(state) 
        AutoItem = state
        if state then
            while AutoItem do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA("Tool") then
                        for i = 1, 3 do
                            LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame = v:GetPivot()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.Loots.World:FindFirstChild(v.Name)})
                            task.wait(0.1)
                        end
                        
                        LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame = workspace["\231\148\181\230\162\175"].Vt:GetPivot()
                        
                        task.wait(0.5)
                        
                        for i = 1, 4 do
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\1463\145\00" .. i)
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer(	"\1465\144")   
                        end                              
                    end
                end                        
                task.wait(1.5)
            end        
        end
    end
})

Tabs.Item:Section({ 
    Title = "互动",
    TextSize = 17,
    Icon = 'hand',
    IconSize = 30
})

local AutoFire1 = false
local AutoFire2 = false
local FireM = 50

Tabs.Item:Toggle({
    Title = "互动光环",
    Desc = "互动",
    Value = false,
    Callback = function(state) 
        AutoFire1 = state
        if state then
            while AutoFire1 do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if v:FindFirstChild('Root') and (LocalPlayer.Character:FindFirstChild('HumanoidRootPart').Position - v:FindFirstChild('Root').Position).Magnitude <= FireM then
                        if not v:GetAttribute('Open') then
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.InteractiveItem:FindFirstChild(v.Name)})
                        end 
                    end
                end
                task.wait(0.05)
            end        
        end
    end
})

Tabs.Item:Slider({
    Title = "互动范围",
    Desc = "范围",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        FireM = tonumber(value)
    end
})

Tabs.Item:Divider()

Tabs.Item:Toggle({
    Title = "自动开柜子/抽屉(无范围)",
    Desc = "互动",
    Value = false,
    Callback = function(state) 
        AutoFire2 = state
        if state then
            while AutoFire2 do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if not v:GetAttribute('Open') then
                        game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.InteractiveItem:FindFirstChild(v.Name)})
                    end
                end
                task.wait(0.05)
            end        
        end
    end
})

Tabs.ESP:Section({ 
    Title = "透视",
    TextSize = 17,
    Icon = 'eye',
    IconSize = 30
})
local DrawingLine = false

local EspItem = false
Tabs.ESP:Toggle({
    Title = "透视物品",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        EspItem = state
        if state then
            while EspItem do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA('Tool') then
                        if not v:FindFirstChild('EspItem') then                        
                            CreatESP(Color3.fromRGB(5, 233, 165), 'Item', v)
                        else
                            v:FindFirstChild('EspItemBili'):FindFirstChild('EspItemText').Text = "物品[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspItem", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspPart = false
Tabs.ESP:Toggle({
    Title = "透视储物柜",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        EspPart = state
        if state then
            while EspPart do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if string.find(v.Name, "Cabinet", 1, true) then
                        if not v:FindFirstChild('EspCabinet') then                        
                            CreatESP(Color3.fromRGB(224, 255, 255), 'Cabinet', v)
                        else
                            v:FindFirstChild('EspCabinetBili'):FindFirstChild('EspCabinetText').Text = "储物柜[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end                  
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspCabinet", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspOil = false
Tabs.ESP:Toggle({
    Title = "透视核废桶",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        EspOil = state
        if state then
            while EspOil do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if string.find(v.Name, "OilBucket", 1, true) then
                        if not v:FindFirstChild('EspOil') then                        
                            CreatESP(Color3.fromRGB(34, 139, 34), 'Oil', v)
                        else
                            v:FindFirstChild('EspOilBili'):FindFirstChild('EspOilText').Text = "核废桶[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end                    
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspOil", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspMoney = false
Tabs.ESP:Toggle({
    Title = "透视钱",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        EspMoney = state
        if state then
            while EspMoney do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA('Model') then
                        if not v:FindFirstChild('EspMoney') then   
                            CreatESP(Color3.fromRGB(255, 215, 0), 'Money', v)
                        else
                            v:FindFirstChild('EspMoneyBili'):FindFirstChild('EspMoneyText').Text = "钱[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspMoney", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspMonster = false
Tabs.ESP:Toggle({
    Title = "透视怪物",
    Desc = "透视",
    Value = false,
    Callback = function(state) 
        EspMonster = state
        if state then
            while EspMonster do
                for _, v in pairs(workspace.GameSystem.Monsters:GetChildren()) do
                    if v:IsA('Model') then
                        if not v:FindFirstChild('EspMonster') then   
                            CreatESP(Color3.fromRGB(255, 0, 0), 'Monster', v)
                        else
                            v:FindFirstChild('EspMonsterBili'):FindFirstChild('EspMonsterText').Text = "怪物[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspMonster", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

Tabs.ESP:Section({ 
    Title = "透视设置",
    TextSize = 17,
    Icon = 'settings',
    IconSize = 30
})

Tabs.ESP:Slider({
    Title = "填充透明度",
    Desc = "设置",
    Step = 0.1,
    Value = {
        Min = 0,
        Max = 1,
        Default = 0.5,
    },
    Callback = function(value)
        esp.FillTransparency = tonumber(value)
        for _, v in pairs(workspace:GetDescendants()) do
            if string.find(v.Name, 'Esp', 1, true) and v:IsA('Highlight') then
                v.FillTransparency = tonumber(value)
            end
        end
    end
})

Tabs.ESP:Slider({
    Title = "轮廓透明度",
    Desc = "设置",
    Step = 0.1,
    Value = {
        Min = 0,
        Max = 1,
        Default = 0,
    },
    Callback = function(value)
        esp.OutlineTransparency = tonumber(value)
        for _, v in pairs(workspace:GetDescendants()) do
            if string.find(v.Name, 'Esp', 1, true) and v:IsA('Highlight') then
                v.OutlineTransparency  = tonumber(value)
            end
        end
    end
})

Tabs.ESP:Slider({
    Title = "字体大小",
    Desc = "设置",
    Step = 1,
    Value = {
        Min = 0,
        Max = 30,
        Default = 5,
    },
    Callback = function(value)
        esp.TextSize = tonumber(value)
        for _, v in pairs(workspace:GetDescendants()) do
            if string.find(v.Name, 'Esp', 1, true) and v:IsA('TextLabel') then
                v.TextSize = tonumber(value)
            end
        end
    end
})

Tabs.ESP:Divider()

Tabs.ESP:Toggle({
    Title = "绘制透视线",
    Desc = "绘制",
    Value = false,
    Callback = function(state) 
        DrawingLine = state
    end
})

Window:OnClose(function()
    if game:GetService("UserInputService").KeyboardEnabled then
        WindUI:Notify({
            Title = "通知",
            Content = "按下N键再次打开",
            Duration = 3
        })    
    end
end)
end
local function wmsdeng()
local Lighting = game:GetService("Lighting")
local Light1 = Lighting.Ambient
local Light2 = Lighting.OutdoorAmbient
local LocalPlayer = game:GetService("Players").LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local camera = workspace.CurrentCamera
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

local esp = {
    FillTransparency  = 0.5,
    OutlineTransparency = 0,
    TextSize = 5
}

local function CreatESP(Color, Name, Parent)
    local h = Instance.new('Highlight', Parent)
    h.FillTransparency = esp.FillTransparency
    h.OutlineTransparency = esp.OutlineTransparency
    h.FillColor = Color
    h.Name = 'Esp' .. tostring(Name)
    local b = Instance.new('BillboardGui',Parent)
    b.AlwaysOnTop = true
    b.Size = UDim2.new(0, 500, 0, 200)
    b.Name = 'Esp' .. tostring(Name) .. 'Bili'
    local t = Instance.new('TextLabel', b)
    t.Size = UDim2.new(0, 500, 0, 200)
    t.TextSize = esp.TextSize
    t.TextColor3 = Color
    t.Name = 'Esp' .. tostring(Name) .. 'Text'
    t.BackgroundTransparency = 1
    t.Text = ''
    local ts = Instance.new('UIStroke', t)
    ts.Thickness = 1
end

local function CreatLine(List, Color)
    local Line = Drawing.new('Line')
    Line.Color = Color
    Line.From = Vector2.new(0, 0)
    Line.To = Vector2.new(0, 0)
    List['Line'] = Line
end

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "tablet"
        else
            return "phone"
        end
    else
        return "computer"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "phone" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "tablet" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local playerName = LocalPlayer.Name
local displayName = LocalPlayer.DisplayName

local Tabs = {
    Player = Window:Tab({ Title = "player", Opened = false, Icon = "user"}),
    Item = Window:Tab({ Title = "entity features", Opened = false, Icon = "stretch-horizontal"}),
    ESP = Window:Tab({ Title = "esp features", Opened = false, Icon = "eye"}),
}

Tabs.Player:Section({ 
    Title = "announcement",
    TextSize = 17,
    Icon = 'ampersand',
    IconSize = 30
})

Tabs.Player:Paragraph({
    Title = "welcome honorable user",
    Desc = "this script will be continuously updated thanks to whitelist users",
    Image = "info",
    ImageSize = 15
})

Tabs.Player:Paragraph({
    Title = "player",
    Desc = "dear user: " .. LocalPlayer.Name .. " welcome to use",
    Image = "user",
    ImageSize = 12
})

Tabs.Player:Paragraph({
    Title = "device",
    Desc = "your device: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

Tabs.Player:Paragraph({
    Title = "device",
    Desc = "your injector: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

Tabs.Player:Section({ 
    Title = "player",
    TextSize = 17,
    Icon = 'user',
    IconSize = 30
})

Tabs.Player:Slider({
    Title = "player speed",
    Desc = "player speed",
    Step = 1,
    Value = {
        Min = 16,
        Max = 200,
        Default = 16,
    },
    Callback = function(value)
        if Character and Character:FindFirstChild("Humanoid") then
            task.spawn(function()
                while task.wait() do
                    Character.Humanoid.WalkSpeed = value
                end
            end)
        end
    end
})

Tabs.Player:Toggle({
	Title = "highlight",
	Desc = "highlight environment",
	Value = false,
	Callback = function(state) 
		if state then
			Lighting.Ambient = Color3.fromRGB(255, 255, 255)
			Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
		else
			Lighting.Ambient = Light1
			Lighting.OutdoorAmbient = Light2  
		end
	end
})

Tabs.Item:Section({ 
    Title = "items",
    TextSize = 17,
    Icon = 'layers-2',
    IconSize = 30
})

local AutoGetItem = false
Tabs.Item:Toggle({
    Title = "item collection aura",
    Desc = "item",
    Value = false,
    Callback = function(state) 
        AutoGetItem = state
        if state then
            while AutoGetItem do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA("Tool") then
                        game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.Loots.World:FindFirstChild(v.Name)})
                        game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer(	"\146\022\147\195\199\002\147\203\192s\128\142`\000\000\000\203@tO\022\000\000\000\000\203@z#\225\000\000\000\000\203By\177\167\212\239\016\000")                               
                    end         
                end
                task.wait(0.05)           
            end        
        end
    end
})

local AutoItem = false
Tabs.Item:Toggle({
    Title = "auto earn money",
    Desc = "item",
    Value = false,
    Callback = function(state) 
        AutoItem = state
        if state then
            while AutoItem do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA("Tool") then
                        for i = 1, 3 do
                            LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame = v:GetPivot()
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.Loots.World:FindFirstChild(v.Name)})
                            task.wait(0.1)
                        end
                        
                        LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame = workspace["\231\148\181\230\162\175"].Vt:GetPivot()
                        
                        task.wait(0.5)
                        
                        for i = 1, 4 do
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\1463\145\00" .. i)
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer(	"\1465\144")   
                        end                              
                    end
                end                        
                task.wait(1.5)
            end        
        end
    end
})

Tabs.Item:Section({ 
    Title = "interaction",
    TextSize = 17,
    Icon = 'hand',
    IconSize = 30
})

local AutoFire1 = false
local AutoFire2 = false
local FireM = 50

Tabs.Item:Toggle({
    Title = "interaction aura",
    Desc = "interaction",
    Value = false,
    Callback = function(state) 
        AutoFire1 = state
        if state then
            while AutoFire1 do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if v:FindFirstChild('Root') and (LocalPlayer.Character:FindFirstChild('HumanoidRootPart').Position - v:FindFirstChild('Root').Position).Magnitude <= FireM then
                        if not v:GetAttribute('Open') then
                            game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.InteractiveItem:FindFirstChild(v.Name)})
                        end 
                    end
                end
                task.wait(0.05)
            end        
        end
    end
})

Tabs.Item:Slider({
    Title = "interaction range",
    Desc = "range",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        FireM = tonumber(value)
    end
})

Tabs.Item:Divider()

Tabs.Item:Toggle({
    Title = "auto open cabinet/drawer (no range)",
    Desc = "interaction",
    Value = false,
    Callback = function(state) 
        AutoFire2 = state
        if state then
            while AutoFire2 do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if not v:GetAttribute('Open') then
                        game:GetService("ReplicatedStorage"):WaitForChild("Remote_Event"):FireServer("\146\016\145\200\001", {workspace.GameSystem.InteractiveItem:FindFirstChild(v.Name)})
                    end
                end
                task.wait(0.05)
            end        
        end
    end
})

Tabs.ESP:Section({ 
    Title = "esp",
    TextSize = 17,
    Icon = 'eye',
    IconSize = 30
})
local DrawingLine = false

local EspItem = false
Tabs.ESP:Toggle({
    Title = "item esp",
    Desc = "esp",
    Value = false,
    Callback = function(state) 
        EspItem = state
        if state then
            while EspItem do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA('Tool') then
                        if not v:FindFirstChild('EspItem') then                        
                            CreatESP(Color3.fromRGB(5, 233, 165), 'Item', v)
                        else
                            v:FindFirstChild('EspItemBili'):FindFirstChild('EspItemText').Text = "item[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspItem", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspPart = false
Tabs.ESP:Toggle({
    Title = "cabinet esp",
    Desc = "esp",
    Value = false,
    Callback = function(state) 
        EspPart = state
        if state then
            while EspPart do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if string.find(v.Name, "Cabinet", 1, true) then
                        if not v:FindFirstChild('EspCabinet') then                        
                            CreatESP(Color3.fromRGB(224, 255, 255), 'Cabinet', v)
                        else
                            v:FindFirstChild('EspCabinetBili'):FindFirstChild('EspCabinetText').Text = "cabinet[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end                  
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspCabinet", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspOil = false
Tabs.ESP:Toggle({
    Title = "nuclear waste barrel esp",
    Desc = "esp",
    Value = false,
    Callback = function(state) 
        EspOil = state
        if state then
            while EspOil do
                for _, v in pairs(workspace.GameSystem.InteractiveItem:GetChildren()) do
                    if string.find(v.Name, "OilBucket", 1, true) then
                        if not v:FindFirstChild('EspOil') then                        
                            CreatESP(Color3.fromRGB(34, 139, 34), 'Oil', v)
                        else
                            v:FindFirstChild('EspOilBili'):FindFirstChild('EspOilText').Text = "nuclear waste barrel[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end                    
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspOil", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspMoney = false
Tabs.ESP:Toggle({
    Title = "money esp",
    Desc = "esp",
    Value = false,
    Callback = function(state) 
        EspMoney = state
        if state then
            while EspMoney do
                for _, v in pairs(workspace.GameSystem.Loots.World:GetChildren()) do
                    if v:IsA('Model') then
                        if not v:FindFirstChild('EspMoney') then   
                            CreatESP(Color3.fromRGB(255, 215, 0), 'Money', v)
                        else
                            v:FindFirstChild('EspMoneyBili'):FindFirstChild('EspMoneyText').Text = "money[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspMoney", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

local EspMonster = false
Tabs.ESP:Toggle({
    Title = "monster esp",
    Desc = "esp",
    Value = false,
    Callback = function(state) 
        EspMonster = state
        if state then
            while EspMonster do
                for _, v in pairs(workspace.GameSystem.Monsters:GetChildren()) do
                    if v:IsA('Model') then
                        if not v:FindFirstChild('EspMonster') then   
                            CreatESP(Color3.fromRGB(255, 0, 0), 'Monster', v)
                        else
                            v:FindFirstChild('EspMonsterBili'):FindFirstChild('EspMonsterText').Text = "monster[" .. string.format("%.0f", (LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position - v:GetPivot().Position).Magnitude) .. "m]"
                        end
                    end
                end
                task.wait(0.1)
            end
        else
            for _, v in pairs(workspace:GetDescendants()) do
                if string.find(v.Name, "EspMonster", 1, true) then
                    v:Destroy()                
                end        
            end    
        end
    end
})

Tabs.ESP:Section({ 
    Title = "esp settings",
    TextSize = 17,
    Icon = 'settings',
    IconSize = 30
})

Tabs.ESP:Slider({
    Title = "fill transparency",
    Desc = "settings",
    Step = 0.1,
    Value = {
        Min = 0,
        Max = 1,
        Default = 0.5,
    },
    Callback = function(value)
        esp.FillTransparency = tonumber(value)
        for _, v in pairs(workspace:GetDescendants()) do
            if string.find(v.Name, 'Esp', 1, true) and v:IsA('Highlight') then
                v.FillTransparency = tonumber(value)
            end
        end
    end
})

Tabs.ESP:Slider({
    Title = "outline transparency",
    Desc = "settings",
    Step = 0.1,
    Value = {
        Min = 0,
        Max = 1,
        Default = 0,
    },
    Callback = function(value)
        esp.OutlineTransparency = tonumber(value)
        for _, v in pairs(workspace:GetDescendants()) do
            if string.find(v.Name, 'Esp', 1, true) and v:IsA('Highlight') then
                v.OutlineTransparency  = tonumber(value)
            end
        end
    end
})

Tabs.ESP:Slider({
    Title = "font size",
    Desc = "settings",
    Step = 1,
    Value = {
        Min = 0,
        Max = 30,
        Default = 5,
    },
    Callback = function(value)
        esp.TextSize = tonumber(value)
        for _, v in pairs(workspace:GetDescendants()) do
            if string.find(v.Name, 'Esp', 1, true) and v:IsA('TextLabel') then
                v.TextSize = tonumber(value)
            end
        end
    end
})

Tabs.ESP:Divider()

Tabs.ESP:Toggle({
    Title = "draw esp line",
    Desc = "draw",
    Value = false,
    Callback = function(state) 
        DrawingLine = state
    end
})

Window:OnClose(function()
    if game:GetService("UserInputService").KeyboardEnabled then
        WindUI:Notify({
            Title = "notification",
            Content = "press n to open again",
            Duration = 3
        })    
    end
end)

end
local function ubgcn()
local Tab = Window:Tab({
    Title = "功能",
    Icon = "sword",
    Locked = false,
})
Tab:Button({
    Flag = "1",
    Title = "篡改",
    Desc = "玩的时候第一先开启这个功能",
    Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/ubg-script/refs/heads/main/%E6%8B%A6%E6%88%AA.txt"))()
    end
})
local fakeBlockEnabled = false
local loopRunning = false

Tab:Toggle({
    Flag = "2",
    Title = "假防(关闭功能后按一次防御即可取消假防)",
    Value = false,
    Callback = function(state)
        fakeBlockEnabled = state

        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local BlockRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Combat"):WaitForChild("Block")
        local Players = game:GetService("Players")
        local player = Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()

        local function enableBlock()
            pcall(function()
                BlockRemote:FireServer(true)
            end)
        end

        if fakeBlockEnabled then
            enableBlock()
        end

        if not loopRunning then
            loopRunning = true
            task.spawn(function()
                while true do
                    task.wait(0.01)
                    if fakeBlockEnabled then
                        local success, isBlocking = pcall(function()
                            return character:GetAttribute("IsBlocking")
                        end)
                        if success and not isBlocking then
                            enableBlock()
                        end
                    end
                end
            end)
        end
    end
})

local defaultCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Dash.Value

Tab:Toggle({
    Flag = "3",
    Title = "侧闪无冷却",
    Value = false,
    Callback = function(state)
        local dashCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Dash
        if state then
            dashCooldown.Value = 1
        else
            dashCooldown.Value = defaultCooldown
        end
    end
})
local defaultMeleeCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Melee.Value

Tab:Toggle({
    Flag = "4",
    Title = "近战无冷却",
    Value = false,
    Callback = function(state)
        local meleeCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Melee
        if state then
            meleeCooldown.Value = 1
        else
            meleeCooldown.Value = defaultMeleeCooldown
        end
    end
})
local rs = game:GetService("ReplicatedStorage")
local settings = rs.Settings

local defaultAbility = settings.Cooldowns.Ability.Value
Tab:Toggle({
    Flag = "5",
    Title = "技能无冷却(仅宿傩角色)",
    Value = false,
    Callback = function(state)
        settings.Cooldowns.Ability.Value = state and 1 or defaultAbility
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Remotes = ReplicatedStorage.Remotes
local Combat = Remotes.Combat
local EmoteClaim = Combat.EmoteClaim

local emoteClaimActive = false
local emoteClaimConnection = nil

local function startEmoteClaim()
    emoteClaimConnection = game:GetService("RunService").Heartbeat:Connect(function()
        if emoteClaimActive then
            EmoteClaim:FireServer()
        end
    end)
end

local function stopEmoteClaim()
    if emoteClaimConnection then
        emoteClaimConnection:Disconnect()
        emoteClaimConnection = nil
    end
end

Tab:Toggle({
    Flag = "6",
    Title = "自动签到表情",
    Value = false,
    Callback = function(state)
        emoteClaimActive = state
        if state then
            startEmoteClaim()
        else
            stopEmoteClaim()
        end
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local noSlowdownsToggle = ReplicatedStorage.Settings.Toggles.NoSlowdowns

local defaultValue = false

Tab:Toggle({
    Flag = "7",
    Title = "无减速效果",
    Value = noSlowdownsToggle.Value,
    Callback = function(state)
        if state then
            noSlowdownsToggle.Value = true
        else
            noSlowdownsToggle.Value = defaultValue
        end
    end
})

local defaultDisableHitStun = settings.Toggles.DisableHitStun.Value
Tab:Toggle({
    Flag = "8",
    Title = "取消被攻击硬直",
    Value = false,
    Callback = function(state)
        settings.Toggles.DisableHitStun.Value = state
    end
})

local defaultDisableIntros = settings.Toggles.DisableIntros.Value
Tab:Toggle({
    Flag = "9",
    Title = "跳过角色开场动作",
    Value = false,
    Callback = function(state)
        settings.Toggles.DisableIntros.Value = state
    end
})

local defaultNoStunOnMiss = settings.Toggles.NoStunOnMiss.Value
Tab:Toggle({
    Flag = "10",
    Title = "普攻无僵直",
    Value = false,
    Callback = function(state)
        settings.Toggles.NoStunOnMiss.Value = state
    end
})

local defaultRagdollTimer = settings.Multipliers.RagdollTimer.Value
Tab:Toggle({
    Flag = "11",
    Title = "被别人击倒不会变成布娃娃",
    Value = false,
    Callback = function(state)
        settings.Multipliers.RagdollTimer.Value = state and 0.5 or defaultRagdollTimer
    end
})

local defaultUltimateTimer = settings.Multipliers.UltimateTimer.Value
Tab:Toggle({
    Flag = "12",
    Title = "延长大招时间",
    Value = false,
    Callback = function(state)
        settings.Multipliers.UltimateTimer.Value = state and 100000 or defaultUltimateTimer
    end
})

local defaultInstantTransformation = settings.Toggles.InstantTransformation.Value
Tab:Toggle({
    Flag = "13",
    Title = "秒开大",
    Value = false,
    Callback = function(state)
        settings.Toggles.InstantTransformation.Value = state
    end
})
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local Ping = player:WaitForChild("Info"):WaitForChild("Ping")

local loop

Tab:Toggle({
    Flag = "14",
    Title = "ping乱码",
    Value = false,
    Callback = function(state)
        if state then
            loop = task.spawn(function()
                while state do
                    for i = 0, 999, 25 do
                        if not state then break end
                        Ping.Value = i
                        task.wait(0.03)
                    end
                    for i = 999, 0, -25 do
                        if not state then break end
                        Ping.Value = i
                        task.wait(0.03)
                    end
                end
            end)
        else
            if loop then
                task.cancel(loop)
                loop = nil
            end
        end
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local MeleeDamage = ReplicatedStorage:WaitForChild("Settings"):WaitForChild("Multipliers"):WaitForChild("MeleeDamage")

MeleeDamage.Value = 100

Tab:Toggle({
    Flag = "15",
    Title = "一拳倒地",
    Value = false,
    Callback = function(state)
        if state then
            MeleeDamage.Value = 1000000
        else
            MeleeDamage.Value = 100
        end
    end
})
Tab:Toggle({
    Flag = "16",
    Title = "一拳击飞",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local RunService = game:GetService("RunService")

        local LocalPlayer = Players.LocalPlayer
        local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

        local RagdollPower = ReplicatedStorage:WaitForChild("Settings"):WaitForChild("Multipliers"):WaitForChild("RagdollPower")

        local maxTeleportDistance = 50
        local lastPosition = HumanoidRootPart.Position
        local connection

        if state then
            RagdollPower.Value = 10000

            connection = RunService.RenderStepped:Connect(function()
                
                if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
                    lastPosition = HumanoidRootPart.Position
                end

                local currentPos = HumanoidRootPart.Position
                local distance = (currentPos - lastPosition).Magnitude

                if distance > maxTeleportDistance then
                    HumanoidRootPart.CFrame = CFrame.new(lastPosition)
                else
                    lastPosition = currentPos
                end
            end)
        else
            RagdollPower.Value = 100
            if connection then
                connection:Disconnect()
                connection = nil
            end
        end
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local wallCombo = ReplicatedStorage.Settings.Cooldowns.WallCombo

Tab:Toggle({
    Flag = "17",
    Title = "墙打无冷却",
    Value = false,
    Callback = function(state)
        if state then
            wallCombo.Value = 0
            print("WallCombo cooldown set to 0")
        else
            wallCombo.Value = 100
            print("WallCombo cooldown reset to 100")
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local wall = nil
pcall(function()
    wall = workspace.Map.Structural.Terrain:GetChildren()[5]:GetChildren()[12]
end)

if not wall then
    wall = Instance.new("Part")
    wall.Parent = workspace
end

wall.Size = Vector3.new(12,6,2)
wall.Transparency = 0.6
wall.Material = Enum.Material.SmoothPlastic
wall.Anchored = true
wall.CanCollide = true
wall.CFrame = wall.CFrame or CFrame.new(0,5,0)

if getconnections then
    for _, conn in pairs(getconnections(wall.AncestryChanged)) do
        conn:Disable()
    end
end

local mt = getrawmetatable(game)
setreadonly(mt,false)
local old = mt.__namecall
mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    if self == wall and method == "Destroy" then
        return
    end
    return old(self, ...)
end)
setreadonly(mt,true)

local followConnection = nil
Tab:Toggle({
    Flag = "18",
    Title = "随处墙打",
    Value = false,
    Callback = function(state)
        if state then
            if not followConnection then
                followConnection = RunService.RenderStepped:Connect(function()
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        wall.CFrame = hrp.CFrame * CFrame.new(0,0,-8)
                    end
                end)
            end
        else
            if followConnection then
                followConnection:Disconnect()
                followConnection = nil
            end
        end
    end
})
local originalData = {}
local skyBackup = nil

Tab:Toggle({
    Flag = "19",
    Title = "防卡",
    Value = false,
    Callback = function(state)
        if state then
            originalData = {}
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Explosion") then
                    originalData[v] = v.Enabled
                    v.Enabled = false
                elseif v:IsA("Decal") or v:IsA("Texture") then
                    originalData[v] = v.Transparency
                    v.Transparency = 1
                elseif v:IsA("MeshPart") or v:IsA("UnionOperation") or v:IsA("Part") then
                    if v.Name ~= "HumanoidRootPart" then
                        originalData[v] = v.Material
                        v.Material = Enum.Material.SmoothPlastic
                    end
                elseif v:IsA("SurfaceGui") or v:IsA("BillboardGui") or v:IsA("Beam") then
                    if v:IsA("Beam") then
                        originalData[v] = v.Enabled
                        v.Enabled = false
                    else
                        originalData[v] = v.Enabled ~= nil and v.Enabled or true
                        if v.Enabled ~= nil then
                            v.Enabled = false
                        end
                    end
                end
            end
            originalData["GlobalShadows"] = game.Lighting.GlobalShadows
            originalData["FogEnd"] = game.Lighting.FogEnd
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 9e9
            local sky = game.Lighting:FindFirstChildOfClass("Sky")
            if sky then
                skyBackup = sky:Clone()
                sky:Destroy()
            end
            local newSky = Instance.new("Sky")
            newSky.SkyboxBk = ""
            newSky.SkyboxDn = ""
            newSky.SkyboxFt = ""
            newSky.SkyboxLf = ""
            newSky.SkyboxRt = ""
            newSky.SkyboxUp = ""
            newSky.SunAngularSize = 0
            newSky.MoonAngularSize = 0
            newSky.Parent = game.Lighting
            game.Lighting.Ambient = Color3.fromRGB(128,128,128)
            game.Lighting.OutdoorAmbient = Color3.fromRGB(128,128,128)
        else
            for obj, value in pairs(originalData) do
                if typeof(obj) == "Instance" and obj.Parent then
                    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Explosion") then
                        obj.Enabled = value
                    elseif obj:IsA("Decal") or obj:IsA("Texture") then
                        obj.Transparency = value
                    elseif obj:IsA("MeshPart") or obj:IsA("UnionOperation") or obj:IsA("Part") then
                        obj.Material = value
                    elseif obj:IsA("SurfaceGui") or obj:IsA("BillboardGui") or obj:IsA("Beam") then
                        if obj:IsA("Beam") then
                            obj.Enabled = value
                        elseif obj.Enabled ~= nil then
                            obj.Enabled = value
                        end
                    end
                elseif obj == "GlobalShadows" then
                    game.Lighting.GlobalShadows = value
                elseif obj == "FogEnd" then
                    game.Lighting.FogEnd = value
                end
            end
            if skyBackup then
                local currentSky = game.Lighting:FindFirstChildOfClass("Sky")
                if currentSky then
                    currentSky:Destroy()
                end
                skyBackup.Parent = game.Lighting
                skyBackup = nil
            end
            originalData = {}
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Camera = workspace.CurrentCamera

local clone, platform, originalCFrame, originalCameraSubject

local function CreatePlatform(position)
    local part = Instance.new("Part")
    part.Size = Vector3.new(10, 1, 10)
    part.Position = position - Vector3.new(0, 3, 0)
    part.Anchored = true
    part.CanCollide = true
    part.Transparency = 0.5
    part.Parent = workspace
    return part
end

local function CreateClone()
    local newClone = Character:Clone()
    for _, v in ipairs(newClone:GetDescendants()) do
        if v:IsA("BasePart") then
            v.Transparency = 0.5
        end
    end
    newClone.Parent = workspace
    return newClone
end

local function ToggleInvisibility(state)
    if state then
        originalCFrame = HumanoidRootPart.CFrame
        HumanoidRootPart.CFrame = HumanoidRootPart.CFrame + Vector3.new(0, -50, 0)
        platform = CreatePlatform(HumanoidRootPart.Position)
        
        task.wait(1)
        
        clone = CreateClone()
        clone:MoveTo(originalCFrame.Position)
        Camera.CameraSubject = clone:FindFirstChildWhichIsA("Humanoid")
        LocalPlayer.Character = clone
    else
        if clone then
            clone:Destroy()
            clone = nil
        end
        
        if platform then
            platform:Destroy()
            platform = nil
        end
        
        if originalCFrame then
            HumanoidRootPart.CFrame = originalCFrame
            originalCFrame = nil
        end
        
        Camera.CameraSubject = Character:FindFirstChildWhichIsA("Humanoid")
        LocalPlayer.Character = Character
    end
end

Tab:Toggle({
    Flag = "20",
    Title = "隐身",
    Value = false,
    Callback = ToggleInvisibility
})

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local active = false

local function getLocalPlayerCharacter()
    return LocalPlayer.Character
end

local function generateActionNumber()
    return "Action" .. math.random(1000, 9999)
end

local function getServerTime()
    return tick()
end

local function wallcomboveryud()
    local playerChar = getLocalPlayerCharacter()
    if not playerChar then return false end

    local head = playerChar:FindFirstChild("Head")
    if not head then return false end

    local charData = LocalPlayer:FindFirstChild("Data")
    local charValue = charData and charData:FindFirstChild("Character") and charData.Character.Value
    if not charValue then return false end

    local charsFolder = ReplicatedStorage:FindFirstChild("Characters")
    if not charsFolder or not charsFolder:FindFirstChild(charValue) then return false end

    local wallComboAbility = charsFolder[charValue]:FindFirstChild("WallCombo")
    if not wallComboAbility then return false end

    local targetCharacter = playerChar
    if not targetCharacter then return false end

    local actionNumber = generateActionNumber()
    local serverTime = getServerTime()
    local randomId = math.random(100000, 999999)

    local remoteArgs = {
        wallComboAbility,
        "Characters:" .. charValue .. ":WallCombo",
        1,
        randomId,
        {
            HitboxCFrames = {nil},
            BestHitCharacter = targetCharacter,
            HitCharacters = {targetCharacter},
            Ignore = {[actionNumber] = {targetCharacter}},
            DeathInfo = {},
            Actions = {[actionNumber] = {}},
            HitInfo = {
                Blocked = false,
                IsFacing = true,
                IsInFront = true
            },
            BlockedCharacters = {},
            ServerTime = serverTime,
            FromCFrame = nil
        },
        actionNumber
    }

    pcall(function()
        ReplicatedStorage.Remotes.Abilities.Ability:FireServer(wallComboAbility, randomId)
    end)

    pcall(function()
        ReplicatedStorage.Remotes.Combat.Action:FireServer(unpack(remoteArgs))
    end)
end

task.spawn(function()
    while task.wait(0.01) do
        if active then
            pcall(wallcomboveryud)
        end
    end
end)

Tab:Toggle({
    Flag = "21",
    Title = "无敌",
    Value = false,
    Callback = function(state)
        active = state
    end
})
Tab:Button({
    Flag = "22",
    Title = "卡服",
    Callback = function()
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local RunService = game:GetService("RunService")

        local player = Players.LocalPlayer
        local active = true
        local spawnedTasks = {}

        local function buildCombatArgs()
            return {
                [1] = ReplicatedStorage.Characters.Gon.WallCombo,
                [2] = "Characters:Gon:WallCombo",
                [3] = 1,
                [4] = 33036,
                [5] = {
                    ["HitboxCFrames"] = {},
                    ["BestHitCharacter"] = workspace.Characters.NPCs:FindFirstChild("The Ultimate Bum"),
                    ["HitCharacters"] = {workspace.Characters.NPCs:FindFirstChild("The Ultimate Bum")},
                    ["Ignore"] = {},
                    ["DeathInfo"] = {},
                    ["Actions"] = {},
                    ["HitInfo"] = {
                        ["IsFacing"] = true,
                        ["IsInFront"] = true
                    },
                    ["BlockedCharacters"] = {},
                    ["ServerTime"] = os.clock(),
                    ["FromCFrame"] = CFrame.new(534.693, 5.532, 79.486)
                },
                [6] = "Action651",
                [7] = 0
            }
        end

        local abilityArgs = {
            [1] = ReplicatedStorage.Characters.Gon.WallCombo,
            [2] = 33036,
            [4] = workspace.Characters.NPCs:FindFirstChild("The Ultimate Bum"),
            [5] = Vector3.new(527.693, 4.532, 79.978)
        }

        for i = 1, 10000 do
            local t = task.spawn(function()
                if active then
                    pcall(function()
                        local combatArgs = buildCombatArgs()
                        ReplicatedStorage.Remotes.Abilities.Ability:FireServer(unpack(abilityArgs))
                        ReplicatedStorage.Remotes.Combat.Action:FireServer(unpack(combatArgs))
                    end)
                end
            end)
            table.insert(spawnedTasks, t)
        end

        task.delay(3, function()
            active = false
            for _, t in ipairs(spawnedTasks) do
                if task.cancel then
                    task.cancel(t)
                end
            end
            spawnedTasks = {}

            local localContainers = workspace:FindFirstChild("Container(Drawing)")
            if localContainers then
                for _, v in ipairs(localContainers:GetChildren()) do
                    if v.Name:match(tostring(player.UserId)) then
                        v:Destroy()
                    end
                end
            end

            print("已瞬发500事件，本地已停止继续发展并清理任务与日志")
        end)
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local Core = require(ReplicatedStorage:WaitForChild("Core"))

local LocalPlayer = Players.LocalPlayer
local charValue = LocalPlayer:WaitForChild("Data"):WaitForChild("Character").Value
local chars = ReplicatedStorage:WaitForChild("Characters")
local ability = chars:WaitForChild(charValue):WaitForChild("WallCombo")
local interruptAttr = ability:GetAttribute("Interrupt")

local wallComboCooldown = 0.05
local lastWallComboTime = 0
local wallComboKey = Enum.KeyCode.E
local lastDashTime = 0

local wallComboEnabled = false
local ignoreFriends = false

local wallComboConn = nil
local dashConn = nil

local function isFriend(player)
    local ok, res = pcall(function() return LocalPlayer:IsFriendsWith(player.UserId) end)
    return ok and res
end

local function shouldIgnorePlayerModel(model)
    if not model then return false end
    if ignoreFriends then
        for _, pl in ipairs(Players:GetPlayers()) do
            if pl ~= LocalPlayer and pl.Character == model then
                if isFriend(pl) then
                    return true
                end
            end
        end
    end
    return false
end

local function getHead()
    local character = LocalPlayer.Character
    if not character then return nil end
    return character:FindFirstChild("Head")
end

local function hasValidTargetsForWallCombo(range)
    local head = getHead()
    if not head then return false end
    local hrpPos = head.Position
    for _, pl in ipairs(Players:GetPlayers()) do
        if pl ~= LocalPlayer and pl.Character and pl.Character:FindFirstChild("HumanoidRootPart") then
            if not shouldIgnorePlayerModel(pl.Character) then
                local d = (pl.Character.HumanoidRootPart.Position - hrpPos).Magnitude
                if d <= range then return true end
            end
        end
    end
    return false
end

local function executeWallCombo()
    local head = getHead()
    if not head then return end
    local now = tick()
    if now - lastWallComboTime < wallComboCooldown then return end
    if not hasValidTargetsForWallCombo(100) then return end
    lastWallComboTime = now
    local res
    local success = pcall(function()
        res = Core.Get("Combat","Hit").Box(nil, LocalPlayer.Character, {Size = Vector3.new(100,100,100)})
    end)
    if not success or not res then return end
    pcall(function()
        Core.Get("Combat","Ability").Activate(chars[charValue].WallCombo, res, head.Position + Vector3.new(0,0,2.5))
    end)
end

local function fireDash()
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    local now = tick()
    if now - lastDashTime < 0.1 then return end
    lastDashTime = now
    local args = {
        [1] = hrp.CFrame,
        [2] = "F",
        [3] = hrp.CFrame.LookVector,
        [5] = now
    }
    if ReplicatedStorage:FindFirstChild("Remotes") and ReplicatedStorage.Remotes:FindFirstChild("Character") and ReplicatedStorage.Remotes.Character:FindFirstChild("Dash") then
        ReplicatedStorage.Remotes.Character.Dash:FireServer(unpack(args))
    else
        pcall(function()
            ReplicatedStorage.Remotes.Character.Dash:FireServer(unpack(args))
        end)
    end
end

local function toggleWallCombo(state)
    wallComboEnabled = state
    if wallComboConn then wallComboConn:Disconnect(); wallComboConn = nil end
    if dashConn then dashConn:Disconnect(); dashConn = nil end
    if wallComboEnabled then
        wallComboConn = RunService.Heartbeat:Connect(function()
            executeWallCombo()
        end)
        dashConn = RunService.Heartbeat:Connect(function()
            fireDash()
        end)
    end
end

UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == wallComboKey then
        executeWallCombo()
    end
end)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Core = require(ReplicatedStorage:WaitForChild("Core"))
local LocalPlayer = Players.LocalPlayer

local Configs = {
    IgnoreFriends = false,
    MaxDistance = 100,
    Damage = 9999,
    HealthLimit = 0,
    DashInterval = 0.7,
    AttackInterval = 0.001
}

local running = false
local conn
local lastDash = 0
local lastAttack = 0

local data = LocalPlayer:WaitForChild("Data")
local charValue = data:WaitForChild("Character")
local localCharacterName = charValue.Value
local ability = ReplicatedStorage:WaitForChild("Characters"):WaitForChild(localCharacterName):WaitForChild("WallCombo")
local AbilitiesRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Abilities"):WaitForChild("Ability")
local CombatRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Combat"):WaitForChild("Action")

local function getLocalRootPart()
    local c = LocalPlayer.Character
    return c and c:FindFirstChild("HumanoidRootPart")
end

local function triggerDash()
    if tick() - lastDash < Configs.DashInterval then return end
    lastDash = tick()
    local hrp = getLocalRootPart()
    if not hrp then return end
    local dashRemote = ReplicatedStorage.Remotes.Character:FindFirstChild("Dash")
    if dashRemote then
        pcall(function()
            dashRemote:FireServer(hrp.CFrame, "L", hrp.CFrame.LookVector, nil, tick())
        end)
    end
end

local function sendKillAura()
    if tick() - lastAttack < Configs.AttackInterval then return end
    lastAttack = tick()
    local localRootPart = getLocalRootPart()
    if not localRootPart then return end
    triggerDash()
    local maxDistSq = Configs.MaxDistance * Configs.MaxDistance
    for _, targetPlayer in ipairs(Players:GetPlayers()) do
        if targetPlayer ~= LocalPlayer then
            local targetChar = targetPlayer.Character
            if targetChar then
                local targetRootPart = targetChar:FindFirstChild("HumanoidRootPart")
                local targetHumanoid = targetChar:FindFirstChild("Humanoid")
                if targetRootPart and targetHumanoid and targetHumanoid.Health > Configs.HealthLimit then
                    if not (Configs.IgnoreFriends and LocalPlayer:IsFriendsWith(targetPlayer.UserId)) then
                        local delta = localRootPart.Position - targetRootPart.Position
                        if delta.Magnitude * delta.Magnitude <= maxDistSq then
                            pcall(function()
                                AbilitiesRemote:FireServer(ability, Configs.Damage, {}, targetRootPart.Position)
                            end)
                            pcall(function()
                                CombatRemote:FireServer(
                                    ability,
                                    localCharacterName .. ":WallCombo",
                                    2,
                                    Configs.Damage,
                                    {
                                        HitboxCFrames = {targetRootPart.CFrame, targetRootPart.CFrame},
                                        BestHitCharacter = targetChar,
                                        HitCharacters = {targetChar},
                                        Ignore = {},
                                        DeathInfo = {},
                                        BlockedCharacters = {},
                                        HitInfo = {IsFacing = false, IsInFront = true},
                                        ServerTime = os.time(),
                                        Actions = {
                                            ActionNumber1 = {
                                                [targetPlayer.Name] = {
                                                    StartCFrameStr = tostring(localRootPart.CFrame),
                                                    Local = true,
                                                    Collision = false,
                                                    Animation = "Punch1Hit",
                                                    Preset = "Punch",
                                                    Velocity = Vector3.zero,
                                                    FromPosition = targetRootPart.Position,
                                                    Seed = math.random(1,999999)
                                                }
                                            }
                                        },
                                        FromCFrame = targetRootPart.CFrame
                                    },
                                    "Action150",
                                    0
                                )
                            end)
                        end
                    end
                end
            end
        end
    end
end

local function startAura()
    if conn then conn:Disconnect() conn = nil end
    conn = RunService.Heartbeat:Connect(function()
        if running then
            sendKillAura()
        end
    end)
end

local function stopAura()
    if conn then conn:Disconnect() conn = nil end
end

Tab:Toggle({
    Flag = "23",
    Title = "杀戮光环",
    Value = false,
    Callback = function(state)
        running = state
        if running then
            startAura()
        else
            stopAura()
        end
    end
})

Tab:Toggle({
    Flag = "24",
    Title = "杀戮光环忽略好友",
    Value = false,
    Callback = function(state)
        Configs.IgnoreFriends = state
    end
})
Tab:Toggle({
    Flag = "25",
    Title = "墙打秒杀",
    Value = false,
    Callback = function(state)
        toggleWallCombo(state)
    end
})

Tab:Toggle({
    Flag = "26",
    Title = "墙打秒杀忽略好友",
    Value = false,
    Callback = function(state)
        ignoreFriends = state
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local CircleParts = {}
local Connection

local function RainbowColor(t)
    local r = math.sin(t) * 40 + 180
    local g = math.sin(t + 2) * 40 + 180
    local b = math.sin(t + 4) * 40 + 180
    return Color3.fromRGB(r, g, b)
end

Tab:Toggle({
    Flag = "27",
    Title = "墙打/杀戮光环范围显示",
    Value = false,
    Callback = function(state)
        local function CreateCircle(radius, segments, thickness)
            local parts = {}
            for i = 1, segments do
                local part = Instance.new("Part")
                part.Anchored = true
                part.CanCollide = false
                part.Material = Enum.Material.Neon
                part.Size = Vector3.new(thickness, 0.2, radius * 2 * math.pi / segments)
                part.Color = Color3.fromRGB(180,180,180)
                part.Parent = workspace
                table.insert(parts, part)
            end
            return parts
        end

        local function DestroyCircle()
            if Connection then
                Connection:Disconnect()
                Connection = nil
            end
            for _, part in ipairs(CircleParts) do
                if part and part.Parent then
                    part:Destroy()
                end
            end
            CircleParts = {}
        end

        if state then
            DestroyCircle()
            local radius = 60
            local segments = 60
            local thickness = 0.2
            CircleParts = CreateCircle(radius, segments, thickness)

            local time = 0
            local updateAccumulator = 0
            local updateRate = 1/60

            Connection = RunService.RenderStepped:Connect(function(dt)
                time = time + dt
                updateAccumulator = updateAccumulator + dt
                if updateAccumulator < updateRate then return end
                updateAccumulator = 0

                local char = LocalPlayer.Character
                if char and char:FindFirstChild("HumanoidRootPart") then
                    local rootPos = char.HumanoidRootPart.Position
                    local humanoid = char:FindFirstChild("Humanoid")
                    local heightOffset = humanoid and humanoid.HipHeight / 2 + 0.1 or 0.9 
                    local pos = rootPos - Vector3.new(0, heightOffset, 0)

                    for i, part in ipairs(CircleParts) do
                        local angle = (i / #CircleParts) * 2 * math.pi
                        local x = pos.X + math.cos(angle) * radius
                        local z = pos.Z + math.sin(angle) * radius
                        part.Position = Vector3.new(x, pos.Y, z)
                        part.Orientation = Vector3.new(0, -math.deg(angle), 0)
                        part.Color = RainbowColor(time + i * 0.1)
                    end
                end
            end)
        else
            DestroyCircle()
        end
    end
})

Tab:Button({
    Flag = "28",
    Title = "删除墙打特效",
    Desc = "点了该功能就无法恢复墙打特效",
    Callback = function()
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local paths = {
            ReplicatedStorage.Characters.Gon.WallCombo.GonWallCombo.Center,
            ReplicatedStorage.Characters.Gon.WallCombo.GonWallCombo.Explosion,
            ReplicatedStorage.Characters.Gon.WallCombo.GonIntroHands,
            ReplicatedStorage.Characters.Mob.WallCombo.MobWallCombo.Center,
            ReplicatedStorage.Characters.Nanami.WallCombo.NanamiWallCombo.Center,
            ReplicatedStorage.Characters.Stark.WallCombo.StarkWallCombo.Center,
            ReplicatedStorage.Characters.Sukuna.WallCombo.SukunaTransformWallCombo,
            ReplicatedStorage.Characters.Sukuna.WallCombo.SukunaWallCombo
        }

        for _, obj in ipairs(paths) do
            if obj and obj:IsA("Instance") then
                for _, child in ipairs(obj:GetChildren()) do
                    child:Destroy()
                end
            end
        end
    end
})
Tab:Button({
    Flag = "29",
    Title = "删除击杀表情特效",
    Desc = "点击删除击杀表情的部分特效,不可恢复",
    Callback = function()
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local KillEmote = ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote")

        local function removeEffects(obj)
            for _, child in ipairs(obj:GetChildren()) do
                if child:IsA("ParticleEmitter") 
                or child:IsA("Trail") 
                or child:IsA("Beam") 
                or child:IsA("Fire") 
                or child:IsA("Smoke") 
                or child:IsA("Sparkles") 
                or child:IsA("Light") then
                    child:Destroy()
                else
                    removeEffects(child)
                end
            end
        end

        removeEffects(KillEmote)
        print("KillEmote 特效已删除（保留本体）")
    end
})
 local ReplicatedStorage = game:GetService("ReplicatedStorage")
local multiUseCutscenesToggle = ReplicatedStorage.Settings.Toggles.MultiUseCutscenes

local defaultValue = false

Tab:Toggle({
    Flag = "30",
    Title = "艾斯帕大招技能多次使用(全角色通用)",
    Value = multiUseCutscenesToggle.Value,
    Callback = function(state)
        if state then
            multiUseCutscenesToggle.Value = true
        else
            multiUseCutscenesToggle.Value = defaultValue
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local QEfly = true

local FLYING = false
local flyKeyDown, flyKeyUp, mobileFlyConn
local iyflyspeed = 2
local vehicleflyspeed = 2

local function getRoot(char)
    return char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
end

local function NOFLY()
    FLYING = false
    if flyKeyDown then flyKeyDown:Disconnect() flyKeyDown = nil end
    if flyKeyUp then flyKeyUp:Disconnect() flyKeyUp = nil end
    if mobileFlyConn then mobileFlyConn:Disconnect() mobileFlyConn = nil end
    local char = LocalPlayer.Character
    if char then
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        local root = getRoot(char)
        if humanoid then humanoid.PlatformStand = false end
        for _, v in pairs(root:GetChildren()) do
            if v:IsA("BodyGyro") or v:IsA("BodyVelocity") then
                v:Destroy()
            end
        end
    end
    pcall(function()
        workspace.CurrentCamera.CameraType = Enum.CameraType.Custom
    end)
end

local function sFLY(vfly)
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid") or char:WaitForChild("Humanoid")
    local root = getRoot(char)

    if flyKeyDown then flyKeyDown:Disconnect() end
    if flyKeyUp then flyKeyUp:Disconnect() end
    if mobileFlyConn then mobileFlyConn:Disconnect() end

    local CONTROL = {F=0,B=0,L=0,R=0,Q=0,E=0}

    local BG = Instance.new("BodyGyro")
    local BV = Instance.new("BodyVelocity")
    BG.P = 9e4
    BG.MaxTorque = Vector3.new(9e9,9e9,9e9)
    BG.CFrame = root.CFrame
    BG.Parent = root
    BV.MaxForce = Vector3.new(9e9,9e9,9e9)
    BV.Velocity = Vector3.new(0,0,0)
    BV.Parent = root

    FLYING = true

    flyKeyDown = UserInputService.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Keyboard then
            if input.KeyCode == Enum.KeyCode.W then CONTROL.F = iyflyspeed end
            if input.KeyCode == Enum.KeyCode.S then CONTROL.B = -iyflyspeed end
            if input.KeyCode == Enum.KeyCode.A then CONTROL.L = -iyflyspeed end
            if input.KeyCode == Enum.KeyCode.D then CONTROL.R = iyflyspeed end
            if input.KeyCode == Enum.KeyCode.E and QEfly then CONTROL.Q = iyflyspeed*2 end
            if input.KeyCode == Enum.KeyCode.Q and QEfly then CONTROL.E = -iyflyspeed*2 end
        end
    end)

    flyKeyUp = UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Keyboard then
            if input.KeyCode == Enum.KeyCode.W then CONTROL.F = 0 end
            if input.KeyCode == Enum.KeyCode.S then CONTROL.B = 0 end
            if input.KeyCode == Enum.KeyCode.A then CONTROL.L = 0 end
            if input.KeyCode == Enum.KeyCode.D then CONTROL.R = 0 end
            if input.KeyCode == Enum.KeyCode.E then CONTROL.Q = 0 end
            if input.KeyCode == Enum.KeyCode.Q then CONTROL.E = 0 end
        end
    end)

    mobileFlyConn = RunService.RenderStepped:Connect(function()
        if not FLYING then return end
        local camera = workspace.CurrentCamera
        local moveVector = Vector3.new(CONTROL.L+CONTROL.R, CONTROL.Q+CONTROL.E, CONTROL.F+CONTROL.B)

        local ok, controlModule = pcall(function()
            return require(LocalPlayer.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
        end)
        if ok and controlModule then
            local mv = controlModule:GetMoveVector()
            moveVector = Vector3.new(mv.X*(vfly and vehicleflyspeed or iyflyspeed), moveVector.Y, -mv.Z*(vfly and vehicleflyspeed or iyflyspeed))
        end

        BV.Velocity = (camera.CFrame.RightVector*moveVector.X + Vector3.new(0,moveVector.Y,0) + camera.CFrame.LookVector*moveVector.Z)*50
        BG.CFrame = camera.CFrame
        humanoid.PlatformStand = true
    end)
end

local function applyFly()
    sFLY()
    LocalPlayer.CharacterAdded:Connect(function()
        if FLY_TOGGLE_STATE then
            task.wait(0.5)
            sFLY()
        end
    end)
end

local FLY_TOGGLE_STATE = false

Tab:Toggle({
    Flag = "31",
    Title = "飞行",
    Value = false,
    Callback = function(state)
        FLY_TOGGLE_STATE = state
        if state then
            applyFly()
        else
            NOFLY()
        end
    end
})

Tab:Slider({
    Flag = "32",
    Title = "飞行速度",
    Value = {
        Min = 1,
        Max = 10,
        Default = 2
    },
    Callback = function(value)
        iyflyspeed = value
        vehicleflyspeed = value
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 100

Tab:Toggle({
    Flag = "33",
    Title = "速度",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Flag = "34",
    Title = "速度调节",
    Value = {
        Min = 0,
        Max = 250,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})

Tab:Slider({
    Flag = "35",
    Title = "冲刺加速(默认值100)",
    Value = {
        Min = 0,
        Max = 1000,
        Default = 100,
    },
    Callback = function(value)
        game:GetService("ReplicatedStorage").Settings.Multipliers.DashSpeed.Value = value
    end
})

Tab:Slider({
    Flag = "36",
    Title = "跳跃增强(默认值100)",
    Value = {
        Min = 0,
        Max = 1000,
        Default = 100,
    },
    Callback = function(value)
        game:GetService("ReplicatedStorage").Settings.Multipliers.JumpHeight.Value = value
    end
})

Tab:Slider({
    Flag = "37",
    Title = "攻击加速(默认值100)",
    Value = {
        Min = 0,
        Max = 1000,
        Default = 100,
    },
    Callback = function(value)
        game:GetService("ReplicatedStorage").Settings.Multipliers.MeleeSpeed.Value = value
    end
})

local Players = game:GetService("Players")
local Tab = Window:Tab({
    Title = "碰撞箱扩大",
    Icon = "box",
    Locked = false,
})

local expansionMethod = "Add"
local hitboxX, hitboxY, hitboxZ = 0, 0, 0
local isHitboxExpanded = false
local hitModuleTable = nil
local originalBox = nil
local sizeModifier = Vector3.new(0, 0, 0)

local function setupHitboxHook()
    if hitModuleTable and hitModuleTable._boxSizeModifierHookInstalled then
        print("Hitbox hook already installed.")
        return true
    end
    
    local player = Players.LocalPlayer
    local playerScripts = player:WaitForChild("PlayerScripts")
    local combatFolder = playerScripts:WaitForChild("Combat")
    local hitModule = combatFolder:WaitForChild("Hit")
    
    hitModuleTable = require(hitModule)
    originalBox = hitModuleTable.Box
    
    hitModuleTable.Box = function(...)
        local args = {...}
        if args[3] and typeof(args[3]) == "table" then
            local config = args[3]
            if config.Size and typeof(config.Size) == "Vector3" then
                if not config._originalSize then
                    config._originalSize = config.Size
                end
                if expansionMethod == "Set" then
                    config.Size = sizeModifier
                elseif expansionMethod == "Add" then
                    config.Size = config._originalSize + sizeModifier
                end
            end
            return originalBox(...)
        else
            return originalBox(...)
        end
    end
    hitModuleTable._boxSizeModifierHookInstalled = true
    return true
end

local function applySigmaHitbox(x, y, z)
    if not setupHitboxHook() then
        warn("Failed to setup hitbox hook!")
        return
    end
    sizeModifier = Vector3.new(x, y, z)
    print("Sigma hitbox expansion applied:", sizeModifier)
end

Tab:Input({
    Title = "X 轴向量",
    Value = "0",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入一个数字...",
    Callback = function(input)
        hitboxX = tonumber(input) or 0
        print("Hitbox X vector set to:", hitboxX)
    end
})

Tab:Input({
    Title = "Y 轴向量",
    Value = "0",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入一个数字...",
    Callback = function(input)
        hitboxY = tonumber(input) or 0
        print("Hitbox Y vector set to:", hitboxY)
    end
})

Tab:Input({
    Title = "Z 轴向量",
    Value = "0",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入一个数字...",
    Callback = function(input)
        hitboxZ = tonumber(input) or 0
        print("Hitbox Z vector set to:", hitboxZ)
    end
})

Tab:Dropdown({
    Title = "扩展方法",
    Values = {"Add", "Set"},
    Value = "Add",
    Multi = false,
    AllowNone = false,
    Callback = function(option)
        expansionMethod = option
        print("Hitbox method set to:", expansionMethod)
    end
})

Tab:Button({
    Title = "应用碰撞箱修改",
    Desc = nil,
    Locked = false,
    Callback = function()
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

Tab:Button({
    Title = "小幅扩展 (+5范围)",
    Desc = nil,
    Locked = false,
    Callback = function()
        hitboxX, hitboxY, hitboxZ = 5, 5, 5
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

Tab:Button({
    Title = "中幅扩展 (+10范围)",
    Desc = nil,
    Locked = false,
    Callback = function()
        hitboxX, hitboxY, hitboxZ = 10, 10, 10
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

Tab:Button({
    Title = "大幅扩展 (+20范围)",
    Desc = nil,
    Locked = false,
    Callback = function()
        hitboxX, hitboxY, hitboxZ = 20, 20, 20
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

local LockTab = Window:Tab({
    Title = "锁人",
    Icon = "target",
    Locked = false,
})

local Players    = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer

local BEHIND_DISTANCE = 5

local followEnabled   = false
local circleEnabled   = false
local lookEnabled     = false

local selectedTargetName = nil

local followConnection  = nil
local circleConnection  = nil
local lookConnection    = nil

local circleRadius = 6
local circleSpeed  = 13
local circleAngle  = 0

local function getHRP(player)
    if player and player.Character then
        return player.Character:FindFirstChild("HumanoidRootPart")
    end
end

local function getPlayerByName(name)
    for _, p in pairs(Players:GetPlayers()) do
        if p.Name == name then
            return p
        end
    end
end

local function startFollow()
    followConnection = RunService.RenderStepped:Connect(function()
        if not followEnabled then return end
        local myHRP   = getHRP(localPlayer)
        local target  = getPlayerByName(selectedTargetName)
        local targetHRP = target and getHRP(target)
        if myHRP and targetHRP then
            local pos = targetHRP.Position - targetHRP.CFrame.LookVector * BEHIND_DISTANCE
            myHRP.CFrame = CFrame.new(pos.X, targetHRP.Position.Y, pos.Z)
        end
    end)
end

local function startCircle()
    circleConnection = RunService.RenderStepped:Connect(function(dt)
        if not circleEnabled then return end
        local myHRP   = getHRP(localPlayer)
        local target  = getPlayerByName(selectedTargetName)
        local targetHRP = target and getHRP(target)
        if myHRP and targetHRP then
            circleAngle = circleAngle + circleSpeed * dt
            local x = math.cos(circleAngle) * circleRadius
            local z = math.sin(circleAngle) * circleRadius
            local p = targetHRP.Position + Vector3.new(x, 0, z)
            myHRP.CFrame = CFrame.new(p.X, targetHRP.Position.Y, p.Z)
        end
    end)
end

local function startLook()
    lookConnection = RunService.RenderStepped:Connect(function()
        if not lookEnabled then return end
        local myHRP   = getHRP(localPlayer)
        local target  = getPlayerByName(selectedTargetName)
        local targetHRP = target and getHRP(target)
        if myHRP and targetHRP then
            local myPos = myHRP.Position
            local tp    = targetHRP.Position
            myHRP.CFrame = CFrame.new(myPos, Vector3.new(tp.X, myPos.Y, tp.Z))
        end
    end)
end

local function stopConnections()
    if followConnection then followConnection:Disconnect() end
    if circleConnection then circleConnection:Disconnect() end
    if lookConnection   then lookConnection:Disconnect()   end
    followConnection = nil
    circleConnection = nil
    lookConnection   = nil
    circleAngle      = 0
end

local playerDropdown = LockTab:Dropdown({
    Title = "选择目标玩家",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = (function()
        local names = {}
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= localPlayer then
                table.insert(names, p.Name)
            end
        end
        return names
    end)(),
    Callback = function(name)
        selectedTargetName = name
    end
})

LockTab:Button({
    Title = "刷新玩家列表",
    Callback = function()
        selectedTargetName = nil
        playerDropdown:Destroy()
        playerDropdown = LockTab:Dropdown({
            Title = "选择目标玩家",
            Multi = false,
            AllowNone = false,
            Value = nil,
            Values = (function()
                local names = {}
                for _, p in ipairs(Players:GetPlayers()) do
                    if p ~= localPlayer then
                        table.insert(names, p.Name)
                    end
                end
                return names
            end)(),
            Callback = function(name)
                selectedTargetName = name
            end
        })
    end
})

LockTab:Toggle({
    Title = "锁背",
    Value = false,
    Callback = function(state)
        followEnabled = state
        if state and not followConnection then startFollow() end
        if not state then stopConnections() end
    end
})

LockTab:Toggle({
    Title = "转圈",
    Value = false,
    Callback = function(state)
        circleEnabled = state
        if state and not circleConnection then startCircle() end
        if not state then stopConnections() end
    end
})

LockTab:Toggle({
    Title = "看着玩家(需要关移位锁)",
    Value = false,
    Callback = function(state)
        lookEnabled = state
        if state and not lookConnection then startLook() end
        if not state then stopConnections() end
    end
})
local lightningCharacterSwapTab = Window:Tab({
    Title = "快速切换角色",
    Icon = "bird",
    Locked = false,
})

local lastPosition

local function getHumanoidRootPart()
    local character = LocalPlayer.Character
    return character and character:FindFirstChild("HumanoidRootPart")
end

local function savePosition()
    local rootPart = getHumanoidRootPart()
    if rootPart then
        lastPosition = rootPart.CFrame
    end
end

local function handleKeyPress(characterName)
    savePosition()
    
    local rootPart = getHumanoidRootPart()
    if rootPart then
        rootPart.CFrame = CFrame.new(1011.1289672851562, -1009.359588623046875, 116.37605285644531)
    end

    ReplicatedStorage.Remotes.Character.ChangeCharacter:FireServer(characterName)

    local groundY = workspace.Map.Structural.Ground:GetChildren()[21].Position.Y
    repeat task.wait() until getHumanoidRootPart() and getHumanoidRootPart().Position.Y > groundY
    task.wait(0.15)

    local newRootPart = getHumanoidRootPart()
    if newRootPart and lastPosition then
        repeat
            newRootPart.CFrame = lastPosition
            task.wait(0.1)
        until (newRootPart.Position - lastPosition.Position).Magnitude < 10
    end
end

lightningCharacterSwapTab:Button({
    Title = "快速切换成小杰",
    Locked = false,
    Callback = function() handleKeyPress("Gon") end
})

lightningCharacterSwapTab:Button({
    Title = "快速切换成被诅咒的导师",
    Locked = false,
    Callback = function() handleKeyPress("Nanami") end
})

lightningCharacterSwapTab:Button({
    Title = "快速切换成沉默的艾丝帕",
    Locked = false,
    Callback = function() handleKeyPress("Mob") end
})
local env = {}
env.ReplicatedStorage = game:GetService("ReplicatedStorage")
env.Players = game:GetService("Players")
env.LocalPlayer = env.Players.LocalPlayer
env.core = require(env.ReplicatedStorage:WaitForChild("Core"))
env.Character = env.LocalPlayer.Character
env.HumanoidRootPart = env.Character and env.Character:WaitForChild("HumanoidRootPart")
env.orbitToggle = nil
env.fakeWallToggle = nil
env.serverStatus = "goodstate"

local forceKillEmoteTab = Window:Tab({
    Title = "击杀表情功能",
    Icon = "smile",
    Locked = false,
})

local killEmotes = {}
local isAuraMode = false
local isSpammingSelectedEmote = false
local auraDelay = 0.5
local spamDelay = 0.5
local selectedEmote = ""
local selectedKeybind = Enum.KeyCode.G
local emoteDropdown
local UserInputService = game:GetService("UserInputService")

local function getRoot(char)
    return char and char:FindFirstChild("HumanoidRootPart")
end

local function useEmote(emoteName)
    local emoteModule = env.ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote"):FindFirstChild(emoteName)
    local myRoot = getRoot(env.LocalPlayer.Character)
    if not myRoot then return end
    local closestTarget = nil
    local shortestDistance = math.huge
    for _, player in pairs(env.Players:GetPlayers()) do
        if player ~= env.LocalPlayer and player.Character then
            local targetRoot = getRoot(player.Character)
            if targetRoot then
                local distance = (myRoot.Position - targetRoot.Position).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    closestTarget = player.Character
                end
            end
        end
    end
    if closestTarget and emoteModule then
        task.spawn(function()
            _G.KillEmote = true
            pcall(function()
                if env.core and env.core.Get then
                    env.core.Get("Combat", "Ability").Activate(emoteModule, closestTarget)
                end
            end)
            _G.KillEmote = false
        end)
    end
end

local function useRandomEmote()
    if #killEmotes > 0 then
        local randomEmote = killEmotes[math.random(1, #killEmotes)]
        useEmote(randomEmote)
    end
end

task.spawn(function()
    while true do
        if isAuraMode then
            useRandomEmote()
            task.wait(auraDelay)
        else
            task.wait(0.1)
        end
    end
end)

task.spawn(function()
    while true do
        if isSpammingSelectedEmote and selectedEmote ~= "" then
            useEmote(selectedEmote)
            task.wait(spamDelay)
        else
            task.wait(0.1)
        end
    end
end)

UserInputService.InputBegan:Connect(function(input, isGameProcessed)
    if isGameProcessed then return end
    if input.KeyCode == selectedKeybind and selectedEmote ~= "" then
        useEmote(selectedEmote)
    end
end)

local function createOrUpdateEmoteDropdown(emoteList)
    local values = emoteList
    if not values or #values == 0 then
        values = {"No emotes found"}
    end
    emoteDropdown = forceKillEmoteTab:Dropdown({
        Title = "击杀表情功能(要靠近别人)",
        Values = values,
        Multi = false,
        AllowNone = false,
        Callback = function(option)
            if option ~= "No emotes found" then
                selectedEmote = option
                useEmote(option)
            end
        end
    })
end

forceKillEmoteTab:Button({
    Title = "刷新击杀表情",
    Desc = "刷新可用的击杀表情",
    Callback = function()
        local currentEmotes = {}
        for _, emote in pairs(env.ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote"):GetChildren()) do
            table.insert(currentEmotes, emote.Name)
        end
        killEmotes = currentEmotes
        createOrUpdateEmoteDropdown(killEmotes)
    end
})

for _, emote in pairs(env.ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote"):GetChildren()) do
    table.insert(killEmotes, emote.Name)
end

createOrUpdateEmoteDropdown(killEmotes)

forceKillEmoteTab:Toggle({
    Title = "击杀表情光环",
    Desc = "对旁边的人持续使用随机的击杀表情",
    Icon = "bird",
    Type = "Checkbox",
    Default = false,
    Callback = function(isEnabled)
        isAuraMode = isEnabled
    end
})

forceKillEmoteTab:Slider({
    Title = "击杀表情光环间隔",
    Step = 0.01,
    Value = { Min = 0.01, Max = 5.0, Default = 0.5 },
    Callback = function(value)
        auraDelay = value
    end
})

forceKillEmoteTab:Toggle({
    Title = "持续发送你选择的表情",
    Desc = "持续发送当前选择的表情",
    Icon = "bird",
    Type = "Checkbox",
    Default = false,
    Callback = function(isEnabled)
        isSpammingSelectedEmote = isEnabled
    end
})

forceKillEmoteTab:Slider({
    Title = "调整你选择的表情速度",
    Step = 0.01,
    Value = { Min = 0.01, Max = 5.0, Default = 0.5 },
    Callback = function(value)
        spamDelay = value
    end
})

local emoteKeybindOptions = { "G", "F", "H", "J", "K", "L", "Z", "X", "C", "V", "B", "N", "M", "Q", "E", "R", "T", "Y", "U", "I", "O", "P" }
local emoteKeybindMap = {
    ["G"] = Enum.KeyCode.G, ["F"] = Enum.KeyCode.F, ["H"] = Enum.KeyCode.H,
    ["J"] = Enum.KeyCode.J, ["K"] = Enum.KeyCode.K, ["L"] = Enum.KeyCode.L,
    ["Z"] = Enum.KeyCode.Z, ["X"] = Enum.KeyCode.X, ["C"] = Enum.KeyCode.C,
    ["V"] = Enum.KeyCode.V, ["B"] = Enum.KeyCode.B, ["N"] = Enum.KeyCode.N,
    ["M"] = Enum.KeyCode.M, ["Q"] = Enum.KeyCode.Q, ["E"] = Enum.KeyCode.E,
    ["R"] = Enum.KeyCode.R, ["T"] = Enum.KeyCode.T, ["Y"] = Enum.KeyCode.Y,
    ["U"] = Enum.KeyCode.U, ["I"] = Enum.KeyCode.I, ["O"] = Enum.KeyCode.O,
    ["P"] = Enum.KeyCode.P
}

forceKillEmoteTab:Dropdown({
    Title = "快捷键设置",
    Values = emoteKeybindOptions,
    Value = "G",
    Multi = false,
    AllowNone = false,
    Callback = function(option)
        selectedKeybind = emoteKeybindMap[option]
    end
})

forceKillEmoteTab:Button({
    Title = "随机用一个击杀表情",
    Desc = "字面意思",
    Locked = false,
    Callback = function()
        useRandomEmote()
    end
})
local Tab = Window:Tab({
    Title = "设置",
    Icon = "settings",
    Locked = false,
})

local ConfigUsageSection = Tab:Section({
    Title = "配置系统",
    Icon = "folder-cog",
})

local ConfigManager = Window.ConfigManager
local ConfigName = "default"

local ConfigNameInput = ConfigUsageSection:Input({
    Title = "配置名称",
    Icon = "file-cog",
    Callback = function(value)
        ConfigName = value
    end
})

ConfigUsageSection:Space()

local AutoLoadToggle = ConfigUsageSection:Toggle({
    Title = "自动加载该配置",
    Value = false,
    Callback = function(v)
        Window.CurrentConfig:SetAutoLoad(v)
    end
})

ConfigUsageSection:Space()

local AllConfigs = ConfigManager:AllConfigs()
local DefaultValue = table.find(AllConfigs, ConfigName) and ConfigName or nil

local AllConfigsDropdown = ConfigUsageSection:Dropdown({
    Title = "所有配置",
    Desc = "选择存在的配置",
    Values = AllConfigs,
    Value = DefaultValue,
    Callback = function(value)
        ConfigName = value
        ConfigNameInput:Set(value)
        AutoLoadToggle:Set(ConfigManager:GetConfig(ConfigName).AutoLoad or false)
    end
})

ConfigUsageSection:Space()

ConfigUsageSection:Button({
    Title = "保存配置",
    Justify = "Center",
    Callback = function()
        Window.CurrentConfig = ConfigManager:Config(ConfigName)
        if Window.CurrentConfig:Save() then
            WindUI:Notify({
                Title = "已保存",
                Desc = "配置 '" .. ConfigName .. "' 已保存",
                Icon = "check",
            })
        end
        
        AllConfigsDropdown:Refresh(ConfigManager:AllConfigs())
    end
})

ConfigUsageSection:Space()

ConfigUsageSection:Button({
    Title = "加载配置",
    Justify = "Center",
    Callback = function()
        Window.CurrentConfig = ConfigManager:CreateConfig(ConfigName)
        if Window.CurrentConfig:Load() then
            WindUI:Notify({
                Title = "已加载",
                Desc = "配置 '" .. ConfigName .. "' 已加载",
                Icon = "refresh-cw",
            })
        end
    end
})

ConfigUsageSection:Space()

ConfigUsageSection:Button({
    Title = "打印自动加载配置",
    Justify = "Center",
    Callback = function()
        print(HttpService:JSONDecode(ConfigManager:GetAutoLoadConfigs()))
    end
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "切换ui颜色",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function blackout()
local Tab = Window:Tab({
    Title = "功能",
    Icon = "sword",
    Locked = false,
})
Tab:Button({
    Title = "飞行",
    Desc = nil,
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/fly/main/README.md"))()
    end
})
Tab:Toggle({
    Title = "杀戮光环",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local LocalPlayer = Players.LocalPlayer

        local swingRemote = ReplicatedStorage:WaitForChild("MeleeStorage").Events:WaitForChild("Swing")
        local hitRemote = ReplicatedStorage:WaitForChild("MeleeStorage").Events:WaitForChild("Hit")
        if not swingRemote or not hitRemote then return end

        local running = state
        local interval = 0.1
        local rangeLimit = 40
        local loopThread

        local function isValidTarget(model)
            if not model or model == LocalPlayer.Character then return false end
            local hrp = model:FindFirstChild("HumanoidRootPart")
            local head = model:FindFirstChild("Head")
            local hum = model:FindFirstChildOfClass("Humanoid")
            if not hrp or not head or not hum then return false end
            if hum.Health <= 0 then return false end
            local lpHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if not lpHRP then return false end
            local dist = (hrp.Position - lpHRP.Position).Magnitude
            if dist > rangeLimit then return false end
            return true, dist
        end

        local function getNearestTarget()
            local customNPCs = workspace:FindFirstChild("NPCs") and workspace.NPCs:FindFirstChild("Custom")
            if not customNPCs then return nil end
            local nearest = nil
            local shortest = math.huge
            for _, npc in pairs(customNPCs:GetChildren()) do
                if npc:IsA("Model") then
                    local valid, dist = isValidTarget(npc)
                    if valid and dist < shortest then
                        nearest = npc
                        shortest = dist
                    end
                end
            end
            return nearest
        end

        local function startAura()
            if loopThread then return end
            loopThread = task.spawn(function()
                while running do
                    local target = getNearestTarget()
                    if target then
                        local head = target:FindFirstChild("Head")
                        local hrp = target:FindFirstChild("HumanoidRootPart")
                        if head and hrp then
                            local args = {[1]=head, [2]=hrp.Position}
                            pcall(function() swingRemote:InvokeServer() end)
                            pcall(function() hitRemote:FireServer(unpack(args)) end)
                        end
                    end
                    task.wait(interval)
                end
                loopThread = nil
            end)
        end

        local function stopAura()
            running = false
            loopThread = nil
        end

        if running then
            startAura()
        else
            stopAura()
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

local LootEvent = ReplicatedStorage:WaitForChild("Events").Loot.LootObject
local MinigameEvent = ReplicatedStorage:WaitForChild("Events").Loot.MinigameResult
local UpdateStates = ReplicatedStorage:WaitForChild("Events").Player.UpdateStates
local StaminaRemote = ReplicatedStorage:WaitForChild("Events").Player.Stamina

local lootFolder = workspace:WaitForChild("Map").Loot
local NPCFolder = workspace:WaitForChild("NPCs").Custom

local validContainers = {
    ["DuffelBag"] = true,
    ["Case"] = true,
    ["BunkerCrate"] = true,
    ["CashRegister"] = true,
    ["Locker"] = true,
    ["MedBox"] = true,
    ["Safe"] = true
}

local lastPromptedContainer = nil
local autoLootEnabled, hitboxEnabled = false, false
local noRagdollEnabled, noFallDamageEnabled, spoofStatesEnabled = false, false, false
local gunModEnabled = false
local rpmValue, rpmSetByUser = 9999, false

Tab:Toggle({
    Title = "免布娃娃",
    Value = false,
    Callback = function(state)
        noRagdollEnabled = state
        if state and not _G.noRagdollHook then
            _G.noRagdollHook = hookmetamethod(game, "__namecall", function(self, ...)
                if getnamecallmethod() == "FireServer" and tostring(self) == "Ragdoll" then return end
                return _G.noRagdollHook(self, ...)
            end)
        end
    end
})

Tab:Toggle({
    Title = "免坠落伤害",
    Value = false,
    Callback = function(state)
        noFallDamageEnabled = state
        if state and not _G.noFallDamageHook then
            _G.noFallDamageHook = hookmetamethod(game, "__namecall", function(self, ...)
                if getnamecallmethod() == "FireServer" and tostring(self) == "Damage" then return end
                return _G.noFallDamageHook(self, ...)
            end)
        end
    end
})

Tab:Toggle({
    Title = "跑步无限体力",
    Value = false,
    Callback = function(state)
        spoofStatesEnabled = state
        if state then
            if not _G.spoofStatesConn then
                _G.spoofStatesConn = RunService.RenderStepped:Connect(function()
                    if not spoofStatesEnabled then return end
                    local char = player.Character
                    local root = char and char:FindFirstChild("HumanoidRootPart")
                    if root then
                        UpdateStates:FireServer(root.Position, root.Velocity, root.CFrame.LookVector, {
                            Crouching = false,
                            Sprinting = false,
                            Aiming = false
                        })
                    end
                end)
            end
        else
            if _G.spoofStatesConn then
                _G.spoofStatesConn:Disconnect()
                _G.spoofStatesConn = nil
            end
        end
    end
})

Tab:Toggle({
    Title = "扩大击中箱",
    Value = false,
    Callback = function(state)
        hitboxEnabled = state
        if state then
            if not _G.hitboxConn then
                _G.hitboxConn = RunService.Heartbeat:Connect(function()
                    if not hitboxEnabled then return end
                    for _, target in pairs(workspace:GetDescendants()) do
                        if target:IsA("Model") and target:FindFirstChild("HumanoidRootPart") and target:FindFirstChild("Head") then
                            local humanoid = target:FindFirstChildOfClass("Humanoid")
                            local playerCheck = Players:GetPlayerFromCharacter(target)
                            if humanoid and target ~= player.Character then
                                local head = target:FindFirstChild("Head")
                                if head then
                                    head.Size = Vector3.new(6, 6, 6)
                                    head.Transparency = 0.5
                                    head.Material = Enum.Material.Neon
                                    head.Color = Color3.fromRGB(255, 0, 0)
                                    head.CanCollide = false
                                end
                            end
                        end
                    end
                end)
            end
        else
            if _G.hitboxConn then
                _G.hitboxConn:Disconnect()
                _G.hitboxConn = nil
            end
            for _, target in pairs(workspace:GetDescendants()) do
                if target:IsA("Model") and target:FindFirstChild("HumanoidRootPart") and target:FindFirstChild("Head") then
                    local humanoid = target:FindFirstChildOfClass("Humanoid")
                    local playerCheck = Players:GetPlayerFromCharacter(target)
                    if humanoid and target ~= player.Character then
                        local head = target:FindFirstChild("Head")
                        if head then
                            head.Size = Vector3.new(2, 1, 1)
                            head.Transparency = 0
                            head.Material = Enum.Material.Plastic
                            head.Color = Color3.fromRGB(255, 255, 255)
                            head.CanCollide = true
                        end
                    end
                end
            end
        end
    end
})
local OriginalHoldTimes = {}
local promptConnection

Tab:Toggle({
    Title = "秒互动",
    Value = false,
    Callback = function(state)
        if state then
            -- 启用秒互动
            for _, prompt in pairs(workspace:GetDescendants()) do
                if prompt:IsA("ProximityPrompt") then
                    if not OriginalHoldTimes[prompt] then
                        OriginalHoldTimes[prompt] = prompt.HoldDuration
                    end
                    prompt.HoldDuration = 0
                end
            end

            promptConnection = workspace.DescendantAdded:Connect(function(obj)
                if obj:IsA("ProximityPrompt") then
                    if not OriginalHoldTimes[obj] then
                        OriginalHoldTimes[obj] = obj.HoldDuration
                    end
                    obj.HoldDuration = 0
                end
            end)
        else
            -- 关闭秒互动，恢复原值
            for prompt, original in pairs(OriginalHoldTimes) do
                if prompt and prompt.Parent then
                    prompt.HoldDuration = original
                end
            end
            OriginalHoldTimes = {}

            if promptConnection then
                promptConnection:Disconnect()
                promptConnection = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local playerESPEnabled = false
local playerESPConnections = {}
local trackedCharacters = {}

local function addESP(character, player)
    if not character or not player then return end

    if not character:FindFirstChild("Highlight") then
        local h = Instance.new("Highlight")
        h.Name = "Highlight"
        h.Adornee = character
        h.FillColor = Color3.fromRGB(0, 255, 0)
        h.FillTransparency = 0.7
        h.OutlineColor = Color3.fromRGB(0, 200, 0)
        h.OutlineTransparency = 0.1
        h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        h.Parent = character
    end

    if not character:FindFirstChild("NameGui") then
        local gui = Instance.new("BillboardGui")
        gui.Name = "NameGui"
        gui.Size = UDim2.new(0, 50, 0, 10)
        gui.StudsOffset = Vector3.new(0, 3.5, 0)
        local adornee = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChildWhichIsA("BasePart")
        gui.Adornee = adornee
        gui.AlwaysOnTop = true
        gui.LightInfluence = 0
        gui.Parent = character

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 1, 0)
        label.Text = player.Name
        label.TextColor3 = Color3.new(0, 1, 0)
        label.TextScaled = true
        label.Font = Enum.Font.Gotham
        label.BackgroundTransparency = 1
        label.TextSize = 10
        label.Parent = gui
    end
end

local function removeESP(character)
    if not character then return end
    local highlight = character:FindFirstChild("Highlight")
    if highlight then highlight:Destroy() end

    local nameGui = character:FindFirstChild("NameGui")
    if nameGui then nameGui:Destroy() end
end

local function onCharacterAdded(player, character)
    if not playerESPEnabled then return end
    task.delay(0.3, function()
        if playerESPEnabled and character and character.Parent then
            addESP(character, player)
        end
    end)
end

local function trackPlayer(player)
    if player == LocalPlayer then return end
    if trackedCharacters[player] then return end
    trackedCharacters[player] = true

    if player.Character then
        onCharacterAdded(player, player.Character)
    end

    local conn = player.CharacterAdded:Connect(function(character)
        onCharacterAdded(player, character)
    end)
    table.insert(playerESPConnections, conn)

    local removeConn = player.AncestryChanged:Connect(function()
        if not player:IsDescendantOf(game) then
            trackedCharacters[player] = nil
        end
    end)
    table.insert(playerESPConnections, removeConn)
end

local function startPlayerESP()
    if playerESPEnabled then return end
    playerESPEnabled = true

    for _, player in ipairs(Players:GetPlayers()) do
        trackPlayer(player)
    end

    local conn = Players.PlayerAdded:Connect(trackPlayer)
    table.insert(playerESPConnections, conn)
end

local function stopPlayerESP()
    playerESPEnabled = false

    for _, conn in ipairs(playerESPConnections) do
        pcall(function() conn:Disconnect() end)
    end
    table.clear(playerESPConnections)
    table.clear(trackedCharacters)

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            removeESP(player.Character)
        end
    end
end

Tab:Toggle({
    Title = "透视玩家",
    Default = false,
    Callback = function(state)
        if state then
            startPlayerESP()
        else
            stopPlayerESP()
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 100

Tab:Toggle({
    Title = "速度",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Title = "速度调节",
    Value = {
        Min = 0,
        Max = 250,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})
local Tab = Window:Tab({  
    Title = "枪械设置",  
    Icon = "crosshair",  
    Locked = false,
})
local recoilEnabled = false
local spreadEnabled = false
local rpmEnabled = false
local rpmValue = 9999

local function resetRecoil(settings)
	if settings.Firing then
		settings.Firing.Recoil = NumberRange.new(1, 1)
		settings.Firing.Kickback = 1
		settings.Firing.AimedKickback = 1
		settings.Firing.Shake = 1
	end
end

local function resetSpread(settings)
	if settings.Firing then
		settings.Firing.Spread = 1
		settings.Firing.AimedSpread = 1
	end
end

local function resetRPM(settings)
	if settings.Modes and settings.Modes[1] then
		local mode = settings.Modes[1]
		mode.Automatic = false
		mode.RPM = 600
	end
end

local function setRecoil(settings)
	if settings.Firing then
		settings.Firing.Recoil = NumberRange.new(0, 0)
		settings.Firing.Kickback = 0
		settings.Firing.AimedKickback = 0
		settings.Firing.Shake = 0
	end
end

local function setSpread(settings)
	if settings.Firing then
		settings.Firing.Spread = 0
		settings.Firing.AimedSpread = 0
	end
end

local function setRPM(settings)
	if settings.Modes and settings.Modes[1] then
		local mode = settings.Modes[1]
		mode.Automatic = true
		mode.RPM = rpmValue
	end
end

local function applyAll()
	if getgc then
		for _, v in next, getgc(true) do
			if typeof(v) == "table" and rawget(v, "Firing") and rawget(v, "Modes") then
				pcall(function()
					if recoilEnabled then setRecoil(v) else resetRecoil(v) end
					if spreadEnabled then setSpread(v) else resetSpread(v) end
					if rpmEnabled then setRPM(v) else resetRPM(v) end
				end)
			end
		end
	end
	local vm = workspace:FindFirstChild("Camera")
	if vm and vm:FindFirstChild("ViewModel") and vm.ViewModel:FindFirstChild("Settings") then
		local settings = vm.ViewModel.Settings
		if typeof(settings) == "table" then
			if recoilEnabled then setRecoil(settings) else resetRecoil(settings) end
			if spreadEnabled then setSpread(settings) else resetSpread(settings) end
			if rpmEnabled then setRPM(settings) else resetRPM(settings) end
		end
	end
	local char = game.Players.LocalPlayer.Character
	if char then
		for _, tool in ipairs(char:GetChildren()) do
			if tool:IsA("Tool") and tool:FindFirstChild("Settings") then
				local settings = tool.Settings
				if typeof(settings) == "table" then
					if recoilEnabled then setRecoil(settings) else resetRecoil(settings) end
					if spreadEnabled then setSpread(settings) else resetSpread(settings) end
					if rpmEnabled then setRPM(settings) else resetRPM(settings) end
				end
			end
		end
	end
end

task.spawn(function()
	while true do
		pcall(applyAll)
		task.wait(0.1)
	end
end)

Tab:Toggle({
	Title = "无后座",
	Value = false,
	Callback = function(state)
		recoilEnabled = state
	end
})

Tab:Toggle({
	Title = "子弹无散布",
	Value = false,
	Callback = function(state)
		spreadEnabled = state
	end
})

Tab:Toggle({
	Title = "高射速",
	Value = false,
	Callback = function(state)
		rpmEnabled = state
	end
})

Tab:Input({
	Title = "设置射速",
	Value = tostring(rpmValue),
	Placeholder = "输入 RPM 数值",
	Callback = function(input)
		local num = tonumber(input)
		if num then
			rpmValue = num
		end
	end
})
local Tab = Window:Tab({    
    Title = "美化",    
    Icon = "hand-platter",    
    Locked = false,  
})  

local bodyMaterial = "ForceField"  
local bodyColor = Color3.fromRGB(0, 200, 255)  
local bodyCharmsEnabled = false  

Tab:Dropdown({  
    Title = "全身材质",  
    Multi = false,  
    AllowNone = false,  
    Value = bodyMaterial,  
    Values = {"Plastic", "ForceField", "Wood", "Grass", "Neon", "Glass"},  
    Callback = function(value)  
        bodyMaterial = value  
    end  
})  

Tab:Colorpicker({  
    Title = "全身颜色",  
    Default = Color3.fromRGB(0, 200, 255),  
    Callback = function(color)  
        bodyColor = color  
    end  
})  

Tab:Toggle({  
    Title = "开启全身美化",  
    Value = false,  
    Callback = function(state)  
        bodyCharmsEnabled = state  
        if bodyCharmsEnabled then  
            spawn(function()  
                while bodyCharmsEnabled do  
                    task.wait(0.05)  
                    local player = game:GetService("Players").LocalPlayer  
                    if player and player.Character then  
                        for _, part in pairs(player.Character:GetDescendants()) do  
                            if part:IsA("BasePart") then  
                                part.Material = Enum.Material[bodyMaterial]  
                                part.Color = bodyColor  
                            end  
                        end  
                    end  
                end  
            end)  
        end  
    end  
})
local SetTab = Window:Tab({
    Title = "设置",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

SetTab:Dropdown({
    Title = "更改ui颜色",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function chpy()
local wowWindow = wow:Create("彩虹朋友2", "kanl")
local wowTab = wowWindow:Tab("透视", true)

local wowEspItemsToggle, wowEspItemsTask
local wowEspMonstersToggle, wowEspMonstersTask
local wowPickupLightBulbToggle, wowPickupLightBulbTask
local wowPickupGasCanisterToggle, wowPickupGasCanisterTask
local wowPickupCakeMixToggle, wowPickupCakeMixTask
local wowPickupLookyToggle, wowPickupLookyTask

local function wowCreateEsp(wowObj, wowColor)
    if wowObj and not wowObj:FindFirstChildOfClass("Highlight") then
        local wowHighlight = Instance.new("Highlight", wowObj)
        wowHighlight.OutlineColor = wowColor
        wowHighlight.FillColor = wowColor
    end
end

local function wowRemoveEsp(wowObj)
    if wowObj then
        local wowHighlight = wowObj:FindFirstChildOfClass("Highlight")
        if wowHighlight then wowHighlight:Destroy() end
    end
end

wowTab:Toggle("透视物品(esp)", function(wowBool)
    wowEspItemsToggle = wowBool
    if wowBool then
        wowEspItemsTask = task.spawn(function()
            while wowEspItemsToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and (wowObj.Name == "LightBulb" or wowObj.Name == "GasCanister" or wowObj.Name == "CakeMix") then
                        wowCreateEsp(wowObj, Color3.fromRGB(0, 0, 255))
                    end
                end
                for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
                    if wowObj and wowObj.Name == "Looky" then
                        wowCreateEsp(wowObj.PrimaryPart, Color3.fromRGB(0, 0, 255))
                    end
                end
                wait(0.1)
            end
            for _, wowObj in ipairs(workspace:GetChildren()) do
                if wowObj and (wowObj.Name == "LightBulb" or wowObj.Name == "GasCanister" or wowObj.Name == "CakeMix") then
                    wowRemoveEsp(wowObj)
                end
            end
            for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
                if wowObj and wowObj.Name == "Looky" then
                    wowRemoveEsp(wowObj.PrimaryPart)
                end
            end
        end)
    else
        if wowEspItemsTask then
            task.cancel(wowEspItemsTask)
            wowEspItemsTask = nil
        end
        for _, wowObj in ipairs(workspace:GetChildren()) do
            if wowObj and (wowObj.Name == "LightBulb" or wowObj.Name == "GasCanister" or wowObj.Name == "CakeMix") then
                wowRemoveEsp(wowObj)
            end
        end
        for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
            if wowObj and wowObj.Name == "Looky" then
                wowRemoveEsp(wowObj.PrimaryPart)
            end
        end
    end
end)

wowTab:Toggle("透视怪物(esp)", function(wowBool)
    wowEspMonstersToggle = wowBool
    if wowBool then
        wowEspMonstersTask = task.spawn(function()
            while wowEspMonstersToggle do
                for _, wowObj in ipairs(workspace.Monsters:GetChildren()) do
                    if wowObj and not wowObj:FindFirstChildOfClass("Highlight") then
                        wowCreateEsp(wowObj, Color3.fromRGB(255, 0, 0))
                    end
                end
                wait(0.1)
            end
            for _, wowObj in ipairs(workspace.Monsters:GetChildren()) do
                wowRemoveEsp(wowObj)
            end
        end)
    else
        if wowEspMonstersTask then
            task.cancel(wowEspMonstersTask)
            wowEspMonstersTask = nil
        end
        for _, wowObj in ipairs(workspace.Monsters:GetChildren()) do
            wowRemoveEsp(wowObj)
        end
    end
end)

local wowTab = wowWindow:Tab("自动收集", true)

wowTab:Toggle("灯泡(第一关)", function(wowBool)
    wowPickupLightBulbToggle = wowBool
    if wowBool then
        wowPickupLightBulbTask = task.spawn(function()
            while wowPickupLightBulbToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "LightBulb" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupLightBulbTask then
            task.cancel(wowPickupLightBulbTask)
            wowPickupLightBulbTask = nil
        end
    end
end)

wowTab:Toggle("气瓶(第二关)", function(wowBool)
    wowPickupGasCanisterToggle = wowBool
    if wowBool then
        wowPickupGasCanisterTask = task.spawn(function()
            while wowPickupGasCanisterToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "GasCanister" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupGasCanisterTask then
            task.cancel(wowPickupGasCanisterTask)
            wowPickupGasCanisterTask = nil
        end
    end
end)

wowTab:Toggle("大头(第三关)", function(wowBool)
    wowPickupLookyToggle = wowBool
    if wowBool then
        wowPickupLookyTask = task.spawn(function()
            while wowPickupLookyToggle do
                for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "Looky" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupLookyTask then
            task.cancel(wowPickupLookyTask)
            wowPickupLookyTask = nil
        end
    end
end)

wowTab:Toggle("蛋糕(第四关)", function(wowBool)
    wowPickupCakeMixToggle = wowBool
    if wowBool then
        wowPickupCakeMixTask = task.spawn(function()
            while wowPickupCakeMixToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "CakeMix" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupCakeMixTask then
            task.cancel(wowPickupCakeMixTask)
            wowPickupCakeMixTask = nil
        end
    end
end)
end
local function chpyeng()
local wowWindow = wow:Create("rainbow friends 2", "kanl")
local wowTabEsp = wowWindow:Tab("esp", true)

local wowEspItemsToggle, wowEspItemsTask
local wowEspMonstersToggle, wowEspMonstersTask
local wowPickupLightBulbToggle, wowPickupLightBulbTask
local wowPickupGasCanisterToggle, wowPickupGasCanisterTask
local wowPickupCakeMixToggle, wowPickupCakeMixTask
local wowPickupLookyToggle, wowPickupLookyTask

local function wowCreateEsp(wowObj, wowColor)
    if wowObj and not wowObj:FindFirstChildOfClass("Highlight") then
        local wowHighlight = Instance.new("Highlight", wowObj)
        wowHighlight.OutlineColor = wowColor
        wowHighlight.FillColor = wowColor
    end
end

local function wowRemoveEsp(wowObj)
    if wowObj then
        local wowHighlight = wowObj:FindFirstChildOfClass("Highlight")
        if wowHighlight then wowHighlight:Destroy() end
    end
end

wowTabEsp:Toggle("item esp", function(wowBool)
    wowEspItemsToggle = wowBool
    if wowBool then
        wowEspItemsTask = task.spawn(function()
            while wowEspItemsToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and (wowObj.Name == "LightBulb" or wowObj.Name == "GasCanister" or wowObj.Name == "CakeMix") then
                        wowCreateEsp(wowObj, Color3.fromRGB(0, 0, 255))
                    end
                end
                for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
                    if wowObj and wowObj.Name == "Looky" then
                        wowCreateEsp(wowObj.PrimaryPart, Color3.fromRGB(0, 0, 255))
                    end
                end
                wait(0.1)
            end
            for _, wowObj in ipairs(workspace:GetChildren()) do
                if wowObj and (wowObj.Name == "LightBulb" or wowObj.Name == "GasCanister" or wowObj.Name == "CakeMix") then
                    wowRemoveEsp(wowObj)
                end
            end
            for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
                if wowObj and wowObj.Name == "Looky" then
                    wowRemoveEsp(wowObj.PrimaryPart)
                end
            end
        end)
    else
        if wowEspItemsTask then
            task.cancel(wowEspItemsTask)
            wowEspItemsTask = nil
        end
        for _, wowObj in ipairs(workspace:GetChildren()) do
            if wowObj and (wowObj.Name == "LightBulb" or wowObj.Name == "GasCanister" or wowObj.Name == "CakeMix") then
                wowRemoveEsp(wowObj)
            end
        end
        for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
            if wowObj and wowObj.Name == "Looky" then
                wowRemoveEsp(wowObj.PrimaryPart)
            end
        end
    end
end)

wowTabEsp:Toggle("monster esp", function(wowBool)
    wowEspMonstersToggle = wowBool
    if wowBool then
        wowEspMonstersTask = task.spawn(function()
            while wowEspMonstersToggle do
                for _, wowObj in ipairs(workspace.Monsters:GetChildren()) do
                    if wowObj and not wowObj:FindFirstChildOfClass("Highlight") then
                        wowCreateEsp(wowObj, Color3.fromRGB(255, 0, 0))
                    end
                end
                wait(0.1)
            end
            for _, wowObj in ipairs(workspace.Monsters:GetChildren()) do
                wowRemoveEsp(wowObj)
            end
        end)
    else
        if wowEspMonstersTask then
            task.cancel(wowEspMonstersTask)
            wowEspMonstersTask = nil
        end
        for _, wowObj in ipairs(workspace.Monsters:GetChildren()) do
            wowRemoveEsp(wowObj)
        end
    end
end)

local wowTabAutoCollect = wowWindow:Tab("auto collect", true)

wowTabAutoCollect:Toggle("light bulb (level 1)", function(wowBool)
    wowPickupLightBulbToggle = wowBool
    if wowBool then
        wowPickupLightBulbTask = task.spawn(function()
            while wowPickupLightBulbToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "LightBulb" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupLightBulbTask then
            task.cancel(wowPickupLightBulbTask)
            wowPickupLightBulbTask = nil
        end
    end
end)

wowTabAutoCollect:Toggle("gas canister (level 2)", function(wowBool)
    wowPickupGasCanisterToggle = wowBool
    if wowBool then
        wowPickupGasCanisterTask = task.spawn(function()
            while wowPickupGasCanisterToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "GasCanister" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupGasCanisterTask then
            task.cancel(wowPickupGasCanisterTask)
            wowPickupGasCanisterTask = nil
        end
    end
end)

wowTabAutoCollect:Toggle("looky (level 3)", function(wowBool)
    wowPickupLookyToggle = wowBool
    if wowBool then
        wowPickupLookyTask = task.spawn(function()
            while wowPickupLookyToggle do
                for _, wowObj in ipairs(workspace.ignore:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "Looky" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupLookyTask then
            task.cancel(wowPickupLookyTask)
            wowPickupLookyTask = nil
        end
    end
end)

wowTabAutoCollect:Toggle("cake mix (level 4)", function(wowBool)
    wowPickupCakeMixToggle = wowBool
    if wowBool then
        wowPickupCakeMixTask = task.spawn(function()
            while wowPickupCakeMixToggle do
                for _, wowObj in ipairs(workspace:GetChildren()) do
                    if wowObj and wowObj:IsA("Model") and wowObj.Name == "CakeMix" then
                        local wowRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if wowRoot then
                            wowRoot.CFrame = wowObj.PrimaryPart.CFrame
                            wait(0.15)
                            wowRoot.CFrame = CFrame.new(57.9840851, 137.597931, -8.2745142, -0.0595626235, -1.30958966e-07, 0.998224556, -5.83236304e-09, 1, 1.30843873e-07, -0.998224556, 1.97139616e-09, -0.0595626235)
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        if wowPickupCakeMixTask then
            task.cancel(wowPickupCakeMixTask)
            wowPickupCakeMixTask = nil
        end
    end
end)

end
local function geleisi()
local lp = game:GetService("Players").LocalPlayer
local Character = lp.Character or lp.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Esp = {
    FillTrans = 0.7,
    OrantTrans = 0
}
local Speed = {
    SprintSpeed = 32
}
local SpeedHook = {
    SprintSpeed = nil
}
local List = {
    ["Rush"] = "康乃馨",
    ["Worm"] = "蠕虫",
    ["eyePrime"] = "红眼",
    ["eye"] = "蓝眼",
    ["elkman"] = "监视者"
}

SpeedHook.SprintSpeed = hookmetamethod(Character:FindFirstChild("Humanoid"), "__newindex", function(self, key, value)
    if key == "WalkSpeed" then
        return SpeedHook.SprintSpeed(self, key, Speed.SprintSpeed)
    end
    return SpeedHook.SprintSpeed(self, key, value)
end)

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "平板"
        else
            return "手机"
        end
    else
        return "电脑"
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "手机" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "平板" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)



local playerName = lp.Name
local displayName = lp.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "玩家", Opened = false, Icon = "user"}),
    Esp = Window:Section({ Title = "透视", Opened = false, Icon = "eye"}),
    TZ = Window:Section({ Title = "通知实体", Opened = false, Icon = "bell"}),
    SC = Window:Section({ Title = "删除实体", Opened = false, Icon = "delete"})
}

local TabHandles = {
    Announcement = Tabs.Pl:Tab({ Title = "公告", Icon = "folder"}),
    user = Tabs.Pl:Tab({ Title = "玩家", Icon = "folder"}),
    Esp1 = Tabs.Esp:Tab({ Title = "透视", Icon = "folder"}),
    Esp2 = Tabs.Esp:Tab({ Title = "透视设置", Icon = "folder"}),
    TZ1 = Tabs.TZ:Tab({ Title = "通知", Icon = "folder"}),
    TZ2 = Tabs.TZ:Tab({ Title = "通知设置", Icon = "folder"}),
    SC1 = Tabs.SC:Tab({ Title = "删除实体", Icon = "folder"}),
}

TabHandles.Announcement:Paragraph({
    Title = "欢迎尊贵的用户",
    Desc = "此脚本会一直更新 感谢白名单使用者",
    Image = "info",
    ImageSize = 15
})

TabHandles.Announcement:Paragraph({
    Title = "玩家",
    Desc = "尊敬的用户: " .. lp.Name .. "欢迎使用",
    Image = "user",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "设备",
    Desc = "你的使用设备: " .. deviceType,
    Image = "gamepad",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "设备",
    Desc = "你的注入器: " .. identifyexecutor(),
    Image = "syringe",
    ImageSize = 12
})

TabHandles.user:Toggle({
    Title = "高亮环境",
    Desc = "高亮",
    Value = false,
    Callback = function(state)
        local L = game:GetService("Lighting")
        if state then
            L.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
            L.Ambient = Color3.fromRGB(255, 255, 255)
            L.Brightness = 2
            L.GlobalShadows = false
        else
            L.OutdoorAmbient = Color3.fromRGB(0, 0, 0)
            L.Ambient = Color3.fromRGB(0, 0, 0)
            L.Brightness = 1
            L.GlobalShadows = true
        end
    end
})

TabHandles.user:Toggle({
    Title = "去除阴影",
    Desc = "防卡",
    Value = false,
    Callback = function(state)
        local L = game:GetService("Lighting")
        L.GlobalShadows = state
    end
})

TabHandles.user:Input({
    Title = "修改玩家速度",
    Value = "32",
    Callback = function(value)
        Speed.SprintSpeed = tonumber(value)
    end
})

TabHandles.user:Divider()

local OpenDoorStu = 10
local AutoDoor    = false

TabHandles.user:Toggle({
    Title = "自动开门",
    Desc  = "自动",
    Value = false,
    Callback = function(state)
        AutoDoor = state
        if state then
            task.spawn(function()
                while AutoDoor do
                    for _, room in ipairs(workspace.Rooms:GetChildren()) do
                        local door = room:FindFirstChild("Door")
                        if door and (HumanoidRootPart.Position - door:GetPivot().Position).Magnitude <= OpenDoorStu then
                            door:SetAttribute("acceptClient", true)
                            door:SetAttribute("Open",true)
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.user:Slider({
    Title = "开门范围", 
    Desc  = "范围",
    Value = {Min = 10, Max = 100, Default = 10},
    Step  = 1,
    Callback = function(v)
        OpenDoorStu = tonumber(v)
    end
})

local AutoFarm
TabHandles.user:Toggle({
    Title = "自动刷门",
    Desc = "自动",
    Value = false,
    Callback = function(state)
        AutoFarm = state
        if not state then return end
        task.spawn(function()
            local doorNum = 1
            while AutoFarm do
                local room = workspace.Rooms:FindFirstChild(tostring(doorNum))
                if room then
                    local door = room:FindFirstChild("Door")
                    if door then
                        door:SetAttribute("Open", true)
                        HumanoidRootPart.CFrame = door:GetPivot()
                    end
                end
                for _, v in ipairs(workspace:GetDescendants()) do
                    if table.find({"Rush","Worm","eye","eyePrime","elkman"}, v.Name) then
                        v:Destroy()
                    end
                end
                doorNum = doorNum + 1
                task.wait(0.11)
            end
        end)
    end
})


TabHandles.user:Divider()

TabHandles.user:Toggle({
    Title = "防血雨",
    Desc = "防止",
    Value = false,
    Callback = function(state)
        if state then
            local part = Instance.new("Part")
            part.Name = "Stop1"
            part.Transparency = 1
            part.CanCollide = false
            part.Anchored = true
            part.Massless = true
            part.Size = Vector3.new(80, 2, 80)
            part.CFrame = HumanoidRootPart.CFrame + Vector3.new(0, 15, 0)
            part.Parent = workspace
            
            local att = Instance.new("Attachment", part)
            local align = Instance.new("AlignPosition")
            align.Attachment0 = att
            align.Attachment1 = HumanoidRootPart:WaitForChild("RootAttachment")
            align.MaxForce = 9e9
            align.Responsiveness = 200
            align.Parent = part
        else
            local p = workspace:FindFirstChild("Stop1")
            if p then p:Destroy() end
        end
    end
})



local EspDoor
TabHandles.Esp1:Toggle({
    Title = "透视门",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        local con
        if state then
            EspDoor = false
            con = game:GetService("RunService").Heartbeat:Connect(function()
                for _, room in ipairs(workspace.Rooms:GetChildren()) do
                    if EspDoor then
                        return
                    end
                    local door = room:FindFirstChild("Door")
                    if not door then continue end
     
                    if not door:FindFirstChild("Esp") then
                        local h = Instance.new("Highlight")
                        h.Name = "Esp"
                        h.FillColor = Color3.new(0, 1, 1)
                        h.FillTransparency = Esp.FillTrans
                        h.OutlineColor = Color3.new(1, 1, 1)
                        h.OutlineTransparency = Esp.OrantTran
                        h.Parent = door

                        local bg = Instance.new("BillboardGui")
                        bg.Name = "DoorGui"
                        bg.Size = UDim2.new(0, 100, 0, 40)
                        bg.AlwaysOnTop = true
                        bg.StudsOffset = Vector3.new(0, 3, 0)
                        bg.Parent = door

                        local t = Instance.new("TextLabel")
                        t.Size = UDim2.new(1, 0, 1, 0)
                        t.BackgroundTransparency = 1
                        t.TextColor3 = Color3.new(0, 1, 1)
                        t.TextSize = 5
                        t.Parent = bg

                        Instance.new("UIStroke", t).Thickness = 0.5
                    end
                    
                    local dist = (HumanoidRootPart.Position - door:GetPivot().Position).Magnitude
                    door.DoorGui.TextLabel.Text = "门:" .. room.Name .. "号[" .. string.format("%.0f", dist) .. "m]"
                end
            end)
        else
            EspDoor = true
            if con then con:Disconnect() end
            for _, room in ipairs(workspace.Rooms:GetChildren()) do
                local door = room:FindFirstChild("Door")
                if door then
                    if door:FindFirstChild("Esp") then door.Esp:Destroy() end
                    if door:FindFirstChild("DoorGui") then door.DoorGui:Destroy() end
                end
            end
        end
    end
})

local EspEvil
TabHandles.Esp1:Toggle({
    Title = "透视实体",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        local con
        if state then
            EspEvil = false
            con = game:GetService("RunService").Heartbeat:Connect(function()
                if EspEvil then
                    return
                end
                for _, v in ipairs(game.Workspace:GetChildren()) do
                    if v.Name == "Rush" or v.Name == "Worm" or v.Name == "eye" or v.Name == "eyePrime" or v.Name == "elkman" then
                        if not v:FindFirstChild("Esp") then
                            local h = Instance.new("Highlight")
                            h.Name = "Esp"
                            h.FillColor = Color3.new(1, 0, 0)
                            h.FillTransparency = Esp.FillTrans
                            h.OutlineColor = Color3.new(1, 1, 1)
                            h.OutlineTransparency = Esp.OrantTran
                            h.Parent = v

                            local bg = Instance.new("BillboardGui")
                            bg.Name = "DoorGui"
                            bg.Size = UDim2.new(0, 100, 0, 40)
                            bg.AlwaysOnTop = true
                            bg.StudsOffset = Vector3.new(0, 3, 0)
                            bg.Parent = v

                            local t = Instance.new("TextLabel")
                            t.Size = UDim2.new(1, 0, 1, 0)
                            t.BackgroundTransparency = 1
                            t.TextColor3 = Color3.new(1, 0, 0)
                            t.TextSize = 10
                            t.Parent = bg

                            Instance.new("UIStroke", t).Thickness = 0.5
                        end
                        local dist = (HumanoidRootPart.Position - v:GetPivot().Position).Magnitude
                        v.DoorGui.TextLabel.Text = "实体:" .. (List[v.Name] or v.Name) .. "[" .. string.format("%.0f", dist) .. "m]"
                    end
                end
            end)
        else
            EspEvil = true
            if con then con:Disconnect() end
            for _, v in ipairs(game.Workspace:GetChildren()) do
                if v.Name == "Rush" or v.Name == "Worm" then
                    if v:FindFirstChild("Esp") then v.Esp:Destroy() end
                    if v:FindFirstChild("DoorGui") then v.DoorGui:Destroy() end
                end
            end
        end
    end
})


TabHandles.Esp1:Toggle({
    Title = "透视玩家",
    Desc = "透视",
    Value = false,
    Callback = function(state)
        local function addEsp(plr)
            local char = plr.Character
            if not char then return end
            local h = Instance.new("Highlight")
            h.Name = "Esp"
            h.FillColor = Color3.new(1,1,1)
            h.FillTransparency = Esp.FillTrans
            h.OutlineColor = Color3.new(1,1,1)
            h.OutlineTransparency = Esp.OrantTran
            h.Parent = char

            local bg = Instance.new("BillboardGui")
            bg.Name = "DoorGui"
            bg.Size = UDim2.new(0,100,0,40)
            bg.AlwaysOnTop = true
            bg.StudsOffset = Vector3.new(0,3,0)
            bg.Parent = char

            local text = Instance.new("TextLabel")
            text.Size = UDim2.new(1,0,1,0)
            text.BackgroundTransparency = 1
            text.Text = "玩家:"..plr.Name
            text.TextColor3 = Color3.new(1,1,1)
            text.TextSize = 5
            text.TextScaled = false
            text.Parent = bg

            local stroke = Instance.new("UIStroke")
            stroke.Color = Color3.new(0,0,0)
            stroke.Thickness = 0.5
            stroke.Parent = text
        end

        local function delEsp(plr)
            local char = plr.Character
            if char then
                local h = char:FindFirstChild("Esp")
                local bg = char:FindFirstChild("DoorGui")
                if h then h:Destroy() end
                if bg then bg:Destroy() end
            end
        end

        if state then
            for _,v in pairs(game.Players:GetPlayers()) do addEsp(v) end
        else
            for _,v in pairs(game.Players:GetPlayers()) do delEsp(v) end
        end
    end
})

TabHandles.Esp2:Slider({
    Title = "填充透明度", 
    Desc = "填充",
    Value = { Min = 0, Max = 1, Default = 0.5 },
    Step = 0.01,
    Callback = function(value)
        Esp.FillTrans = value
        for _,v in pairs(workspace:GetDescendants()) do
            local hl = v:FindFirstChildOfClass("Highlight")
            if hl and hl.Name=="Esp" then
                hl.FillTransparency = value
            end
        end
    end
})

TabHandles.Esp2:Slider({
    Title = "外廓透明度", 
    Desc = "填充",
    Value = { Min = 0, Max = 1, Default = 0 },
    Step = 0.01,
    Callback = function(value)
        Esp.OrantTran = value
        for _,v in pairs(workspace:GetDescendants()) do
            local hl = v:FindFirstChildOfClass("Highlight")
            if hl and hl.Name=="Esp" then
                hl.OutlineTransparency = value
            end
        end
    end
})

local General

local rushCon, wormCon
TabHandles.TZ1:Toggle({
    Title = "通知康乃伊",
    Desc = "通知",
    Value = false,
    Callback = function(state)
        if state then
            rushCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "Rush" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("实体开始移动: " .. List.Rush)
                    end
                    WindUI:Notify({Title = "警告", Content = "实体开始移动: " .. List.Rush, Duration = 2})
                end
            end)
        else
            if rushCon then rushCon:Disconnect(); rushCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "通知蠕虫",
    Desc = "通知",
    Value = false,
    Callback = function(state)
        if state then
            wormCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "Worm" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("实体开始移动: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "警告", Content = "实体开始移动: " .. List.Worm, Duration = 2})
                end
            end)
        else
            if wormCon then wormCon:Disconnect(); wormCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "通知蓝眼",
    Desc = "通知",
    Value = false,
    Callback = function(state)
        if state then
            wormCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "eye" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("实体开始移动: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "警告", Content = "实体开始移动: " .. List.Worm, Duration = 2})
                end
            end)
        else
            if wormCon then wormCon:Disconnect(); wormCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "通知红眼",
    Desc = "通知",
    Value = false,
    Callback = function(state)
        if state then
            wormCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "eyePrime" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("实体开始移动: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "警告", Content = "实体开始移动: " .. List.Worm, Duration = 2})
                end
            end)
        else
            if wormCon then wormCon:Disconnect(); wormCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "通知监视者",
    Desc = "通知",
    Value = false,
    Callback = function(state)
        if state then
            wormCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "elkman" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("实体开始移动: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "警告", Content = "实体开始移动: " .. List.Worm, Duration = 2})
                end
            end)
        else
            if wormCon then wormCon:Disconnect(); wormCon = nil end
        end
    end
})

TabHandles.TZ2:Toggle({
    Title = "聊天栏通知",
    Desc = "通知",
    Value = false,
    Callback = function(state)
        General = state
    end
})

local Rush, Worm, Eye, RedEye, Elkman, Dozer, Sorrow

TabHandles.SC1:Toggle({
    Title = "删除康乃伊",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        Rush = state
        if state then
            task.spawn(function()
                while Rush do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "Rush" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: " .. List[v.Name] .. "已经删除",
                                Duration = 2
                            })                            
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "删除蠕虫",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        Worm = state
        if state then
            task.spawn(function()
                while Worm do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "Worm" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: " .. List[v.Name] .. "已经删除",
                                Duration = 2
                            })                            
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "删除蓝眼",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        Eye = state
        if state then
            task.spawn(function()
                while Eye do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "eye" then 
                            v:Destroy()
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: " .. List[v.Name] .. "已经删除",
                                Duration = 2
                            })                            
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "删除红眼",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        RedEye = state
        if state then
            task.spawn(function()
                while RedEye do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "eyePrime" then 
                            v:Destroy()
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: " .. List[v.Name] .. "已经删除",
                                Duration = 2
                            })                             
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "删除监视者",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        Elkman = state
        if state then
            task.spawn(function()
                while Elkman do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "elkman" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: " .. List[v.Name] .. "已经删除",
                                Duration = 2
                            })                             
                        end                        
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "删除黄色笑脸",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        Dozer = state
        if state then
            task.spawn(function()
                while Dozer do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "Dozer" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: Dozer已经删除",
                                Duration = 2
                            })                             
                        end                        
                    end
                    for _, v in ipairs(lp.PlayerGui:GetDescendants()) do
                        if v.Name == "Dozer" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: Dozer已经删除",
                                Duration = 2
                            })                             
                        end                        
                    end                    
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "删除血雨",
    Desc = "删除",
    Value = false,
    Callback = function(state)
        Sorrow = state
        if state then
            task.spawn(function()
                while Sorrow do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "sorrow" or v.Name == "Sorrow" or v.Name == "SorrowDeathEffect" or v.Name == "sorrowDeathEffect" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "警告",
                                Content = "实体: 血雨已经删除",
                                Duration = 2
                            })                             
                        end                        
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

Window:OnClose(function()
    if game:GetService("UserInputService").KeyboardEnabled then
        WindUI:Notify({
            Title = "通知",
            Content = "按下N键再次打开",
            Duration = 3
        })    
    end
end)

end
local function geleisieng()
local lp = game:GetService("Players").LocalPlayer
local Character = lp.Character or lp.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Esp = {
    FillTrans = 0.7,
    OrantTrans = 0
}
local Speed = {
    SprintSpeed = 32
}
local SpeedHook = {
    SprintSpeed = nil
}
local List = {
    ["Rush"] = "Carnation", -- 康乃馨 (Rush)
    ["Worm"] = "Worm",      -- 蠕虫
    ["eyePrime"] = "Red Eye", -- 红眼
    ["eye"] = "Blue Eye",   -- 蓝眼
    ["elkman"] = "Watcher"  -- 监视者
}

-- Hook to override WalkSpeed setting
SpeedHook.SprintSpeed = hookmetamethod(Character:FindFirstChild("Humanoid"), "__newindex", function(self, key, value)
    if key == "WalkSpeed" then
        return SpeedHook.SprintSpeed(self, key, Speed.SprintSpeed)
    end
    return SpeedHook.SprintSpeed(self, key, value)
end)

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    if UserInputService.TouchEnabled then
        if UserInputService.KeyboardEnabled then
            return "tablet" -- 平板
        else
            return "phone" -- 手机
        end
    else
        return "computer" -- 电脑
    end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "phone" then
    uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "tablet" then
    uiSize = UDim2.fromOffset(550, 450)
else
    uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)



local playerName = lp.Name
local displayName = lp.DisplayName

local Tabs = {
    Pl = Window:Section({ Title = "player", Opened = false, Icon = "user"}), -- 玩家
    Esp = Window:Section({ Title = "esp", Opened = false, Icon = "eye"}),   -- 透视
    TZ = Window:Section({ Title = "notify entity", Opened = false, Icon = "bell"}), -- 通知实体
    SC = Window:Section({ Title = "delete entity", Opened = false, Icon = "delete"}) -- 删除实体
}

local TabHandles = {
    Announcement = Tabs.Pl:Tab({ Title = "announcement", Icon = "folder"}), -- 公告
    user = Tabs.Pl:Tab({ Title = "player", Icon = "folder"}),               -- 玩家
    Esp1 = Tabs.Esp:Tab({ Title = "esp", Icon = "folder"}),                 -- 透视
    Esp2 = Tabs.Esp:Tab({ Title = "esp settings", Icon = "folder"}),         -- 透视设置
    TZ1 = Tabs.TZ:Tab({ Title = "notification", Icon = "folder"}),          -- 通知
    TZ2 = Tabs.TZ:Tab({ Title = "notification settings", Icon = "folder"}), -- 通知设置
    SC1 = Tabs.SC:Tab({ Title = "delete entity", Icon = "folder"}),          -- 删除实体
}

TabHandles.Announcement:Paragraph({
    Title = "welcome honorable user", -- 欢迎尊贵的用户
    Desc = "this script will be continuously updated thanks to whitelist users", -- 此脚本会一直更新 感谢白名单使用者
    Image = "info",
    ImageSize = 15
})

TabHandles.Announcement:Paragraph({
    Title = "player", -- 玩家
    Desc = "dear user: " .. lp.Name .. " welcome to use", -- 尊敬的用户: ... 欢迎使用
    Image = "user",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "device", -- 设备
    Desc = "your device: " .. deviceType, -- 你的使用设备: ...
    Image = "gamepad",
    ImageSize = 12
})

TabHandles.Announcement:Paragraph({
    Title = "injector", -- 设备
    Desc = "your injector: " .. identifyexecutor(), -- 你的注入器: ...
    Image = "syringe",
    ImageSize = 12
})

TabHandles.user:Toggle({
    Title = "highlight environment", -- 高亮环境
    Desc = "highlight", -- 高亮
    Value = false,
    Callback = function(state)
        local L = game:GetService("Lighting")
        if state then
            L.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
            L.Ambient = Color3.fromRGB(255, 255, 255)
            L.Brightness = 2
            L.GlobalShadows = false
        else
            L.OutdoorAmbient = Color3.fromRGB(0, 0, 0)
            L.Ambient = Color3.fromRGB(0, 0, 0)
            L.Brightness = 1
            L.GlobalShadows = true
        end
    end
})

TabHandles.user:Toggle({
    Title = "remove shadows", -- 去除阴影
    Desc = "anti-lag", -- 防卡
    Value = false,
    Callback = function(state)
        local L = game:GetService("Lighting")
        L.GlobalShadows = state
    end
})

TabHandles.user:Input({
    Title = "modify player speed", -- 修改玩家速度
    Value = "32",
    Callback = function(value)
        Speed.SprintSpeed = tonumber(value)
    end
})

TabHandles.user:Divider()

local OpenDoorStu = 10
local AutoDoor    = false

TabHandles.user:Toggle({
    Title = "auto open door", -- 自动开门
    Desc  = "auto", -- 自动
    Value = false,
    Callback = function(state)
        AutoDoor = state
        if state then
            task.spawn(function()
                while AutoDoor do
                    for _, room in ipairs(workspace.Rooms:GetChildren()) do
                        local door = room:FindFirstChild("Door")
                        if door and (HumanoidRootPart.Position - door:GetPivot().Position).Magnitude <= OpenDoorStu then
                            door:SetAttribute("acceptClient", true)
                            door:SetAttribute("Open",true)
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.user:Slider({
    Title = "door open range", -- 开门范围
    Desc  = "range", -- 范围
    Value = {Min = 10, Max = 100, Default = 10},
    Step  = 1,
    Callback = function(v)
        OpenDoorStu = tonumber(v)
    end
})

local AutoFarm
TabHandles.user:Toggle({
    Title = "auto door farm", -- 自动刷门
    Desc = "auto", -- 自动
    Value = false,
    Callback = function(state)
        AutoFarm = state
        if not state then return end
        task.spawn(function()
            local doorNum = 1
            while AutoFarm do
                local room = workspace.Rooms:FindFirstChild(tostring(doorNum))
                if room then
                    local door = room:FindFirstChild("Door")
                    if door then
                        door:SetAttribute("Open", true)
                        HumanoidRootPart.CFrame = door:GetPivot()
                    end
                end
                for _, v in ipairs(workspace:GetDescendants()) do
                    if table.find({"Rush","Worm","eye","eyePrime","elkman"}, v.Name) then
                        v:Destroy()
                    end
                end
                doorNum = doorNum + 1
                task.wait(0.11)
            end
        end)
    end
})


TabHandles.user:Divider()

TabHandles.user:Toggle({
    Title = "anti-blood rain", -- 防血雨
    Desc = "prevent", -- 防止
    Value = false,
    Callback = function(state)
        if state then
            local part = Instance.new("Part")
            part.Name = "Stop1"
            part.Transparency = 1
            part.CanCollide = false
            part.Anchored = true
            part.Massless = true
            part.Size = Vector3.new(80, 2, 80)
            part.CFrame = HumanoidRootPart.CFrame + Vector3.new(0, 15, 0)
            part.Parent = workspace
            
            local att = Instance.new("Attachment", part)
            local align = Instance.new("AlignPosition")
            align.Attachment0 = att
            align.Attachment1 = HumanoidRootPart:WaitForChild("RootAttachment")
            align.MaxForce = 9e9
            align.Responsiveness = 200
            align.Parent = part
        else
            local p = workspace:FindFirstChild("Stop1")
            if p then p:Destroy() end
        end
    end
})



local EspDoor
TabHandles.Esp1:Toggle({
    Title = "door esp", -- 透视门
    Desc = "esp", -- 透视
    Value = false,
    Callback = function(state)
        local con
        if state then
            EspDoor = false
            con = game:GetService("RunService").Heartbeat:Connect(function()
                for _, room in ipairs(workspace.Rooms:GetChildren()) do
                    if EspDoor then
                        return
                    end
                    local door = room:FindFirstChild("Door")
                    if not door then continue end
     
                    if not door:FindFirstChild("Esp") then
                        local h = Instance.new("Highlight")
                        h.Name = "Esp"
                        h.FillColor = Color3.new(0, 1, 1)
                        h.FillTransparency = Esp.FillTrans
                        h.OutlineColor = Color3.new(1, 1, 1)
                        h.OutlineTransparency = Esp.OrantTran
                        h.Parent = door

                        local bg = Instance.new("BillboardGui")
                        bg.Name = "DoorGui"
                        bg.Size = UDim2.new(0, 100, 0, 40)
                        bg.AlwaysOnTop = true
                        bg.StudsOffset = Vector3.new(0, 3, 0)
                        bg.Parent = door

                        local t = Instance.new("TextLabel")
                        t.Size = UDim2.new(1, 0, 1, 0)
                        t.BackgroundTransparency = 1
                        t.TextColor3 = Color3.new(0, 1, 1)
                        t.TextSize = 5
                        t.Parent = bg

                        Instance.new("UIStroke", t).Thickness = 0.5
                    end
                    
                    local dist = (HumanoidRootPart.Position - door:GetPivot().Position).Magnitude
                    door.DoorGui.TextLabel.Text = "door:" .. room.Name .. " [" .. string.format("%.0f", dist) .. "m]" -- 门
                end
            end)
        else
            EspDoor = true
            if con then con:Disconnect() end
            for _, room in ipairs(workspace.Rooms:GetChildren()) do
                local door = room:FindFirstChild("Door")
                if door then
                    if door:FindFirstChild("Esp") then door.Esp:Destroy() end
                    if door:FindFirstChild("DoorGui") then door.DoorGui:Destroy() end
                end
            end
        end
    end
})

local EspEvil
TabHandles.Esp1:Toggle({
    Title = "entity esp", -- 透视实体
    Desc = "esp", -- 透视
    Value = false,
    Callback = function(state)
        local con
        if state then
            EspEvil = false
            con = game:GetService("RunService").Heartbeat:Connect(function()
                if EspEvil then
                    return
                end
                for _, v in ipairs(game.Workspace:GetChildren()) do
                    if v.Name == "Rush" or v.Name == "Worm" or v.Name == "eye" or v.Name == "eyePrime" or v.Name == "elkman" then
                        if not v:FindFirstChild("Esp") then
                            local h = Instance.new("Highlight")
                            h.Name = "Esp"
                            h.FillColor = Color3.new(1, 0, 0)
                            h.FillTransparency = Esp.FillTrans
                            h.OutlineColor = Color3.new(1, 1, 1)
                            h.OutlineTransparency = Esp.OrantTran
                            h.Parent = v

                            local bg = Instance.new("BillboardGui")
                            bg.Name = "DoorGui"
                            bg.Size = UDim2.new(0, 100, 0, 40)
                            bg.AlwaysOnTop = true
                            bg.StudsOffset = Vector3.new(0, 3, 0)
                            bg.Parent = v

                            local t = Instance.new("TextLabel")
                            t.Size = UDim2.new(1, 0, 1, 0)
                            t.BackgroundTransparency = 1
                            t.TextColor3 = Color3.new(1, 0, 0)
                            t.TextSize = 10
                            t.Parent = bg

                            Instance.new("UIStroke", t).Thickness = 0.5
                        end
                        local dist = (HumanoidRootPart.Position - v:GetPivot().Position).Magnitude
                        v.DoorGui.TextLabel.Text = "entity:" .. (List[v.Name] or v.Name) .. "[" .. string.format("%.0f", dist) .. "m]" -- 实体
                    end
                end
            end)
        else
            EspEvil = true
            if con then con:Disconnect() end
            for _, v in ipairs(game.Workspace:GetChildren()) do
                if v.Name == "Rush" or v.Name == "Worm" then
                    if v:FindFirstChild("Esp") then v.Esp:Destroy() end
                    if v:FindFirstChild("DoorGui") then v.DoorGui:Destroy() end
                end
            end
        end
    end
})


TabHandles.Esp1:Toggle({
    Title = "player esp", -- 透视玩家
    Desc = "esp", -- 透视
    Value = false,
    Callback = function(state)
        local function addEsp(plr)
            local char = plr.Character
            if not char then return end
            local h = Instance.new("Highlight")
            h.Name = "Esp"
            h.FillColor = Color3.new(1,1,1)
            h.FillTransparency = Esp.FillTrans
            h.OutlineColor = Color3.new(1,1,1)
            h.OutlineTransparency = Esp.OrantTran
            h.Parent = char

            local bg = Instance.new("BillboardGui")
            bg.Name = "DoorGui"
            bg.Size = UDim2.new(0,100,0,40)
            bg.AlwaysOnTop = true
            bg.StudsOffset = Vector3.new(0,3,0)
            bg.Parent = char

            local text = Instance.new("TextLabel")
            text.Size = UDim2.new(1,0,1,0)
            text.BackgroundTransparency = 1
            text.Text = "player:"..plr.Name -- 玩家
            text.TextColor3 = Color3.new(1,1,1)
            text.TextSize = 5
            text.TextScaled = false
            text.Parent = bg

            local stroke = Instance.new("UIStroke")
            stroke.Color = Color3.new(0,0,0)
            stroke.Thickness = 0.5
            stroke.Parent = text
        end

        local function delEsp(plr)
            local char = plr.Character
            if char then
                local h = char:FindFirstChild("Esp")
                local bg = char:FindFirstChild("DoorGui")
                if h then h:Destroy() end
                if bg then bg:Destroy() end
            end
        end

        if state then
            for _,v in pairs(game.Players:GetPlayers()) do addEsp(v) end
        else
            for _,v in pairs(game.Players:GetPlayers()) do delEsp(v) end
        end
    end
})

TabHandles.Esp2:Slider({
    Title = "fill transparency", -- 填充透明度
    Desc = "fill", -- 填充
    Value = { Min = 0, Max = 1, Default = 0.5 },
    Step = 0.01,
    Callback = function(value)
        Esp.FillTrans = value
        for _,v in pairs(workspace:GetDescendants()) do
            local hl = v:FindFirstChildOfClass("Highlight")
            if hl and hl.Name=="Esp" then
                hl.FillTransparency = value
            end
        end
    end
})

TabHandles.Esp2:Slider({
    Title = "outline transparency", -- 外廓透明度
    Desc = "fill", -- 填充
    Value = { Min = 0, Max = 1, Default = 0 },
    Step = 0.01,
    Callback = function(value)
        Esp.OrantTran = value
        for _,v in pairs(workspace:GetDescendants()) do
            local hl = v:FindFirstChildOfClass("Highlight")
            if hl and hl.Name=="Esp" then
                hl.OutlineTransparency = value
            end
        end
    end
})

local General

local rushCon, wormCon, eyeCon, eyePrimeCon, elkmanCon
TabHandles.TZ1:Toggle({
    Title = "notify carnation", -- 通知康乃伊
    Desc = "notify", -- 通知
    Value = false,
    Callback = function(state)
        if state then
            rushCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "Rush" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("entity starting to move: " .. List.Rush)
                    end
                    WindUI:Notify({Title = "warning", Content = "entity starting to move: " .. List.Rush, Duration = 2}) -- 警告, 实体开始移动
                end
            end)
        else
            if rushCon then rushCon:Disconnect(); rushCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "notify worm", -- 通知蠕虫
    Desc = "notify", -- 通知
    Value = false,
    Callback = function(state)
        if state then
            wormCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "Worm" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("entity starting to move: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "warning", Content = "entity starting to move: " .. List.Worm, Duration = 2}) -- 警告, 实体开始移动
                end
            end)
        else
            if wormCon then wormCon:Disconnect(); wormCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "notify blue eye", -- 通知蓝眼
    Desc = "notify", -- 通知
    Value = false,
    Callback = function(state)
        if state then
            eyeCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "eye" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("entity starting to move: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "warning", Content = "entity starting to move: " .. List.Worm, Duration = 2}) -- 警告, 实体开始移动
                end
            end)
        else
            if eyeCon then eyeCon:Disconnect(); eyeCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "notify red eye", -- 通知红眼
    Desc = "notify", -- 通知
    Value = false,
    Callback = function(state)
        if state then
            eyePrimeCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "eyePrime" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("entity starting to move: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "warning", Content = "entity starting to move: " .. List.Worm, Duration = 2}) -- 警告, 实体开始移动
                end
            end)
        else
            if eyePrimeCon then eyePrimeCon:Disconnect(); eyePrimeCon = nil end
        end
    end
})

TabHandles.TZ1:Toggle({
    Title = "notify watcher", -- 通知监视者
    Desc = "notify", -- 通知
    Value = false,
    Callback = function(state)
        if state then
            elkmanCon = game.Workspace.ChildAdded:Connect(function(f)
                if f.Name == "elkman" then
                    if General then
                        game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync("entity starting to move: " .. List.Worm)
                    end
                    WindUI:Notify({Title = "warning", Content = "entity starting to move: " .. List.Worm, Duration = 2}) -- 警告, 实体开始移动
                end
            end)
        else
            if elkmanCon then elkmanCon:Disconnect(); elkmanCon = nil end
        end
    end
})

TabHandles.TZ2:Toggle({
    Title = "chat notification", -- 聊天栏通知
    Desc = "notify", -- 通知
    Value = false,
    Callback = function(state)
        General = state
    end
})

local RushDel, WormDel, EyeDel, RedEyeDel, ElkmanDel, DozerDel, SorrowDel

TabHandles.SC1:Toggle({
    Title = "delete carnation", -- 删除康乃伊
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        RushDel = state
        if state then
            task.spawn(function()
                while RushDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "Rush" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: " .. List[v.Name] .. " has been deleted", -- 实体...已经删除
                                Duration = 2
                            })                            
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "delete worm", -- 删除蠕虫
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        WormDel = state
        if state then
            task.spawn(function()
                while WormDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "Worm" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: " .. List[v.Name] .. " has been deleted", -- 实体...已经删除
                                Duration = 2
                            })                            
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "delete blue eye", -- 删除蓝眼
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        EyeDel = state
        if state then
            task.spawn(function()
                while EyeDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "eye" then 
                            v:Destroy()
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: " .. List[v.Name] .. " has been deleted", -- 实体...已经删除
                                Duration = 2
                            })                            
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "delete red eye", -- 删除红眼
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        RedEyeDel = state
        if state then
            task.spawn(function()
                while RedEyeDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "eyePrime" then 
                            v:Destroy()
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: " .. List[v.Name] .. " has been deleted", -- 实体...已经删除
                                Duration = 2
                            })                             
                        end
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "delete watcher", -- 删除监视者
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        ElkmanDel = state
        if state then
            task.spawn(function()
                while ElkmanDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "elkman" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: " .. List[v.Name] .. " has been deleted", -- 实体...已经删除
                                Duration = 2
                            })                             
                        end                        
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "delete dozer", -- 删除黄色笑脸
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        DozerDel = state
        if state then
            task.spawn(function()
                while DozerDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "Dozer" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: Dozer has been deleted", -- 实体: Dozer已经删除
                                Duration = 2
                            })                             
                        end                        
                    end
                    for _, v in ipairs(lp.PlayerGui:GetDescendants()) do
                        if v.Name == "Dozer" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: Dozer has been deleted", -- 实体: Dozer已经删除
                                Duration = 2
                            })                             
                        end                        
                    end                    
                    task.wait(0.2)
                end
            end)
        end
    end
})

TabHandles.SC1:Toggle({
    Title = "delete blood rain", -- 删除血雨
    Desc = "delete", -- 删除
    Value = false,
    Callback = function(state)
        SorrowDel = state
        if state then
            task.spawn(function()
                while SorrowDel do
                    for _, v in ipairs(workspace:GetDescendants()) do
                        if v.Name == "sorrow" or v.Name == "Sorrow" or v.Name == "SorrowDeathEffect" or v.Name == "sorrowDeathEffect" then 
                            v:Destroy() 
                            WindUI:Notify({
                                Title = "warning", -- 警告
                                Content = "entity: blood rain has been deleted", -- 实体: 血雨已经删除
                                Duration = 2
                            })                             
                        end                        
                    end
                    task.wait(0.2)
                end
            end)
        end
    end
})

Window:OnClose(function()
    if game:GetService("UserInputService").KeyboardEnabled then
        WindUI:Notify({
            Title = "notification", -- 通知
            Content = "press N to open again", -- 按下N键再次打开
            Duration = 3
        })    
    end
end)
end
local function chain()
local Tab = Window:Tab({
    Title = "功能",
    Icon = "house",
    Locked = false,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local combatStaminaEnabled = false
local staminaEnabled = false

local combatLoop = nil
local staminaLoop = nil

local function setCombatStamina(value)
    local char = workspace:FindFirstChild(LocalPlayer.Name)
    if char and char:FindFirstChild("Stats") then
        local stat = char.Stats:FindFirstChild("CombatStamina")
        if stat then
            stat.Value = value
        end
    end
end

local function setStamina(value)
    local char = workspace:FindFirstChild(LocalPlayer.Name)
    if char and char:FindFirstChild("Stats") then
        local stat = char.Stats:FindFirstChild("Stamina")
        if stat then
            stat.Value = value
        end
    end
end

local RunService = game:GetService("RunService")

local function startCombatLoop()
    if combatLoop then return end
    combatLoop = RunService.Heartbeat:Connect(function()
        if combatStaminaEnabled then
            setCombatStamina(100)
        end
    end)
end

local function startStaminaLoop()
    if staminaLoop then return end
    staminaLoop = RunService.Heartbeat:Connect(function()
        if staminaEnabled then
            setStamina(100)
        end
    end)
end

local function stopCombatLoop()
    if combatLoop then
        combatLoop:Disconnect()
        combatLoop = nil
    end
end

local function stopStaminaLoop()
    if staminaLoop then
        staminaLoop:Disconnect()
        staminaLoop = nil
    end
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    if combatStaminaEnabled then
        setCombatStamina(100)
    end
    if staminaEnabled then
        setStamina(100)
    end
end)

Tab:Toggle({
    Title = "无限战斗体力",
    Value = false,
    Callback = function(state)
        combatStaminaEnabled = state
        if state then
            startCombatLoop()
        else
            stopCombatLoop()
        end
    end
})

Tab:Toggle({
    Title = "无限体力",
    Value = false,
    Callback = function(state)
        staminaEnabled = state
        if state then
            startStaminaLoop()
        else
            stopStaminaLoop()
        end
    end
})
local RunService = game:GetService("RunService")

local chainESPEnabled = false
local chainESPConnection = nil
local currentChain = nil

local function createChainESP(chain)
    if not chain:FindFirstChild("Highlight") then
        local h = Instance.new("Highlight")
        h.Name = "Highlight"
        h.Adornee = chain
        h.FillColor = Color3.fromRGB(255, 0, 0)
        h.FillTransparency = 0.8
        h.OutlineColor = Color3.fromRGB(255, 60, 60)
        h.OutlineTransparency = 0
        h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        h.Parent = chain
    end

    if not chain:FindFirstChild("NameGui") then
        local gui = Instance.new("BillboardGui")
        gui.Name = "NameGui"
        gui.Size = UDim2.new(0, 150, 0, 30)
        gui.StudsOffset = Vector3.new(0, 5, 0)
        gui.Adornee = chain
        gui.AlwaysOnTop = true
        gui.LightInfluence = 0
        gui.Parent = chain

        local titleLabel = Instance.new("TextLabel")
        titleLabel.Name = "TitleLabel"
        titleLabel.Size = UDim2.new(1, 0, 0.5, 0)
        titleLabel.Position = UDim2.new(0, 0, 0, 0)
        titleLabel.Text = "CHAIN"
        titleLabel.TextColor3 = Color3.new(1, 0, 0)
        titleLabel.TextScaled = true
        titleLabel.Font = Enum.Font.GothamBold
        titleLabel.TextSize = 10
        titleLabel.BackgroundTransparency = 1
        titleLabel.Parent = gui

        local attrLabel = Instance.new("TextLabel")
        attrLabel.Name = "AttrLabel"
        attrLabel.Size = UDim2.new(1, 0, 0.5, 0)
        attrLabel.Position = UDim2.new(0, 0, 0.5, 0)
        attrLabel.RichText = true
        attrLabel.Text = ""
        attrLabel.TextColor3 = Color3.new(1, 1, 1)
        attrLabel.TextScaled = true
        attrLabel.Font = Enum.Font.Gotham
        attrLabel.TextSize = 8
        attrLabel.BackgroundTransparency = 1
        attrLabel.Parent = gui
    end
end

local function updateChainAttributes(chain)
    local gui = chain:FindFirstChild("NameGui")
    if gui then
        local attrLabel = gui:FindFirstChild("AttrLabel")
        if attrLabel then
            local anger = chain:GetAttribute("Anger") or 0
            local burst = chain:GetAttribute("Burst") or 0
            local choke = chain:GetAttribute("ChokeMeter") or 0
            attrLabel.Text = string.format(
                '[血月度: <font color="rgb(255,255,255)">%.0f%%</font>] [捶地: <font color="rgb(255,255,255)">%.0f%%</font>] [掐脖: <font color="rgb(255,255,255)">%.0f%%</font>]',
                anger, burst, choke
            )
        end
    end
end

local function removeChainESP(chain)
    if chain then
        local highlight = chain:FindFirstChild("Highlight")
        if highlight then highlight:Destroy() end
        local nameGui = chain:FindFirstChild("NameGui")
        if nameGui then nameGui:Destroy() end
    end
end

local function refreshChainESP()
    local chain = workspace:FindFirstChild("Misc")
        and workspace.Misc:FindFirstChild("AI")
        and workspace.Misc.AI:FindFirstChild("CHAIN")
    if chain then
        if currentChain ~= chain then
            if currentChain then removeChainESP(currentChain) end
            currentChain = chain
            createChainESP(chain)
        end
        if not chain:FindFirstChild("Highlight") or not chain:FindFirstChild("NameGui") then
            createChainESP(chain)
        end
        updateChainAttributes(chain)
    else
        if currentChain then
            removeChainESP(currentChain)
            currentChain = nil
        end
    end
end

local function startChainESP()
    if chainESPEnabled then return end
    chainESPEnabled = true
    chainESPConnection = RunService.Heartbeat:Connect(refreshChainESP)
end

local function stopChainESP()
    chainESPEnabled = false
    if chainESPConnection then
        chainESPConnection:Disconnect()
        chainESPConnection = nil
    end
    if currentChain then
        removeChainESP(currentChain)
        currentChain = nil
    end
end

Tab:Toggle({
    Title = "透视chain",
    Value = false,
    Callback = function(state)
        if state then
            startChainESP()
        else
            stopChainESP()
        end
    end
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local playerESPEnabled = false
local playerESPConnections = {}
local trackedCharacters = {}

local function addESP(character, player)
    if not character or not player then return end

    if not character:FindFirstChild("Highlight") then
        local h = Instance.new("Highlight")
        h.Name = "Highlight"
        h.Adornee = character
        h.FillColor = Color3.fromRGB(0, 255, 0)
        h.FillTransparency = 0.7
        h.OutlineColor = Color3.fromRGB(0, 200, 0)
        h.OutlineTransparency = 0.1
        h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        h.Parent = character
    end

    if not character:FindFirstChild("NameGui") then
        local gui = Instance.new("BillboardGui")
        gui.Name = "NameGui"
        gui.Size = UDim2.new(0, 50, 0, 10)
        gui.StudsOffset = Vector3.new(0, 3.5, 0)
        local adornee = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChildWhichIsA("BasePart")
        gui.Adornee = adornee
        gui.AlwaysOnTop = true
        gui.LightInfluence = 0
        gui.Parent = character

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 1, 0)
        label.Text = player.Name
        label.TextColor3 = Color3.new(0, 1, 0)
        label.TextScaled = true
        label.Font = Enum.Font.Gotham
        label.BackgroundTransparency = 1
        label.TextSize = 10
        label.Parent = gui
    end
end

local function removeESP(character)
    if not character then return end
    local highlight = character:FindFirstChild("Highlight")
    if highlight then highlight:Destroy() end

    local nameGui = character:FindFirstChild("NameGui")
    if nameGui then nameGui:Destroy() end
end

local function onCharacterAdded(player, character)
    if not playerESPEnabled then return end
    task.delay(0.3, function()
        if playerESPEnabled and character and character.Parent then
            addESP(character, player)
        end
    end)
end

local function trackPlayer(player)
    if player == LocalPlayer then return end
    if trackedCharacters[player] then return end
    trackedCharacters[player] = true

    if player.Character then
        onCharacterAdded(player, player.Character)
    end

    local conn = player.CharacterAdded:Connect(function(character)
        onCharacterAdded(player, character)
    end)
    table.insert(playerESPConnections, conn)

    local removeConn = player.AncestryChanged:Connect(function()
        if not player:IsDescendantOf(game) then
            trackedCharacters[player] = nil
        end
    end)
    table.insert(playerESPConnections, removeConn)
end

local function startPlayerESP()
    if playerESPEnabled then return end
    playerESPEnabled = true

    for _, player in ipairs(Players:GetPlayers()) do
        trackPlayer(player)
    end

    local conn = Players.PlayerAdded:Connect(trackPlayer)
    table.insert(playerESPConnections, conn)
end

local function stopPlayerESP()
    playerESPEnabled = false

    for _, conn in ipairs(playerESPConnections) do
        pcall(function() conn:Disconnect() end)
    end
    table.clear(playerESPConnections)
    table.clear(trackedCharacters)

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            removeESP(player.Character)
        end
    end
end

Tab:Toggle({
    Title = "透视玩家",
    Default = false,
    Callback = function(state)
        if state then
            startPlayerESP()
        else
            stopPlayerESP()
        end
    end
})
local Lighting = game:GetService("Lighting")

local originalLighting = {
    Brightness = Lighting.Brightness,
    ClockTime = Lighting.ClockTime,
    Ambient = Lighting.Ambient,
    OutdoorAmbient = Lighting.OutdoorAmbient,
    ExposureCompensation = Lighting.ExposureCompensation,
    FogEnd = Lighting.FogEnd,
    FogStart = Lighting.FogStart,
    GlobalShadows = Lighting.GlobalShadows,
}

local highlightLoop

Tab:Toggle({
    Title = "高亮",
    Default = false,
    Callback = function(state)
        if state then
            highlightLoop = task.spawn(function()
                while task.wait(0.5) do
                    Lighting.Brightness = 2
                    Lighting.ClockTime = 13.5
                    Lighting.Ambient = Color3.new(0.6, 0.6, 0.6)
                    Lighting.OutdoorAmbient = Color3.new(0.6, 0.6, 0.6)
                    Lighting.ExposureCompensation = 0.5
                    Lighting.FogEnd = 100000
                    Lighting.FogStart = 0
                    Lighting.GlobalShadows = false
                end
            end)
        else
            if highlightLoop then
                task.cancel(highlightLoop)
                highlightLoop = nil
            end
            for k, v in pairs(originalLighting) do
                Lighting[k] = v
            end
        end
    end
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local workspace = game:GetService("Workspace")

local ScrapFolder = workspace:WaitForChild("Misc"):WaitForChild("Zones"):WaitForChild("LootingItems"):WaitForChild("Scrap")

local running = false
local collectThread
local teleportThread

local targetPositions = {
    Vector3.new(-26.879013061523438, -107.01750183105469, -204.7770538330078),
    Vector3.new(-110.85892486572266, -86.33830261230469, 211.8588409423828),
    Vector3.new(43.30422592163086, -97.9687728881836, 349.1531982421875),
    Vector3.new(164.49859619140625, -103.65132141113281, -35.76066207885742),
    Vector3.new(308.97198486328125, -113.4938735961914, -250.46066284179688),
    Vector3.new(-203.81826782226562, -110.8906478881836, -108.90457916259766),
    Vector3.new(-381.873046875, -115.02182006835938, 42.071022033691406),
}

local function getRootPart()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local function firePrompt(prompt)
    if prompt and prompt:IsA("ProximityPrompt") then
        pcall(function()
            fireproximityprompt(prompt)
        end)
    end
end

local function getAllPrompts(root)
    local prompts = {}
    local function recurse(obj)
        for _, child in ipairs(obj:GetChildren()) do
            recurse(child)
            if child:IsA("ProximityPrompt") then
                table.insert(prompts, child)
            end
        end
    end
    recurse(root)
    return prompts
end

local function collectLoop()
    local playerRoot = getRootPart()
    while running do
        local prompts = getAllPrompts(ScrapFolder)
        for _, prompt in ipairs(prompts) do
            if not running then break end
            local part = prompt.Parent
            while part and not part:IsA("BasePart") do
                part = part.Parent
            end
            if part then
                playerRoot.CFrame = part.CFrame + Vector3.new(0, 2, 0)
                task.wait(0.2)
                firePrompt(prompt)
                task.wait(0.6)
            end
        end
        task.wait(0.3)
    end
end

local function teleportLoop()
    local playerRoot = getRootPart()
    while running do
        for _, pos in ipairs(targetPositions) do
            if not running then break end
            playerRoot.CFrame = CFrame.new(pos + Vector3.new(0, 3, 0))
            task.wait(3)
        end
    end
end

Tab:Toggle({
    Title = "传送捡废铁",
    Value = false,
    Callback = function(state)
        running = state
        if running then
            collectThread = task.spawn(collectLoop)
            teleportThread = task.spawn(teleportLoop)
        else
            if collectThread then task.cancel(collectThread) collectThread = nil end
            if teleportThread then task.cancel(teleportThread) teleportThread = nil end
        end
    end,
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local workspace = game:GetService("Workspace")

local running = false
local collectThread

Tab:Toggle({
    Title = "传送捡魔法书碎片",
    Value = false,
    Callback = function(state)
        running = state
        if running then
            collectThread = task.spawn(function()
                local plr = LocalPlayer
                local chr = plr.Character or plr.CharacterAdded:Wait()
                local hrp = chr:WaitForChild("HumanoidRootPart")
                local artifactsFolder = workspace.Misc.Zones.LootingItems.Artifacts

                while running do
                    for _, model in ipairs(artifactsFolder:GetChildren()) do
                        if not running then break end
                        if model:IsA("Model") then
                            for _, part in ipairs(model:GetChildren()) do
                                if not running then break end
                                if part:IsA("MeshPart") and part.Transparency == 0 then
                                    hrp.CFrame = part.CFrame + Vector3.new(0, 2, 0)
                                    task.wait(0.3)
                                    local prompt = part:FindFirstChildOfClass("ProximityPrompt")
                                    if prompt and prompt.Enabled then
                                        pcall(function()
                                            fireproximityprompt(prompt)
                                        end)
                                    end
                                    task.wait(0.5)
                                end
                            end
                        end
                    end
                    task.wait(1)
                end
            end)
        else
            if collectThread then
                task.cancel(collectThread)
                collectThread = nil
            end
        end
    end,
})
local enabled = false

local function setChatVisible(state)
	enabled = state
	local config = game:GetService("TextChatService"):FindFirstChild("ChatWindowConfiguration")
	if config and config:IsA("ChatWindowConfiguration") then
		config.Enabled = state
	end
end

task.spawn(function()
	while task.wait(1) do
		if enabled then
			setChatVisible(true)
		else
			setChatVisible(false)
		end
	end
end)

Tab:Toggle({
	Title = "显示聊天框",
	Value = false,
	Callback = function(state)
		enabled = state
	end,
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local toggleState = false

local function applyCameraMode(state)
	if state then
		LocalPlayer.CameraMaxZoomDistance = 99999
		LocalPlayer.CameraMode = Enum.CameraMode.Classic
	else
		LocalPlayer.CameraMaxZoomDistance = 16
		LocalPlayer.CameraMode = Enum.CameraMode.LockFirstPerson
	end
end

LocalPlayer.CharacterAdded:Connect(function()
	wait(1)
	if not toggleState then
		applyCameraMode(false)
	else
		applyCameraMode(true)
	end
end)

Tab:Toggle({
	Title = "强制第三人称",
	Value = false,
	Callback = function(state)
		toggleState = state
		applyCameraMode(state)
	end
})
Tab:Button({
    Title = "删除雾",
    Desc = nil,
    Locked = false,
    Callback = function()
        local lighting = game:GetService("Lighting")
        if lighting:FindFirstChild("Rainy") then
            lighting.Rainy:Destroy()
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 5

Tab:Toggle({
    Title = "速度",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Title = "速度调节",
    Value = {
        Min = 0,
        Max = 10,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})
local Tab = Window:Tab({
    Title = "暴力功能",
    Icon = "hand",
    Locked = false,
})
Tab:Paragraph({
    Title = "注意事项",
    Desc = "不看的人死妈，要先点反作弊，然后开启无限闪避之后再点一下闪避键自动无限闪避就有用了，自动挥刀滥用也是一样的,然后开了无敌就不能用自动挥刀滥用，要是还在群里问为什么没用你妈就死了",
    Image = "file-warning",
    Color = "Red",
    ImageSize = 40, 
    ThumbnailSize = 120
})
Tab:Button({
		Title = "绕过反作弊",
		Desc = "依旧国外大神制作",
		Locked = false,
		Callback = function()
			loadstring(game:HttpGet("https://raw.githubusercontent.com/Pixeluted/adoniscries/main/Source.lua", true))()
		end
	})
Tab:Toggle({
    Title = "检测管理员/经常举报者",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local targetUsers = {
            "Mylezeezz","Sir_Mason13","jasper_creations","ItzRoboMaggot","CyroTr00per",
            "JankCorp","JakeDravioli","1Boomah",
            "MikoSfx","Lgl_frijol","xF_alse","FluxedThoughts","Blackcoolia","Crinsikle",
            "HolyBlanks","mightyasher","ROV3RRO","Oce1rosTheConsum3d","Tsunantt",
            "Shark_bossx007","AgentCatto","ashinvy","roblox_user_841257226",
            "As3tra1","GetRightDawg","N0XMANIAC","Benthesoccerone","Megamind184",
            "OrekLus1","maravilye2312","euphoria4830","XHttpkeVin","ddelus1",
            "Chromixx_WasTaken","fraudTheSecond","IAmUnderAMask",
            "Yurixzaaa","SSpreezzy"
        }

        local targetSet = {}
        for _, userName in ipairs(targetUsers) do
            targetSet[userName] = true
        end

        if WindUI and type(WindUI.Notify) ~= "function" then
            local oldNotify = WindUI.Notify
            WindUI.Notify = function(_, data)
                if type(oldNotify) == "table" and type(oldNotify.Notify) == "function" then
                    oldNotify:Notify(data)
                elseif typeof(WindUI) == "table" and type(WindUI.Notify) == "function" then
                    WindUI:Notify(data)
                end
            end
        end

        local notified = {}

        local function notify(playerName)
            if not notified[playerName] then
                notified[playerName] = true
                WindUI:Notify({
                    Title = "危险",
                    Content = "此服务器上有傻逼管理员或者经常给脚本挂dc的，请你小心此服务器上的这些人：" .. playerName,
                    Duration = 17.5
                })
            end
        end

        local function onPlayerAdded(player)
            if targetSet[player.Name] then
                notify(player.Name)
            end
        end

        Players.PlayerAdded:Connect(onPlayerAdded)

        for _, player in Players:GetPlayers() do
            if targetSet[player.Name] then
                notify(player.Name)
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local camera = workspace.CurrentCamera

local aimLoop
local targetModel
local targetHumanoidRootPart

local function updateTarget()
    local misc = workspace:FindFirstChild("Misc")
    if misc and misc:FindFirstChild("AI") and misc.AI:FindFirstChild("CHAIN") then
        targetModel = misc.AI.CHAIN
        targetHumanoidRootPart = targetModel:FindFirstChild("HumanoidRootPart") or targetModel:FindFirstChildWhichIsA("BasePart")
    else
        targetModel = nil
        targetHumanoidRootPart = nil
    end
end

local function smoothLookAt(currentCFrame, targetPos, speed)
    local direction = (targetPos - currentCFrame.Position).Unit
    local currentLook = currentCFrame.LookVector
    local lerpedLook = currentLook:Lerp(direction, speed)
    return CFrame.new(currentCFrame.Position, currentCFrame.Position + lerpedLook)
end

local descendantAddedConn
local descendantRemovingConn

Tab:Toggle({
    Title = "自瞄chain",
    Default = false,
    Callback = function(state)
        if state then
            updateTarget()

            if not descendantAddedConn then
                descendantAddedConn = workspace.DescendantAdded:Connect(function(obj)
                    if obj.Name == "CHAIN" then
                        task.wait(0.1)
                        updateTarget()
                    end
                end)
            end

            if not descendantRemovingConn then
                descendantRemovingConn = workspace.DescendantRemoving:Connect(function(obj)
                    if obj == targetModel then
                        targetModel = nil
                        targetHumanoidRootPart = nil
                    end
                end)
            end

            local speed = 0.3

            aimLoop = RunService.RenderStepped:Connect(function()
                if targetHumanoidRootPart and camera then
                    local desiredCFrame = smoothLookAt(camera.CFrame, targetHumanoidRootPart.Position, speed)
                    camera.CFrame = desiredCFrame
                else
                    updateTarget()
                end
            end)
        else
            if aimLoop then
                aimLoop:Disconnect()
                aimLoop = nil
            end
            if descendantAddedConn then
                descendantAddedConn:Disconnect()
                descendantAddedConn = nil
            end
            if descendantRemovingConn then
                descendantRemovingConn:Disconnect()
                descendantRemovingConn = nil
            end
        end
    end
})
Tab:Toggle({
    Title = "chain爆炸自动躲v1",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer
        local animationIdToCheck = "rbxassetid://14875631059"
        local TELEPORT_DISTANCE = 100
        local DETECT_RANGE = 12
        local RETURN_DISTANCE = 30
        local AIR_ANGLE = math.rad(45)
        local AIR_DURATION = 4

        local targetModel
        local animationAOE
        local originalCFrame
        local teleporting = false

        local function updateTarget()
            local misc = workspace:FindFirstChild("Misc")
            if misc and misc:FindFirstChild("AI") and misc.AI:FindFirstChild("CHAIN") then
                targetModel = misc.AI.CHAIN
                local aiFolder = targetModel:FindFirstChild("AI")
                if aiFolder and aiFolder:FindFirstChild("Animations") and aiFolder.Animations:FindFirstChild("AOE") then
                    animationAOE = aiFolder.Animations.AOE
                else
                    animationAOE = nil
                end
            else
                targetModel = nil
                animationAOE = nil
            end
        end

        local function getRoot()
            local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            return char:WaitForChild("HumanoidRootPart")
        end

        local function isAnimationPlaying()
            if not targetModel then return false end
            local humanoid = targetModel:FindFirstChildWhichIsA("Humanoid", true)
            if humanoid then
                local animator = humanoid:FindFirstChildOfClass("Animator")
                if animator then
                    for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
                        local animId = track.Animation.AnimationId
                        if animationAOE and (animId == animationAOE.AnimationId or animId == animationIdToCheck) then
                            return true
                        end
                    end
                end
            end
            return false
        end

        local function teleportAboveTarget()
            if not targetModel or teleporting then return end
            local root = getRoot()
            local distance = (root.Position - targetModel:GetPivot().Position).Magnitude
            if distance > DETECT_RANGE then return end
            teleporting = true
            originalCFrame = root.CFrame

            local targetPos = targetModel:GetPivot().Position + Vector3.new(0, TELEPORT_DISTANCE * math.sin(AIR_ANGLE), 0)
            local lookVector = targetModel:GetPivot().LookVector
            root.CFrame = CFrame.new(targetPos, targetPos + lookVector)

            local startTime = tick()
            while tick() - startTime < AIR_DURATION do
                root.CFrame = CFrame.new(targetPos, targetPos + lookVector)
                task.wait(0.03)
            end

            local returnPos = targetModel:GetPivot().Position + Vector3.new(0, 3, 0) + (lookVector * RETURN_DISTANCE)
            root.CFrame = CFrame.new(returnPos, targetModel:GetPivot().Position)
            teleporting = false
        end

        local lastPlaying = false

        if state then
            updateTarget()

            if not _G.chainDodgeAutoUpdate then
                _G.chainDodgeAutoUpdate = workspace.DescendantAdded:Connect(function(obj)
                    if obj.Name == "CHAIN" or obj.Name == "AOE" then
                        task.wait(0.1)
                        updateTarget()
                    end
                end)
            end

            if not _G.chainDodgeCharAdded then
                _G.chainDodgeCharAdded = LocalPlayer.CharacterAdded:Connect(function()
                    task.wait(1)
                    updateTarget()
                end)
            end

            _G.chainDodgeConn = RunService.Heartbeat:Connect(function()
                if not targetModel then
                    updateTarget()
                end
                local playing = isAnimationPlaying()
                if playing and not lastPlaying then
                    task.spawn(teleportAboveTarget)
                end
                lastPlaying = playing
            end)
        else
            if _G.chainDodgeConn then
                _G.chainDodgeConn:Disconnect()
                _G.chainDodgeConn = nil
            end
            if _G.chainDodgeAutoUpdate then
                _G.chainDodgeAutoUpdate:Disconnect()
                _G.chainDodgeAutoUpdate = nil
            end
            if _G.chainDodgeCharAdded then
                _G.chainDodgeCharAdded:Disconnect()
                _G.chainDodgeCharAdded = nil
            end
        end
    end
})
Tab:Toggle({
    Title = "chain爆炸自动躲v2",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer
        local animationIdToCheck = "rbxassetid://14875631059"
        local DETECT_RANGE = 12
        local TELEPORT_DISTANCE = 70

        local targetModel
        local animationAOE
        local teleporting = false

        local function updateTarget()
            local misc = workspace:FindFirstChild("Misc")
            if misc and misc:FindFirstChild("AI") and misc.AI:FindFirstChild("CHAIN") then
                targetModel = misc.AI.CHAIN
                local aiFolder = targetModel:FindFirstChild("AI")
                if aiFolder and aiFolder:FindFirstChild("Animations") and aiFolder.Animations:FindFirstChild("AOE") then
                    animationAOE = aiFolder.Animations.AOE
                else
                    animationAOE = nil
                end
            else
                targetModel = nil
                animationAOE = nil
            end
        end

        local function getRoot()
            local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            return char:WaitForChild("HumanoidRootPart")
        end

        local function isAnimationPlaying()
            if not targetModel then return false end
            local humanoid = targetModel:FindFirstChildWhichIsA("Humanoid", true)
            if humanoid then
                local animator = humanoid:FindFirstChildOfClass("Animator")
                if animator then
                    for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
                        local animId = track.Animation.AnimationId
                        if animationAOE and (animId == animationAOE.AnimationId or animId == animationIdToCheck) then
                            return true
                        end
                    end
                end
            end
            return false
        end

        local function teleportFront()
            if not targetModel or teleporting then return end
            local root = getRoot()
            local distance = (root.Position - targetModel:GetPivot().Position).Magnitude
            if distance > DETECT_RANGE then return end
            teleporting = true
            local lookVector = targetModel:GetPivot().LookVector
            local frontPos = targetModel:GetPivot().Position + (lookVector * TELEPORT_DISTANCE) + Vector3.new(0, 10, 0)
            root.CFrame = CFrame.new(frontPos, targetModel:GetPivot().Position + Vector3.new(0, 10, 0))
            teleporting = false
        end

        local lastPlaying = false

        if state then
            updateTarget()

            if not _G.chainDodgeAutoUpdateV2 then
                _G.chainDodgeAutoUpdateV2 = workspace.DescendantAdded:Connect(function(obj)
                    if obj.Name == "CHAIN" or obj.Name == "AOE" then
                        task.wait(0.1)
                        updateTarget()
                    end
                end)
            end

            if not _G.chainDodgeCharAddedV2 then
                _G.chainDodgeCharAddedV2 = LocalPlayer.CharacterAdded:Connect(function()
                    task.wait(1)
                    updateTarget()
                end)
            end

            _G.chainDodgeConnV2 = RunService.Heartbeat:Connect(function()
                if not targetModel then
                    updateTarget()
                end
                local playing = isAnimationPlaying()
                if playing and not lastPlaying then
                    task.spawn(teleportFront)
                end
                lastPlaying = playing
            end)
        else
            if _G.chainDodgeConnV2 then
                _G.chainDodgeConnV2:Disconnect()
                _G.chainDodgeConnV2 = nil
            end
            if _G.chainDodgeAutoUpdateV2 then
                _G.chainDodgeAutoUpdateV2:Disconnect()
                _G.chainDodgeAutoUpdateV2 = nil
            end
            if _G.chainDodgeCharAddedV2 then
                _G.chainDodgeCharAddedV2:Disconnect()
                _G.chainDodgeCharAddedV2 = nil
            end
        end
    end
})
Tab:Toggle({
    Title = "无限油",
    Desc = "不能无限特殊技能，除非你一直买油",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer
        local running = false
        local taskConnection

        if state then
            running = true
            taskConnection = task.spawn(function()
                while running do
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("Items") and char.Items:FindFirstChild("XSaw") then
                        char.Items.XSaw:SetAttribute("Gas", 100)
                    end
                    task.wait(0.01)
                end
            end)
        else
            running = false
            if taskConnection then
                taskConnection = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local CTS
local capturingCTS = false
local LastCTSArgs
local loop

local function refreshCTS()
    local char = LocalPlayer.Character
    if not char then return end
    CTS = char:WaitForChild("CharacterMobility"):WaitForChild("CTS")
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    refreshCTS()
    LastCTSArgs = nil
    if capturingCTS then
        capturingCTS = true
    end
end)

refreshCTS()

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self == CTS then
        local args = {...}
        if capturingCTS and not LastCTSArgs then
            LastCTSArgs = args
        end
    end
    return old(self, ...)
end
setreadonly(mt, true)

Tab:Toggle({
    Title = "自动无限闪避",
    Value = false,
    Callback = function(state)
        if state then
            capturingCTS = true
            LastCTSArgs = nil
            if loop then
                loop:Disconnect()
                loop = nil
            end
            loop = RunService.Heartbeat:Connect(function(dt)
                if not CTS or not CTS.Parent then
                    refreshCTS()
                end
                if CTS and LastCTSArgs then
                    if tick() % 0.7 < dt then
                        CTS:FireServer(unpack(LastCTSArgs))
                    end
                end
            end)
        else
            capturingCTS = false
            if loop then
                loop:Disconnect()
                loop = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local Interact
local capturingInteract = false
local LastInteractArgs
local loop
local swingDelay = 0.7

local function refreshInteract()
    local char = LocalPlayer.Character
    if not char then return end
    Interact = char:WaitForChild("CharacterHandler"):WaitForChild("Contents"):WaitForChild("Remotes"):WaitForChild("Interact")
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    refreshInteract()
    LastInteractArgs = nil
    if capturingInteract then
        capturingInteract = true
    end
end)

refreshInteract()

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self == Interact then
        local args = {...}
        if capturingInteract and not LastInteractArgs then
            LastInteractArgs = args
        end
    end
    return old(self, ...)
end
setreadonly(mt, true)

Tab:Input({
    Title = "自动挥刀间隔(最高1最低0.7)",
    Value = "0.7",
    Placeholder = "0.7-1",
    Callback = function(input)
        local num = tonumber(input)
        if num then
            if num > 1 then
                num = 1
            elseif num < 0.01 then
                num = 0.01
            end
            swingDelay = num
        end
    end
})

Tab:Toggle({
    Title = "自动挥刀滥用",
    Value = false,
    Callback = function(state)
        if state then
            capturingInteract = true
            LastInteractArgs = nil
            if loop then
                loop:Disconnect()
                loop = nil
            end
            loop = RunService.Heartbeat:Connect(function(dt)
                if not Interact or not Interact.Parent then
                    refreshInteract()
                end
                if Interact and LastInteractArgs then
                    if tick() % swingDelay < dt then
                        Interact:FireServer(unpack(LastInteractArgs))
                    end
                end
            end)
        else
            capturingInteract = false
            if loop then
                loop:Disconnect()
                loop = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local Interact
local capturingInteract = false
local LastInteractArgs
local loop
local swingDelay = 1
local lastFire = 0

local function refreshInteract()
    local char = LocalPlayer.Character
    if not char then return end
    Interact = char:WaitForChild("CharacterHandler"):WaitForChild("Contents"):WaitForChild("Remotes"):WaitForChild("Interact")
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    refreshInteract()
    LastInteractArgs = nil
    if capturingInteract then
        capturingInteract = true
    end
end)

refreshInteract()

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self == Interact then
        local args = {...}
        if capturingInteract and not LastInteractArgs then
            LastInteractArgs = args
        end
    end
    return old(self, ...)
end
setreadonly(mt, true)

Tab:Toggle({
    Title = "无敌",
    Desc = "开启功能后需要点一下特殊键",
    Value = false,
    Callback = function(state)
        if state then
            capturingInteract = true
            LastInteractArgs = nil
            if loop then
                loop:Disconnect()
                loop = nil
            end
            loop = RunService.Heartbeat:Connect(function(dt)
                if not Interact or not Interact.Parent then
                    refreshInteract()
                end
                if Interact and LastInteractArgs and (tick() - lastFire >= 1) then
                    lastFire = tick()
                    Interact:FireServer(unpack(LastInteractArgs))
                end
            end)
        else
            capturingInteract = false
            if loop then
                loop:Disconnect()
                loop = nil
            end
        end
    end
})
local autoWinXSawClashEnabled = false
local xSawClashLoopConnection = nil

Tab:Toggle({
    Title = "拼刀力量保持100%",
    Value = false,
    Callback = function(state)
        autoWinXSawClashEnabled = state
        if autoWinXSawClashEnabled then
            xSawClashLoopConnection = game:GetService("RunService").Heartbeat:Connect(function()
                local lp = game.Players.LocalPlayer
                if lp and lp.Character and lp.Character:FindFirstChild("Stats") and lp.Character.Stats:FindFirstChild("ClashStrength") then
                    lp.Character.Stats.ClashStrength.Value = 100
                end
            end)
        else
            if xSawClashLoopConnection then
                xSawClashLoopConnection:Disconnect()
                xSawClashLoopConnection = nil
            end
        end
    end
})
local BlueprintTab = Window:Tab({
    Title = "蓝图解锁",
    Icon = "file-check",
    Locked = false,
})
BlueprintTab:Button({
    Title = "解锁小刀",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "CombatKnife"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})

BlueprintTab:Button({
    Title = "解锁喷子",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "DoubleBarrel"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})

BlueprintTab:Button({
    Title = "解锁m1911",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "M1911"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})

BlueprintTab:Button({
    Title = "解锁马切特",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "Machete"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})
BlueprintTab:Button({
    Title = "解锁魔法书",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "SpellBook"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})
BlueprintTab:Button({
    Title = "解锁神器任务",
    Callback = function()
        local playerStats = game.Players.LocalPlayer:WaitForChild("PlayerStats")
        local quests = playerStats:WaitForChild("Quests")
        quests:SetAttribute("ArtifactQuest", true)
    end,
})
local Tab = Window:Tab({
    Title = "传送",
    Icon = "zap",
    Locked = false,
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function getRootPart()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local target1 = Vector3.new(-26.879013061523438, -107.01750183105469, -204.7770538330078)
local target2 = Vector3.new(-110.85892486572266, -86.33830261230469, 211.8588409423828)
local target3 = Vector3.new(43.30422592163086, -97.9687728881836, 349.1531982421875)
local target4 = Vector3.new(164.49859619140625, -103.65132141113281, -35.76066207885742)
local target5 = Vector3.new(308.97198486328125, -113.4938735961914, -250.46066284179688)
local target6 = Vector3.new(-203.81826782226562, -110.8906478881836, -108.90457916259766)
local target7 = Vector3.new(-381.873046875, -115.02182006835938, 42.071022033691406)

Tab:Button({
    Title = "chain出生地",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target1 + Vector3.new(0, 3, 0))
                print("传送到传送点 1")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "商店",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target2 + Vector3.new(0, 3, 0))
                print("传送到传送点 2")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "排行榜",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target3 + Vector3.new(0, 3, 0))
                print("传送到传送点 3")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "工作间",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target4 + Vector3.new(0, 3, 0))
                print("传送到传送点 4")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "仓库",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target5 + Vector3.new(0, 3, 0))
                print("传送到传送点 5")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "发电站",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target6 + Vector3.new(0, 3, 0))
                print("传送到传送点 6")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "收音机站",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target7 + Vector3.new(0, 3, 0))
                print("传送到传送点 7")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})
local Tab = Window:Tab({
    Title = "商店",
    Icon = "store",
    Locked = false,
})
Tab:Button({
    Title = "打开商店界面",
    Description = "显示 PlayerGui.Ingame.Shop",
    Callback = function()
        local success, err = pcall(function()
            local shopGui = Players.LocalPlayer:WaitForChild("PlayerGui"):WaitForChild("Ingame"):WaitForChild("Shop")
            shopGui.Visible = true
        end)
        if not success then
            warn("未找到商店界面:", err)
        end
    end
})
local Tab = Window:Tab({
    Title = "设置",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "更改ui颜色",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function night99()
local lp = game.Players.LocalPlayer
local Lighting = game:GetService("Lighting")
local Light1 = Lighting.Ambient
local Light2 = Lighting.OutdoorAmbient
local Character = lp.Character or lp.CharacterAdded:Wait()
local hrp = Character:FindFirstChild("HumanoidRootPart")
local camera = workspace.CurrentCamera
local rs = game:GetService('ReplicatedStorage')
local DamageRemote = rs:FindFirstChild('RemoteEvents'):FindFirstChild('ToolDamageObject')
local inventory = lp:FindFirstChild('Inventory')
local Food = "Carrot"
local PlayerList = {}

for _, v in pairs(game.Players:GetChildren()) do
	if v.Name ~= lp.Name then
		table.insert(PlayerList, v.Name)
	end
end

local TypeList = {
	y = 0,
	x = 0
}
local hungerThreshold = 75
local Chinese = {
	['Coal'] = '煤炭',['Log'] = '木头',['Fuel Canister'] = '燃料罐',['Oil Barrel'] = '燃料桶',
	['Chair'] = '椅子',['Sapling'] = '树苗',['Broken Microwave'] = '破旧微波炉',['Broken Fan'] = '旧风扇',
	['Old Radio'] = '旧音响',['Bolt'] = '铁钉',['Sheet Metal'] = '废铁',['Tyre'] = '轮胎',['Washing Machine'] = '洗衣机',
	['Metal Chair'] = '铁椅子',['UFO Junk'] = '外星残骸',['UFO Scrap'] = '外星残骸1',
	['Old Car Engine'] = '引擎',['Carrot'] = '胡萝卜',['Cake'] = '蛋糕',['Berry'] = '浆果',
	['Morsel'] = '生肉腿',['Steak'] = '生肉排',['Cooked Morsel'] = '熟肉腿',['Cooked Steak'] = '熟肉排',
	['Rifle'] = '步枪',['Revolver'] = '手枪',['Rifle Ammo'] = '步枪子弹',['Revolver Ammo'] = '手枪子弹',
	['Bandage'] = '绷带',['MedKit'] = '医疗包',['Old Flashlight'] = '旧手电',['Strong Flashlight'] = '强手电',
	['Old Axe'] = '老斧头',['Good Axe'] = '好斧头',['Strong Axe'] = '强斧头',['Old Sack'] = '旧袋子',
	['Good Sack'] = '好袋子',['Giant Sack'] = '巨大袋子',['Spear'] = '矛',
	['Laser Fence Blueprint'] = '防御蓝图',['Leather Body'] = '皮革甲',['Iron Body'] = '铁甲',
	['Bunny'] = '兔子',['Wolf'] = '狼',['Alpha Wolf'] = '阿尔法狼',['Bear'] = '熊'
}

local ItemList = {
	Item1 = "",
	Item2 = "",
	Item3 = "",
	Item4 = "",
	ItemTpPosition = "玩家",
	Pn = lp.Name
}

local tools = {
	KillTool = "Old Axe",
	CutTool = "Old Axe"
}

local St = {
	Kill = 50,
	Cut = 50
}

local dyzh = {
	ItemESPColor = Color3.fromRGB(0, 128, 255),
	CharacterESPColor = Color3.fromRGB(255, 0, 0),
	nt = 0.5,
	wt = 0
}

local espCache = {
	Items = {},
	Characters = {}
}

local function GetItem(Name, Type)
	local ItemState = false
	if Name == "" then
		WindUI:Notify({
			Title = "带来物品",
			Content = "请你选择物品",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
		return            
	end

	for _, Item in pairs(game.Workspace.Items:GetChildren()) do
		if Item.Name == Name then
			ItemState = true
			if Type == "玩家" then
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
				Item:PivotTo(hrp.CFrame * CFrame.new(TypeList.x, TypeList.y, 0))
				task.wait(0.1)
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)           
			elseif Type == "篝火" then
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
				Item:PivotTo(workspace.Map.Campground.MainFire.Center.CFrame * CFrame.new(TypeList.x, 20 + TypeList.y, 0))
				task.wait(0.1)
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                
			elseif Type == "工作台" then
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
				Item:PivotTo(workspace.Map.Campground.Scrapper.Main.CFrame * CFrame.new(TypeList.x, 20 + TypeList.y, 0))
				task.wait(0.1)
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                           
			elseif Type == "自定义位置" then
				if workspace:FindFirstChild("waypoint") then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.waypoint.CFrame * CFrame.new(TypeList.x, 20 + TypeList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                               
				else
					WindUI:Notify({
						Title = "带来物品",
						Content = "未找到位置方块",
						Icon = "notepad-text",
						IconThemed = true,
						Duration = 5  
					})
					return
				end                            
			elseif Type == "指定玩家" then
				local targetPlayer = game.Players:FindFirstChild(ItemList.Pn)
				if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
					local PlCFrame = targetPlayer.Character.HumanoidRootPart.CFrame
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(PlCFrame * CFrame.new(TypeList.x, TypeList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                               
				else
					WindUI:Notify({
						Title = "带来物品",
						Content = "未找到指定玩家或玩家无角色",
						Icon = "notepad-text",
						IconThemed = true,
						Duration = 5  
					})
					return
				end            
			end
		end
	end

	if not ItemState then
		WindUI:Notify({
			Title = "带来物品",
			Content = "未找到物品",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})           
	end
end

local function killCharacter(st)
    for _, v in pairs(inventory:GetChildren()) do
        if not string.find(v.Name, "Sack", 1, true) or not string.find(v.Name, "Flashlight", 1, true) or not string.find(v.Name, "MedKit", 1, true) or not string.find(v.Name, "Bandage", 1, true) or not string.find(v.Name, "Riot Shield", 1, true) then
	        for _, Child in pairs(workspace.Characters:GetChildren()) do
		        local root = Child.PrimaryPart
		        if root and hrp and (hrp.Position - root.Position).Magnitude <= st then
			        pcall(function()
				        DamageRemote:InvokeServer(Child, v, true, hrp.CFrame)
			        end)
		        end
	        end
	    end
	end
end

local function CreateEsp(object, config)
	if not object or not object.Parent then return end
	local eh = object:FindFirstChild('Esp')
	local eb = object:FindFirstChild('b')
	if eh then eh:Destroy() end
	if eb then eb:Destroy() end
	local h = Instance.new('Highlight')
	h.Parent = object
	h.FillColor = config.fillColor
	h.Name = 'Esp'
	h.FillTransparency = config.fillTransparency
	h.OutlineColor = Color3.new(1, 1, 1)
	h.OutlineTransparency = config.outlineTransparency
	local b = Instance.new('BillboardGui')
	b.Parent = object
	b.Size = UDim2.new(0, 100, 0, 20)
	b.Name = 'b'
	b.AlwaysOnTop = true
	local t = Instance.new('TextLabel')
	t.Parent = b
	t.Size = UDim2.new(1, 0, 1, 0)
	t.TextSize = 14
	t.Name = 'Label'
	t.TextStrokeColor3 = Color3.new(0, 0, 0)
	t.TextStrokeTransparency = 0
	t.BackgroundTransparency = 1
	t.Font = Enum.Font.SourceSansBold
	t.TextColor3 = config.textColor
	return h, b, t
end

local function GetDisplayName(n)
	return Chinese[n] or n
end

local function CalcDist(o)
	local p = o.PrimaryPart or o:FindFirstChildWhichIsA('BasePart')
	if not p or not hrp then return 0 end
	return (hrp.Position - p.Position).Magnitude
end

local function ModelHeight(m)
	local min, max = math.huge, -math.huge
	for _, v in ipairs(m:GetDescendants()) do
		if v:IsA("BasePart") then
			local y = v.CFrame.Y
			local s = v.Size.Y / 2
			min = math.min(min, y - s)
			max = math.max(max, y + s)
		end
	end
	return max > min and max - min or 5
end

local function EspItem(name)
	for _, v in ipairs(workspace.Items:GetChildren()) do
		if v.Name == name then
			local old = espCache.Items[v]
			if old then
				if old.conn then old.conn:Disconnect() end
				espCache.Items[v] = nil
			end
			local cfg = {fillColor = Color3.fromRGB(0, 128, 255), textColor = Color3.fromRGB(0, 128, 255), fillTransparency = dyzh.nt, outlineTransparency = dyzh.wt}
			local h, b, l = CreateEsp(v, cfg)
			b.StudsOffset = Vector3.new(0, ModelHeight(v) + 1.5, 0)
			l.Text = GetDisplayName(name) .. "[" .. math.floor(CalcDist(v) + 0.5) .. "米]"
			espCache.Items[v] = {highlight = h, billboard = b, textLabel = l, conn = nil}
		end
	end
end

local function EspCharacter(name)
	for _, v in ipairs(workspace.Characters:GetChildren()) do
		if v.Name == name then
			local old = espCache.Characters[v]
			if old then
				if old.conn then old.conn:Disconnect() end
				espCache.Characters[v] = nil
			end
			local cfg = {fillColor = Color3.fromRGB(0, 255, 0), textColor = Color3.fromRGB(0, 255, 0), fillTransparency = dyzh.nt, outlineTransparency = dyzh.wt}
			local h, b, l = CreateEsp(v, cfg)
			b.StudsOffset = Vector3.new(0, ModelHeight(v) + 1.5, 0)
			l.Text = GetDisplayName(name) .. "[" .. math.floor(CalcDist(v) + 0.5) .. "米]"
			espCache.Characters[v] = {highlight = h, billboard = b, textLabel = l, conn = nil}
		end
	end
end

local function RemoveEspItem(name)
	for _, v in ipairs(workspace.Items:GetChildren()) do
		if v.Name == name and espCache.Items[v] then
			local e = espCache.Items[v]
			if e.conn then e.conn:Disconnect() end
			if e.highlight then e.highlight:Destroy() end
			if e.billboard then e.billboard:Destroy() end
			espCache.Items[v] = nil
		end
	end
end

local function RemoveEspCharacter(name)
	for _, v in ipairs(workspace.Characters:GetChildren()) do
		if v.Name == name and espCache.Characters[v] then
			local e = espCache.Characters[v]
			if e.conn then e.conn:Disconnect() end
			if e.highlight then e.highlight:Destroy() end
			if e.billboard then e.billboard:Destroy() end
			espCache.Characters[v] = nil
		end
	end
end

local function ClearAllEsp()
	for _, e in pairs(espCache.Items) do
		if e.conn then e.conn:Disconnect() end
		if e.highlight then e.highlight:Destroy() end
		if e.billboard then e.billboard:Destroy() end
	end
	for _, e in pairs(espCache.Characters) do
		if e.conn then e.conn:Disconnect() end
		if e.highlight then e.highlight:Destroy() end
		if e.billboard then e.billboard:Destroy() end
	end
	espCache.Items = {}
	espCache.Characters = {}
end

local function OpenChestTme(Time)
	for _, Chest in pairs(workspace.Items:GetChildren()) do
		if Chest.Name:find("Chest") and Chest:FindFirstChild("Main") then
			local Main = Chest.Main
			if Main:FindFirstChild("ProximityAttachment") then
				local Attachment = Main.ProximityAttachment
				if Attachment:FindFirstChild("ProximityInteraction") then
					Attachment.ProximityInteraction.HoldDuration = Time
				end
			end
		end
	end
end

local function OpenChest()
	for _, Chest in pairs(workspace.Items:GetChildren()) do
		if Chest.Name:find("Chest") then
			local Main = Chest:FindFirstChild("Main")
			if Main then
				local Attachment = Main:FindFirstChild("ProximityAttachment")
				if Attachment then
					local Interaction = Attachment:FindFirstChild("ProximityInteraction")
					if Interaction then
						fireproximityprompt(Interaction)
					end
				end
			end
		end
	end
end


local function AutoFire(Name)
	for _, Item in pairs(workspace.Items:GetChildren()) do
		if Item.Name == Name then
			game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
			Item:PivotTo(workspace.Map.Campground.MainFire.Center.CFrame * CFrame.new(0, 20, 0))
		end
	end
end

local function AutoScrapper(Name)
	for _, Item in pairs(workspace.Items:GetChildren()) do
		if Item.Name == Name then
			game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
			Item:PivotTo(workspace.Map.Campground.Scrapper.Main.CFrame * CFrame.new(0, 20, 0))
		end
	end
end

function feed(nome)
	for _, item in ipairs(workspace.Items:GetChildren()) do
		if item.Name == nome then
			rs.RemoteEvents.RequestConsumeItem:InvokeServer(item)
			break
		end
	end
end

function notifeed(nome)
	WindUI:Notify({
		Title = "自动食物停止",
		Content = "食物已经没了",
		Icon = 'crown',
		Duration = 3
	})
end

function wiki(nome)
	local c = 0
	for _, i in ipairs(workspace.Items:GetChildren()) do
		if i.Name == nome then
			c = c + 1
		end
	end
	return c
end

function ghn()
	return math.floor(lp.PlayerGui.Interface.StatBars.HungerBar.Bar.Size.X.Scale * 100)
end



local function getDeviceType()
	local UserInputService = game:GetService("UserInputService")
	if UserInputService.TouchEnabled then
		if UserInputService.KeyboardEnabled then
			return "平板"
		else
			return "手机"
		end
	else
		return "电脑"
	end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "手机" then
	uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "平板" then
	uiSize = UDim2.fromOffset(550, 450)
else
	uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local playerName = lp.Name
local displayName = lp.DisplayName

local Tabs = {
	Pl = Window:Section({ Title = "玩家", Opened = false, Icon = "user"}),
	TP = Window:Section({ Title = "传送物品", Opened = false, Icon = "package-open"}),
	Kill = Window:Section({ Title = "击杀光环", Opened = false, Icon = "pocket-knife"}),
	Cut = Window:Section({ Title = "树", Opened = false, Icon = "tree-pine"}),
	ESP = Window:Section({ Title = "透视", Opened = false, Icon = "eye"}),
	Auto = Window:Section({ Title = "自动", Opened = false, Icon = "hand"}),
	Get = Window:Section({ Title = "传送", Opened = false, Icon = "arrow-big-up-dash"})
}

local TabHandles = {
	Announcement = Tabs.Pl:Tab({ Title = "公告", Icon = "folder"}),
	Player = Tabs.Pl:Tab({ Title = "玩家", Icon = "user"}),
	TPItem = Tabs.TP:Tab({ Title = "传送物品", Icon = "folder"}),
	TPItemSettings = Tabs.TP:Tab({ Title = "传送物品设置", Icon = "folder"}),
	Kill1 = Tabs.Kill:Tab({ Title = "杀戳光环", Icon = "folder"}),
	Cut1 = Tabs.Cut:Tab({ Title = "砍树光环", Icon = "folder"}),
	plant = Tabs.Cut:Tab({ Title = "种植树", Icon = "folder"}),
	ItemEsp = Tabs.ESP:Tab({ Title = "物品透视", Icon = "folder"}),
	CharacterEsp = Tabs.ESP:Tab({ Title = "动物透视", Icon = "folder"}),
	ESPSettings = Tabs.ESP:Tab({ Title = "透视设置", Icon = "folder"}),
	Auto1 = Tabs.Auto:Tab({ Title = "篝火", Icon = "folder"}),
	Auto2 = Tabs.Auto:Tab({ Title = "工作台", Icon = "folder"}),
	Auto3 = Tabs.Auto:Tab({ Title = "食物", Icon = "folder" }),
	Auto4 = Tabs.Auto:Tab({ Title = "鱼", Icon = "folder"}),
	Chest = Tabs.Auto:Tab({ Title = "宝箱", Icon = "folder"}),
	Coin = Tabs.Auto:Tab({ Title = "金币", Icon = "folder"}),
	LostKid = Tabs.Auto:Tab({ Title = "孩子", Icon = "folder"}),
	Tp2 = Tabs.Get:Tab({ Title = "家", Icon = "folder" })
}

TabHandles.Announcement:Paragraph({
	Title = "欢迎尊贵的用户",
	Desc = "此脚本会一直更新 感谢白名单使用者",
	Image = "info",
	ImageSize = 15
})

TabHandles.Announcement:Paragraph({
	Title = "玩家",
	Desc = "尊敬的用户: " .. lp.Name .. "欢迎使用",
	Image = "user",
	ImageSize = 12
})

TabHandles.Announcement:Paragraph({
	Title = "设备",
	Desc = "你的使用设备: " .. deviceType,
	Image = "gamepad",
	ImageSize = 12
})

TabHandles.Announcement:Paragraph({
	Title = "设备",
	Desc = "你的注入器: " .. identifyexecutor(),
	Image = "syringe",
	ImageSize = 12
})

TabHandles.Player:Section({ 
	Title = "玩家设置",
	Desc = "玩家",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Player:Slider({
	Title = "玩家速度",
	Desc = "玩家的速度",
	Step = 1,
	Value = {
		Min = 16,
		Max = 200,
		Default = 16,
	},
	Callback = function(value)
		if Character and Character:FindFirstChild("Humanoid") then
			Character.Humanoid.WalkSpeed = value
		end
	end
})

TabHandles.Player:Slider({
	Title = "玩家跳跃高度",
	Desc = "玩家的跳跃高度",
	Step = 1,
	Value = {
		Min = 50,
		Max = 200,
		Default = 50,
	},
	Callback = function(value)
		if Character and Character:FindFirstChild("Humanoid") then
			Character.Humanoid.JumpHeight = value
		end
	end
})

TabHandles.Player:Toggle({
	Title = "高亮",
	Desc = "高亮环境",
	Value = false,
	Callback = function(state) 
		if state then
			Lighting.Ambient = Color3.fromRGB(255, 255, 255)
			Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
		else
			Lighting.Ambient = Light1
			Lighting.OutdoorAmbient = Light2  
		end
	end
})

TabHandles.Player:Slider({
	Title = "玩家镜头FOV",
	Desc = "玩家的镜头",
	Step = 1,
	Value = {
		Min = 70,
		Max = 120,
		Default = 70,
	},
	Callback = function(value)
		if camera then
			camera.FieldOfView = value
		end
	end
})

TabHandles.Player:Button({
    Title = "无敌模式",
    Desc = "无敌",
    Callback = function(state)
        game:GetService("ReplicatedStorage").RemoteEvents.DamagePlayer:FireServer(-10000000000000)
    end
})

TabHandles.Player:Section({ 
	Title = "其他",
	Desc = "其他选项",
	Icon = 'chart-no-axes-ganttr',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Player:Toggle({
    Title = "自动眩晕鹿",
	Desc = "自动",
    Value = false,
    Callback = function(state)
        if state then
            torchLoop = game.GetService("RunService").RenderStepped:Connect(function()
                pcall(function()
                    local remote = rs:FindFirstChild("RemoteEvents")
                        and rs.RemoteEvents:FindFirstChild("DeerHitByTorch")
                    local deer = workspace:FindFirstChild("Characters")
                        and workspace.Characters:FindFirstChild("Deer")
                    if remote and deer then
                        remote:InvokeServer(deer)
                    end
                end)
                task.wait(0.1)
            end)
        else
            if torchLoop then
                torchLoop:Disconnect()
                torchLoop = nil
            end
        end
    end
})

TabHandles.TPItem:Section({ 
	Title = "带来物品",
	Desc = "带来",
	Icon = 'anchor',
	ImageSize = 30,
	Opened = true,
})

TabHandles.TPItem:Dropdown({
	Title = "铁质类物品下拉菜单",
	Desc = "带来物品",
	Values = {'洗衣机', '破旧微波炉', '旧风扇', '旧音响', '铁钉', '废铁', '轮胎', '铁椅子', '外星残骸', '外星残骸1', '外星残骸2', '引擎'},
	Value = "选择",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['破旧微波炉'] = 'Broken Microwave', 
			['旧风扇'] = 'Broken Fan', 
			['旧音响'] = 'Old Radio', 
			['铁钉'] = 'Bolt', 
			['废铁'] = 'Sheet Metal', 
			['轮胎'] = 'Tyre', 
			['铁椅子'] = 'Metal Chair', 
			['外星残骸'] = 'UFO Junk', 
			['外星残骸1'] = 'UFO Scrap',
			['外星残骸2'] = 'UFO Component',
			['洗衣机'] = 'Washing Machine',
			['引擎'] = 'Old Car Engine' 
		}
		ItemList.Item1 = GetItemList[Item]
	end
})
TabHandles.TPItem:Button({
	Title = "带来",
	Desc = "带来物品",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item1, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Dropdown({
	Title = "燃料类物品下拉菜单",
	Desc = "带来物品",
	Values = { '煤炭', '木头', '燃料罐', '燃料桶', '椅子', '树苗' },
	Value = "选择",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['煤炭'] = 'Coal', 

			['木头'] = 'Log', 
			['燃料罐'] = 'Fuel Canister', 
			['燃料桶'] = 'Oil Barrel', 
			['椅子'] = 'Chair', 
			['树苗'] = 'Sapling'
		}
		ItemList.Item2 = GetItemList[Item]
	end
})

TabHandles.TPItem:Button({
	Title = "带来",
	Desc = "带来物品",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item2, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Dropdown({
	Title = "食物类物品下拉菜单",
	Desc = "带来物品",
	Values = {'胡萝卜', '蛋糕', '浆果', '生肉腿', '生肉排', '熟肉腿', '熟肉排'},
	Value = "选择",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['胡萝卜'] = 'Carrot', 
			['蛋糕'] = 'Cake', 
			['浆果'] = 'Berry', 
			['生肉腿'] = 'Morsel', 
			['生肉排'] = 'Steak', 
			['熟肉腿'] = 'Cooked Morsel', 
			['熟肉排'] = 'Cooked Steak'
		}
		ItemList.Item3 = GetItemList[Item]
	end
})

TabHandles.TPItem:Button({
	Title = "带来",
	Desc = "带来物品",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item3, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Paragraph({
	Title = "提示",
	Desc = "带来胡萝卜需要先带来浆果",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Dropdown({
	Title = "道具类物品下拉菜单",
	Desc = "带来物品",
	Values = { '步枪', '手枪', '外星炮', '手枪子弹', '步枪子弹', '绷带', '医疗包', '旧手电', '强手电', '老斧头', '好斧头', '强斧头', '旧袋子', '好袋子', '巨大袋子', '矛', '防御蓝图', '皮革甲', '铁甲', '森林碎片', '防爆盾' },
	Value = "选择",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['步枪'] = 'Rifle', 
			['手枪'] = 'Revolver',
			["外星炮"] = 'Laser Cannon',
			['手枪子弹'] = 'Revolver Ammo', 
			['步枪子弹'] = 'Rifle Ammo', 
			['绷带'] = 'Bandage', 
			['医疗包'] = 'MedKit', 
			['旧手电'] = 'Old Flashlight', 
			['强手电'] = 'Strong Flashlight', 
			['老斧头'] = 'Old Axe', 
			['好斧头'] = 'Good Axe', 
			['强斧头'] = 'Strong Axe', 
			['旧袋子'] = 'Old Sack', 
			['好袋子'] = 'Good Sack', 
			['巨大袋子'] = 'Giant Sack', 
			['矛'] = 'Spear', 
			['防御蓝图'] = 'Defense Blueprint', 
			['皮革甲'] = 'Leather Body', 
			['铁甲'] = 'Iron Body',
			['森林碎片'] = 'Gem of the Forest Fragment', 
			['防爆盾'] = 'Riot Shield'			
		}
		ItemList.Item4 = GetItemList[Item]
	end
})

TabHandles.TPItem:Button({
	Title = "带来",
	Desc = "带来物品",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item4, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Button({
	Title = "传送全服物品",
	Desc = "传送",
	Callback = function()
		for _, Item in pairs(game.Workspace.Items:GetChildren()) do
			if not Item.Name:find("Chest") then
				if ItemList.ItemTpPosition == '玩家' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(hrp.CFrame * CFrame.new(ItemList.x, ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == '篝火' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.Map.Campground.MainFire.Center.CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == '工作台' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.Map.Campground.Scrapper.Main.CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == '自定义位置' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.waypoint.CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == '指定玩家' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace:FindFirstChild(ItemList.Pn):FindFirstChild('HumanoidRootPart').CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				end
			end
		end
	end
})

TabHandles.TPItemSettings:Section({ 
	Title = "带来物品设置",
	Desc = "设置",
	Icon = 'settings',
	ImageSize = 30,
	Opened = true,
})

TabHandles.TPItemSettings:Dropdown({
	Title = "下拉菜单",
	Desc = "物品传送位置",
	Values = {"玩家", "篝火", "工作台", "自定义位置", "指定玩家"},
	Value = "玩家",
	Multi = false,
	AllowNone = false,
	Callback = function(Value)
		if Value == "自定义位置" then
			if not workspace:FindFirstChild("waypoint") then
				WindUI:Notify({
					Title = "带来物品",
					Content = "你没有放置位置方块",
					Icon = "notepad-text",
					IconThemed = true,
					Duration = 5  
				})
				return
			end        
		end
		ItemList.ItemTpPosition = Value
	end
})

TabHandles.TPItemSettings:Paragraph({
	Title = "提示",
	Desc = "这是物品传送位置",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItemSettings:Divider()

TabHandles.TPItemSettings:Slider({
	Title = "右偏移度",
	Desc = "偏移度",
	Step = 1,
	Value = {
		Min = 0,
		Max = 20,
		Default = 0,
	},
	Callback = function(value)
		TypeList.x = value
	end
})

TabHandles.TPItemSettings:Slider({
	Title = "上偏移度",
	Desc = "偏移度",
	Step = 1,
	Value = {
		Min = 0,
		Max = 20,
		Default = 0,
	},
	Callback = function(value)
		TypeList.y = value
	end
})

TabHandles.TPItemSettings:Paragraph({
	Title = "提示",
	Desc = "每个位置都带有默认偏移高度 无法改变",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItemSettings:Divider()

TabHandles.TPItemSettings:Button({
	Title = "在此放置位置方块",
	Desc = "位置表示",
	Callback = function()
		for _, part in pairs(workspace:GetChildren()) do
			if part.Name == "waypoint" then
				part:Destroy()
			end        
		end

		local waypoint = Instance.new("Part")
		waypoint.Name = "waypoint"
		waypoint.BrickColor = BrickColor.new("Bright red")
		waypoint.Material = Enum.Material.Neon
		waypoint.Transparency = 0.7
		waypoint.Size = Vector3.new(2, 2, 2)
		waypoint.Anchored = true
		waypoint.CanCollide = false        
		waypoint.Position = hrp.Position + Vector3.new(0, 3, 0)
		waypoint.Parent = workspace

		WindUI:Notify({
			Title = "自定义位置",
			Content = "放置完成",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.TPItemSettings:Button({
	Title = "删除位置方块",
	Desc = "删除位置表示",
	Callback = function()
		if not workspace.waypoint then
			WindUI:Notify({
				Title = "自定义位置",
				Content = "未找到位置方块",
				Icon = "notepad-text",
				IconThemed = true,
				Duration = 5  
			})        
		end
		for _, part in pairs(workspace:GetChildren()) do
			if part.Name == "waypoint" then
				part:Destroy()
				WindUI:Notify({
					Title = "自定义位置",
					Content = "删除完成",
					Icon = "notepad-text",
					IconThemed = true,
					Duration = 5  
				})                    
			end        
		end
	end
})

TabHandles.TPItemSettings:Paragraph({
	Title = "提示",
	Desc = "请打开传送模式的[自定义位置]",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItemSettings:Divider()

TabHandles.TPItemSettings:Input({
	Title = "输入指定玩家名称",
	Desc = "玩家名",
	Value = lp.Name,
	Placeholder = "请输入",
	Type = "Input",
	Callback = function(text)
		ItemList.Pn = text
		WindUI:Notify({
			Title = "带来物品",
			Content = "修改完成: " .. text,
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})        
	end
})

local SelectPlayer = TabHandles.TPItemSettings:Dropdown({
	Title = "选择玩家",
	Desc = "选择",
	Values = PlayerList,
	Value = "请选择",
	Callback = function(value) 
		ItemList.Pn = value
		WindUI:Notify({
			Title = "带来物品",
			Content = "修改完成: " .. value,
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.Kill1:Section({ 
	Title = "杀戳光环(范围)",
	Desc = "杀戳",
	Icon = 'axe',
	ImageSize = 30,
	Opened = true,
})

local run = false
TabHandles.Kill1:Toggle({
	Title = "杀戮光环",
	Desc = "杀死",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		run = state
		if state then
			task.spawn(function()
				while run do
					killCharacter(St.Kill * 1.1)
					task.wait(0.1)
				end
			end)
		end 
	end
})

TabHandles.Kill1:Slider({
	Title = "杀戮范围",
	Desc = "范围大小",
	Step = 1,
	Value = {
		Min = 50,
		Max = 500,
		Default = 50,
	},
	Callback = function(value)
		St.Kill = value  
	end
})

TabHandles.Kill1:Section({ 
	Title = "杀戳光环(全图)",
	Desc = "杀戳",
	Icon = 'axe',
	ImageSize = 30,
	Opened = true,
})

local run1 = false
TabHandles.Kill1:Toggle({
	Title = "全图杀戮光环",
	Desc = "杀死",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		run1 = state
		if state then
			task.spawn(function()
				while run1 do
					local axe = inventory:FindFirstChild(tools.KillTool)
					for _, Child in pairs(workspace.Characters:GetChildren()) do
						DamageRemote:InvokeServer(Child, axe, '1_' .. lp.CharacterAppearanceId, hrp.CFrame)        
					end
					task.wait(0.1)
				end
			end)
		end 
	end
})

TabHandles.Cut1:Section({ 
	Title = "砍树光环(范围)",
	Desc = "砍树",
	Icon = 'tree-pine',
	ImageSize = 30,
	Opened = true,
})

ActiveAutoChopTree = false
TabHandles.Cut1:Toggle({
	Title = "砍树光环",
	Desc = "砍树",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		ActiveAutoChopTree = state
		task.spawn(function()
			while ActiveAutoChopTree do                
				local character = lp.Character or game.Players.CharacterAdded:Wait()
				local hrp = character:FindFirstChild("HumanoidRootPart")
				local weapon = inventory:FindFirstChild("Old Axe") or inventory:FindFirstChild("Good Axe") or inventory:FindFirstChild("Strong Axe") or inventory:FindFirstChild("Chainsaw")

				task.spawn(function()
					for _, tree in pairs(workspace.Map.Foliage:GetChildren()) do
						if tree:IsA("Model") and (tree.Name == "Small Tree" or tree.Name == "TreeBig1" or tree.Name == "TreeBig2") and tree.PrimaryPart then
							local distance = (tree.PrimaryPart.Position - hrp.Position).Magnitude
							if distance <= St.Cut then
								DamageRemote:InvokeServer(tree, weapon, 999, hrp.CFrame)
							end
						end
					end
				end)

				task.spawn(function()
					for _, tree in pairs(workspace.Map.Landmarks:GetChildren()) do
						if tree:IsA("Model") and (tree.Name == "Small Tree" or tree.Name == "TreeBig1" or tree.Name == "TreeBig2") and tree.PrimaryPart then
							local distance = (tree.PrimaryPart.Position - hrp.Position).Magnitude
							if distance <= St.Cut then
								DamageRemote:InvokeServer(tree, weapon, 999, hrp.CFrame)
							end
						end
					end
				end)                
				task.wait(0.1)
			end
		end) 
	end
})

TabHandles.Cut1:Slider({
	Title = "砍树范围",
	Desc = "范围大小",
	Step = 1,
	Value = {
		Min = 50,
		Max = 500,
		Default = 50,
	},
	Callback = function(value)
		St.Cut = value  
	end
})

TabHandles.Cut1:Section({ 
	Title = "砍树光环(全图)",
	Desc = "砍树",
	Icon = 'tree-pine',
	ImageSize = 30,
	Opened = true,
})

local run3 = false
TabHandles.Cut1:Toggle({
	Title = "全图砍树光环",
	Desc = "砍树",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		run3 = state
		if state then
			task.spawn(function()
				while run3 do
					local tool = inventory:FindFirstChild(tools.CutTool)
					for _, Tree in pairs(workspace.Map.Landmarks:GetChildren()) do
						if Tree.Name ==  "Small Tree" or Tree.Name:find("Big") then
							DamageRemote:InvokeServer(Tree, tool, true, hrp.CFrame)      
						end
					end
					task.wait(0.1)
				end
			end)
		end 
	end
})

TabHandles.plant:Section({ 
	Title = "种植树",
	Desc = "种植",
	Icon = 'tree-pine',
	ImageSize = 30,
	Opened = true,
})

local plantShape = "圆形" 
local radius = 40
local spacing = 1
local Root = "玩家"
local isPlanting = false

TabHandles.plant:Dropdown({ 
	Title = "选择种植形状",
	Desc = '形状',
	Values = {"圆形", "正方形"}, 
	Value = "圆形", 
	Callback = function(value) 
		plantShape = value 
	end 
})

TabHandles.plant:Dropdown({ 
	Title = "选择种植中心",
	Desc = '中心',
	Values = {"玩家", "篝火"}, 
	Value = "玩家", 
	Callback = function(value) 
		Root = value 
	end 
})

TabHandles.plant:Slider({
	Title = "种植半径大小",
	Desc = '半径',
	Value = { Min = 1, Max = 150, Default = 50 },
	Callback = function(value)
		radius = value
	end
})

TabHandles.plant:Toggle({
	Title = "自动种植",
	Desc = '自动',
	Value = false,
	Callback = function(state)
		isPlanting = state
		if state then
			local Players = game:GetService("Players") 
			local ReplicatedStorage = game:GetService("ReplicatedStorage") 
			local RequestPlantItem = ReplicatedStorage:FindFirstChild("RemoteEvents"):FindFirstChild("RequestPlantItem") 
			local Sapling = workspace:FindFirstChild("Items"):FindFirstChild("Sapling")
			local rootpart 
			local player = Players.LocalPlayer
			local character = player.Character or player.CharacterAdded:Wait()
			if Root == "玩家" then
				rootpart = character:FindFirstChild("HumanoidRootPart")
			elseif Root == '篝火' then
				rootpart = workspace.Map.Campground.MainFire:FindFirstChild("Center")
			end
			local fixedY = 1.216280221939087

			if plantShape == "圆形" then
				local circumference = 2 * math.pi * radius
				local numTrees = math.floor(circumference / spacing)
				local angleStep = 360 / numTrees

				local function plantAtAngle(angle)
					if not isPlanting then return end
					local angleRad = math.rad(angle)
					local x = rootpart.Position.X + radius * math.cos(angleRad)
					local z = rootpart.Position.Z + radius * math.sin(angleRad)
					local position = Vector3.new(x, fixedY, z)
					RequestPlantItem:InvokeServer(Sapling, position)
				end

				for i = 0, numTrees - 1 do
					if not isPlanting then break end
					local angle = i * angleStep
					plantAtAngle(angle)
					task.wait(0.1)
				end
			else
				local sideLength = radius * 2
				local numTreesPerSide = math.floor(sideLength / spacing)
				local step = sideLength / numTreesPerSide
				local halfSide = sideLength / 2

				for i = 0, numTreesPerSide do
					if not isPlanting then break end
					local x = rootpart.Position.X - halfSide + i * step
					local z1 = rootpart.Position.Z - halfSide
					local z2 = rootpart.Position.Z + halfSide

					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x, fixedY, z1))
					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x, fixedY, z2))
					task.wait(0.1)
				end

				for i = 1, numTreesPerSide - 1 do
					if not isPlanting then break end
					local z = rootpart.Position.Z - halfSide + i * step
					local x1 = rootpart.Position.X - halfSide
					local x2 = rootpart.Position.X + halfSide

					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x1, fixedY, z))
					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x2, fixedY, z))
					task.wait(0.1)
				end
			end
		end
	end
})

TabHandles.plant:Paragraph({
	Title = "提示", 
	Desc = "种植时务必有一个树苗 否则无效", 
	Image = "info", 
	ImageSize = 15
})

local es, es2, es3, es4, es5, es6, es7, es8, es9, es10, es11, es12, es13, es14, es15, es16, es17 = false
local esd, esd1, esd2, esd3 = false

TabHandles.ItemEsp:Section({ 
	Title = "物品透视",
	Desc = "透视",
	Icon = 'eye',
	ImageSize = 30,
	Opened = true,
})

TabHandles.ItemEsp:Toggle({
	Title = "透视煤炭",
	Desc = "显示煤炭位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es = state
		if state then
			task.spawn(function()
				while es do
					EspItem("Coal")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Coal")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视生肉",
	Desc = "显示生肉位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es2 = state
		if state then
			task.spawn(function()
				while es2 do
					EspItem("Steak")
					EspItem("Morsel")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Morsel")
			RemoveEspItem("Steak")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视熟肉",
	Desc = "显示熟肉位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es3 = state
		if state then
			task.spawn(function()
				while es3 do
					EspItem("Cooked Steak")
					EspItem("Cooked Morsel")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Cooked Morsel")
			RemoveEspItem("Cooked Steak")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视燃料罐",
	Desc = "显示燃料罐位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es4 = state
		if state then
			task.spawn(function()
				while es4 do
					EspItem("Fuel Canister")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Fuel Canister")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视燃料桶",
	Desc = "显示燃料桶位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es5 = state
		if state then
			task.spawn(function()
				while es5 do
					EspItem("Oil Barrel")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Oil Barrel")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视木头",
	Desc = "显示木头位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es6 = state
		if state then
			task.spawn(function()
				while es6 do
					EspItem("Log")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Log")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视铁类物品",
	Desc = "显示铁类物品位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es7 = state
		if state then
			task.spawn(function()
				while es7 do
					EspItem("Old Car Engine")
					EspItem("UFO Scrap")
					EspItem("UFO Junk")
					EspItem("Metal Chair")
					EspItem("Tyre")
					EspItem("Sheet Metal")
					EspItem("Bolt")
					EspItem("Old Radio")
					EspItem("Broken Fan")
					EspItem("Broken Microwave")
					EspItem("Washing Machine") 
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Car Engine")
			RemoveEspItem("UFO Scrap")
			RemoveEspItem("UFO Junk")
			RemoveEspItem("Metal Chair")
			RemoveEspItem("Tyre")
			RemoveEspItem("Sheet Metal")
			RemoveEspItem("Bolt")
			RemoveEspItem("Old Radio")
			RemoveEspItem("Broken Fan")
			RemoveEspItem("Broken Microwave")
			RemoveEspItem("Washing Machine")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视胡萝卜",
	Desc = "显示胡萝卜位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es8 = state
		if state then
			task.spawn(function()
				while es8 do
					EspItem("Carrot")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Carrot")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视浆果",
	Desc = "显示浆果位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es9 = state
		if state then
			task.spawn(function()
				while es9 do
					EspItem("Berry")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Berry")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视枪",
	Desc = "显示枪支位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es10 = state
		if state then
			task.spawn(function()
				while es10 do
					EspItem("Revolver")
					EspItem("Rifle")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Revolver")
			RemoveEspItem("Rifle")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视弹药",
	Desc = "显示弹药位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es11 = state
		if state then
			task.spawn(function()
				while es11 do
					EspItem("Revolver Ammo")
					EspItem("Rifle Ammo")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Revolver Ammo")
			RemoveEspItem("Rifle Ammo")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视袋子",
	Desc = "显示袋子位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es12 = state
		if state then
			task.spawn(function()
				while es12 do
					EspItem("Old Sack")
					EspItem("Good Sack")
					EspItem("Giant Sack")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Sack")
			RemoveEspItem("Good Sack")
			RemoveEspItem("Giant Sack")            
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视斧头",
	Desc = "显示斧头位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es13 = state
		if state then
			task.spawn(function()
				while es13 do
					EspItem("Old Axe")
					EspItem("Good Axe")
					EspItem("Strong Axe")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Axe")
			RemoveEspItem("Good Axe")
			RemoveEspItem("Strong Axe")   
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视手电",
	Desc = "显示手电位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es14 = state
		if state then
			task.spawn(function()
				while es14 do
					EspItem("Old Flashlight")
					EspItem("Strong Flashlight")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Flashlight")
			RemoveEspItem("Strong Flashlight")  
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视盔甲",
	Desc = "显示盔甲位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es15 = state
		if state then
			task.spawn(function()
				while es15 do
					EspItem("Leather Body")
					EspItem("Iron Body")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Leather Body")
			RemoveEspItem("Iron Body")  
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视医疗用品",
	Desc = "显示医疗用品位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es16 = state
		if state then
			task.spawn(function()
				while es16 do
					EspItem("Bandage")
					EspItem("MedKit")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Bandage")
			RemoveEspItem("MedKit")  
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "透视矛",
	Desc = "显示矛位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es17 = state
		if state then
			task.spawn(function()
				while es17 do
					EspItem("Spear")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Spear")
		end
	end
})

TabHandles.CharacterEsp:Section({ 
	Title = "动物透视",
	Desc = "透视",
	Icon = 'eye',
	ImageSize = 30,
	Opened = true,
})

TabHandles.CharacterEsp:Toggle({
	Title = "透视兔子",
	Desc = "显示兔子位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd = state
		if state then
			task.spawn(function()
				while esd do
					EspCharacter("Bunny")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Bunny")
		end
	end
})

TabHandles.CharacterEsp:Toggle({
	Title = "透视狼",
	Desc = "显示狼位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd1 = state
		if state then
			task.spawn(function()
				while esd1 do
					EspCharacter("Wolf")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Wolf")
		end
	end
})

TabHandles.CharacterEsp:Toggle({
	Title = "透视阿尔法狼",
	Desc = "显示阿尔法狼位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd2 = state
		if state then
			task.spawn(function()
				while esd2 do
					EspCharacter("Alpha Wolf")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Alpha Wolf")
		end
	end
})

TabHandles.CharacterEsp:Toggle({
	Title = "透视熊",
	Desc = "显示熊位置",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd3 = state
		if state then
			task.spawn(function()
				while esd3 do
					EspCharacter("Bear")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Bear")
		end
	end
})

TabHandles.ESPSettings:Section({ 
	Title = "透视设置",
	Desc = "设置",
	Icon = 'settings',
	ImageSize = 30,
	Opened = true,
})

TabHandles.ESPSettings:Slider({
	Title = "ESP透明度",
	Desc = "设置高亮填充透明度",
	Step = 0.1,
	Value = {
		Min = 0,
		Max = 1,
		Default = 0.5,
	},
	Callback = function(value)
		dyzh.nt = value
		for _, cache in pairs(espCache.Items) do
			if cache.highlight then
				cache.highlight.FillTransparency = value
			end
		end
		for _, cache in pairs(espCache.Characters) do
			if cache.highlight then
				cache.highlight.FillTransparency = value
			end
		end
	end
})

TabHandles.ESPSettings:Slider({
	Title = "ESP透明度",
	Desc = "设置高轮廓透明度",
	Step = 0.1,
	Value = {
		Min = 0,
		Max = 1,
		Default = 0.5,
	},
	Callback = function(value)
		dyzh.wt = value
		for _, cache in pairs(espCache.Items) do
			if cache.highlight then
				cache.highlight.OutlineTransparency = value
			end
		end
		for _, cache in pairs(espCache.Characters) do
			if cache.highlight then
				cache.highlight.OutlineTransparency = value
			end
		end
	end
})

TabHandles.Chest:Section({ 
	Title = "宝箱互动",
	Desc = "宝箱",
	Icon = 'sparkles',
	ImageSize = 30,
	Opened = true,
})

local OpenTime = 5.5
TabHandles.Chest:Input({
	Title = "宝箱打开时间",
	Desc = "输入",
	Value = "5.5",
	Callback = function(text)
		OpenTime = tonumber(text)        
	end
})

TabHandles.Chest:Toggle({
	Title = "开启自定义开启",
	Desc = "开启自定义时间",
	Value = false,
	Callback = function(state)
		if state then
			OpenChestTme(OpenTime)
		else
			OpenChestTme(5.5)
		end
	end
})

TabHandles.Chest:Section({ 
	Title = "开启宝箱",
	Desc = "宝箱",
	Icon = 'sparkles',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Chest:Button({
	Title = "打开所有宝箱",
	Desc = "一键打开",
	Callback = function()
		OpenChest()
	end
})

local ChestRunState = false

TabHandles.Chest:Toggle({
	Title = "自动打开宝箱",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		ChestRunState = state
		if state then
			while ChestRunState do
				OpenChest()
				task.wait(0.1)        
			end
		end
	end
})

TabHandles.Chest:Paragraph({
	Title = "提示",
	Desc = "需要你的注入器支持",
	Image = "info",
	ImageSize = 15,
})

TabHandles.Coin:Section({ 
	Title = "捡起硬币",
	Desc = "捡起",
	Icon = 'coins',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Coin:Button({
	Title = "拾取所有硬币",
	Desc = "自动",
	Callback = function()
		for _, v in pairs(workspace.Items:GetChildren()) do
			if v.Name == 'Coin Stack' then
				game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestCollectCoints"):InvokeServer(v)
			end
		end
	end
})

TabHandles.Coin:Toggle({
	Title = "自动拾取硬币",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		ChestRunState = state
		if state then
			while ChestRunState do
				for _, v in pairs(workspace.Items:GetChildren()) do
					if v.Name == 'Coin Stack' then
						game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestCollectCoints"):InvokeServer(v)
					end
				end
				wait()        
			end
		end
	end
})

TabHandles.Auto1:Section({ 
	Title = "自动篝火",
	Desc = "自动",
	Icon = 'atom',
	ImageSize = 30,
	Opened = true,
})

local AutoState0 = false
TabHandles.Auto1:Toggle({
	Title = "自动篝火(椅子)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState0 = state
		if state then
			while AutoState0 do
				AutoFire("Chair")
				task.wait(1)
			end
		end
	end
})

local AutoState1 = false
TabHandles.Auto1:Toggle({
	Title = "自动篝火(煤炭)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState1 = state
		if state then
			while AutoState1 do
				AutoFire("Coal")
				task.wait(1)
			end
		end
	end
})
local AutoState2 = false
TabHandles.Auto1:Toggle({
	Title = "自动篝火(木头)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState2 = state
		if state then
			while AutoState2 do
				AutoFire("Log")
				task.wait(1)
			end
		end
	end
})
local AutoState3 = false
TabHandles.Auto1:Toggle({
	Title = "自动篝火(燃料罐)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState3 = state
		if state then
			while AutoState3 do
				AutoFire("Fuel Canister")
				task.wait(1)
			end
		end
	end
})
local AutoState4 = false
TabHandles.Auto1:Toggle({
	Title = "自动篝火(燃料罐)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState4 = state
		if state then
			while AutoState4 do
				AutoFire("Oil Barrel")
				task.wait(1)
			end
		end
	end
})

TabHandles.Auto2:Section({ 
	Title = "自动工作台",
	Desc = "自动",
	Icon = 'chevrons-right',
	ImageSize = 30,
	Opened = true,
})

local AutoState5 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(木头)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState5 = state
		if state then
			while AutoState5 do
				AutoScrapper("Log")
				task.wait(1)
			end
		end
	end
})

local AutoState91 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(洗衣机)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState91 = state
		if state then
			while AutoState91 do
				AutoScrapper("Washing Machine")
				task.wait(1)
			end
		end
	end
})

local AutoState6 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(破旧微波炉)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState6 = state
		if state then
			while AutoState6 do
				AutoScrapper("Broken Microwave")
				task.wait(1)
			end
		end
	end
})
local AutoState7 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(风扇)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState7 = state
		if state then
			while AutoState7 do
				AutoScrapper("Broken Fan")
				task.wait(1)
			end
		end
	end
})
local AutoState8 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(旧音响)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState8 = state
		if state then
			while AutoState8 do
				AutoScrapper("Old Radio")
				task.wait(1)
			end
		end
	end
})
local AutoState9 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(铁钉)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState9 = state
		if state then
			while AutoState9 do
				AutoScrapper("Bolt")
				task.wait(1)
			end
		end
	end
})
local AutoState10 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(废铁)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState10 = state
		if state then
			while AutoState10 do
				AutoScrapper("Sheet Metal")
				task.wait(1)
			end
		end
	end
})
local AutoState11 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(轮胎)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState11 = state
		if state then
			while AutoState11 do
				AutoScrapper("Tyre")
				task.wait(1)
			end
		end
	end
})
local AutoState12 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(铁椅子)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState12 = state
		if state then
			while AutoState12 do
				AutoScrapper("Metal Chair")
				task.wait(1)
			end
		end
	end
})

local AutoState78 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(外星残骸)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState78 = state
		if state then
			while AutoState78 do
				AutoScrapper("UFO Component")
				task.wait(1)
			end
		end
	end
})

local AutoState13 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(外星残骸1)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState13 = state
		if state then
			while AutoState13 do
				AutoScrapper("UFO Junk")
				task.wait(1)
			end
		end
	end
})
local AutoState14 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(外星残骸2)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState14 = state
		if state then
			while AutoState14 do
				AutoScrapper("UFO Scrap")
				task.wait(1)
			end
		end
	end
})
local AutoState15 = false
TabHandles.Auto2:Toggle({
	Title = "自动工作台(引擎)",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoState15 = state
		if state then
			while AutoState15 do
				AutoScrapper("Old Car Engine")
				task.wait(1)
			end
		end
	end
})

TabHandles.Auto3:Section({ 
	Title = "自动烹饪食物",
	Desc = "自动",
	Icon = 'chef-hat',
	ImageSize = 30,
	Opened = true,
})

local Cooking = false
TabHandles.Auto3:Toggle({
	Title = "自动煎烤食物",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		Cooking = state
		if state then
			while Cooking do
				for _, Item in pairs(workspace.Items:GetChildren()) do
				    if Item.Name == "Steak" or Item.Name == "Morsel" then
					    game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestCookItem"):FireServer(workspace:WaitForChild("Map"):WaitForChild("Campground"):WaitForChild("MainFire"), Item)
					end
				end
				task.wait(0.1)
			end
		end
	end
})

TabHandles.Auto3:Paragraph({
	Title = "提示",
	Desc = "使用前请确保篝火存在",
	Image = "info",
	ImageSize = 15,
})

TabHandles.Auto3:Section({ 
	Title = "自动吃食物",
	Desc = "自动",
	Icon = 'beef',
	ImageSize = 30,
	Opened = true,
})

local n
TabHandles.Auto3:Dropdown({
	Title = "选择食物",
	Desc = "自己选择",
	Values = {"蛋糕", "熟肉腿", "熟肉排", "生肉腿", "生肉排", "浆果", "胡萝卜"},
	Value = "胡萝卜",
	Multi = false,
	Callback = function(value)
		local GetFoodList = {
			["蛋糕"] = "Cake",
			["熟肉腿"] = "Cooked Steak",
			["熟肉排"] = "Cooked Morsel",
			["生肉腿"] = "Morsel",
			["生肉排"] = "Steak",
			["浆果"] = "Berry",
			["胡萝卜"] = "Carrot",
		}
		Food = GetFoodList[value]
	end
})


TabHandles.Auto3:Input({
	Title = "饥饿设置",
	Desc = "当饥饿达到多少时进食",
	Value = tostring(hungerThreshold),
	Placeholder = "75",
	Numeric = true,
	Callback = function(value)
		local n = tonumber(value)
		if n then
			hungerThreshold = math.clamp(n, 0, 100)
		end
	end
})

local autoFeed

TabHandles.Auto3:Toggle({
	Title = "自动进食",
	Value = false,
	Callback = function(state)
		autoFeed = state
		if state then
			task.spawn(function()
				while autoFeed do
					task.wait(0.075)
					if wiki(Food) == 0 then
						autoFeed = false
						notifeed(Food)
						break
					end
					if ghn() <= hungerThreshold then
						feed(Food)
					end
				end
			end)
		end
	end
})

TabHandles.Auto4:Section({ 
	Title = "钓鱼",
	Desc = "自动",
	Icon = 'fish',
	ImageSize = 30,
	Opened = true,
})

local AutoFish = false
local fishThread = nil

TabHandles.Auto4:Toggle({
	Title = "自动钓鱼",
	Value = false,
	Callback = function(state)
		AutoFish = state

		if state then
			fishThread = task.spawn(function()
				while AutoFish do
					local bar  = lp.PlayerGui:FindFirstChild("Interface")
						and lp.PlayerGui.Interface:FindFirstChild("FishingCatchFrame")
						and lp.PlayerGui.Interface.FishingCatchFrame:FindFirstChild("TimingBar")
						and lp.PlayerGui.Interface.FishingCatchFrame.TimingBar:FindFirstChild("Bar")

					local zone = lp.PlayerGui:FindFirstChild("Interface")
						and lp.PlayerGui.Interface:FindFirstChild("FishingCatchFrame")
						and lp.PlayerGui.Interface.FishingCatchFrame:FindFirstChild("TimingBar")
						and lp.PlayerGui.Interface.FishingCatchFrame.TimingBar:FindFirstChild("SuccessArea")

					if bar and zone and math.abs(bar.AbsolutePosition.Y - zone.AbsolutePosition.Y) < 1 then
						local vim = game:GetService("VirtualInputManager")
						vim:SendMouseButtonEvent(0, 0, 0, true, game, 0)
						task.wait()
						vim:SendMouseButtonEvent(0, 0, 0, false, game, 0)
					end

					task.wait(0.03)
				end
				fishThread = nil
			end)
		else
			if fishThread then
				task.cancel(fishThread)
				fishThread = nil
			end
		end
	end
})

TabHandles.Auto4:Section({ 
	Title = "鱼竿",
	Desc = "鱼竿",
	Icon = 'target',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Auto4:Button({
	Title = "远程升级鱼竿",
	Desc = "升级",
	Callback = function()   
		local S = getsenv(lp.PlayerScripts.Client.SkillModules.FishingUpgradeClient)
		if inventory:FindFirstChild('Old Rod') then
			S.RunUpgradeRod(inventory:FindFirstChild('Old Rod'))
		elseif inventory:FindFirstChild('Good Rod') then
			S.RunUpgradeRod(inventory:FindFirstChild('Good Rod'))
		else
			WindUI:Notify({
				Title = "提示",
				Content = '你没有鱼竿或者你的鱼竿不需要升级',
				Icon = 'crown',
				Duration = 2
			})
		end
	end
})

TabHandles.LostKid:Section({ 
	Title = "收集孩子",
	Desc = "自动",
	Icon = 'baby',
	ImageSize = 30,
	Opened = true,
})

TabHandles.LostKid:Button({
	Title = "一键将所有孩子放入袋子",
	Desc = "自动",
	Callback = function()
		local KidNum = 0
		for _, v in pairs(workspace.Characters:GetChildren()) do
			if string.find(v.Name, 'Child', 1, true) then
				for _, i in pairs(v:GetDescendants()) do
					if i:IsA('ProximityPrompt') then
						fireproximityprompt(i)
						KidNum += 1
					end
				end
			end
		end
		WindUI:Notify({
			Title = "收集孩子",
			Content = "收集到: " .. KidNum .. '个孩子',
			Icon = "baby",
			IconThemed = true,
			Duration = 5  
		})
	end
})

local AutoGetKid = false
TabHandles.LostKid:Toggle({
	Title = "全自动收集孩子",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		AutoGetKid = state
		if state then
			while AutoGetKid do
				task.wait()
				for _, v in pairs(workspace.Characters:GetChildren()) do
					if string.find(v.Name, 'Child', 1, true) then
						for _, i in pairs(v:GetDescendants()) do
							if i:IsA('ProximityPrompt') then
								fireproximityprompt(i)
							end
						end
					end
				end                
			end
		end
	end
})

TabHandles.Tp2:Section({ 
	Title = "传送",
	Desc = "传送",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Tp2:Button({
	Title = "传送到篝火",
	Desc = "传送",
	Callback = function()
		local fireCenter = workspace.Map.Campground.MainFire:FindFirstChild("Center")
		if not fireCenter then
			WindUI:Notify({
				Title = "提示",
				Content = "未找到篝火",
				Duration = 2
			})
			return
		end
		hrp.CFrame = fireCenter.CFrame + Vector3.new(0, 3, 0)
	end
})

TabHandles.Tp2:Button({
	Title = "传送到工作台",
	Desc = "传送",
	Callback = function()
		local scrapper = workspace.Map.Campground.Scrapper:FindFirstChild("Main")
		if not scrapper then
			WindUI:Notify({
				Title = "提示",
				Content = "未找到工作台",
				Duration = 2
			})
			return
		end
		hrp.CFrame = scrapper.CFrame + Vector3.new(0, 3, 0)
	end
})

TabHandles.Tp2:Section({ 
	Title = "预警传送",
	Desc = "传送",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

local Health = 75
local HealthTP = false

TabHandles.Tp2:Slider({
	Title = "生命阈值",
	Desc = "最小生命",
	Step = 1,
	Value = { Min = 0, Max = 100, Default = 75 },
	Callback = function(value)
		Health = tonumber(value)
	end
})

TabHandles.Tp2:Toggle({
	Title = "自动检测生命阈值传送",
	Desc = "自动",
	Value = false,
	Callback = function(state)
		local TPState = true
		HealthTP = state
		if state then
			while HealthTP do
				task.wait()
				if lp.Character:FindFirstChild('Humanoid').Health >= Health then
					return
				end

				if TPState then
					lp.Character:FindFirstChild('HumanoidRootPart').CFrame = workspace.Map.Campground.MainFire:FindFirstChild("Center").CFrame + Vector3.new(0, 3, 0)
					TPState = false
				end
			end
		end
	end
})

Window:OnClose(function()
	if game:GetService("UserInputService").KeyboardEnabled then
		WindUI:Notify({
			Title = "通知",
			Content = "按下N键再次打开",
			Duration = 3
		})    
	end
end)

game.Players.PlayerAdded:Connect(function(Pl)
	table.insert(PlayerList, Pl.Name)
	SelectPlayer:Refresh(PlayerList)
end)
end
local function bgc()
local Tab = Window:Tab({  
    Title = "碰撞箱扩大",  
    Icon = "box",  
    Locked = false,
})
local hitboxEnabled = false
local noCollisionEnabled = false
local hitbox_original_properties = {}
local hitboxSize = 21
local hitboxTransparency = 6
local teamCheck = "FFA"

local defaultBodyParts = {
    "UpperTorso",
    "Head",
    "HumanoidRootPart"
}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
local WarningText = Instance.new("TextLabel", ScreenGui)
WarningText.Size = UDim2.new(0, 200, 0, 50)
WarningText.TextSize = 16
WarningText.Position = UDim2.new(0.5, -150, 0, 0)
WarningText.Text = "警告：可能出现碰撞问题"
WarningText.TextColor3 = Color3.new(1, 0, 0)
WarningText.BackgroundTransparency = 1
WarningText.Visible = false

local function savedPart(player, part)
    if not hitbox_original_properties[player] then
        hitbox_original_properties[player] = {}
    end
    if not hitbox_original_properties[player][part.Name] then
        hitbox_original_properties[player][part.Name] = {
            CanCollide = part.CanCollide,
            Transparency = part.Transparency,
            Size = part.Size
        }
    end
end

local function restoredPart(player)
    if hitbox_original_properties[player] then
        for partName, properties in pairs(hitbox_original_properties[player]) do
            local part = player.Character and player.Character:FindFirstChild(partName)
            if part and part:IsA("BasePart") then
                part.CanCollide = properties.CanCollide
                part.Transparency = properties.Transparency
                part.Size = properties.Size
            end
        end
    end
end

local function findClosestPart(player, partName)
    if not player.Character then return nil end
    for _, part in ipairs(player.Character:GetChildren()) do
        if part:IsA("BasePart") and part.Name:lower():match(partName:lower()) then
            return part
        end
    end
    return nil
end

local function extendHitbox(player)
    for _, partName in ipairs(defaultBodyParts) do
        local part = player.Character and (player.Character:FindFirstChild(partName) or findClosestPart(player, partName))
        if part and part:IsA("BasePart") then
            savedPart(player, part)
            part.CanCollide = not noCollisionEnabled
            part.Transparency = hitboxTransparency / 10
            part.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)
        end
    end
end

local function isEnemy(player)
    if teamCheck == "FFA" or teamCheck == "Everyone" then
        return true
    end
    return player.Team ~= LocalPlayer.Team
end

local function shouldExtendHitbox(player)
    return isEnemy(player)
end

local function updateHitboxes()
    for _, v in ipairs(Players:GetPlayers()) do
        if v ~= LocalPlayer and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
            if shouldExtendHitbox(v) then
                extendHitbox(v)
            else
                restoredPart(v)
            end
        end
    end
end

local function onCharacterAdded(character)
    task.wait(0.1)
    if hitboxEnabled then
        updateHitboxes()
    end
end

local function onPlayerAdded(player)
    player.CharacterAdded:Connect(onCharacterAdded)
    player.CharacterRemoving:Connect(function()
        restoredPart(player)
        hitbox_original_properties[player] = nil
    end)
end

local function checkForDeadPlayers()
    for player, _ in pairs(hitbox_original_properties) do
        if not player.Parent or not player.Character or not player.Character:IsDescendantOf(game) then
            restoredPart(player)
            hitbox_original_properties[player] = nil
        end
    end
end

Players.PlayerAdded:Connect(onPlayerAdded)
for _, player in ipairs(Players:GetPlayers()) do
    onPlayerAdded(player)
end

Tab:Button({
    Title = "点击此处启动Hitbox功能",
    Callback = function()
        coroutine.wrap(function()
            while true do
                if hitboxEnabled then
                    updateHitboxes()
                    checkForDeadPlayers()
                end
                task.wait(0.1)
            end
        end)()
    end
})

Tab:Toggle({
    Title = "开启Hitbox",
    Value = false,
    Callback = function(state)
        hitboxEnabled = state
        if not state then
            for _, player in ipairs(Players:GetPlayers()) do
                restoredPart(player)
            end
            hitbox_original_properties = {}
        else
            updateHitboxes()
        end
    end
})

Tab:Slider({
    Title = "Hitbox大小",
    Value = {
        Min = 1,
        Max = 25,
        Default = 21
    },
    Callback = function(value)
        hitboxSize = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

Tab:Slider({
    Title = "Hitbox透明度",
    Value = {
        Min = 1,
        Max = 10,
        Default = 6
    },
    Callback = function(value)
        hitboxTransparency = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

Tab:Dropdown({
    Title = "队伍检测",
    Multi = false,
    AllowNone = false,
    Value = "FFA",
    Values = {"FFA", "队伍模式", "所有人"},
    Callback = function(value)
        teamCheck = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

Tab:Toggle({
    Title = "无碰撞模式",
    Value = false,
    Callback = function(state)
        noCollisionEnabled = state
        WarningText.Visible = state
        coroutine.wrap(function()
            while noCollisionEnabled do
                if hitboxEnabled then
                    updateHitboxes()
                end
                task.wait(0.01)
            end
            if hitboxEnabled then
                updateHitboxes()
            end
        end)()
    end
})

Tab:Toggle({
    Title = "半自动农场",
    Value = false,
    Callback = function(bool)
        getgenv().AutoFarm = bool
        local runServiceConnection
        local mouseDown = false
        local player = game.Players.LocalPlayer
        local camera = game.Workspace.CurrentCamera
        game:GetService("ReplicatedStorage").wkspc.CurrentCurse.Value = bool and "Infinite Ammo" or ""

        local function getClosestEnemyPlayer()
            local closestDistance = math.huge
            local closestPlayer = nil
            for _, enemyPlayer in pairs(game.Players:GetPlayers()) do
                if enemyPlayer ~= player and enemyPlayer.TeamColor ~= player.TeamColor and enemyPlayer.Character then
                    local hrp = enemyPlayer.Character:FindFirstChild("HumanoidRootPart")
                    local humanoid = enemyPlayer.Character:FindFirstChild("Humanoid")
                    if hrp and humanoid and humanoid.Health > 0 then
                        local dist = (player.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
                        if dist < closestDistance and hrp.Position.Y >= 0 then
                            closestDistance = dist
                            closestPlayer = enemyPlayer
                        end
                    end
                end
            end
            return closestPlayer
        end

        local function startAutoFarm()
            game:GetService("ReplicatedStorage").wkspc.TimeScale.Value = 12
            runServiceConnection = game:GetService("RunService").Stepped:Connect(function()
                if getgenv().AutoFarm then
                    local target = getClosestEnemyPlayer()
                    if target then
                        local pos = target.Character.HumanoidRootPart.Position + Vector3.new(0, 0, -4)
                        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            player.Character.HumanoidRootPart.CFrame = CFrame.new(pos)
                            camera.CFrame = CFrame.new(camera.CFrame.Position, target.Character.Head.Position)
                            if not mouseDown then
                                mouse1press()
                                mouseDown = true
                            end
                        end
                    else
                        if mouseDown then
                            mouse1release()
                            mouseDown = false
                        end
                    end
                else
                    if runServiceConnection then
                        runServiceConnection:Disconnect()
                        runServiceConnection = nil
                    end
                    if mouseDown then
                        mouse1release()
                        mouseDown = false
                    end
                end
            end)
        end

        local function onCharacterAdded(character)
            wait(0.5)
            startAutoFarm()
        end

        player.CharacterAdded:Connect(onCharacterAdded)
        if bool then
            wait(0.5)
            startAutoFarm()
        else
            game:GetService("ReplicatedStorage").wkspc.CurrentCurse.Value = ""
            getgenv().AutoFarm = false
            game:GetService("ReplicatedStorage").wkspc.TimeScale.Value = 1
            if runServiceConnection then
                runServiceConnection:Disconnect()
                runServiceConnection = nil
            end
            if mouseDown then
                mouse1release()
                mouseDown = false
            end
        end
    end
})
local Tab = Window:Tab({  
    Title = "枪械设置",  
    Icon = "crosshair",  
    Locked = false,
})

Tab:Toggle({
    Title = "无限弹药 v1",
    Value = false,
    Callback = function(state)
        game:GetService("ReplicatedStorage").wkspc.CurrentCurse.Value = state and "Infinite Ammo" or ""
    end
})

local originalValues = {
    FireRate = {},
    ReloadTime = {},
    EReloadTime = {},
    Auto = {},
    Spread = {},
    Recoil = {}
}

Tab:Toggle({
    Title = "快速换弹",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetChildren()) do
            if v:FindFirstChild("ReloadTime") then
                if state then
                    if not originalValues.ReloadTime[v] then
                        originalValues.ReloadTime[v] = v.ReloadTime.Value
                    end
                    v.ReloadTime.Value = 0.01
                else
                    v.ReloadTime.Value = originalValues.ReloadTime[v] or 0.8
                end
            end
            if v:FindFirstChild("EReloadTime") then
                if state then
                    if not originalValues.EReloadTime[v] then
                        originalValues.EReloadTime[v] = v.EReloadTime.Value
                    end
                    v.EReloadTime.Value = 0.01
                else
                    v.EReloadTime.Value = originalValues.EReloadTime[v] or 0.8
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "快速射击",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "FireRate" or v.Name == "BFireRate" then
                if state then
                    if not originalValues.FireRate[v] then
                        originalValues.FireRate[v] = v.Value
                    end
                    v.Value = 0.02
                else
                    v.Value = originalValues.FireRate[v] or 0.8
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "自动连发",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "Auto" or v.Name == "AutoFire" or v.Name == "Automatic" or v.Name == "AutoShoot" or v.Name == "AutoGun" then
                if state then
                    if not originalValues.Auto[v] then
                        originalValues.Auto[v] = v.Value
                    end
                    v.Value = true
                else
                    v.Value = originalValues.Auto[v] or false
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "无扩散",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "MaxSpread" or v.Name == "Spread" or v.Name == "SpreadControl" then
                if state then
                    if not originalValues.Spread[v] then
                        originalValues.Spread[v] = v.Value
                    end
                    v.Value = 0
                else
                    v.Value = originalValues.Spread[v] or 1
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "无后坐力",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "RecoilControl" or v.Name == "Recoil" then
                if state then
                    if not originalValues.Recoil[v] then
                        originalValues.Recoil[v] = v.Value
                    end
                    v.Value = 0
                else
                    v.Value = originalValues.Recoil[v] or 1
                end
            end
        end
    end
})
local Tab = Window:Tab({  
    Title = "玩家",  
    Icon = "person-standing",  
    Locked = false,
})
Tab:Button({
    Title = "移速(懒得写)",
    Desc = nil,
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/fly/main/README.md"))()
    end
})
local isJumpPowerEnabled = false
local jumpMethods = {"Velocity", "Vector", "CFrame"}
local selectedJumpMethod = jumpMethods[1]

Tab:Toggle({
    Title = "自定义跳跃高度",
    Value = false,
    Callback = function(state)
        isJumpPowerEnabled = state
    end
})

Tab:Dropdown({
    Title = "跳跃方法",
    Multi = false,
    AllowNone = false,
    Value = selectedJumpMethod,
    Values = jumpMethods,
    Callback = function(selected)
        selectedJumpMethod = selected
    end
})

Tab:Slider({
    Title = "跳跃高度",
    Value = {
        Min = 30,
        Max = 500,
        Default = 30,
    },
    Callback = function(value)
        local player = game:GetService("Players").LocalPlayer
        local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.UseJumpPower = true
            humanoid.Jumping:Connect(function(isActive)
                if isJumpPowerEnabled and isActive then
                    local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
                    if rootPart then
                        if selectedJumpMethod == "Velocity" then
                            rootPart.Velocity = Vector3.new(rootPart.Velocity.X, value, rootPart.Velocity.Z)
                        elseif selectedJumpMethod == "Vector" then
                            rootPart.Velocity = Vector3.new(0, value, 0)
                        elseif selectedJumpMethod == "CFrame" then
                            player.Character:SetPrimaryPartCFrame(player.Character:GetPrimaryPartCFrame() + Vector3.new(0, value, 0))
                        end
                    end
                end
            end)
        end
    end
})
local Tab = Window:Tab({  
    Title = "美化",  
    Icon = "hand-platter",  
    Locked = false,
})

-- Arm Skins
local armMaterial = "Plastic"
local armColor = Color3.fromRGB(50, 50, 50)
local armCharmsEnabled = false

Tab:Dropdown({
    Title = "手臂材质",
    Multi = false,
    AllowNone = false,
    Value = armMaterial,
    Values = {"Plastic", "ForceField", "Wood", "Grass"},
    Callback = function(value)
        armMaterial = value
    end
})

Tab:Colorpicker({
    Title = "手臂颜色",
    Default = Color3.fromRGB(50, 50, 50),
    Callback = function(color)
        armColor = color
    end
})

Tab:Toggle({
    Title = "开启手臂美化",
    Value = false,
    Callback = function(state)
        armCharmsEnabled = state
        if armCharmsEnabled then
            spawn(function()
                while armCharmsEnabled do
                    task.wait(0.01)
                    local cameraArms = workspace.Camera:FindFirstChild("Arms")
                    if cameraArms then
                        for _, part in pairs(cameraArms:GetDescendants()) do
                            if part.Name == 'Right Arm' or part.Name == 'Left Arm' then
                                if part:IsA("BasePart") then
                                    part.Material = Enum.Material[armMaterial]
                                    part.Color = armColor
                                end
                            elseif part:IsA("SpecialMesh") then
                                if part.TextureId == '' then
                                    part.TextureId = 'rbxassetid://0'
                                    part.VertexColor = Vector3.new(armColor.R, armColor.G, armColor.B)
                                end
                            elseif part.Name == 'L' or part.Name == 'R' then
                                part:Destroy()
                            end
                        end
                    end
                end
            end)
        end
    end
})

-- Gun Skins
local gunMaterial = "Plastic"
local gunColor = Color3.fromRGB(50, 50, 50)
local gunCharmsEnabled = false

Tab:Dropdown({
    Title = "枪械材质",
    Multi = false,
    AllowNone = false,
    Value = gunMaterial,
    Values = {"Plastic", "ForceField", "Wood", "Grass"},
    Callback = function(value)
        gunMaterial = value
    end
})

Tab:Colorpicker({
    Title = "枪械颜色",
    Default = Color3.fromRGB(50, 50, 50),
    Callback = function(color)
        gunColor = color
    end
})

Tab:Toggle({
    Title = "开启枪械美化",
    Value = false,
    Callback = function(state)
        gunCharmsEnabled = state
        if gunCharmsEnabled then
            spawn(function()
                while gunCharmsEnabled do
                    task.wait(0.01)
                    local cameraArms = workspace.Camera:FindFirstChild("Arms")
                    if cameraArms then
                        for _, part in pairs(cameraArms:GetDescendants()) do
                            if part:IsA("MeshPart") then
                                part.Material = Enum.Material[gunMaterial]
                                part.Color = gunColor
                            end
                        end
                    end
                end
            end)
        end
    end
})
local Tab = Window:Tab({  
    Title = "聊天标签/娱乐",  
    Icon = "message-circle",  
    Locked = false,
})
Tab:Toggle({
    Title = "IsChad",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("IsChad") then
            player.IsChad:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "IsChad"
        end
    end
})

Tab:Toggle({
    Title = "VIP",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("VIP") then
            player.VIP:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "VIP"
        end
    end
})

Tab:Toggle({
    Title = "OldVIP",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("OldVIP") then
            player.OldVIP:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "OldVIP"
        end
    end
})

Tab:Toggle({
    Title = "Romin",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("Romin") then
            player.Romin:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "Romin"
        end
    end
})

Tab:Toggle({
    Title = "管理员",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("IsAdmin") then
            player.IsAdmin:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "IsAdmin"
        end
    end
})
local Tab = Window:Tab({
    Title = "设置",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "更改ui颜色",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function ctdh()
local Data = {
    ["自动收集钱"] = false,
    ["自动收集餐具"] = false,
    ["自动烹饪"] = false,
    ["自动给食物"] = false,
    ["自动拿订单"] = false,
    ["自动接订单"] = false,
    ["自动选桌子"] = false,
    ["自动拿零钱"] = false,
    ["自动领奖励"] = false,
}

local Players = cloneref(game:GetService("Players"))
local LocalPlayer = cloneref(Players.LocalPlayer)
local ReplicatedStorage = cloneref(game:GetService("ReplicatedStorage"))
local cn = string.find(LocalPlayer.LocaleId, "zh") ~= nil
local T = {
    Title = cn and "餐厅大亨3" or "Restaurant Tycoon 3",
    MainSection = cn and "主要功能" or "Main",
    MainSection = cn and "我的大亨" or "My Tycoon",
    FriendSection = cn and "好友大亨" or "Friend Tycoon",
    AutoCollectBill = cn and "自动收集账单" or "Auto Collect Bill",
    AutoCollectDishes = cn and "自动收集餐具" or "Auto Collect Dishes",
    AutoCook = cn and "自动烹饪" or "Auto Cook",
    AutoGiveFood = cn and "自动送餐" or "Auto Give Food",
    AutoDoOrder = cn and "自动处理订单" or "Auto Do Order",
    AutoTakeOrder = cn and "自动接单" or "Auto Take Order",
    AutoSendTable = cn and "自动安排座位" or "Auto Send Table",
    AutoTips = cn and "自动收取小费" or "Auto Tips",
    Author = cn and "作者 | Nova" or "Author | Nova"
}

pcall(function()
    hookfunction(require(ReplicatedStorage:FindFirstChild("Source"):FindFirstChild("Utility"):FindFirstChild("NPC"):FindFirstChild("PathUtility")).GetMovementTime, function(...)
        return 0.1
    end)
end)

function GetFriend()
    for _, v in next, Players:GetPlayers() do
        if LocalPlayer:IsFriendsWith(v.UserId) then
            return v
        end
    end
    return nil
end

Main = MainSection:Tab({Title = T.MainSection, Icon = "Sword"})
Friend = MainSection:Tab({Title = T.FriendSection, Icon = "Sword"})

Main:Toggle({
    Title = T.AutoCollectBill,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动收集钱"] = state
        spawn(function()
            while Data["自动收集钱"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a:FindFirstChild("Bill") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectBill",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoCollectDishes,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动收集餐具"] = state
        spawn(function()
            while Data["自动收集餐具"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and a:FindFirstChild("Trash") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectDishes",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoCook,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动烹饪"] = state
        spawn(function()
            while Data["自动烹饪"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetDescendants()) do
                                if a.Name:find("Oven") then
                                    ReplicatedStorage.Events.Cook.CookInputRequested:FireServer(
                                        "Interact",
                                        a.Parent,
                                        "Oven"
                                    )
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoGiveFood,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动给食物"] = state
        spawn(function()
            while Data["自动给食物"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            if #v.Objects.Food:GetChildren() > 0 then
                                for _, a in pairs(v.Objects.Food:GetChildren()) do
                                    if not a:GetAttribute("Taken") then
                                        ReplicatedStorage.Events.Restaurant.GrabFood:InvokeServer(a)
                                        for _, gui in pairs(game.Players.LocalPlayer.PlayerGui:GetDescendants()) do
                                            if gui:IsA("ImageLabel") and gui.Parent and 
                                               gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                               gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                               ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                    Name = "Serve",
                                                    GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                                    Tycoon = v,
                                                    FoodModel = a,
                                                    CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                                })
                                                task.wait(0.1)
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoDoOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动拿订单"] = state
        spawn(function()
            while Data["自动拿订单"] do
                pcall(function()
                    for _,v in next,workspace.Temp:GetChildren() do
                        if v.Name == "Part" and v:FindFirstChildOfClass("ProximityPrompt") then
                            fireproximityprompt(v:FindFirstChildOfClass("ProximityPrompt"))
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoTakeOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动接订单"] = state
        spawn(function()
            while Data["自动接订单"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            for _, gui in pairs(game.Players.LocalPlayer.PlayerGui:GetDescendants()) do
                                if
                                    gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                        gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0)
                                 then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer(
                                        {
                                            Name = "TakeOrder",
                                            GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                            Tycoon = v,
                                            CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                        }
                                    )
                                    task.wait(0.1)
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoSendTable,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动选桌子"] = state
        spawn(function()
            while Data["自动选桌子"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and not a:GetAttribute("InUse") then
                                    for _, gui in pairs(game.Players.LocalPlayer.PlayerGui:GetDescendants()) do
                                        if gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                            ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                ["FurnitureModel"] = a,
                                                ["Tycoon"] = v,
                                                ["Name"] = "SendToTable",
                                                ["GroupId"] = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name)
                                            })
                                            task.wait(0.1)
                                        end
                                    end
                                end
                            end
                        end
                        task.wait(0.1)
                    end
                end)
                task.wait()
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoTips,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动拿零钱"] = state
        spawn(function()
            while Data["自动拿零钱"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            ReplicatedStorage.Events.Restaurant.TipsCollected:FireServer(v)
                        end
                    end
                end)
                task.wait()
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoCollectBill,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动收集钱"] = state
        spawn(function()
            while Data["自动收集钱"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a:FindFirstChild("Bill") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectBill",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoCollectDishes,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动收集餐具"] = state
        spawn(function()
            while Data["自动收集餐具"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and a:FindFirstChild("Trash") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectDishes",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoCook,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动烹饪"] = state
        spawn(function()
            while Data["自动烹饪"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetDescendants()) do
                                if a.Name:find("Oven") then
                                    ReplicatedStorage.Events.Cook.CookInputRequested:FireServer(
                                        "Interact",
                                        a.Parent,
                                        "Oven"
                                    )
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoGiveFood,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动给食物"] = state
        spawn(function()
            while Data["自动给食物"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            if #v.Objects.Food:GetChildren() > 0 then
                                for _, a in pairs(v.Objects.Food:GetChildren()) do
                                    if not a:GetAttribute("Taken") then
                                        ReplicatedStorage.Events.Restaurant.GrabFood:InvokeServer(a)
                                        for _, gui in pairs(GetFriend().PlayerGui:GetDescendants()) do
                                            if gui:IsA("ImageLabel") and gui.Parent and 
                                               gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                               gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                               ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                    Name = "Serve",
                                                    GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                                    Tycoon = v,
                                                    FoodModel = a,
                                                    CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                                })
                                                task.wait(0.1)
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoDoOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动拿订单"] = state
        spawn(function()
            while Data["自动拿订单"] do
                pcall(function()
                    for _,v in next,workspace.Temp:GetChildren() do
                        if v.Name == "Part" and v:FindFirstChildOfClass("ProximityPrompt") then
                            fireproximityprompt(v:FindFirstChildOfClass("ProximityPrompt"))
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoTakeOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动接订单"] = state
        spawn(function()
            while Data["自动接订单"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            for _, gui in pairs(GetFriend().PlayerGui:GetDescendants()) do
                                if
                                    gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                        gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0)
                                 then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer(
                                        {
                                            Name = "TakeOrder",
                                            GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                            Tycoon = v,
                                            CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                        }
                                    )
                                    task.wait(0.1)
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoSendTable,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动选桌子"] = state
        spawn(function()
            while Data["自动选桌子"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and not a:GetAttribute("InUse") then
                                    for _, gui in pairs(GetFriend().PlayerGui:GetDescendants()) do
                                        if gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                            ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                ["FurnitureModel"] = a,
                                                ["Tycoon"] = v,
                                                ["Name"] = "SendToTable",
                                                ["GroupId"] = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name)
                                            })
                                            task.wait(0.1)
                                        end
                                    end
                                end
                            end
                        end
                        task.wait(0.1)
                    end
                end)
                task.wait()
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoTips,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["自动拿零钱"] = state
        spawn(function()
            while Data["自动拿零钱"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            ReplicatedStorage.Events.Restaurant.TipsCollected:FireServer(v)
                        end
                    end
                end)
                task.wait()
            end
        end)
    end
})
end
local function ctdheng()
local Data = {
    ["auto collect bill"] = false,
    ["auto collect dishes"] = false,
    ["auto cook"] = false,
    ["auto give food"] = false,
    ["auto do order"] = false,
    ["auto take order"] = false,
    ["auto send table"] = false,
    ["auto tips"] = false,
    ["auto claim reward"] = false,
}

local Players = cloneref(game:GetService("Players"))
local LocalPlayer = cloneref(Players.LocalPlayer)
local ReplicatedStorage = cloneref(game:GetService("ReplicatedStorage"))
local cn = string.find(LocalPlayer.LocaleId, "zh") ~= nil
local T = {
    Title = cn and "restaurant tycoon 3" or "restaurant tycoon 3",
    MainSection = cn and "main" or "main",
    MainSection = cn and "my tycoon" or "my tycoon",
    FriendSection = cn and "friend tycoon" or "friend tycoon",
    AutoCollectBill = cn and "auto collect bill" or "auto collect bill",
    AutoCollectDishes = cn and "auto collect dishes" or "auto collect dishes",
    AutoCook = cn and "auto cook" or "auto cook",
    AutoGiveFood = cn and "auto give food" or "auto give food",
    AutoDoOrder = cn and "auto do order" or "auto do order",
    AutoTakeOrder = cn and "auto take order" or "auto take order",
    AutoSendTable = cn and "auto send table" or "auto send table",
    AutoTips = cn and "auto tips" or "auto tips",
    Author = cn and "author | nova" or "author | nova"
}

pcall(function()
    hookfunction(require(ReplicatedStorage:FindFirstChild("Source"):FindFirstChild("Utility"):FindFirstChild("NPC"):FindFirstChild("PathUtility")).GetMovementTime, function(...)
        return 0.1
    end)
end)

function GetFriend()
    for _, v in next, Players:GetPlayers() do
        if LocalPlayer:IsFriendsWith(v.UserId) then
            return v
        end
    end
    return nil
end

Main = MainSection:Tab({Title = T.MainSection, Icon = "Sword"})
Friend = MainSection:Tab({Title = T.FriendSection, Icon = "Sword"})

Main:Toggle({
    Title = T.AutoCollectBill,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto collect bill"] = state
        spawn(function()
            while Data["auto collect bill"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a:FindFirstChild("Bill") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectBill",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoCollectDishes,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto collect dishes"] = state
        spawn(function()
            while Data["auto collect dishes"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and a:FindFirstChild("Trash") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectDishes",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoCook,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto cook"] = state
        spawn(function()
            while Data["auto cook"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetDescendants()) do
                                if a.Name:find("Oven") then
                                    ReplicatedStorage.Events.Cook.CookInputRequested:FireServer(
                                        "Interact",
                                        a.Parent,
                                        "Oven"
                                    )
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoGiveFood,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto give food"] = state
        spawn(function()
            while Data["auto give food"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            if #v.Objects.Food:GetChildren() > 0 then
                                for _, a in pairs(v.Objects.Food:GetChildren()) do
                                    if not a:GetAttribute("Taken") then
                                        ReplicatedStorage.Events.Restaurant.GrabFood:InvokeServer(a)
                                        for _, gui in pairs(game.Players.LocalPlayer.PlayerGui:GetDescendants()) do
                                            if gui:IsA("ImageLabel") and gui.Parent and 
                                               gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                               gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                               ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                    Name = "Serve",
                                                    GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                                    Tycoon = v,
                                                    FoodModel = a,
                                                    CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                                })
                                                task.wait(0.1)
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoDoOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto do order"] = state
        spawn(function()
            while Data["auto do order"] do
                pcall(function()
                    for _,v in next,workspace.Temp:GetChildren() do
                        if v.Name == "part" and v:FindFirstChildOfClass("ProximityPrompt") then
                            fireproximityprompt(v:FindFirstChildOfClass("ProximityPrompt"))
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoTakeOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto take order"] = state
        spawn(function()
            while Data["auto take order"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            for _, gui in pairs(game.Players.LocalPlayer.PlayerGui:GetDescendants()) do
                                if
                                    gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                        gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0)
                                 then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer(
                                        {
                                            Name = "TakeOrder",
                                            GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                            Tycoon = v,
                                            CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                        }
                                    )
                                    task.wait(0.1)
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoSendTable,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto send table"] = state
        spawn(function()
            while Data["auto send table"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == game.Players.LocalPlayer then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and not a:GetAttribute("Taken") then
                                    for _, gui in pairs(game.Players.LocalPlayer.PlayerGui:GetDescendants()) do
                                        if gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                            ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                ["FurnitureModel"] = a,
                                                ["Tycoon"] = v,
                                                ["Name"] = "SendToTable",
                                                ["GroupId"] = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name)
                                            })
                                            task.wait(0.1)
                                        end
                                    end
                                end
                            end
                        end
                        task.wait(0.1)
                    end
                end)
                task.wait()
            end
        end)
    end
})

Main:Toggle({
    Title = T.AutoTips,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto tips"] = state
        spawn(function()
            while Data["auto tips"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == game.Players.LocalPlayer then
                            ReplicatedStorage.Events.Restaurant.TipsCollected:FireServer(v)
                        end
                    end
                end)
                task.wait()
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoCollectBill,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto collect bill"] = state
        spawn(function()
            while Data["auto collect bill"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a:FindFirstChild("Bill") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectBill",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoCollectDishes,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto collect dishes"] = state
        spawn(function()
            while Data["auto collect dishes"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and a:FindFirstChild("Trash") then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                        ["Tycoon"] = v,
                                        ["Name"] = "CollectDishes",
                                        ["FurnitureModel"] = a
                                    })
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoCook,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto cook"] = state
        spawn(function()
            while Data["auto cook"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetDescendants()) do
                                if a.Name:find("Oven") then
                                    ReplicatedStorage.Events.Cook.CookInputRequested:FireServer(
                                        "Interact",
                                        a.Parent,
                                        "Oven"
                                    )
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoGiveFood,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto give food"] = state
        spawn(function()
            while Data["auto give food"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            if #v.Objects.Food:GetChildren() > 0 then
                                for _, a in pairs(v.Objects.Food:GetChildren()) do
                                    if not a:GetAttribute("Taken") then
                                        ReplicatedStorage.Events.Restaurant.GrabFood:InvokeServer(a)
                                        for _, gui in pairs(GetFriend().PlayerGui:GetDescendants()) do
                                            if gui:IsA("ImageLabel") and gui.Parent and 
                                               gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                               gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                               ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                    Name = "Serve",
                                                    GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                                    Tycoon = v,
                                                    FoodModel = a,
                                                    CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                                })
                                                task.wait(0.1)
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoDoOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto do order"] = state
        spawn(function()
            while Data["auto do order"] do
                pcall(function()
                    for _,v in next,workspace.Temp:GetChildren() do
                        if v.Name == "part" and v:FindFirstChildOfClass("ProximityPrompt") then
                            fireproximityprompt(v:FindFirstChildOfClass("ProximityPrompt"))
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoTakeOrder,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto take order"] = state
        spawn(function()
            while Data["auto take order"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            for _, gui in pairs(GetFriend().PlayerGui:GetDescendants()) do
                                if
                                    gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and
                                        gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0)
                                 then
                                    ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer(
                                        {
                                            Name = "TakeOrder",
                                            GroupId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name),
                                            Tycoon = v,
                                            CustomerId = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Name)
                                        }
                                    )
                                    task.wait(0.1)
                                end
                            end
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoSendTable,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto send table"] = state
        spawn(function()
            while Data["auto send table"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v.Player.Value == GetFriend() then
                            for _, a in pairs(v.Items.Surface:GetChildren()) do
                                if a.Name:find("T") and not a:GetAttribute("Taken") then
                                    for _, gui in pairs(GetFriend().PlayerGui:GetDescendants()) do
                                        if gui:IsA("ImageLabel") and gui.Parent and gui.Parent.Parent.Parent.Name == "CustomerSpeechUI" and gui.Parent.Parent.Size == UDim2.new(1, 0, 1, 0) then
                                            ReplicatedStorage.Events.Restaurant.TaskCompleted:FireServer({
                                                ["FurnitureModel"] = a,
                                                ["Tycoon"] = v,
                                                ["Name"] = "SendToTable",
                                                ["GroupId"] = tostring(gui.Parent.Parent.Parent.Adornee.Parent.Parent.Name)
                                            })
                                            task.wait(0.1)
                                        end
                                    end
                                end
                            end
                        end
                        task.wait(0.1)
                    end
                end)
                task.wait()
            end
        end)
    end
})

Friend:Toggle({
    Title = T.AutoTips,
    Image = "swords",
    Value = false,
    Callback = function(state)
        Data["auto tips"] = state
        spawn(function()
            while Data["auto tips"] do
                pcall(function()
                    for _, v in pairs(workspace.Tycoons:GetChildren()) do
                        if v:FindFirstChild("Player") and v.Player.Value == GetFriend() then
                            ReplicatedStorage.Events.Restaurant.TipsCollected:FireServer(v)
                        end
                    end
                end)
                task.wait()
            end
        end)
    end
})

end
local function bgceng()
local Tab = Window:Tab({  
    Title = "hitbox expansion",  
    Icon = "box",  
    Locked = false,
})
local hitboxEnabled = false
local noCollisionEnabled = false
local hitbox_original_properties = {}
local hitboxSize = 21
local hitboxTransparency = 6
local teamCheck = "FFA"

local defaultBodyParts = {
    "UpperTorso",
    "Head",
    "HumanoidRootPart"
}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
local WarningText = Instance.new("TextLabel", ScreenGui)
WarningText.Size = UDim2.new(0, 200, 0, 50)
WarningText.TextSize = 16
WarningText.Position = UDim2.new(0.5, -150, 0, 0)
WarningText.Text = "warning: collision issues may occur"
WarningText.TextColor3 = Color3.new(1, 0, 0)
WarningText.BackgroundTransparency = 1
WarningText.Visible = false

local function savedPart(player, part)
    if not hitbox_original_properties[player] then
        hitbox_original_properties[player] = {}
    end
    if not hitbox_original_properties[player][part.Name] then
        hitbox_original_properties[player][part.Name] = {
            CanCollide = part.CanCollide,
            Transparency = part.Transparency,
            Size = part.Size
        }
    end
end

local function restoredPart(player)
    if hitbox_original_properties[player] then
        for partName, properties in pairs(hitbox_original_properties[player]) do
            local part = player.Character and player.Character:FindFirstChild(partName)
            if part and part:IsA("BasePart") then
                part.CanCollide = properties.CanCollide
                part.Transparency = properties.Transparency
                part.Size = properties.Size
            end
        end
    end
end

local function findClosestPart(player, partName)
    if not player.Character then return nil end
    for _, part in ipairs(player.Character:GetChildren()) do
        if part:IsA("BasePart") and part.Name:lower():match(partName:lower()) then
            return part
        end
    end
    return nil
end

local function extendHitbox(player)
    for _, partName in ipairs(defaultBodyParts) do
        local part = player.Character and (player.Character:FindFirstChild(partName) or findClosestPart(player, partName))
        if part and part:IsA("BasePart") then
            savedPart(player, part)
            part.CanCollide = not noCollisionEnabled
            part.Transparency = hitboxTransparency / 10
            part.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)
        end
    end
end

local function isEnemy(player)
    if teamCheck == "FFA" or teamCheck == "Everyone" then
        return true
    end
    return player.Team ~= LocalPlayer.Team
end

local function shouldExtendHitbox(player)
    return isEnemy(player)
end

local function updateHitboxes()
    for _, v in ipairs(Players:GetPlayers()) do
        if v ~= LocalPlayer and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
            if shouldExtendHitbox(v) then
                extendHitbox(v)
            else
                restoredPart(v)
            end
        end
    end
end

local function onCharacterAdded(character)
    task.wait(0.1)
    if hitboxEnabled then
        updateHitboxes()
    end
end

local function onPlayerAdded(player)
    player.CharacterAdded:Connect(onCharacterAdded)
    player.CharacterRemoving:Connect(function()
        restoredPart(player)
        hitbox_original_properties[player] = nil
    end)
end

local function checkForDeadPlayers()
    for player, _ in pairs(hitbox_original_properties) do
        if not player.Parent or not player.Character or not player.Character:IsDescendantOf(game) then
            restoredPart(player)
            hitbox_original_properties[player] = nil
        end
    end
end

Players.PlayerAdded:Connect(onPlayerAdded)
for _, player in ipairs(Players:GetPlayers()) do
    onPlayerAdded(player)
end

Tab:Button({
    Title = "start hitbox function",
    Callback = function()
        coroutine.wrap(function()
            while true do
                if hitboxEnabled then
                    updateHitboxes()
                    checkForDeadPlayers()
                end
                task.wait(0.1)
            end
        end)()
    end
})

Tab:Toggle({
    Title = "enable hitbox",
    Value = false,
    Callback = function(state)
        hitboxEnabled = state
        if not state then
            for _, player in ipairs(Players:GetPlayers()) do
                restoredPart(player)
            end
            hitbox_original_properties = {}
        else
            updateHitboxes()
        end
    end
})

Tab:Slider({
    Title = "hitbox size",
    Value = {
        Min = 1,
        Max = 25,
        Default = 21
    },
    Callback = function(value)
        hitboxSize = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

Tab:Slider({
    Title = "hitbox transparency",
    Value = {
        Min = 1,
        Max = 10,
        Default = 6
    },
    Callback = function(value)
        hitboxTransparency = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

Tab:Dropdown({
    Title = "team check",
    Multi = false,
    AllowNone = false,
    Value = "FFA",
    Values = {"FFA", "team mode", "everyone"},
    Callback = function(value)
        teamCheck = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

Tab:Toggle({
    Title = "no collision mode",
    Value = false,
    Callback = function(state)
        noCollisionEnabled = state
        WarningText.Visible = state
        coroutine.wrap(function()
            while noCollisionEnabled do
                if hitboxEnabled then
                    updateHitboxes()
                end
                task.wait(0.01)
            end
            if hitboxEnabled then
                updateHitboxes()
            end
        end)()
    end
})

Tab:Toggle({
    Title = "semi auto farm",
    Value = false,
    Callback = function(bool)
        getgenv().AutoFarm = bool
        local runServiceConnection
        local mouseDown = false
        local player = game.Players.LocalPlayer
        local camera = game.Workspace.CurrentCamera
        game:GetService("ReplicatedStorage").wkspc.CurrentCurse.Value = bool and "Infinite Ammo" or ""

        local function getClosestEnemyPlayer()
            local closestDistance = math.huge
            local closestPlayer = nil
            for _, enemyPlayer in pairs(game.Players:GetPlayers()) do
                if enemyPlayer ~= player and enemyPlayer.TeamColor ~= player.TeamColor and enemyPlayer.Character then
                    local hrp = enemyPlayer.Character:FindFirstChild("HumanoidRootPart")
                    local humanoid = enemyPlayer.Character:FindFirstChild("Humanoid")
                    if hrp and humanoid and humanoid.Health > 0 then
                        local dist = (player.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
                        if dist < closestDistance and hrp.Position.Y >= 0 then
                            closestDistance = dist
                            closestPlayer = enemyPlayer
                        end
                    end
                end
            end
            return closestPlayer
        end

        local function startAutoFarm()
            game:GetService("ReplicatedStorage").wkspc.TimeScale.Value = 12
            runServiceConnection = game:GetService("RunService").Stepped:Connect(function()
                if getgenv().AutoFarm then
                    local target = getClosestEnemyPlayer()
                    if target then
                        local pos = target.Character.HumanoidRootPart.Position + Vector3.new(0, 0, -4)
                        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            player.Character.HumanoidRootPart.CFrame = CFrame.new(pos)
                            camera.CFrame = CFrame.new(camera.CFrame.Position, target.Character.Head.Position)
                            if not mouseDown then
                                mouse1press()
                                mouseDown = true
                            end
                        end
                    else
                        if mouseDown then
                            mouse1release()
                            mouseDown = false
                        end
                    end
                else
                    if runServiceConnection then
                        runServiceConnection:Disconnect()
                        runServiceConnection = nil
                    end
                    if mouseDown then
                        mouse1release()
                        mouseDown = false
                    end
                end
            end)
        end

        local function onCharacterAdded(character)
            wait(0.5)
            startAutoFarm()
        end

        player.CharacterAdded:Connect(onCharacterAdded)
        if bool then
            wait(0.5)
            startAutoFarm()
        else
            game:GetService("ReplicatedStorage").wkspc.CurrentCurse.Value = ""
            getgenv().AutoFarm = false
            game:GetService("ReplicatedStorage").wkspc.TimeScale.Value = 1
            if runServiceConnection then
                runServiceConnection:Disconnect()
                runServiceConnection = nil
            end
            if mouseDown then
                mouse1release()
                mouseDown = false
            end
        end
    end
})
local Tab = Window:Tab({  
    Title = "gun settings",  
    Icon = "crosshair",  
    Locked = false,
})

Tab:Toggle({
    Title = "infinite ammo v1",
    Value = false,
    Callback = function(state)
        game:GetService("ReplicatedStorage").wkspc.CurrentCurse.Value = state and "Infinite Ammo" or ""
    end
})

local originalValues = {
    FireRate = {},
    ReloadTime = {},
    EReloadTime = {},
    Auto = {},
    Spread = {},
    Recoil = {}
}

Tab:Toggle({
    Title = "fast reload",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetChildren()) do
            if v:FindFirstChild("ReloadTime") then
                if state then
                    if not originalValues.ReloadTime[v] then
                        originalValues.ReloadTime[v] = v.ReloadTime.Value
                    end
                    v.ReloadTime.Value = 0.01
                else
                    v.ReloadTime.Value = originalValues.ReloadTime[v] or 0.8
                end
            end
            if v:FindFirstChild("EReloadTime") then
                if state then
                    if not originalValues.EReloadTime[v] then
                        originalValues.EReloadTime[v] = v.EReloadTime.Value
                    end
                    v.EReloadTime.Value = 0.01
                else
                    v.EReloadTime.Value = originalValues.EReloadTime[v] or 0.8
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "rapid fire",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "FireRate" or v.Name == "BFireRate" then
                if state then
                    if not originalValues.FireRate[v] then
                        originalValues.FireRate[v] = v.Value
                    end
                    v.Value = 0.02
                else
                    v.Value = originalValues.FireRate[v] or 0.8
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "auto fire",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "Auto" or v.Name == "AutoFire" or v.Name == "Automatic" or v.Name == "AutoShoot" or v.Name == "AutoGun" then
                if state then
                    if not originalValues.Auto[v] then
                        originalValues.Auto[v] = v.Value
                    end
                    v.Value = true
                else
                    v.Value = originalValues.Auto[v] or false
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "no spread",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "MaxSpread" or v.Name == "Spread" or v.Name == "SpreadControl" then
                if state then
                    if not originalValues.Spread[v] then
                        originalValues.Spread[v] = v.Value
                    end
                    v.Value = 0
                else
                    v.Value = originalValues.Spread[v] or 1
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "no recoil",
    Value = false,
    Callback = function(state)
        for _, v in pairs(game.ReplicatedStorage.Weapons:GetDescendants()) do
            if v.Name == "RecoilControl" or v.Name == "Recoil" then
                if state then
                    if not originalValues.Recoil[v] then
                        originalValues.Recoil[v] = v.Value
                    end
                    v.Value = 0
                else
                    v.Value = originalValues.Recoil[v] or 1
                end
            end
        end
    end
})
local Tab = Window:Tab({  
    Title = "player",  
    Icon = "person-standing",  
    Locked = false,
})
Tab:Button({
    Title = "speed (lazy to write)",
    Desc = nil,
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/fly/main/README.md"))()
    end
})
local isJumpPowerEnabled = false
local jumpMethods = {"Velocity", "Vector", "CFrame"}
local selectedJumpMethod = jumpMethods[1]

Tab:Toggle({
    Title = "custom jump height",
    Value = false,
    Callback = function(state)
        isJumpPowerEnabled = state
    end
})

Tab:Dropdown({
    Title = "jump method",
    Multi = false,
    AllowNone = false,
    Value = selectedJumpMethod,
    Values = jumpMethods,
    Callback = function(selected)
        selectedJumpMethod = selected
    end
})

Tab:Slider({
    Title = "jump height",
    Value = {
        Min = 30,
        Max = 500,
        Default = 30,
    },
    Callback = function(value)
        local player = game:GetService("Players").LocalPlayer
        local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.UseJumpPower = true
            humanoid.Jumping:Connect(function(isActive)
                if isJumpPowerEnabled and isActive then
                    local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
                    if rootPart then
                        if selectedJumpMethod == "Velocity" then
                            rootPart.Velocity = Vector3.new(rootPart.Velocity.X, value, rootPart.Velocity.Z)
                        elseif selectedJumpMethod == "Vector" then
                            rootPart.Velocity = Vector3.new(0, value, 0)
                        elseif selectedJumpMethod == "CFrame" then
                            player.Character:SetPrimaryPartCFrame(player.Character:GetPrimaryPartCFrame() + Vector3.new(0, value, 0))
                        end
                    end
                end
            end)
        end
    end
})
local Tab = Window:Tab({  
    Title = "visual",  
    Icon = "hand-platter",  
    Locked = false,
})

local armMaterial = "Plastic"
local armColor = Color3.fromRGB(50, 50, 50)
local armCharmsEnabled = false

Tab:Dropdown({
    Title = "arm material",
    Multi = false,
    AllowNone = false,
    Value = armMaterial,
    Values = {"Plastic", "ForceField", "Wood", "Grass"},
    Callback = function(value)
        armMaterial = value
    end
})

Tab:Colorpicker({
    Title = "arm color",
    Default = Color3.fromRGB(50, 50, 50),
    Callback = function(color)
        armColor = color
    end
})

Tab:Toggle({
    Title = "enable arm visual",
    Value = false,
    Callback = function(state)
        armCharmsEnabled = state
        if armCharmsEnabled then
            spawn(function()
                while armCharmsEnabled do
                    task.wait(0.01)
                    local cameraArms = workspace.Camera:FindFirstChild("Arms")
                    if cameraArms then
                        for _, part in pairs(cameraArms:GetDescendants()) do
                            if part.Name == 'Right Arm' or part.Name == 'Left Arm' then
                                if part:IsA("BasePart") then
                                    part.Material = Enum.Material[armMaterial]
                                    part.Color = armColor
                                end
                            elseif part:IsA("SpecialMesh") then
                                if part.TextureId == '' then
                                    part.TextureId = 'rbxassetid://0'
                                    part.VertexColor = Vector3.new(armColor.R, armColor.G, armColor.B)
                                end
                            elseif part.Name == 'L' or part.Name == 'R' then
                                part:Destroy()
                            end
                        end
                    end
                end
            end)
        end
    end
})

local gunMaterial = "Plastic"
local gunColor = Color3.fromRGB(50, 50, 50)
local gunCharmsEnabled = false

Tab:Dropdown({
    Title = "gun material",
    Multi = false,
    AllowNone = false,
    Value = gunMaterial,
    Values = {"Plastic", "ForceField", "Wood", "Grass"},
    Callback = function(value)
        gunMaterial = value
    end
})

Tab:Colorpicker({
    Title = "gun color",
    Default = Color3.fromRGB(50, 50, 50),
    Callback = function(color)
        gunColor = color
    end
})

Tab:Toggle({
    Title = "enable gun visual",
    Value = false,
    Callback = function(state)
        gunCharmsEnabled = state
        if gunCharmsEnabled then
            spawn(function()
                while gunCharmsEnabled do
                    task.wait(0.01)
                    local cameraArms = workspace.Camera:FindFirstChild("Arms")
                    if cameraArms then
                        for _, part in pairs(cameraArms:GetDescendants()) do
                            if part:IsA("MeshPart") then
                                part.Material = Enum.Material[gunMaterial]
                                part.Color = gunColor
                            end
                        end
                    end
                end
            end)
        end
    end
})
local Tab = Window:Tab({  
    Title = "Chat/entertainment",  
    Icon = "message-circle",  
    Locked = false,
})
Tab:Toggle({
    Title = "IsChad",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("IsChad") then
            player.IsChad:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "IsChad"
        end
    end
})

Tab:Toggle({
    Title = "VIP",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("VIP") then
            player.VIP:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "VIP"
        end
    end
})

Tab:Toggle({
    Title = "OldVIP",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("OldVIP") then
            player.OldVIP:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "OldVIP"
        end
    end
})

Tab:Toggle({
    Title = "Romin",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("Romin") then
            player.Romin:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "Romin"
        end
    end
})

Tab:Toggle({
    Title = "admin",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        if player:FindFirstChild("IsAdmin") then
            player.IsAdmin:Destroy()
        end
        if state then
            local val = Instance.new("IntValue", player)
            val.Name = "IsAdmin"
        end
    end
})
local Tab = Window:Tab({
    Title = "set",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "Select ui color",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function engnight99()
local lp = game.Players.LocalPlayer
local Lighting = game:GetService("Lighting")
local Light1 = Lighting.Ambient
local Light2 = Lighting.OutdoorAmbient
local Character = lp.Character or lp.CharacterAdded:Wait()
local hrp = Character:FindFirstChild("HumanoidRootPart")
local camera = workspace.CurrentCamera
local rs = game:GetService('ReplicatedStorage')
local DamageRemote = rs:FindFirstChild('RemoteEvents'):FindFirstChild('ToolDamageObject')
local inventory = lp:FindFirstChild('Inventory')
local Food = "Carrot"
local PlayerList = {}

for _, v in pairs(game.Players:GetChildren()) do
	if v.Name ~= lp.Name then
		table.insert(PlayerList, v.Name)
	end
end

local TypeList = {
	y = 0,
	x = 0
}
local hungerThreshold = 75
local Chinese = {
	['Coal'] = 'coal',['Log'] = 'log',['Fuel Canister'] = 'fuel canister',['Oil Barrel'] = 'fuel barrel',
	['Chair'] = 'chair',['Sapling'] = 'sapling',['Broken Microwave'] = 'broken microwave',['Broken Fan'] = 'old fan',
	['Old Radio'] = 'old radio',['Bolt'] = 'bolt',['Sheet Metal'] = 'scrap metal',['Tyre'] = 'tire',['Washing Machine'] = 'washing machine',
	['Metal Chair'] = 'metal chair',['UFO Junk'] = 'alien debris',['UFO Scrap'] = 'alien debris 1',
	['Old Car Engine'] = 'engine',['Carrot'] = 'carrot',['Cake'] = 'cake',['Berry'] = 'berry',
	['Morsel'] = 'raw meat leg',['Steak'] = 'raw steak',['Cooked Morsel'] = 'cooked meat leg',['Cooked Steak'] = 'cooked steak',
	['Rifle'] = 'rifle',['Revolver'] = 'pistol',['Rifle Ammo'] = 'rifle ammo',['Revolver Ammo'] = 'pistol ammo',
	['Bandage'] = 'bandage',['MedKit'] = 'medkit',['Old Flashlight'] = 'old flashlight',['Strong Flashlight'] = 'strong flashlight',
	['Old Axe'] = 'old axe',['Good Axe'] = 'good axe',['Strong Axe'] = 'strong axe',['Old Sack'] = 'old sack',
	['Good Sack'] = 'good sack',['Giant Sack'] = 'giant sack',['Spear'] = 'spear',
	['Laser Fence Blueprint'] = 'defense blueprint',['Leather Body'] = 'leather armor',['Iron Body'] = 'iron armor',
	['Bunny'] = 'bunny',['Wolf'] = 'wolf',['Alpha Wolf'] = 'alpha wolf',['Bear'] = 'bear'
}

local ItemList = {
	Item1 = "",
	Item2 = "",
	Item3 = "",
	Item4 = "",
	ItemTpPosition = "player",
	Pn = lp.Name
}

local tools = {
	KillTool = "Old Axe",
	CutTool = "Old Axe"
}

local St = {
	Kill = 50,
	Cut = 50
}

local dyzh = {
	ItemESPColor = Color3.fromRGB(0, 128, 255),
	CharacterESPColor = Color3.fromRGB(255, 0, 0),
	nt = 0.5,
	wt = 0
}

local espCache = {
	Items = {},
	Characters = {}
}

local function GetItem(Name, Type)
	local ItemState = false
	if Name == "" then
		WindUI:Notify({
			Title = "bring item",
			Content = "please select item",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
		return            
	end

	for _, Item in pairs(game.Workspace.Items:GetChildren()) do
		if Item.Name == Name then
			ItemState = true
			if Type == "player" then
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
				Item:PivotTo(hrp.CFrame * CFrame.new(TypeList.x, TypeList.y, 0))
				task.wait(0.1)
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)           
			elseif Type == "bonfire" then
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
				Item:PivotTo(workspace.Map.Campground.MainFire.Center.CFrame * CFrame.new(TypeList.x, 20 + TypeList.y, 0))
				task.wait(0.1)
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                
			elseif Type == "workbench" then
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
				Item:PivotTo(workspace.Map.Campground.Scrapper.Main.CFrame * CFrame.new(TypeList.x, 20 + TypeList.y, 0))
				task.wait(0.1)
				game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                           
			elseif Type == "custom position" then
				if workspace:FindFirstChild("waypoint") then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.waypoint.CFrame * CFrame.new(TypeList.x, 20 + TypeList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                               
				else
					WindUI:Notify({
						Title = "bring item",
						Content = "waypoint block not found",
						Icon = "notepad-text",
						IconThemed = true,
						Duration = 5  
					})
					return
				end                            
			elseif Type == "designated player" then
				local targetPlayer = game.Players:FindFirstChild(ItemList.Pn)
				if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
					local PlCFrame = targetPlayer.Character.HumanoidRootPart.CFrame
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(PlCFrame * CFrame.new(TypeList.x, TypeList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)                               
				else
					WindUI:Notify({
						Title = "bring item",
						Content = "designated player not found or player has no character",
						Icon = "notepad-text",
						IconThemed = true,
						Duration = 5  
					})
					return
				end            
			end
		end
	end

	if not ItemState then
		WindUI:Notify({
			Title = "bring item",
			Content = "item not found",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})           
	end
end

local function killCharacter(st)
    for _, v in pairs(inventory:GetChildren()) do
        if not string.find(v.Name, "Sack", 1, true) or not string.find(v.Name, "Flashlight", 1, true) or not string.find(v.Name, "MedKit", 1, true) or not string.find(v.Name, "Bandage", 1, true) or not string.find(v.Name, "Riot Shield", 1, true) then
	        for _, Child in pairs(workspace.Characters:GetChildren()) do
		        local root = Child.PrimaryPart
		        if root and hrp and (hrp.Position - root.Position).Magnitude <= st then
			        pcall(function()
				        DamageRemote:InvokeServer(Child, v, true, hrp.CFrame)
			        end)
		        end
	        end
	    end
	end
end

local function CreateEsp(object, config)
	if not object or not object.Parent then return end
	local eh = object:FindFirstChild('Esp')
	local eb = object:FindFirstChild('b')
	if eh then eh:Destroy() end
	if eb then eb:Destroy() end
	local h = Instance.new('Highlight')
	h.Parent = object
	h.FillColor = config.fillColor
	h.Name = 'Esp'
	h.FillTransparency = config.fillTransparency
	h.OutlineColor = Color3.new(1, 1, 1)
	h.OutlineTransparency = config.outlineTransparency
	local b = Instance.new('BillboardGui')
	b.Parent = object
	b.Size = UDim2.new(0, 100, 0, 20)
	b.Name = 'b'
	b.AlwaysOnTop = true
	local t = Instance.new('TextLabel')
	t.Parent = b
	t.Size = UDim2.new(1, 0, 1, 0)
	t.TextSize = 14
	t.Name = 'Label'
	t.TextStrokeColor3 = Color3.new(0, 0, 0)
	t.TextStrokeTransparency = 0
	t.BackgroundTransparency = 1
	t.Font = Enum.Font.SourceSansBold
	t.TextColor3 = config.textColor
	return h, b, t
end

local function GetDisplayName(n)
	return Chinese[n] or n
end

local function CalcDist(o)
	local p = o.PrimaryPart or o:FindFirstChildWhichIsA('BasePart')
	if not p or not hrp then return 0 end
	return (hrp.Position - p.Position).Magnitude
end

local function ModelHeight(m)
	local min, max = math.huge, -math.huge
	for _, v in ipairs(m:GetDescendants()) do
		if v:IsA("BasePart") then
			local y = v.CFrame.Y
			local s = v.Size.Y / 2
			min = math.min(min, y - s)
			max = math.max(max, y + s)
		end
	end
	return max > min and max - min or 5
end

local function EspItem(name)
	for _, v in ipairs(workspace.Items:GetChildren()) do
		if v.Name == name then
			local old = espCache.Items[v]
			if old then
				if old.conn then old.conn:Disconnect() end
				espCache.Items[v] = nil
			end
			local cfg = {fillColor = Color3.fromRGB(0, 128, 255), textColor = Color3.fromRGB(0, 128, 255), fillTransparency = dyzh.nt, outlineTransparency = dyzh.wt}
			local h, b, l = CreateEsp(v, cfg)
			b.StudsOffset = Vector3.new(0, ModelHeight(v) + 1.5, 0)
			l.Text = GetDisplayName(name) .. "[" .. math.floor(CalcDist(v) + 0.5) .. "m]"
			espCache.Items[v] = {highlight = h, billboard = b, textLabel = l, conn = nil}
		end
	end
end

local function EspCharacter(name)
	for _, v in ipairs(workspace.Characters:GetChildren()) do
		if v.Name == name then
			local old = espCache.Characters[v]
			if old then
				if old.conn then old.conn:Disconnect() end
				espCache.Characters[v] = nil
			end
			local cfg = {fillColor = Color3.fromRGB(0, 255, 0), textColor = Color3.fromRGB(0, 255, 0), fillTransparency = dyzh.nt, outlineTransparency = dyzh.wt}
			local h, b, l = CreateEsp(v, cfg)
			b.StudsOffset = Vector3.new(0, ModelHeight(v) + 1.5, 0)
			l.Text = GetDisplayName(name) .. "[" .. math.floor(CalcDist(v) + 0.5) .. "m]"
			espCache.Characters[v] = {highlight = h, billboard = b, textLabel = l, conn = nil}
		end
	end
end

local function RemoveEspItem(name)
	for _, v in ipairs(workspace.Items:GetChildren()) do
		if v.Name == name and espCache.Items[v] then
			local e = espCache.Items[v]
			if e.conn then e.conn:Disconnect() end
			if e.highlight then e.highlight:Destroy() end
			if e.billboard then e.billboard:Destroy() end
			espCache.Items[v] = nil
		end
	end
end

local function RemoveEspCharacter(name)
	for _, v in ipairs(workspace.Characters:GetChildren()) do
		if v.Name == name and espCache.Characters[v] then
			local e = espCache.Characters[v]
			if e.conn then e.conn:Disconnect() end
			if e.highlight then e.highlight:Destroy() end
			if e.billboard then e.billboard:Destroy() end
			espCache.Characters[v] = nil
		end
	end
end

local function ClearAllEsp()
	for _, e in pairs(espCache.Items) do
		if e.conn then e.conn:Disconnect() end
		if e.highlight then e.highlight:Destroy() end
		if e.billboard then e.billboard:Destroy() end
	end
	for _, e in pairs(espCache.Characters) do
		if e.conn then e.conn:Disconnect() end
		if e.highlight then e.highlight:Destroy() end
		if e.billboard then e.billboard:Destroy() end
	end
	espCache.Items = {}
	espCache.Characters = {}
end

local function OpenChestTme(Time)
	for _, Chest in pairs(workspace.Items:GetChildren()) do
		if Chest.Name:find("Chest") and Chest:FindFirstChild("Main") then
			local Main = Chest.Main
			if Main:FindFirstChild("ProximityAttachment") then
				local Attachment = Main.ProximityAttachment
				if Attachment:FindFirstChild("ProximityInteraction") then
					Attachment.ProximityInteraction.HoldDuration = Time
				end
			end
		end
	end
end

local function OpenChest()
	for _, Chest in pairs(workspace.Items:GetChildren()) do
		if Chest.Name:find("Chest") then
			local Main = Chest:FindFirstChild("Main")
			if Main then
				local Attachment = Main:FindFirstChild("ProximityAttachment")
				if Attachment then
					local Interaction = Attachment:FindFirstChild("ProximityInteraction")
					if Interaction then
						fireproximityprompt(Interaction)
					end
				end
			end
		end
	end
end


local function AutoFire(Name)
	for _, Item in pairs(workspace.Items:GetChildren()) do
		if Item.Name == Name then
			game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
			Item:PivotTo(workspace.Map.Campground.MainFire.Center.CFrame * CFrame.new(0, 20, 0))
		end
	end
end

local function AutoScrapper(Name)
	for _, Item in pairs(workspace.Items:GetChildren()) do
		if Item.Name == Name then
			game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
			Item:PivotTo(workspace.Map.Campground.Scrapper.Main.CFrame * CFrame.new(0, 20, 0))
		end
	end
end

function feed(nome)
	for _, item in ipairs(workspace.Items:GetChildren()) do
		if item.Name == nome then
			rs.RemoteEvents.RequestConsumeItem:InvokeServer(item)
			break
		end
	end
end

function notifeed(nome)
	WindUI:Notify({
		Title = "auto food stop",
		Content = "food is gone",
		Icon = 'crown',
		Duration = 3
	})
end

function wiki(nome)
	local c = 0
	for _, i in ipairs(workspace.Items:GetChildren()) do
		if i.Name == nome then
			c = c + 1
		end
	end
	return c
end

function ghn()
	return math.floor(lp.PlayerGui.Interface.StatBars.HungerBar.Bar.Size.X.Scale * 100)
end



local function getDeviceType()
	local UserInputService = game:GetService("UserInputService")
	if UserInputService.TouchEnabled then
		if UserInputService.KeyboardEnabled then
			return "tablet"
		else
			return "phone"
		end
	else
		return "computer"
	end
end

local deviceType = getDeviceType()
local uiSize, uiPosition

if deviceType == "phone" then
	uiSize = UDim2.fromOffset(500, 400)
elseif deviceType == "tablet" then
	uiSize = UDim2.fromOffset(550, 450)
else
	uiSize = UDim2.fromOffset(600, 500)
end
uiPosition = UDim2.new(0.5, 0, 0.5, 0)

local playerName = lp.Name
local displayName = lp.DisplayName

local Tabs = {
	Pl = Window:Section({ Title = "player", Opened = false, Icon = "user"}),
	TP = Window:Section({ Title = "teleport item", Opened = false, Icon = "package-open"}),
	Kill = Window:Section({ Title = "kill aura", Opened = false, Icon = "pocket-knife"}),
	Cut = Window:Section({ Title = "tree", Opened = false, Icon = "tree-pine"}),
	ESP = Window:Section({ Title = "esp", Opened = false, Icon = "eye"}),
	Auto = Window:Section({ Title = "auto", Opened = false, Icon = "hand"}),
	Get = Window:Section({ Title = "teleport", Opened = false, Icon = "arrow-big-up-dash"})
}

local TabHandles = {
	Announcement = Tabs.Pl:Tab({ Title = "announcement", Icon = "folder"}),
	Player = Tabs.Pl:Tab({ Title = "player", Icon = "user"}),
	TPItem = Tabs.TP:Tab({ Title = "teleport item", Icon = "folder"}),
	TPItemSettings = Tabs.TP:Tab({ Title = "teleport item settings", Icon = "folder"}),
	Kill1 = Tabs.Kill:Tab({ Title = "kill aura", Icon = "folder"}),
	Cut1 = Tabs.Cut:Tab({ Title = "chop tree aura", Icon = "folder"}),
	plant = Tabs.Cut:Tab({ Title = "plant tree", Icon = "folder"}),
	ItemEsp = Tabs.ESP:Tab({ Title = "item esp", Icon = "folder"}),
	CharacterEsp = Tabs.ESP:Tab({ Title = "animal esp", Icon = "folder"}),
	ESPSettings = Tabs.ESP:Tab({ Title = "esp settings", Icon = "folder"}),
	Auto1 = Tabs.Auto:Tab({ Title = "bonfire", Icon = "folder"}),
	Auto2 = Tabs.Auto:Tab({ Title = "workbench", Icon = "folder"}),
	Auto3 = Tabs.Auto:Tab({ Title = "food", Icon = "folder" }),
	Auto4 = Tabs.Auto:Tab({ Title = "fish", Icon = "folder"}),
	Chest = Tabs.Auto:Tab({ Title = "chest", Icon = "folder"}),
	Coin = Tabs.Auto:Tab({ Title = "coin", Icon = "folder"}),
	LostKid = Tabs.Auto:Tab({ Title = "child", Icon = "folder"}),
	Tp2 = Tabs.Get:Tab({ Title = "home", Icon = "folder" })
}

TabHandles.Announcement:Paragraph({
	Title = "welcome esteemed user",
	Desc = "this script will keep updating thank you whitelisted users",
	Image = "info",
	ImageSize = 15
})

TabHandles.Announcement:Paragraph({
	Title = "player",
	Desc = "esteemed user: " .. lp.Name .. " welcome to use",
	Image = "user",
	ImageSize = 12
})

TabHandles.Announcement:Paragraph({
	Title = "device",
	Desc = "your device: " .. deviceType,
	Image = "gamepad",
	ImageSize = 12
})

TabHandles.Announcement:Paragraph({
	Title = "device",
	Desc = "your injector: " .. identifyexecutor(),
	Image = "syringe",
	ImageSize = 12
})

TabHandles.Player:Section({ 
	Title = "player settings",
	Desc = "player",
	Icon = 'user',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Player:Slider({
	Title = "player speed",
	Desc = "player's speed",
	Step = 1,
	Value = {
		Min = 16,
		Max = 200,
		Default = 16,
	},
	Callback = function(value)
		if Character and Character:FindFirstChild("Humanoid") then
			Character.Humanoid.WalkSpeed = value
		end
	end
})

TabHandles.Player:Slider({
	Title = "player jump height",
	Desc = "player's jump height",
	Step = 1,
	Value = {
		Min = 50,
		Max = 200,
		Default = 50,
	},
	Callback = function(value)
		if Character and Character:FindFirstChild("Humanoid") then
			Character.Humanoid.JumpHeight = value
		end
	end
})

TabHandles.Player:Toggle({
	Title = "highlight",
	Desc = "highlight environment",
	Value = false,
	Callback = function(state) 
		if state then
			Lighting.Ambient = Color3.fromRGB(255, 255, 255)
			Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
		else
			Lighting.Ambient = Light1
			Lighting.OutdoorAmbient = Light2  
		end
	end
})

TabHandles.Player:Slider({
	Title = "player camera fov",
	Desc = "player's camera",
	Step = 1,
	Value = {
		Min = 70,
		Max = 120,
		Default = 70,
	},
	Callback = function(value)
		if camera then
			camera.FieldOfView = value
		end
	end
})

TabHandles.Player:Button({
    Title = "invincible mode",
    Desc = "invincible",
    Callback = function(state)
        game:GetService("ReplicatedStorage").RemoteEvents.DamagePlayer:FireServer(-10000000000000)
    end
})

TabHandles.Player:Section({ 
	Title = "other",
	Desc = "other options",
	Icon = 'chart-no-axes-ganttr',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Player:Toggle({
    Title = "auto stun deer",
	Desc = "auto",
    Value = false,
    Callback = function(state)
        if state then
            torchLoop = game.GetService("RunService").RenderStepped:Connect(function()
                pcall(function()
                    local remote = rs:FindFirstChild("RemoteEvents")
                        and rs.RemoteEvents:FindFirstChild("DeerHitByTorch")
                    local deer = workspace:FindFirstChild("Characters")
                        and workspace.Characters:FindFirstChild("Deer")
                    if remote and deer then
                        remote:InvokeServer(deer)
                    end
                end)
                task.wait(0.1)
            end)
        else
            if torchLoop then
                torchLoop:Disconnect()
                torchLoop = nil
            end
        end
    end
})

TabHandles.TPItem:Section({ 
	Title = "bring item",
	Desc = "bring",
	Icon = 'anchor',
	ImageSize = 30,
	Opened = true,
})

TabHandles.TPItem:Dropdown({
	Title = "iron type item dropdown menu",
	Desc = "bring item",
	Values = {'washing machine', 'broken microwave', 'old fan', 'old radio', 'bolt', 'sheet metal', 'tire', 'metal chair', 'ufo junk', 'ufo scrap', 'ufo component', 'engine'},
	Value = "select",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['broken microwave'] = 'Broken Microwave', 
			['old fan'] = 'Broken Fan', 
			['old radio'] = 'Old Radio', 
			['bolt'] = 'Bolt', 
			['scrap metal'] = 'Sheet Metal', 
			['tire'] = 'Tyre', 
			['metal chair'] = 'Metal Chair', 
			['alien debris'] = 'UFO Junk', 
			['alien debris 1'] = 'UFO Scrap',
			['alien debris 2'] = 'UFO Component',
			['washing machine'] = 'Washing Machine',
			['engine'] = 'Old Car Engine' 
		}
		ItemList.Item1 = GetItemList[Item]
	end
})
TabHandles.TPItem:Button({
	Title = "bring",
	Desc = "bring item",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item1, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Dropdown({
	Title = "fuel type item dropdown menu",
	Desc = "bring item",
	Values = { 'coal', 'log', 'fuel canister', 'fuel barrel', 'chair', 'sapling' },
	Value = "select",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['coal'] = 'Coal', 

			['log'] = 'Log', 
			['fuel canister'] = 'Fuel Canister', 
			['fuel barrel'] = 'Oil Barrel', 
			['chair'] = 'Chair', 
			['sapling'] = 'Sapling'
		}
		ItemList.Item2 = GetItemList[Item]
	end
})

TabHandles.TPItem:Button({
	Title = "bring",
	Desc = "bring item",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item2, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Dropdown({
	Title = "food type item dropdown menu",
	Desc = "bring item",
	Values = {'carrot', 'cake', 'berry', 'raw meat leg', 'raw steak', 'cooked meat leg', 'cooked steak'},
	Value = "select",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['carrot'] = 'Carrot', 
			['cake'] = 'Cake', 
			['berry'] = 'Berry', 
			['raw meat leg'] = 'Morsel', 
			['raw steak'] = 'Steak', 
			['cooked meat leg'] = 'Cooked Morsel', 
			['cooked steak'] = 'Cooked Steak'
		}
		ItemList.Item3 = GetItemList[Item]
	end
})

TabHandles.TPItem:Button({
	Title = "bring",
	Desc = "bring item",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item3, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Paragraph({
	Title = "hint",
	Desc = "to bring carrots you need to bring berries first",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Dropdown({
	Title = "tool type item dropdown menu",
	Desc = "bring item",
	Values = { 'rifle', 'pistol', 'alien cannon', 'pistol ammo', 'rifle ammo', 'bandage', 'medkit', 'old flashlight', 'strong flashlight', 'old axe', 'good axe', 'strong axe', 'old sack', 'good sack', 'giant sack', 'spear', 'defense blueprint', 'leather armor', 'iron armor', 'forest fragment', 'riot shield' },
	Value = "select",
	Multi = false,
	AllowNone = false,
	Callback = function(Item)
		local GetItemList = { 
			['rifle'] = 'Rifle', 
			['pistol'] = 'Revolver',
			["alien cannon"] = 'Laser Cannon',
			['pistol ammo'] = 'Revolver Ammo', 
			['rifle ammo'] = 'Rifle Ammo', 
			['bandage'] = 'Bandage', 
			['medkit'] = 'MedKit', 
			['old flashlight'] = 'Old Flashlight', 
			['strong flashlight'] = 'Strong Flashlight', 
			['old axe'] = 'Old Axe', 
			['good axe'] = 'Good Axe', 
			['strong axe'] = 'Strong Axe', 
			['old sack'] = 'Old Sack', 
			['good sack'] = 'Good Sack', 
			['giant sack'] = 'Giant Sack', 
			['spear'] = 'Spear', 
			['defense blueprint'] = 'Defense Blueprint', 
			['leather armor'] = 'Leather Body', 
			['iron armor'] = 'Iron Body',
			['forest fragment'] = 'Gem of the Forest Fragment', 
			['riot shield'] = 'Riot Shield'			
		}
		ItemList.Item4 = GetItemList[Item]
	end
})

TabHandles.TPItem:Button({
	Title = "bring",
	Desc = "bring item",
	Locked = false,
	Callback = function()
		GetItem(ItemList.Item4, ItemList.ItemTpPosition)
	end
})

TabHandles.TPItem:Divider()

TabHandles.TPItem:Button({
	Title = "teleport all items on server",
	Desc = "teleport",
	Callback = function()
		for _, Item in pairs(game.Workspace.Items:GetChildren()) do
			if not Item.Name:find("Chest") then
				if ItemList.ItemTpPosition == 'player' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(hrp.CFrame * CFrame.new(ItemList.x, ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == 'bonfire' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.Map.Campground.MainFire.Center.CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == 'workbench' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.Map.Campground.Scrapper.Main.CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == 'custom position' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace.waypoint.CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				elseif ItemList.ItemTpPosition == 'designated player' then
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents"):FindFirstChild("RequestStartDraggingItem"):FireServer(Item)
					Item:PivotTo(workspace:FindFirstChild(ItemList.Pn):FindFirstChild('HumanoidRootPart').CFrame * CFrame.new(ItemList.x, 20 + ItemList.y, 0))
					task.wait(0.1)
					game:GetService("ReplicatedStorage"):FindFirstChild("RemoteEvents").StopDraggingItem:FireServer(Item)
				end
			end
		end
	end
})

TabHandles.TPItemSettings:Section({ 
	Title = "bring item settings",
	Desc = "settings",
	Icon = 'settings',
	ImageSize = 30,
	Opened = true,
})

TabHandles.TPItemSettings:Dropdown({
	Title = "dropdown menu",
	Desc = "item teleport position",
	Values = {"player", "bonfire", "workbench", "custom position", "designated player"},
	Value = "player",
	Multi = false,
	AllowNone = false,
	Callback = function(Value)
		if Value == "custom position" then
			if not workspace:FindFirstChild("waypoint") then
				WindUI:Notify({
					Title = "bring item",
					Content = "you have not placed the waypoint block",
					Icon = "notepad-text",
					IconThemed = true,
					Duration = 5  
				})
				return
			end        
		end
		ItemList.ItemTpPosition = Value
	end
})

TabHandles.TPItemSettings:Paragraph({
	Title = "hint",
	Desc = "this is the item teleport position",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItemSettings:Divider()

TabHandles.TPItemSettings:Slider({
	Title = "right offset",
	Desc = "offset",
	Step = 1,
	Value = {
		Min = 0,
		Max = 20,
		Default = 0,
	},
	Callback = function(value)
		TypeList.x = value
	end
})

TabHandles.TPItemSettings:Slider({
	Title = "up offset",
	Desc = "offset",
	Step = 1,
	Value = {
		Min = 0,
		Max = 20,
		Default = 0,
	},
	Callback = function(value)
		TypeList.y = value
	end
})

TabHandles.TPItemSettings:Paragraph({
	Title = "hint",
	Desc = "each position has a default offset height that cannot be changed",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItemSettings:Divider()

TabHandles.TPItemSettings:Button({
	Title = "place waypoint block here",
	Desc = "position marker",
	Callback = function()
		for _, part in pairs(workspace:GetChildren()) do
			if part.Name == "waypoint" then
				part:Destroy()
			end        
		end

		local waypoint = Instance.new("Part")
		waypoint.Name = "waypoint"
		waypoint.BrickColor = BrickColor.new("Bright red")
		waypoint.Material = Enum.Material.Neon
		waypoint.Transparency = 0.7
		waypoint.Size = Vector3.new(2, 2, 2)
		waypoint.Anchored = true
		waypoint.CanCollide = false        
		waypoint.Position = hrp.Position + Vector3.new(0, 3, 0)
		waypoint.Parent = workspace

		WindUI:Notify({
			Title = "custom position",
			Content = "placement complete",
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.TPItemSettings:Button({
	Title = "delete waypoint block",
	Desc = "delete position marker",
	Callback = function()
		if not workspace.waypoint then
			WindUI:Notify({
				Title = "custom position",
				Content = "waypoint block not found",
				Icon = "notepad-text",
				IconThemed = true,
				Duration = 5  
			})        
		end
		for _, part in pairs(workspace:GetChildren()) do
			if part.Name == "waypoint" then
				part:Destroy()
				WindUI:Notify({
					Title = "custom position",
					Content = "deletion complete",
					Icon = "notepad-text",
					IconThemed = true,
					Duration = 5  
				})                    
			end        
		end
	end
})

TabHandles.TPItemSettings:Paragraph({
	Title = "hint",
	Desc = "please open [custom position] in teleport mode",
	Image = "info",
	ImageSize = 15,
})

TabHandles.TPItemSettings:Divider()

TabHandles.TPItemSettings:Input({
	Title = "enter designated player name",
	Desc = "player name",
	Value = lp.Name,
	Placeholder = "please enter",
	Type = "Input",
	Callback = function(text)
		ItemList.Pn = text
		WindUI:Notify({
			Title = "bring item",
			Content = "modification complete: " .. text,
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})        
	end
})

local SelectPlayer = TabHandles.TPItemSettings:Dropdown({
	Title = "select player",
	Desc = "select",
	Values = PlayerList,
	Value = "please select",
	Callback = function(value) 
		ItemList.Pn = value
		WindUI:Notify({
			Title = "bring item",
			Content = "modification complete: " .. value,
			Icon = "notepad-text",
			IconThemed = true,
			Duration = 5  
		})
	end
})

TabHandles.Kill1:Section({ 
	Title = "kill aura (range)",
	Desc = "kill",
	Icon = 'axe',
	ImageSize = 30,
	Opened = true,
})

local run = false
TabHandles.Kill1:Toggle({
	Title = "kill aura",
	Desc = "kill",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		run = state
		if state then
			task.spawn(function()
				while run do
					killCharacter(St.Kill * 1.1)
					task.wait(0.1)
				end
			end)
		end 
	end
})

TabHandles.Kill1:Slider({
	Title = "kill range",
	Desc = "range size",
	Step = 1,
	Value = {
		Min = 50,
		Max = 500,
		Default = 50,
	},
	Callback = function(value)
		St.Kill = value  
	end
})

TabHandles.Kill1:Section({ 
	Title = "kill aura (map-wide)",
	Desc = "kill",
	Icon = 'axe',
	ImageSize = 30,
	Opened = true,
})

local run1 = false
TabHandles.Kill1:Toggle({
	Title = "map-wide kill aura",
	Desc = "kill",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		run1 = state
		if state then
			task.spawn(function()
				while run1 do
					local axe = inventory:FindFirstChild(tools.KillTool)
					for _, Child in pairs(workspace.Characters:GetChildren()) do
						DamageRemote:InvokeServer(Child, axe, '1_' .. lp.CharacterAppearanceId, hrp.CFrame)        
					end
					task.wait(0.1)
				end
			end)
		end 
	end
})

TabHandles.Cut1:Section({ 
	Title = "chop tree aura (range)",
	Desc = "chop tree",
	Icon = 'tree-pine',
	ImageSize = 30,
	Opened = true,
})

ActiveAutoChopTree = false
TabHandles.Cut1:Toggle({
	Title = "chop tree aura",
	Desc = "chop tree",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		ActiveAutoChopTree = state
		task.spawn(function()
			while ActiveAutoChopTree do                
				local character = lp.Character or game.Players.CharacterAdded:Wait()
				local hrp = character:FindFirstChild("HumanoidRootPart")
				local weapon = inventory:FindFirstChild("Old Axe") or inventory:FindFirstChild("Good Axe") or inventory:FindFirstChild("Strong Axe") or inventory:FindFirstChild("Chainsaw")

				task.spawn(function()
					for _, tree in pairs(workspace.Map.Foliage:GetChildren()) do
						if tree:IsA("Model") and (tree.Name == "Small Tree" or tree.Name == "TreeBig1" or tree.Name == "TreeBig2") and tree.PrimaryPart then
							local distance = (tree.PrimaryPart.Position - hrp.Position).Magnitude
							if distance <= St.Cut then
								DamageRemote:InvokeServer(tree, weapon, 999, hrp.CFrame)
							end
						end
					end
				end)

				task.spawn(function()
					for _, tree in pairs(workspace.Map.Landmarks:GetChildren()) do
						if tree:IsA("Model") and (tree.Name == "Small Tree" or tree.Name == "TreeBig1" or tree.Name == "TreeBig2") and tree.PrimaryPart then
							local distance = (tree.PrimaryPart.Position - hrp.Position).Magnitude
							if distance <= St.Cut then
								DamageRemote:InvokeServer(tree, weapon, 999, hrp.CFrame)
							end
						end
					end
				end)                
				task.wait(0.1)
			end
		end) 
	end
})

TabHandles.Cut1:Slider({
	Title = "chop tree range",
	Desc = "range size",
	Step = 1,
	Value = {
		Min = 50,
		Max = 500,
		Default = 50,
	},
	Callback = function(value)
		St.Cut = value  
	end
})

TabHandles.Cut1:Section({ 
	Title = "chop tree aura (map-wide)",
	Desc = "chop tree",
	Icon = 'tree-pine',
	ImageSize = 30,
	Opened = true,
})

local run3 = false
TabHandles.Cut1:Toggle({
	Title = "map-wide chop tree aura",
	Desc = "chop tree",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		run3 = state
		if state then
			task.spawn(function()
				while run3 do
					local tool = inventory:FindFirstChild(tools.CutTool)
					for _, Tree in pairs(workspace.Map.Landmarks:GetChildren()) do
						if Tree.Name ==  "Small Tree" or Tree.Name:find("Big") then
							DamageRemote:InvokeServer(Tree, tool, true, hrp.CFrame)      
						end
					end
					task.wait(0.1)
				end
			end)
		end 
	end
})

TabHandles.plant:Section({ 
	Title = "plant tree",
	Desc = "plant",
	Icon = 'tree-pine',
	ImageSize = 30,
	Opened = true,
})

local plantShape = "circle" 
local radius = 40
local spacing = 1
local Root = "player"
local isPlanting = false

TabHandles.plant:Dropdown({ 
	Title = "select planting shape",
	Desc = 'shape',
	Values = {"circle", "square"}, 
	Value = "circle", 
	Callback = function(value) 
		plantShape = value 
	end 
})

TabHandles.plant:Dropdown({ 
	Title = "select planting center",
	Desc = 'center',
	Values = {"player", "bonfire"}, 
	Value = "player", 
	Callback = function(value) 
		Root = value 
	end 
})

TabHandles.plant:Slider({
	Title = "planting radius size",
	Desc = 'radius',
	Value = { Min = 1, Max = 150, Default = 50 },
	Callback = function(value)
		radius = value
	end
})

TabHandles.plant:Toggle({
	Title = "auto plant",
	Desc = 'auto',
	Value = false,
	Callback = function(state)
		isPlanting = state
		if state then
			local Players = game:GetService("Players") 
			local ReplicatedStorage = game:GetService("ReplicatedStorage") 
			local RequestPlantItem = ReplicatedStorage:FindFirstChild("RemoteEvents"):FindFirstChild("RequestPlantItem") 
			local Sapling = workspace:FindFirstChild("Items"):FindFirstChild("Sapling")
			local rootpart 
			local player = Players.LocalPlayer
			local character = player.Character or player.CharacterAdded:Wait()
			if Root == "player" then
				rootpart = character:FindFirstChild("HumanoidRootPart")
			elseif Root == 'bonfire' then
				rootpart = workspace.Map.Campground.MainFire:FindFirstChild("Center")
			end
			local fixedY = 1.216280221939087

			if plantShape == "circle" then
				local circumference = 2 * math.pi * radius
				local numTrees = math.floor(circumference / spacing)
				local angleStep = 360 / numTrees

				local function plantAtAngle(angle)
					if not isPlanting then return end
					local angleRad = math.rad(angle)
					local x = rootpart.Position.X + radius * math.cos(angleRad)
					local z = rootpart.Position.Z + radius * math.sin(angleRad)
					local position = Vector3.new(x, fixedY, z)
					RequestPlantItem:InvokeServer(Sapling, position)
				end

				for i = 0, numTrees - 1 do
					if not isPlanting then break end
					local angle = i * angleStep
					plantAtAngle(angle)
					task.wait(0.1)
				end
			else
				local sideLength = radius * 2
				local numTreesPerSide = math.floor(sideLength / spacing)
				local step = sideLength / numTreesPerSide
				local halfSide = sideLength / 2

				for i = 0, numTreesPerSide do
					if not isPlanting then break end
					local x = rootpart.Position.X - halfSide + i * step
					local z1 = rootpart.Position.Z - halfSide
					local z2 = rootpart.Position.Z + halfSide

					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x, fixedY, z1))
					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x, fixedY, z2))
					task.wait(0.1)
				end

				for i = 1, numTreesPerSide - 1 do
					if not isPlanting then break end
					local z = rootpart.Position.Z - halfSide + i * step
					local x1 = rootpart.Position.X - halfSide
					local x2 = rootpart.Position.X + halfSide

					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x1, fixedY, z))
					RequestPlantItem:InvokeServer(Sapling, Vector3.new(x2, fixedY, z))
					task.wait(0.1)
				end
			end
		end
	end
})

TabHandles.plant:Paragraph({
	Title = "hint", 
	Desc = "must have one sapling when planting otherwise it's invalid", 
	Image = "info", 
	ImageSize = 15
})

local es, es2, es3, es4, es5, es6, es7, es8, es9, es10, es11, es12, es13, es14, es15, es16, es17 = false
local esd, esd1, esd2, esd3 = false

TabHandles.ItemEsp:Section({ 
	Title = "item esp",
	Desc = "esp",
	Icon = 'eye',
	ImageSize = 30,
	Opened = true,
})

TabHandles.ItemEsp:Toggle({
	Title = "esp coal",
	Desc = "show coal location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es = state
		if state then
			task.spawn(function()
				while es do
					EspItem("Coal")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Coal")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp raw meat",
	Desc = "show raw meat location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es2 = state
		if state then
			task.spawn(function()
				while es2 do
					EspItem("Steak")
					EspItem("Morsel")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Morsel")
			RemoveEspItem("Steak")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp cooked meat",
	Desc = "show cooked meat location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es3 = state
		if state then
			task.spawn(function()
				while es3 do
					EspItem("Cooked Steak")
					EspItem("Cooked Morsel")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Cooked Morsel")
			RemoveEspItem("Cooked Steak")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp fuel canister",
	Desc = "show fuel canister location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es4 = state
		if state then
			task.spawn(function()
				while es4 do
					EspItem("Fuel Canister")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Fuel Canister")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp fuel barrel",
	Desc = "show fuel barrel location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es5 = state
		if state then
			task.spawn(function()
				while es5 do
					EspItem("Oil Barrel")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Oil Barrel")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp log",
	Desc = "show log location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es6 = state
		if state then
			task.spawn(function()
				while es6 do
					EspItem("Log")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Log")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp iron type items",
	Desc = "show iron type items location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es7 = state
		if state then
			task.spawn(function()
				while es7 do
					EspItem("Old Car Engine")
					EspItem("UFO Scrap")
					EspItem("UFO Junk")
					EspItem("Metal Chair")
					EspItem("Tyre")
					EspItem("Sheet Metal")
					EspItem("Bolt")
					EspItem("Old Radio")
					EspItem("Broken Fan")
					EspItem("Broken Microwave")
					EspItem("Washing Machine") 
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Car Engine")
			RemoveEspItem("UFO Scrap")
			RemoveEspItem("UFO Junk")
			RemoveEspItem("Metal Chair")
			RemoveEspItem("Tyre")
			RemoveEspItem("Sheet Metal")
			RemoveEspItem("Bolt")
			RemoveEspItem("Old Radio")
			RemoveEspItem("Broken Fan")
			RemoveEspItem("Broken Microwave")
			RemoveEspItem("Washing Machine")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp carrot",
	Desc = "show carrot location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es8 = state
		if state then
			task.spawn(function()
				while es8 do
					EspItem("Carrot")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Carrot")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp berry",
	Desc = "show berry location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es9 = state
		if state then
			task.spawn(function()
				while es9 do
					EspItem("Berry")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Berry")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp gun",
	Desc = "show gun location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es10 = state
		if state then
			task.spawn(function()
				while es10 do
					EspItem("Revolver")
					EspItem("Rifle")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Revolver")
			RemoveEspItem("Rifle")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp ammo",
	Desc = "show ammo location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es11 = state
		if state then
			task.spawn(function()
				while es11 do
					EspItem("Revolver Ammo")
					EspItem("Rifle Ammo")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Revolver Ammo")
			RemoveEspItem("Rifle Ammo")
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp sack",
	Desc = "show sack location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es12 = state
		if state then
			task.spawn(function()
				while es12 do
					EspItem("Old Sack")
					EspItem("Good Sack")
					EspItem("Giant Sack")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Sack")
			RemoveEspItem("Good Sack")
			RemoveEspItem("Giant Sack")            
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp axe",
	Desc = "show axe location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es13 = state
		if state then
			task.spawn(function()
				while es13 do
					EspItem("Old Axe")
					EspItem("Good Axe")
					EspItem("Strong Axe")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Axe")
			RemoveEspItem("Good Axe")
			RemoveEspItem("Strong Axe")   
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp flashlight",
	Desc = "show flashlight location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es14 = state
		if state then
			task.spawn(function()
				while es14 do
					EspItem("Old Flashlight")
					EspItem("Strong Flashlight")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Old Flashlight")
			RemoveEspItem("Strong Flashlight")  
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp armor",
	Desc = "show armor location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es15 = state
		if state then
			task.spawn(function()
				while es15 do
					EspItem("Leather Body")
					EspItem("Iron Body")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Leather Body")
			RemoveEspItem("Iron Body")  
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp medical supplies",
	Desc = "show medical supplies location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es16 = state
		if state then
			task.spawn(function()
				while es16 do
					EspItem("Bandage")
					EspItem("MedKit")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Bandage")
			RemoveEspItem("MedKit")  
		end
	end
})

TabHandles.ItemEsp:Toggle({
	Title = "esp spear",
	Desc = "show spear location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		es17 = state
		if state then
			task.spawn(function()
				while es17 do
					EspItem("Spear")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspItem("Spear")
		end
	end
})

TabHandles.CharacterEsp:Section({ 
	Title = "animal esp",
	Desc = "esp",
	Icon = 'eye',
	ImageSize = 30,
	Opened = true,
})

TabHandles.CharacterEsp:Toggle({
	Title = "esp bunny",
	Desc = "show bunny location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd = state
		if state then
			task.spawn(function()
				while esd do
					EspCharacter("Bunny")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Bunny")
		end
	end
})

TabHandles.CharacterEsp:Toggle({
	Title = "esp wolf",
	Desc = "show wolf location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd1 = state
		if state then
			task.spawn(function()
				while esd1 do
					EspCharacter("Wolf")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Wolf")
		end
	end
})

TabHandles.CharacterEsp:Toggle({
	Title = "esp alpha wolf",
	Desc = "show alpha wolf location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd2 = state
		if state then
			task.spawn(function()
				while esd2 do
					EspCharacter("Alpha Wolf")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Alpha Wolf")
		end
	end
})

TabHandles.CharacterEsp:Toggle({
	Title = "esp bear",
	Desc = "show bear location",
	Type = "Toggle",
	Value = false,
	Callback = function(state)
		esd3 = state
		if state then
			task.spawn(function()
				while esd3 do
					EspCharacter("Bear")
					task.wait(0.1)
				end
			end)
		else
			RemoveEspCharacter("Bear")
		end
	end
})

TabHandles.ESPSettings:Section({ 
	Title = "esp settings",
	Desc = "settings",
	Icon = 'settings',
	ImageSize = 30,
	Opened = true,
})

TabHandles.ESPSettings:Slider({
	Title = "esp transparency",
	Desc = "set highlight fill transparency",
	Step = 0.1,
	Value = {
		Min = 0,
		Max = 1,
		Default = 0.5,
	},
	Callback = function(value)
		dyzh.nt = value
		for _, cache in pairs(espCache.Items) do
			if cache.highlight then
				cache.highlight.FillTransparency = value
			end
		end
		for _, cache in pairs(espCache.Characters) do
			if cache.highlight then
				cache.highlight.FillTransparency = value
			end
		end
	end
})

TabHandles.ESPSettings:Slider({
	Title = "esp transparency",
	Desc = "set highlight outline transparency",
	Step = 0.1,
	Value = {
		Min = 0,
		Max = 1,
		Default = 0.5,
	},
	Callback = function(value)
		dyzh.wt = value
		for _, cache in pairs(espCache.Items) do
			if cache.highlight then
				cache.highlight.OutlineTransparency = value
			end
		end
		for _, cache in pairs(espCache.Characters) do
			if cache.highlight then
				cache.highlight.OutlineTransparency = value
			end
		end
	end
})

TabHandles.Chest:Section({ 
	Title = "chest interaction",
	Desc = "chest",
	Icon = 'sparkles',
	ImageSize = 30,
	Opened = true,
})

local OpenTime = 5.5
TabHandles.Chest:Input({
	Title = "chest open time",
	Desc = "input",
	Value = "5.5",
	Callback = function(text)
		OpenTime = tonumber(text)        
	end
})

TabHandles.Chest:Toggle({
	Title = "enable custom open time",
	Desc = "enable custom time",
	Value = false,
	Callback = function(state)
		if state then
			OpenChestTme(OpenTime)
		else
			OpenChestTme(5.5)
		end
	end
})

TabHandles.Chest:Section({ 
	Title = "open chest",
	Desc = "chest",
	Icon = 'sparkles',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Chest:Button({
	Title = "open all chests",
	Desc = "one-click open",
	Callback = function()
		OpenChest()
	end
})

local ChestRunState = false

TabHandles.Chest:Toggle({
	Title = "auto open chest",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		ChestRunState = state
		if state then
			while ChestRunState do
				OpenChest()
				task.wait(0.1)        
			end
		end
	end
})

TabHandles.Chest:Paragraph({
	Title = "hint",
	Desc = "requires support from your injector",
	Image = "info",
	ImageSize = 15,
})

TabHandles.Coin:Section({ 
	Title = "pick up coins",
	Desc = "pick up",
	Icon = 'coins',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Coin:Button({
	Title = "pick up all coins",
	Desc = "auto",
	Callback = function()
		for _, v in pairs(workspace.Items:GetChildren()) do
			if v.Name == 'Coin Stack' then
				game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestCollectCoints"):InvokeServer(v)
			end
		end
	end
})

TabHandles.Coin:Toggle({
	Title = "auto pick up coins",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		ChestRunState = state
		if state then
			while ChestRunState do
				for _, v in pairs(workspace.Items:GetChildren()) do
					if v.Name == 'Coin Stack' then
						game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestCollectCoints"):InvokeServer(v)
					end
				end
				wait()        
			end
		end
	end
})

TabHandles.Auto1:Section({ 
	Title = "auto bonfire",
	Desc = "auto",
	Icon = 'atom',
	ImageSize = 30,
	Opened = true,
})

local AutoState0 = false
TabHandles.Auto1:Toggle({
	Title = "auto bonfire (chair)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState0 = state
		if state then
			while AutoState0 do
				AutoFire("Chair")
				task.wait(1)
			end
		end
	end
})

local AutoState1 = false
TabHandles.Auto1:Toggle({
	Title = "auto bonfire (coal)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState1 = state
		if state then
			while AutoState1 do
				AutoFire("Coal")
				task.wait(1)
			end
		end
	end
})
local AutoState2 = false
TabHandles.Auto1:Toggle({
	Title = "auto bonfire (log)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState2 = state
		if state then
			while AutoState2 do
				AutoFire("Log")
				task.wait(1)
			end
		end
	end
})
local AutoState3 = false
TabHandles.Auto1:Toggle({
	Title = "auto bonfire (fuel canister)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState3 = state
		if state then
			while AutoState3 do
				AutoFire("Fuel Canister")
				task.wait(1)
			end
		end
	end
})
local AutoState4 = false
TabHandles.Auto1:Toggle({
	Title = "auto bonfire (fuel barrel)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState4 = state
		if state then
			while AutoState4 do
				AutoFire("Oil Barrel")
				task.wait(1)
			end
		end
	end
})

TabHandles.Auto2:Section({ 
	Title = "auto workbench",
	Desc = "auto",
	Icon = 'chevrons-right',
	ImageSize = 30,
	Opened = true,
})

local AutoState5 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (log)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState5 = state
		if state then
			while AutoState5 do
				AutoScrapper("Log")
				task.wait(1)
			end
		end
	end
})

local AutoState91 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (washing machine)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState91 = state
		if state then
			while AutoState91 do
				AutoScrapper("Washing Machine")
				task.wait(1)
			end
		end
	end
})

local AutoState6 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (broken microwave)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState6 = state
		if state then
			while AutoState6 do
				AutoScrapper("Broken Microwave")
				task.wait(1)
			end
		end
	end
})
local AutoState7 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (fan)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState7 = state
		if state then
			while AutoState7 do
				AutoScrapper("Broken Fan")
				task.wait(1)
			end
		end
	end
})
local AutoState8 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (old radio)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState8 = state
		if state then
			while AutoState8 do
				AutoScrapper("Old Radio")
				task.wait(1)
			end
		end
	end
})
local AutoState9 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (bolt)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState9 = state
		if state then
			while AutoState9 do
				AutoScrapper("Bolt")
				task.wait(1)
			end
		end
	end
})
local AutoState10 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (sheet metal)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState10 = state
		if state then
			while AutoState10 do
				AutoScrapper("Sheet Metal")
				task.wait(1)
			end
		end
	end
})
local AutoState11 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (tire)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState11 = state
		if state then
			while AutoState11 do
				AutoScrapper("Tyre")
				task.wait(1)
			end
		end
	end
})
local AutoState12 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (metal chair)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState12 = state
		if state then
			while AutoState12 do
				AutoScrapper("Metal Chair")
				task.wait(1)
			end
		end
	end
})

local AutoState78 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (ufo component)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState78 = state
		if state then
			while AutoState78 do
				AutoScrapper("UFO Component")
				task.wait(1)
			end
		end
	end
})

local AutoState13 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (ufo junk)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState13 = state
		if state then
			while AutoState13 do
				AutoScrapper("UFO Junk")
				task.wait(1)
			end
		end
	end
})
local AutoState14 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (ufo scrap)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState14 = state
		if state then
			while AutoState14 do
				AutoScrapper("UFO Scrap")
				task.wait(1)
			end
		end
	end
})
local AutoState15 = false
TabHandles.Auto2:Toggle({
	Title = "auto workbench (engine)",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoState15 = state
		if state then
			while AutoState15 do
				AutoScrapper("Old Car Engine")
				task.wait(1)
			end
		end
	end
})

TabHandles.Auto3:Section({ 
	Title = "auto cook food",
	Desc = "auto",
	Icon = 'chef-hat',
	ImageSize = 30,
	Opened = true,
})

local Cooking = false
TabHandles.Auto3:Toggle({
	Title = "auto fry food",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		Cooking = state
		if state then
			while Cooking do
				for _, Item in pairs(workspace.Items:GetChildren()) do
				    if Item.Name == "Steak" or Item.Name == "Morsel" then
					    game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestCookItem"):FireServer(workspace:WaitForChild("Map"):WaitForChild("Campground"):WaitForChild("MainFire"), Item)
					end
				end
				task.wait(0.1)
			end
		end
	end
})

TabHandles.Auto3:Paragraph({
	Title = "hint",
	Desc = "please make sure the bonfire exists before use",
	Image = "info",
	ImageSize = 15,
})

TabHandles.Auto3:Section({ 
	Title = "auto eat food",
	Desc = "auto",
	Icon = 'beef',
	ImageSize = 30,
	Opened = true,
})

local n
TabHandles.Auto3:Dropdown({
	Title = "select food",
	Desc = "select yourself",
	Values = {"cake", "cooked meat leg", "cooked steak", "raw meat leg", "raw steak", "berry", "carrot"},
	Value = "carrot",
	Multi = false,
	Callback = function(value)
		local GetFoodList = {
			["cake"] = "Cake",
			["cooked steak"] = "Cooked Steak",
			["cooked meat leg"] = "Cooked Morsel",
			["raw meat leg"] = "Morsel",
			["raw steak"] = "Steak",
			["berry"] = "Berry",
			["carrot"] = "Carrot",
		}
		Food = GetFoodList[value]
	end
})


TabHandles.Auto3:Input({
	Title = "hunger setting",
	Desc = "eat when hunger reaches this amount",
	Value = tostring(hungerThreshold),
	Placeholder = "75",
	Numeric = true,
	Callback = function(value)
		local n = tonumber(value)
		if n then
			hungerThreshold = math.clamp(n, 0, 100)
		end
	end
})

local autoFeed

TabHandles.Auto3:Toggle({
	Title = "auto feed",
	Value = false,
	Callback = function(state)
		autoFeed = state
		if state then
			task.spawn(function()
				while autoFeed do
					task.wait(0.075)
					if wiki(Food) == 0 then
						autoFeed = false
						notifeed(Food)
						break
					end
					if ghn() <= hungerThreshold then
						feed(Food)
					end
				end
			end)
		end
	end
})

TabHandles.Auto4:Section({ 
	Title = "fishing",
	Desc = "auto",
	Icon = 'fish',
	ImageSize = 30,
	Opened = true,
})

local AutoFish = false
local fishThread = nil

TabHandles.Auto4:Toggle({
	Title = "auto fish",
	Value = false,
	Callback = function(state)
		AutoFish = state

		if state then
			fishThread = task.spawn(function()
				while AutoFish do
					local bar  = lp.PlayerGui:FindFirstChild("Interface")
						and lp.PlayerGui.Interface:FindFirstChild("FishingCatchFrame")
						and lp.PlayerGui.Interface.FishingCatchFrame:FindFirstChild("TimingBar")
						and lp.PlayerGui.Interface.FishingCatchFrame.TimingBar:FindFirstChild("Bar")

					local zone = lp.PlayerGui:FindFirstChild("Interface")
						and lp.PlayerGui.Interface:FindFirstChild("FishingCatchFrame")
						and lp.PlayerGui.Interface.FishingCatchFrame:FindFirstChild("TimingBar")
						and lp.PlayerGui.Interface.FishingCatchFrame.TimingBar:FindFirstChild("SuccessArea")

					if bar and zone and math.abs(bar.AbsolutePosition.Y - zone.AbsolutePosition.Y) < 1 then
						local vim = game:GetService("VirtualInputManager")
						vim:SendMouseButtonEvent(0, 0, 0, true, game, 0)
						task.wait()
						vim:SendMouseButtonEvent(0, 0, 0, false, game, 0)
					end

					task.wait(0.03)
				end
				fishThread = nil
			end)
		else
			if fishThread then
				task.cancel(fishThread)
				fishThread = nil
			end
		end
	end
})

TabHandles.Auto4:Section({ 
	Title = "fishing rod",
	Desc = "fishing rod",
	Icon = 'target',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Auto4:Button({
	Title = "remote upgrade fishing rod",
	Desc = "upgrade",
	Callback = function()   
		local S = getsenv(lp.PlayerScripts.Client.SkillModules.FishingUpgradeClient)
		if inventory:FindFirstChild('Old Rod') then
			S.RunUpgradeRod(inventory:FindFirstChild('Old Rod'))
		elseif inventory:FindFirstChild('Good Rod') then
			S.RunUpgradeRod(inventory:FindFirstChild('Good Rod'))
		else
			WindUI:Notify({
				Title = "hint",
				Content = 'you do not have a fishing rod or your fishing rod does not need upgrading',
				Icon = 'crown',
				Duration = 2
			})
		end
	end
})

TabHandles.LostKid:Section({ 
	Title = "collect child",
	Desc = "auto",
	Icon = 'baby',
	ImageSize = 30,
	Opened = true,
})

TabHandles.LostKid:Button({
	Title = "one-click put all children into sack",
	Desc = "auto",
	Callback = function()
		local KidNum = 0
		for _, v in pairs(workspace.Characters:GetChildren()) do
			if string.find(v.Name, 'Child', 1, true) then
				for _, i in pairs(v:GetDescendants()) do
					if i:IsA('ProximityPrompt') then
						fireproximityprompt(i)
						KidNum += 1
					end
				end
			end
		end
		WindUI:Notify({
			Title = "collect child",
			Content = "collected: " .. KidNum .. ' children',
			Icon = "baby",
			IconThemed = true,
			Duration = 5  
		})
	end
})

local AutoGetKid = false
TabHandles.LostKid:Toggle({
	Title = "fully automatic child collection",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		AutoGetKid = state
		if state then
			while AutoGetKid do
				task.wait()
				for _, v in pairs(workspace.Characters:GetChildren()) do
					if string.find(v.Name, 'Child', 1, true) then
						for _, i in pairs(v:GetDescendants()) do
							if i:IsA('ProximityPrompt') then
								fireproximityprompt(i)
							end
						end
					end
				end                
			end
		end
	end
})

TabHandles.Tp2:Section({ 
	Title = "teleport",
	Desc = "teleport",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

TabHandles.Tp2:Button({
	Title = "teleport to bonfire",
	Desc = "teleport",
	Callback = function()
		local fireCenter = workspace.Map.Campground.MainFire:FindFirstChild("Center")
		if not fireCenter then
			WindUI:Notify({
				Title = "hint",
				Content = "bonfire not found",
				Duration = 2
			})
			return
		end
		hrp.CFrame = fireCenter.CFrame + Vector3.new(0, 3, 0)
	end
})

TabHandles.Tp2:Button({
	Title = "teleport to workbench",
	Desc = "teleport",
	Callback = function()
		local scrapper = workspace.Map.Campground.Scrapper:FindFirstChild("Main")
		if not scrapper then
			WindUI:Notify({
				Title = "hint",
				Content = "workbench not found",
				Duration = 2
			})
			return
		end
		hrp.CFrame = scrapper.CFrame + Vector3.new(0, 3, 0)
	end
})

TabHandles.Tp2:Section({ 
	Title = "alert teleport",
	Desc = "teleport",
	Icon = 'hand',
	ImageSize = 30,
	Opened = true,
})

local Health = 75
local HealthTP = false

TabHandles.Tp2:Slider({
	Title = "health threshold",
	Desc = "minimum health",
	Step = 1,
	Value = { Min = 0, Max = 100, Default = 75 },
	Callback = function(value)
		Health = tonumber(value)
	end
})

TabHandles.Tp2:Toggle({
	Title = "auto detect health threshold teleport",
	Desc = "auto",
	Value = false,
	Callback = function(state)
		local TPState = true
		HealthTP = state
		if state then
			while HealthTP do
				task.wait()
				if lp.Character:FindFirstChild('Humanoid').Health >= Health then
					return
				end

				if TPState then
					lp.Character:FindFirstChild('HumanoidRootPart').CFrame = workspace.Map.Campground.MainFire:FindFirstChild("Center").CFrame + Vector3.new(0, 3, 0)
					TPState = false
				end
			end
		end
	end
})

Window:OnClose(function()
	if game:GetService("UserInputService").KeyboardEnabled then
		WindUI:Notify({
			Title = "notification",
			Content = "press n to open again",
			Duration = 3
		})    
	end
end)

game.Players.PlayerAdded:Connect(function(Pl)
	table.insert(PlayerList, Pl.Name)
	SelectPlayer:Refresh(PlayerList)
end)

end
local function ubgeng()
local Tab = Window:Tab({
    Title = "function",
    Icon = "sword",
    Locked = false,
})
Tab:Button({
    Flag = "1",
    Title = "distort",
    Desc = "Click this function if you want to play spam wallcombo",
    Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/ubg-script/refs/heads/main/%E6%8B%A6%E6%88%AA.txt"))()
    end
})
local fakeBlockEnabled = false
local loopRunning = false

Tab:Toggle({
    Flag = "2",
    Title = "fake block",
    Value = false,
    Callback = function(state)
        fakeBlockEnabled = state

        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local BlockRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Combat"):WaitForChild("Block")
        local Players = game:GetService("Players")
        local player = Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()

        local function enableBlock()
            pcall(function()
                BlockRemote:FireServer(true)
            end)
        end

        if fakeBlockEnabled then
            enableBlock()
        end

        if not loopRunning then
            loopRunning = true
            task.spawn(function()
                while true do
                    task.wait(0.01)
                    if fakeBlockEnabled then
                        local success, isBlocking = pcall(function()
                            return character:GetAttribute("IsBlocking")
                        end)
                        if success and not isBlocking then
                            enableBlock()
                        end
                    end
                end
            end)
        end
    end
})

local defaultCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Dash.Value

Tab:Toggle({
    Flag = "3",
    Title = "no dash cooldown",
    Value = false,
    Callback = function(state)
        local dashCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Dash
        if state then
            dashCooldown.Value = 1
        else
            dashCooldown.Value = defaultCooldown
        end
    end
})
local defaultMeleeCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Melee.Value

Tab:Toggle({
    Flag = "4",
    Title = "no melee cooldown",
    Value = false,
    Callback = function(state)
        local meleeCooldown = game:GetService("ReplicatedStorage").Settings.Cooldowns.Melee
        if state then
            meleeCooldown.Value = 1
        else
            meleeCooldown.Value = defaultMeleeCooldown
        end
    end
})
local rs = game:GetService("ReplicatedStorage")
local settings = rs.Settings

local defaultAbility = settings.Cooldowns.Ability.Value
Tab:Toggle({
    Flag = "5",
    Title = "no skill cooldown(only sukuna)",
    Value = false,
    Callback = function(state)
        settings.Cooldowns.Ability.Value = state and 1 or defaultAbility
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Remotes = ReplicatedStorage.Remotes
local Combat = Remotes.Combat
local EmoteClaim = Combat.EmoteClaim

local emoteClaimActive = false
local emoteClaimConnection = nil

local function startEmoteClaim()
    emoteClaimConnection = game:GetService("RunService").Heartbeat:Connect(function()
        if emoteClaimActive then
            EmoteClaim:FireServer()
        end
    end)
end

local function stopEmoteClaim()
    if emoteClaimConnection then
        emoteClaimConnection:Disconnect()
        emoteClaimConnection = nil
    end
end

Tab:Toggle({
    Flag = "6",
    Title = "auto claim emote",
    Value = false,
    Callback = function(state)
        emoteClaimActive = state
        if state then
            startEmoteClaim()
        else
            stopEmoteClaim()
        end
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local noSlowdownsToggle = ReplicatedStorage.Settings.Toggles.NoSlowdowns

local defaultValue = false

Tab:Toggle({
    Flag = "7",
    Title = "no slowdown",
    Value = noSlowdownsToggle.Value,
    Callback = function(state)
        if state then
            noSlowdownsToggle.Value = true
        else
            noSlowdownsToggle.Value = defaultValue
        end
    end
})

local defaultDisableHitStun = settings.Toggles.DisableHitStun.Value
Tab:Toggle({
    Flag = "8",
    Title = "no stun",
    Value = false,
    Callback = function(state)
        settings.Toggles.DisableHitStun.Value = state
    end
})

local defaultDisableIntros = settings.Toggles.DisableIntros.Value
Tab:Toggle({
    Flag = "9",
    Title = "Skip opening action",
    Value = false,
    Callback = function(state)
        settings.Toggles.DisableIntros.Value = state
    end
})

local defaultNoStunOnMiss = settings.Toggles.NoStunOnMiss.Value
Tab:Toggle({
    Flag = "10",
    Title = "Melee no rigidity",
    Value = false,
    Callback = function(state)
        settings.Toggles.NoStunOnMiss.Value = state
    end
})

local defaultRagdollTimer = settings.Multipliers.RagdollTimer.Value
Tab:Toggle({
    Flag = "11",
    Title = "no ragdoll",
    Value = false,
    Callback = function(state)
        settings.Multipliers.RagdollTimer.Value = state and 0.5 or defaultRagdollTimer
    end
})

local defaultUltimateTimer = settings.Multipliers.UltimateTimer.Value
Tab:Toggle({
    Flag = "12",
    Title = "Extend the ultimate time",
    Value = false,
    Callback = function(state)
        settings.Multipliers.UltimateTimer.Value = state and 100000 or defaultUltimateTimer
    end
})
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local Ping = player:WaitForChild("Info"):WaitForChild("Ping")

local loop

Tab:Toggle({
    Flag = "13",
    Title = "ping error",
    Value = false,
    Callback = function(state)
        if state then
            loop = task.spawn(function()
                while state do
                    for i = 0, 999, 25 do
                        if not state then break end
                        Ping.Value = i
                        task.wait(0.03)
                    end
                    for i = 999, 0, -25 do
                        if not state then break end
                        Ping.Value = i
                        task.wait(0.03)
                    end
                end
            end)
        else
            if loop then
                task.cancel(loop)
                loop = nil
            end
        end
    end
})
local defaultInstantTransformation = settings.Toggles.InstantTransformation.Value
Tab:Toggle({
    Flag = "14",
    Title = "Open the ultimate immediately",
    Value = false,
    Callback = function(state)
        settings.Toggles.InstantTransformation.Value = state
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local MeleeDamage = ReplicatedStorage:WaitForChild("Settings"):WaitForChild("Multipliers"):WaitForChild("MeleeDamage")

MeleeDamage.Value = 100

Tab:Toggle({
    Flag = "15",
    Title = "one punch fall",
    Value = false,
    Callback = function(state)
        if state then
            MeleeDamage.Value = 1000000
        else
            MeleeDamage.Value = 100
        end
    end
})
Tab:Toggle({
    Flag = "16",
    Title = "one punch kill(collocation one punch fall)",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local RunService = game:GetService("RunService")

        local LocalPlayer = Players.LocalPlayer
        local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

        local RagdollPower = ReplicatedStorage:WaitForChild("Settings"):WaitForChild("Multipliers"):WaitForChild("RagdollPower")

        local maxTeleportDistance = 50
        local lastPosition = HumanoidRootPart.Position
        local connection

        if state then
            RagdollPower.Value = 10000

            connection = RunService.RenderStepped:Connect(function()
                if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
                    lastPosition = HumanoidRootPart.Position
                end

                local currentPos = HumanoidRootPart.Position
                local distance = (currentPos - lastPosition).Magnitude

                if distance > maxTeleportDistance then
                    HumanoidRootPart.CFrame = CFrame.new(lastPosition)
                else
                    lastPosition = currentPos
                end
            end)
        else
            RagdollPower.Value = 100
            if connection then
                connection:Disconnect()
                connection = nil
            end
        end
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local wallCombo = ReplicatedStorage.Settings.Cooldowns.WallCombo

Tab:Toggle({
    Flag = "17",
    Title = "wallcombo no cooldown",
    Value = false,
    Callback = function(state)
        if state then
            wallCombo.Value = 0
            print("WallCombo cooldown set to 0")
        else
            wallCombo.Value = 100
            print("WallCombo cooldown reset to 100")
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local wall = nil
pcall(function()
    wall = workspace.Map.Structural.Terrain:GetChildren()[5]:GetChildren()[12]
end)

if not wall then
    wall = Instance.new("Part")
    wall.Parent = workspace
end

wall.Size = Vector3.new(12,6,2)
wall.Transparency = 0.6
wall.Material = Enum.Material.SmoothPlastic
wall.Anchored = true
wall.CanCollide = true
wall.CFrame = wall.CFrame or CFrame.new(0,5,0)

if getconnections then
    for _, conn in pairs(getconnections(wall.AncestryChanged)) do
        conn:Disable()
    end
end

local mt = getrawmetatable(game)
setreadonly(mt,false)
local old = mt.__namecall
mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    if self == wall and method == "Destroy" then
        return
    end
    return old(self, ...)
end)
setreadonly(mt,true)

local followConnection = nil
Tab:Toggle({
    Flag = "18",
    Title = "wallcombo anywhere",
    Value = false,
    Callback = function(state)
        if state then
            if not followConnection then
                followConnection = RunService.RenderStepped:Connect(function()
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        wall.CFrame = hrp.CFrame * CFrame.new(0,0,-8)
                    end
                end)
            end
        else
            if followConnection then
                followConnection:Disconnect()
                followConnection = nil
            end
        end
    end
})
local originalData = {}
local skyBackup = nil

Tab:Toggle({
    Flag = "19",
    Title = "antiLag",
    Value = false,
    Callback = function(state)
        if state then
            originalData = {}
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Explosion") then
                    originalData[v] = v.Enabled
                    v.Enabled = false
                elseif v:IsA("Decal") or v:IsA("Texture") then
                    originalData[v] = v.Transparency
                    v.Transparency = 1
                elseif v:IsA("MeshPart") or v:IsA("UnionOperation") or v:IsA("Part") then
                    if v.Name ~= "HumanoidRootPart" then
                        originalData[v] = v.Material
                        v.Material = Enum.Material.SmoothPlastic
                    end
                elseif v:IsA("SurfaceGui") or v:IsA("BillboardGui") or v:IsA("Beam") then
                    if v:IsA("Beam") then
                        originalData[v] = v.Enabled
                        v.Enabled = false
                    else
                        originalData[v] = v.Enabled ~= nil and v.Enabled or true
                        if v.Enabled ~= nil then
                            v.Enabled = false
                        end
                    end
                end
            end
            originalData["GlobalShadows"] = game.Lighting.GlobalShadows
            originalData["FogEnd"] = game.Lighting.FogEnd
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 9e9
            local sky = game.Lighting:FindFirstChildOfClass("Sky")
            if sky then
                skyBackup = sky:Clone()
                sky:Destroy()
            end
            local newSky = Instance.new("Sky")
            newSky.SkyboxBk = ""
            newSky.SkyboxDn = ""
            newSky.SkyboxFt = ""
            newSky.SkyboxLf = ""
            newSky.SkyboxRt = ""
            newSky.SkyboxUp = ""
            newSky.SunAngularSize = 0
            newSky.MoonAngularSize = 0
            newSky.Parent = game.Lighting
            game.Lighting.Ambient = Color3.fromRGB(128,128,128)
            game.Lighting.OutdoorAmbient = Color3.fromRGB(128,128,128)
        else
            for obj, value in pairs(originalData) do
                if typeof(obj) == "Instance" and obj.Parent then
                    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Explosion") then
                        obj.Enabled = value
                    elseif obj:IsA("Decal") or obj:IsA("Texture") then
                        obj.Transparency = value
                    elseif obj:IsA("MeshPart") or obj:IsA("UnionOperation") or obj:IsA("Part") then
                        obj.Material = value
                    elseif obj:IsA("SurfaceGui") or obj:IsA("BillboardGui") or obj:IsA("Beam") then
                        if obj:IsA("Beam") then
                            obj.Enabled = value
                        elseif obj.Enabled ~= nil then
                            obj.Enabled = value
                        end
                    end
                elseif obj == "GlobalShadows" then
                    game.Lighting.GlobalShadows = value
                elseif obj == "FogEnd" then
                    game.Lighting.FogEnd = value
                end
            end
            if skyBackup then
                local currentSky = game.Lighting:FindFirstChildOfClass("Sky")
                if currentSky then
                    currentSky:Destroy()
                end
                skyBackup.Parent = game.Lighting
                skyBackup = nil
            end
            originalData = {}
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Camera = workspace.CurrentCamera

local clone, platform, originalCFrame, originalCameraSubject

local function CreatePlatform(position)
    local part = Instance.new("Part")
    part.Size = Vector3.new(10, 1, 10)
    part.Position = position - Vector3.new(0, 3, 0)
    part.Anchored = true
    part.CanCollide = true
    part.Transparency = 0.5
    part.Parent = workspace
    return part
end

local function CreateClone()
    local newClone = Character:Clone()
    for _, v in ipairs(newClone:GetDescendants()) do
        if v:IsA("BasePart") then
            v.Transparency = 0.5
        end
    end
    newClone.Parent = workspace
    return newClone
end

local function ToggleInvisibility(state)
    if state then
        originalCFrame = HumanoidRootPart.CFrame
        HumanoidRootPart.CFrame = HumanoidRootPart.CFrame + Vector3.new(0, -50, 0)
        platform = CreatePlatform(HumanoidRootPart.Position)
        
        task.wait(1)
        
        clone = CreateClone()
        clone:MoveTo(originalCFrame.Position)
        Camera.CameraSubject = clone:FindFirstChildWhichIsA("Humanoid")
        LocalPlayer.Character = clone
    else
        if clone then
            clone:Destroy()
            clone = nil
        end
        
        if platform then
            platform:Destroy()
            platform = nil
        end
        
        if originalCFrame then
            HumanoidRootPart.CFrame = originalCFrame
            originalCFrame = nil
        end
        
        Camera.CameraSubject = Character:FindFirstChildWhichIsA("Humanoid")
        LocalPlayer.Character = Character
    end
end

Tab:Toggle({
    Flag = "20",
    Title = "invisible",
    Value = false,
    Callback = ToggleInvisibility
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local active = false

local function getLocalPlayerCharacter()
    return LocalPlayer.Character
end

local function generateActionNumber()
    return "Action" .. math.random(1000, 9999)
end

local function getServerTime()
    return tick()
end

local function wallcomboveryud()
    local playerChar = getLocalPlayerCharacter()
    if not playerChar then return false end

    local head = playerChar:FindFirstChild("Head")
    if not head then return false end

    local charData = LocalPlayer:FindFirstChild("Data")
    local charValue = charData and charData:FindFirstChild("Character") and charData.Character.Value
    if not charValue then return false end

    local charsFolder = ReplicatedStorage:FindFirstChild("Characters")
    if not charsFolder or not charsFolder:FindFirstChild(charValue) then return false end

    local wallComboAbility = charsFolder[charValue]:FindFirstChild("WallCombo")
    if not wallComboAbility then return false end

    local targetCharacter = playerChar
    if not targetCharacter then return false end

    local actionNumber = generateActionNumber()
    local serverTime = getServerTime()
    local randomId = math.random(100000, 999999)

    local remoteArgs = {
        wallComboAbility,
        "Characters:" .. charValue .. ":WallCombo",
        1,
        randomId,
        {
            HitboxCFrames = {nil},
            BestHitCharacter = targetCharacter,
            HitCharacters = {targetCharacter},
            Ignore = {[actionNumber] = {targetCharacter}},
            DeathInfo = {},
            Actions = {[actionNumber] = {}},
            HitInfo = {
                Blocked = false,
                IsFacing = true,
                IsInFront = true
            },
            BlockedCharacters = {},
            ServerTime = serverTime,
            FromCFrame = nil
        },
        actionNumber
    }

    pcall(function()
        ReplicatedStorage.Remotes.Abilities.Ability:FireServer(wallComboAbility, randomId)
    end)

    pcall(function()
        ReplicatedStorage.Remotes.Combat.Action:FireServer(unpack(remoteArgs))
    end)
end

task.spawn(function()
    while task.wait(0.01) do
        if active then
            pcall(wallcomboveryud)
        end
    end
end)

Tab:Toggle({
    Flag = "21",
    Title = "godmod",
    Value = false,
    Callback = function(state)
        active = state
    end
})
Tab:Button({
    Flag = "22",
    Title = "blow sever",
    Callback = function()
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local RunService = game:GetService("RunService")

        local player = Players.LocalPlayer
        local active = true
        local spawnedTasks = {}

        local function buildCombatArgs()
            return {
                [1] = ReplicatedStorage.Characters.Gon.WallCombo,
                [2] = "Characters:Gon:WallCombo",
                [3] = 1,
                [4] = 33036,
                [5] = {
                    ["HitboxCFrames"] = {},
                    ["BestHitCharacter"] = workspace.Characters.NPCs:FindFirstChild("The Ultimate Bum"),
                    ["HitCharacters"] = {workspace.Characters.NPCs:FindFirstChild("The Ultimate Bum")},
                    ["Ignore"] = {},
                    ["DeathInfo"] = {},
                    ["Actions"] = {},
                    ["HitInfo"] = {
                        ["IsFacing"] = true,
                        ["IsInFront"] = true
                    },
                    ["BlockedCharacters"] = {},
                    ["ServerTime"] = os.clock(),
                    ["FromCFrame"] = CFrame.new(534.693, 5.532, 79.486)
                },
                [6] = "Action651",
                [7] = 0
            }
        end

        local abilityArgs = {
            [1] = ReplicatedStorage.Characters.Gon.WallCombo,
            [2] = 33036,
            [4] = workspace.Characters.NPCs:FindFirstChild("The Ultimate Bum"),
            [5] = Vector3.new(527.693, 4.532, 79.978)
        }

        for i = 1, 5000 do
            local t = task.spawn(function()
                if active then
                    pcall(function()
                        local combatArgs = buildCombatArgs()
                        ReplicatedStorage.Remotes.Abilities.Ability:FireServer(unpack(abilityArgs))
                        ReplicatedStorage.Remotes.Combat.Action:FireServer(unpack(combatArgs))
                    end)
                end
            end)
            table.insert(spawnedTasks, t)
        end

        task.delay(3, function()
            active = false
            for _, t in ipairs(spawnedTasks) do
                if task.cancel then
                    task.cancel(t)
                end
            end
            spawnedTasks = {}

            local localContainers = workspace:FindFirstChild("Container(Drawing)")
            if localContainers then
                for _, v in ipairs(localContainers:GetChildren()) do
                    if v.Name:match(tostring(player.UserId)) then
                        v:Destroy()
                    end
                end
            end

            print("500 events instantly fired, local tasks stopped and cleaned up")
        end)
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local Core = require(ReplicatedStorage:WaitForChild("Core"))

local LocalPlayer = Players.LocalPlayer
local charValue = LocalPlayer:WaitForChild("Data"):WaitForChild("Character").Value
local chars = ReplicatedStorage:WaitForChild("Characters")
local ability = chars:WaitForChild(charValue):WaitForChild("WallCombo")
local interruptAttr = ability:GetAttribute("Interrupt")

local wallComboCooldown = 0.05
local lastWallComboTime = 0
local wallComboKey = Enum.KeyCode.E
local lastDashTime = 0

local wallComboEnabled = false
local ignoreFriends = false

local wallComboConn = nil
local dashConn = nil

local function isFriend(player)
    local ok, res = pcall(function() return LocalPlayer:IsFriendsWith(player.UserId) end)
    return ok and res
end

local function shouldIgnorePlayerModel(model)
    if not model then return false end
    if ignoreFriends then
        for _, pl in ipairs(Players:GetPlayers()) do
            if pl ~= LocalPlayer and pl.Character == model then
                if isFriend(pl) then
                    return true
                end
            end
        end
    end
    return false
end

local function getHead()
    local character = LocalPlayer.Character
    if not character then return nil end
    return character:FindFirstChild("Head")
end

local function hasValidTargetsForWallCombo(range)
    local head = getHead()
    if not head then return false end
    local hrpPos = head.Position
    for _, pl in ipairs(Players:GetPlayers()) do
        if pl ~= LocalPlayer and pl.Character and pl.Character:FindFirstChild("HumanoidRootPart") then
            if not shouldIgnorePlayerModel(pl.Character) then
                local d = (pl.Character.HumanoidRootPart.Position - hrpPos).Magnitude
                if d <= range then return true end
            end
        end
    end
    return false
end

local function executeWallCombo()
    local head = getHead()
    if not head then return end
    local now = tick()
    if now - lastWallComboTime < wallComboCooldown then return end
    if not hasValidTargetsForWallCombo(100) then return end
    lastWallComboTime = now
    local res
    local success = pcall(function()
        res = Core.Get("Combat","Hit").Box(nil, LocalPlayer.Character, {Size = Vector3.new(100,100,100)})
    end)
    if not success or not res then return end
    pcall(function()
        Core.Get("Combat","Ability").Activate(chars[charValue].WallCombo, res, head.Position + Vector3.new(0,0,2.5))
    end)
end

local function fireDash()
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    local now = tick()
    if now - lastDashTime < 0.1 then return end
    lastDashTime = now
    local args = {
        [1] = hrp.CFrame,
        [2] = "F",
        [3] = hrp.CFrame.LookVector,
        [5] = now
    }
    if ReplicatedStorage:FindFirstChild("Remotes") and ReplicatedStorage.Remotes:FindFirstChild("Character") and ReplicatedStorage.Remotes.Character:FindFirstChild("Dash") then
        ReplicatedStorage.Remotes.Character.Dash:FireServer(unpack(args))
    else
        pcall(function()
            ReplicatedStorage.Remotes.Character.Dash:FireServer(unpack(args))
        end)
    end
end

local function toggleWallCombo(state)
    wallComboEnabled = state
    if wallComboConn then wallComboConn:Disconnect(); wallComboConn = nil end
    if dashConn then dashConn:Disconnect(); dashConn = nil end
    if wallComboEnabled then
        wallComboConn = RunService.Heartbeat:Connect(function()
            executeWallCombo()
        end)
        dashConn = RunService.Heartbeat:Connect(function()
            fireDash()
        end)
    end
end

UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == wallComboKey then
        executeWallCombo()
    end
end)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Core = require(ReplicatedStorage:WaitForChild("Core"))
local LocalPlayer = Players.LocalPlayer

local Configs = {
    IgnoreFriends = false,
    MaxDistance = 100,
    Damage = 1,
    HealthLimit = 0,
    DashInterval = 0.7,
    AttackInterval = 0.1
}

local running = false
local conn
local lastDash = 0
local lastAttack = 0

local data = LocalPlayer:WaitForChild("Data")
local charValue = data:WaitForChild("Character")
local localCharacterName = charValue.Value
local ability = ReplicatedStorage:WaitForChild("Characters"):WaitForChild(localCharacterName):WaitForChild("WallCombo")
local AbilitiesRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Abilities"):WaitForChild("Ability")
local CombatRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Combat"):WaitForChild("Action")

local function getLocalRootPart()
    local c = LocalPlayer.Character
    return c and c:FindFirstChild("HumanoidRootPart")
end

local function triggerDash()
    if tick() - lastDash < Configs.DashInterval then return end
    lastDash = tick()
    local hrp = getLocalRootPart()
    if not hrp then return end
    local dashRemote = ReplicatedStorage.Remotes.Character:FindFirstChild("Dash")
    if dashRemote then
        pcall(function()
            dashRemote:FireServer(hrp.CFrame, "L", hrp.CFrame.LookVector, nil, tick())
        end)
    end
end

local function sendKillAura()
    if tick() - lastAttack < Configs.AttackInterval then return end
    lastAttack = tick()
    local localRootPart = getLocalRootPart()
    if not localRootPart then return end
    triggerDash()
    local maxDistSq = Configs.MaxDistance * Configs.MaxDistance
    for _, targetPlayer in ipairs(Players:GetPlayers()) do
        if targetPlayer ~= LocalPlayer then
            local targetChar = targetPlayer.Character
            if targetChar then
                local targetRootPart = targetChar:FindFirstChild("HumanoidRootPart")
                local targetHumanoid = targetChar:FindFirstChild("Humanoid")
                if targetRootPart and targetHumanoid and targetHumanoid.Health > Configs.HealthLimit then
                    if not (Configs.IgnoreFriends and LocalPlayer:IsFriendsWith(targetPlayer.UserId)) then
                        local delta = localRootPart.Position - targetRootPart.Position
                        if delta.Magnitude * delta.Magnitude <= maxDistSq then
                            pcall(function()
                                AbilitiesRemote:FireServer(ability, Configs.Damage, {}, targetRootPart.Position)
                            end)
                            pcall(function()
                                CombatRemote:FireServer(
                                    ability,
                                    localCharacterName .. ":WallCombo",
                                    2,
                                    Configs.Damage,
                                    {
                                        HitboxCFrames = {targetRootPart.CFrame, targetRootPart.CFrame},
                                        BestHitCharacter = targetChar,
                                        HitCharacters = {targetChar},
                                        Ignore = {},
                                        DeathInfo = {},
                                        BlockedCharacters = {},
                                        HitInfo = {IsFacing = false, IsInFront = true},
                                        ServerTime = os.time(),
                                        Actions = {
                                            ActionNumber1 = {
                                                [targetPlayer.Name] = {
                                                    StartCFrameStr = tostring(localRootPart.CFrame),
                                                    Local = true,
                                                    Collision = false,
                                                    Animation = "Punch1Hit",
                                                    Preset = "Punch",
                                                    Velocity = Vector3.zero,
                                                    FromPosition = targetRootPart.Position,
                                                    Seed = math.random(1,999999)
                                                }
                                            }
                                        },
                                        FromCFrame = targetRootPart.CFrame
                                    },
                                    "Action150",
                                    0
                                )
                            end)
                        end
                    end
                end
            end
        end
    end
end

local function startAura()
    if conn then conn:Disconnect() conn = nil end
    conn = RunService.Heartbeat:Connect(function()
        if running then
            sendKillAura()
        end
    end)
end

local function stopAura()
    if conn then conn:Disconnect() conn = nil end
end

Tab:Toggle({
    Flag = "23",
    Title = "killaura",
    Value = false,
    Callback = function(state)
        running = state
        if running then
            startAura()
        else
            stopAura()
        end
    end
})

Tab:Toggle({
    Flag = "24",
    Title = "killaura ignores friends",
    Value = false,
    Callback = function(state)
        Configs.IgnoreFriends = state
    end
})
Tab:Toggle({
    Flag = "25",
    Title = "spam wallcombo",
    Value = false,
    Callback = function(state)
        toggleWallCombo(state)
    end
})

Tab:Toggle({
    Flag = "26",
    Title = "spamwallcombo ignores friends",
    Value = false,
    Callback = function(state)
        ignoreFriends = state
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local CircleParts = {}
local Connection

local function RainbowColor(t)
    local r = math.sin(t) * 40 + 180
    local g = math.sin(t + 2) * 40 + 180
    local b = math.sin(t + 4) * 40 + 180
    return Color3.fromRGB(r, g, b)
end

Tab:Toggle({
    Flag = "27",
    Title = "spam wallcombo/killaura aura show",
    Value = false,
    Callback = function(state)
        local function CreateCircle(radius, segments, thickness)
            local parts = {}
            for i = 1, segments do
                local part = Instance.new("Part")
                part.Anchored = true
                part.CanCollide = false
                part.Material = Enum.Material.Neon
                part.Size = Vector3.new(thickness, 0.2, radius * 2 * math.pi / segments)
                part.Color = Color3.fromRGB(180,180,180)
                part.Parent = workspace
                table.insert(parts, part)
            end
            return parts
        end

        local function DestroyCircle()
            if Connection then
                Connection:Disconnect()
                Connection = nil
            end
            for _, part in ipairs(CircleParts) do
                if part and part.Parent then
                    part:Destroy()
                end
            end
            CircleParts = {}
        end

        if state then
            DestroyCircle()
            local radius = 60
            local segments = 60
            local thickness = 0.2
            CircleParts = CreateCircle(radius, segments, thickness)

            local time = 0
            local updateAccumulator = 0
            local updateRate = 1/60

            Connection = RunService.RenderStepped:Connect(function(dt)
                time = time + dt
                updateAccumulator = updateAccumulator + dt
                if updateAccumulator < updateRate then return end
                updateAccumulator = 0

                local char = LocalPlayer.Character
                if char and char:FindFirstChild("HumanoidRootPart") then
                    local rootPos = char.HumanoidRootPart.Position
                    local humanoid = char:FindFirstChild("Humanoid")
                    local heightOffset = humanoid and humanoid.HipHeight / 2 + 0.1 or 0.9 
                    local pos = rootPos - Vector3.new(0, heightOffset, 0)

                    for i, part in ipairs(CircleParts) do
                        local angle = (i / #CircleParts) * 2 * math.pi
                        local x = pos.X + math.cos(angle) * radius
                        local z = pos.Z + math.sin(angle) * radius
                        part.Position = Vector3.new(x, pos.Y, z)
                        part.Orientation = Vector3.new(0, -math.deg(angle), 0)
                        part.Color = RainbowColor(time + i * 0.1)
                    end
                end
            end)
        else
            DestroyCircle()
        end
    end
})

Tab:Button({
    Flag = "28",
    Title = "Delete the spam wallcombo special effects",
    Desc = "Click this function, you can't restore the wall special effects",
    Callback = function()
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local paths = {
            ReplicatedStorage.Characters.Gon.WallCombo.GonWallCombo.Center,
            ReplicatedStorage.Characters.Gon.WallCombo.GonWallCombo.Explosion,
            ReplicatedStorage.Characters.Gon.WallCombo.GonIntroHands,
            ReplicatedStorage.Characters.Mob.WallCombo.MobWallCombo.Center,
            ReplicatedStorage.Characters.Nanami.WallCombo.NanamiWallCombo.Center,
            ReplicatedStorage.Characters.Stark.WallCombo.StarkWallCombo.Center,
            ReplicatedStorage.Characters.Sukuna.WallCombo.SukunaTransformWallCombo,
            ReplicatedStorage.Characters.Sukuna.WallCombo.SukunaWallCombo
        }

        for _, obj in ipairs(paths) do
            if obj and obj:IsA("Instance") then
                for _, child in ipairs(obj:GetChildren()) do
                    child:Destroy()
                end
            end
        end
    end
})
Tab:Button({
    Flag = "29",
    Title = "Delete the kill emoticon effect",
    Desc = "Click delete to kill some special effects of the expression, which cannot be recovered",
    Callback = function()
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local KillEmote = ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote")

        local function removeEffects(obj)
            for _, child in ipairs(obj:GetChildren()) do
                if child:IsA("ParticleEmitter") 
                or child:IsA("Trail") 
                or child:IsA("Beam") 
                or child:IsA("Fire") 
                or child:IsA("Smoke") 
                or child:IsA("Sparkles") 
                or child:IsA("Light") then
                    child:Destroy()
                else
                    removeEffects(child)
                end
            end
        end

        removeEffects(KillEmote)
        print("KillEmote effects deleted (main body retained)")
    end
})
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local multiUseCutscenesToggle = ReplicatedStorage.Settings.Toggles.MultiUseCutscenes

local defaultValue = false

Tab:Toggle({
    Flag = "30",
    Title = "Esper's big move skill used many times",
    Value = multiUseCutscenesToggle.Value,
    Callback = function(state)
        if state then
            multiUseCutscenesToggle.Value = true
        else
            multiUseCutscenesToggle.Value = defaultValue
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local QEfly = true

local FLYING = false
local flyKeyDown, flyKeyUp, mobileFlyConn
local iyflyspeed = 2
local vehicleflyspeed = 2

local function getRoot(char)
    return char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
end

local function NOFLY()
    FLYING = false
    if flyKeyDown then flyKeyDown:Disconnect() flyKeyDown = nil end
    if flyKeyUp then flyKeyUp:Disconnect() flyKeyUp = nil end
    if mobileFlyConn then mobileFlyConn:Disconnect() mobileFlyConn = nil end
    local char = LocalPlayer.Character
    if char then
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        local root = getRoot(char)
        if humanoid then humanoid.PlatformStand = false end
        for _, v in pairs(root:GetChildren()) do
            if v:IsA("BodyGyro") or v:IsA("BodyVelocity") then
                v:Destroy()
            end
        end
    end
    pcall(function()
        workspace.CurrentCamera.CameraType = Enum.CameraType.Custom
    end)
end

local function sFLY(vfly)
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid") or char:WaitForChild("Humanoid")
    local root = getRoot(char)

    if flyKeyDown then flyKeyDown:Disconnect() end
    if flyKeyUp then flyKeyUp:Disconnect() end
    if mobileFlyConn then mobileFlyConn:Disconnect() end

    local CONTROL = {F=0,B=0,L=0,R=0,Q=0,E=0}

    local BG = Instance.new("BodyGyro")
    local BV = Instance.new("BodyVelocity")
    BG.P = 9e4
    BG.MaxTorque = Vector3.new(9e9,9e9,9e9)
    BG.CFrame = root.CFrame
    BG.Parent = root
    BV.MaxForce = Vector3.new(9e9,9e9,9e9)
    BV.Velocity = Vector3.new(0,0,0)
    BV.Parent = root

    FLYING = true

    flyKeyDown = UserInputService.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Keyboard then
            if input.KeyCode == Enum.KeyCode.W then CONTROL.F = iyflyspeed end
            if input.KeyCode == Enum.KeyCode.S then CONTROL.B = -iyflyspeed end
            if input.KeyCode == Enum.KeyCode.A then CONTROL.L = -iyflyspeed end
            if input.KeyCode == Enum.KeyCode.D then CONTROL.R = iyflyspeed end
            if input.KeyCode == Enum.KeyCode.E and QEfly then CONTROL.Q = iyflyspeed*2 end
            if input.KeyCode == Enum.KeyCode.Q and QEfly then CONTROL.E = -iyflyspeed*2 end
        end
    end)

    flyKeyUp = UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Keyboard then
            if input.KeyCode == Enum.KeyCode.W then CONTROL.F = 0 end
            if input.KeyCode == Enum.KeyCode.S then CONTROL.B = 0 end
            if input.KeyCode == Enum.KeyCode.A then CONTROL.L = 0 end
            if input.KeyCode == Enum.KeyCode.D then CONTROL.R = 0 end
            if input.KeyCode == Enum.KeyCode.E then CONTROL.Q = 0 end
            if input.KeyCode == Enum.KeyCode.Q then CONTROL.E = 0 end
        end
    end)

    mobileFlyConn = RunService.RenderStepped:Connect(function()
        if not FLYING then return end
        local camera = workspace.CurrentCamera
        local moveVector = Vector3.new(CONTROL.L+CONTROL.R, CONTROL.Q+CONTROL.E, CONTROL.F+CONTROL.B)

        local ok, controlModule = pcall(function()
            return require(LocalPlayer.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
        end)
        if ok and controlModule then
            local mv = controlModule:GetMoveVector()
            moveVector = Vector3.new(mv.X*(vfly and vehicleflyspeed or iyflyspeed), moveVector.Y, -mv.Z*(vfly and vehicleflyspeed or iyflyspeed))
        end

        BV.Velocity = (camera.CFrame.RightVector*moveVector.X + Vector3.new(0,moveVector.Y,0) + camera.CFrame.LookVector*moveVector.Z)*50
        BG.CFrame = camera.CFrame
        humanoid.PlatformStand = true
    end)
end

local function applyFly()
    sFLY()
    LocalPlayer.CharacterAdded:Connect(function()
        if FLY_TOGGLE_STATE then
            task.wait(0.5)
            sFLY()
        end
    end)
end

local FLY_TOGGLE_STATE = false

Tab:Toggle({
    Flag = "31",
    Title = "fly",
    Value = false,
    Callback = function(state)
        FLY_TOGGLE_STATE = state
        if state then
            applyFly()
        else
            NOFLY()
        end
    end
})

Tab:Slider({
    Flag = "32",
    Title = "fly speed",
    Value = {
        Min = 1,
        Max = 10,
        Default = 2
    },
    Callback = function(value)
        iyflyspeed = value
        vehicleflyspeed = value
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 100

Tab:Toggle({
    Flag = "33",
    Title = "tpwalk",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Flag = "34",
    Title = "tpwalk set",
    Value = {
        Min = 0,
        Max = 250,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})
Tab:Slider({
    Flag = "35",
    Title = "dash speed",
    Value = {
        Min = 0,
        Max = 1000,
        Default = 100,
    },
    Callback = function(value)
        game:GetService("ReplicatedStorage").Settings.Multipliers.DashSpeed.Value = value
    end
})

Tab:Slider({
    Flag = "36",
    Title = "jump power",
    Value = {
        Min = 0,
        Max = 1000,
        Default = 100,
    },
    Callback = function(value)
        game:GetService("ReplicatedStorage").Settings.Multipliers.JumpHeight.Value = value
    end
})

Tab:Slider({
    Flag = "37",
    Title = "melee speed",
    Value = {
        Min = 0,
        Max = 1000,
        Default = 100,
    },
    Callback = function(value)
        game:GetService("ReplicatedStorage").Settings.Multipliers.MeleeSpeed.Value = value
    end
})

local Players = game:GetService("Players")
local Tab = Window:Tab({
    Title = "hit box",
    Icon = "box",
    Locked = false,
})

local expansionMethod = "Add"
local hitboxX, hitboxY, hitboxZ = 0, 0, 0
local isHitboxExpanded = false
local hitModuleTable = nil
local originalBox = nil
local sizeModifier = Vector3.new(0, 0, 0)

local function setupHitboxHook()
    if hitModuleTable and hitModuleTable._boxSizeModifierHookInstalled then
        print("Hitbox hook already installed.")
        return true
    end
    
    local player = Players.LocalPlayer
    local playerScripts = player:WaitForChild("PlayerScripts")
    local combatFolder = playerScripts:WaitForChild("Combat")
    local hitModule = combatFolder:WaitForChild("Hit")
    
    hitModuleTable = require(hitModule)
    originalBox = hitModuleTable.Box
    
    hitModuleTable.Box = function(...)
        local args = {...}
        if args[3] and typeof(args[3]) == "table" then
            local config = args[3]
            if config.Size and typeof(config.Size) == "Vector3" then
                if not config._originalSize then
                    config._originalSize = config.Size
                end
                if expansionMethod == "Set" then
                    config.Size = sizeModifier
                elseif expansionMethod == "Add" then
                    config.Size = config._originalSize + sizeModifier
                end
            end
            return originalBox(...)
        else
            return originalBox(...)
        end
    end
    hitModuleTable._boxSizeModifierHookInstalled = true
    return true
end

local function applySigmaHitbox(x, y, z)
    if not setupHitboxHook() then
        warn("Failed to setup hitbox hook!")
        return
    end
    sizeModifier = Vector3.new(x, y, z)
    print("Sigma hitbox expansion applied:", sizeModifier)
end

Tab:Input({
    Title = "X",
    Value = "0",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入一个数字...",
    Callback = function(input)
        hitboxX = tonumber(input) or 0
        print("Hitbox X vector set to:", hitboxX)
    end
})

Tab:Input({
    Title = "Y",
    Value = "0",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入一个数字...",
    Callback = function(input)
        hitboxY = tonumber(input) or 0
        print("Hitbox Y vector set to:", hitboxY)
    end
})

Tab:Input({
    Title = "Z",
    Value = "0",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入一个数字...",
    Callback = function(input)
        hitboxZ = tonumber(input) or 0
        print("Hitbox Z vector set to:", hitboxZ)
    end
})

Tab:Dropdown({
    Title = "Extension method",
    Values = {"Add", "Set"},
    Value = "Add",
    Multi = false,
    AllowNone = false,
    Callback = function(option)
        expansionMethod = option
        print("Hitbox method set to:", expansionMethod)
    end
})

Tab:Button({
    Title = "Apply collision box modification",
    Desc = nil,
    Locked = false,
    Callback = function()
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

Tab:Button({
    Title = "Slight expansion(5)",
    Desc = nil,
    Locked = false,
    Callback = function()
        hitboxX, hitboxY, hitboxZ = 5, 5, 5
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

Tab:Button({
    Title = "Mesomorphic extension(10)",
    Desc = nil,
    Locked = false,
    Callback = function()
        hitboxX, hitboxY, hitboxZ = 10, 10, 10
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})

Tab:Button({
    Title = "Large expansion(20)",
    Desc = nil,
    Locked = false,
    Callback = function()
        hitboxX, hitboxY, hitboxZ = 20, 20, 20
        applySigmaHitbox(hitboxX, hitboxY, hitboxZ)
        isHitboxExpanded = true
    end
})
local LockTab = Window:Tab({
    Title = "Lock player",
    Icon = "target",
    Locked = false,
})

local Players    = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer

local BEHIND_DISTANCE = 5

local followEnabled   = false
local circleEnabled   = false
local lookEnabled     = false

local selectedTargetName = nil

local followConnection  = nil
local circleConnection  = nil
local lookConnection    = nil

local circleRadius = 6
local circleSpeed  = 13
local circleAngle  = 0

local function getHRP(player)
    if player and player.Character then
        return player.Character:FindFirstChild("HumanoidRootPart")
    end
end

local function getPlayerByName(name)
    for _, p in pairs(Players:GetPlayers()) do
        if p.Name == name then
            return p
        end
    end
end

local function startFollow()
    followConnection = RunService.RenderStepped:Connect(function()
        if not followEnabled then return end
        local myHRP   = getHRP(localPlayer)
        local target  = getPlayerByName(selectedTargetName)
        local targetHRP = target and getHRP(target)
        if myHRP and targetHRP then
            local pos = targetHRP.Position - targetHRP.CFrame.LookVector * BEHIND_DISTANCE
            myHRP.CFrame = CFrame.new(pos.X, targetHRP.Position.Y, pos.Z)
        end
    end)
end

local function startCircle()
    circleConnection = RunService.RenderStepped:Connect(function(dt)
        if not circleEnabled then return end
        local myHRP   = getHRP(localPlayer)
        local target  = getPlayerByName(selectedTargetName)
        local targetHRP = target and getHRP(target)
        if myHRP and targetHRP then
            circleAngle = circleAngle + circleSpeed * dt
            local x = math.cos(circleAngle) * circleRadius
            local z = math.sin(circleAngle) * circleRadius
            local p = targetHRP.Position + Vector3.new(x, 0, z)
            myHRP.CFrame = CFrame.new(p.X, targetHRP.Position.Y, p.Z)
        end
    end)
end

local function startLook()
    lookConnection = RunService.RenderStepped:Connect(function()
        if not lookEnabled then return end
        local myHRP   = getHRP(localPlayer)
        local target  = getPlayerByName(selectedTargetName)
        local targetHRP = target and getHRP(target)
        if myHRP and targetHRP then
            local myPos = myHRP.Position
            local tp    = targetHRP.Position
            myHRP.CFrame = CFrame.new(myPos, Vector3.new(tp.X, myPos.Y, tp.Z))
        end
    end)
end

local function stopConnections()
    if followConnection then followConnection:Disconnect() end
    if circleConnection then circleConnection:Disconnect() end
    if lookConnection   then lookConnection:Disconnect()   end
    followConnection = nil
    circleConnection = nil
    lookConnection   = nil
    circleAngle      = 0
end

local playerDropdown = LockTab:Dropdown({
    Title = "Select the target player",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = (function()
        local names = {}
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= localPlayer then
                table.insert(names, p.Name)
            end
        end
        return names
    end)(),
    Callback = function(name)
        selectedTargetName = name
    end
})

LockTab:Button({
    Title = "Refresh the player list",
    Callback = function()
        selectedTargetName = nil
        playerDropdown:Destroy()
        playerDropdown = LockTab:Dropdown({
            Title = "Select the target player",
            Multi = false,
            AllowNone = false,
            Value = nil,
            Values = (function()
                local names = {}
                for _, p in ipairs(Players:GetPlayers()) do
                    if p ~= localPlayer then
                        table.insert(names, p.Name)
                    end
                end
                return names
            end)(),
            Callback = function(name)
                selectedTargetName = name
            end
        })
    end
})

LockTab:Toggle({
    Title = "Lock back",
    Value = false,
    Callback = function(state)
        followEnabled = state
        if state and not followConnection then startFollow() end
        if not state then stopConnections() end
    end
})

LockTab:Toggle({
    Title = "circle",
    Value = false,
    Callback = function(state)
        circleEnabled = state
        if state and not circleConnection then startCircle() end
        if not state then stopConnections() end
    end
})

LockTab:Toggle({
    Title = "look at player(Need to close the shift lock)",
    Value = false,
    Callback = function(state)
        lookEnabled = state
        if state and not lookConnection then startLook() end
        if not state then stopConnections() end
    end
})
local lightningCharacterSwapTab = Window:Tab({
    Title = "Fast switching role function",
    Icon = "bird",
    Locked = false,
})

local lastPosition

local function getHumanoidRootPart()
    local character = LocalPlayer.Character
    return character and character:FindFirstChild("HumanoidRootPart")
end

local function savePosition()
    local rootPart = getHumanoidRootPart()
    if rootPart then
        lastPosition = rootPart.CFrame
    end
end

local function handleKeyPress(characterName)
    savePosition()
    
    local rootPart = getHumanoidRootPart()
    if rootPart then
        rootPart.CFrame = CFrame.new(1011.1289672851562, -1009.359588623046875, 116.37605285644531)
    end

    ReplicatedStorage.Remotes.Character.ChangeCharacter:FireServer(characterName)

    local groundY = workspace.Map.Structural.Ground:GetChildren()[21].Position.Y
    repeat task.wait() until getHumanoidRootPart() and getHumanoidRootPart().Position.Y > groundY
    task.wait(0.15)

    local newRootPart = getHumanoidRootPart()
    if newRootPart and lastPosition then
        repeat
            newRootPart.CFrame = lastPosition
            task.wait(0.1)
        until (newRootPart.Position - lastPosition.Position).Magnitude < 10
    end
end

lightningCharacterSwapTab:Button({
    Title = "Quickly switch to mob",
    Locked = false,
    Callback = function() handleKeyPress("Gon") end
})

lightningCharacterSwapTab:Button({
    Title = "Quick switch to nanami",
    Locked = false,
    Callback = function() handleKeyPress("Nanami") end
})

lightningCharacterSwapTab:Button({
    Title = "Quick switch to esper",
    Locked = false,
    Callback = function() handleKeyPress("Mob") end
})
local env = {}
env.ReplicatedStorage = game:GetService("ReplicatedStorage")
env.Players = game:GetService("Players")
env.LocalPlayer = env.Players.LocalPlayer
env.core = require(env.ReplicatedStorage:WaitForChild("Core"))
env.Character = env.LocalPlayer.Character
env.HumanoidRootPart = env.Character and env.Character:WaitForChild("HumanoidRootPart")
env.orbitToggle = nil
env.fakeWallToggle = nil
env.serverStatus = "goodstate"

local forceKillEmoteTab = Window:Tab({
    Title = "kill emote feature",
    Icon = "smile",
    Locked = false,
})

local killEmotes = {}
local isAuraMode = false
local isSpammingSelectedEmote = false
local auraDelay = 0.5
local spamDelay = 0.5
local selectedEmote = ""
local selectedKeybind = Enum.KeyCode.G
local emoteDropdown
local UserInputService = game:GetService("UserInputService")

local function getRoot(char)
    return char and char:FindFirstChild("HumanoidRootPart")
end

local function useEmote(emoteName)
    local emoteModule = env.ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote"):FindFirstChild(emoteName)
    local myRoot = getRoot(env.LocalPlayer.Character)
    if not myRoot then return end
    local closestTarget = nil
    local shortestDistance = math.huge
    for _, player in pairs(env.Players:GetPlayers()) do
        if player ~= env.LocalPlayer and player.Character then
            local targetRoot = getRoot(player.Character)
            if targetRoot then
                local distance = (myRoot.Position - targetRoot.Position).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    closestTarget = player.Character
                end
            end
        end
    end
    if closestTarget and emoteModule then
        task.spawn(function()
            _G.KillEmote = true
            pcall(function()
                if env.core and env.core.Get then
                    env.core.Get("Combat", "Ability").Activate(emoteModule, closestTarget)
                end
            end)
            _G.KillEmote = false
        end)
    end
end

local function useRandomEmote()
    if #killEmotes > 0 then
        local randomEmote = killEmotes[math.random(1, #killEmotes)]
        useEmote(randomEmote)
    end
end

task.spawn(function()
    while true do
        if isAuraMode then
            useRandomEmote()
            task.wait(auraDelay)
        else
            task.wait(0.1)
        end
    end
end)

task.spawn(function()
    while true do
        if isSpammingSelectedEmote and selectedEmote ~= "" then
            useEmote(selectedEmote)
            task.wait(spamDelay)
        else
            task.wait(0.1)
        end
    end
end)

UserInputService.InputBegan:Connect(function(input, isGameProcessed)
    if isGameProcessed then return end
    if input.KeyCode == selectedKeybind and selectedEmote ~= "" then
        useEmote(selectedEmote)
    end
end)

local function createOrUpdateEmoteDropdown(emoteList)
    local values = emoteList
    if not values or #values == 0 then
        values = {"no emotes found"}
    end
    emoteDropdown = forceKillEmoteTab:Dropdown({
        Title = "kill emote feature (need to be near others)",
        Values = values,
        Multi = false,
        AllowNone = false,
        Callback = function(option)
            if option ~= "no emotes found" then
                selectedEmote = option
                useEmote(option)
            end
        end
    })
end

forceKillEmoteTab:Button({
    Title = "refresh kill emotes",
    Desc = "refresh available kill emotes",
    Callback = function()
        local currentEmotes = {}
        for _, emote in pairs(env.ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote"):GetChildren()) do
            table.insert(currentEmotes, emote.Name)
        end
        killEmotes = currentEmotes
        createOrUpdateEmoteDropdown(killEmotes)
    end
})

for _, emote in pairs(env.ReplicatedStorage:WaitForChild("Cosmetics"):WaitForChild("KillEmote"):GetChildren()) do
    table.insert(killEmotes, emote.Name)
end

createOrUpdateEmoteDropdown(killEmotes)

forceKillEmoteTab:Toggle({
    Title = "kill emote aura",
    Desc = "continuously use random kill emote on nearby players",
    Icon = "bird",
    Type = "Checkbox",
    Default = false,
    Callback = function(isEnabled)
        isAuraMode = isEnabled
    end
})

forceKillEmoteTab:Slider({
    Title = "kill emote aura interval",
    Step = 0.01,
    Value = { Min = 0.01, Max = 5.0, Default = 0.5 },
    Callback = function(value)
        auraDelay = value
    end
})

forceKillEmoteTab:Toggle({
    Title = "spam selected emote",
    Desc = "continuously use selected emote",
    Icon = "bird",
    Type = "Checkbox",
    Default = false,
    Callback = function(isEnabled)
        isSpammingSelectedEmote = isEnabled
    end
})

forceKillEmoteTab:Slider({
    Title = "selected emote speed",
    Step = 0.01,
    Value = { Min = 0.01, Max = 5.0, Default = 0.5 },
    Callback = function(value)
        spamDelay = value
    end
})

local emoteKeybindOptions = { "G", "F", "H", "J", "K", "L", "Z", "X", "C", "V", "B", "N", "M", "Q", "E", "R", "T", "Y", "U", "I", "O", "P" }
local emoteKeybindMap = {
    ["G"] = Enum.KeyCode.G, ["F"] = Enum.KeyCode.F, ["H"] = Enum.KeyCode.H,
    ["J"] = Enum.KeyCode.J, ["K"] = Enum.KeyCode.K, ["L"] = Enum.KeyCode.L,
    ["Z"] = Enum.KeyCode.Z, ["X"] = Enum.KeyCode.X, ["C"] = Enum.KeyCode.C,
    ["V"] = Enum.KeyCode.V, ["B"] = Enum.KeyCode.B, ["N"] = Enum.KeyCode.N,
    ["M"] = Enum.KeyCode.M, ["Q"] = Enum.KeyCode.Q, ["E"] = Enum.KeyCode.E,
    ["R"] = Enum.KeyCode.R, ["T"] = Enum.KeyCode.T, ["Y"] = Enum.KeyCode.Y,
    ["U"] = Enum.KeyCode.U, ["I"] = Enum.KeyCode.I, ["O"] = Enum.KeyCode.O,
    ["P"] = Enum.KeyCode.P
}

forceKillEmoteTab:Dropdown({
    Title = "keybind setting",
    Values = emoteKeybindOptions,
    Value = "G",
    Multi = false,
    AllowNone = false,
    Callback = function(option)
        selectedKeybind = emoteKeybindMap[option]
    end
})

forceKillEmoteTab:Button({
    Title = "use random kill emote",
    Desc = "literal meaning",
    Locked = false,
    Callback = function()
        useRandomEmote()
    end
})
local Tab = Window:Tab({
    Title = "settings",
    Icon = "settings",
    Locked = false,
})

local ConfigUsageSection = Tab:Section({
    Title = "config system",
    Icon = "folder-cog",
})

local ConfigManager = Window.ConfigManager
local ConfigName = "default"

local ConfigNameInput = ConfigUsageSection:Input({
    Title = "config name",
    Icon = "file-cog",
    Callback = function(value)
        ConfigName = value
    end
})

ConfigUsageSection:Space()

local AutoLoadToggle = ConfigUsageSection:Toggle({
    Title = "auto load this config",
    Value = false,
    Callback = function(v)
        Window.CurrentConfig:SetAutoLoad(v)
    end
})

ConfigUsageSection:Space()

local AllConfigs = ConfigManager:AllConfigs()
local DefaultValue = table.find(AllConfigs, ConfigName) and ConfigName or nil

local AllConfigsDropdown = ConfigUsageSection:Dropdown({
    Title = "all configs",
    Desc = "select existing config",
    Values = AllConfigs,
    Value = DefaultValue,
    Callback = function(value)
        ConfigName = value
        ConfigNameInput:Set(value)
        AutoLoadToggle:Set(ConfigManager:GetConfig(ConfigName).AutoLoad or false)
    end
})

ConfigUsageSection:Space()

ConfigUsageSection:Button({
    Title = "save config",
    Justify = "Center",
    Callback = function()
        Window.CurrentConfig = ConfigManager:Config(ConfigName)
        if Window.CurrentConfig:Save() then
            WindUI:Notify({
                Title = "saved",
                Desc = "config '" .. ConfigName .. "' saved",
                Icon = "check",
            })
        end
        
        AllConfigsDropdown:Refresh(ConfigManager:AllConfigs())
    end
})

ConfigUsageSection:Space()

ConfigUsageSection:Button({
    Title = "load config",
    Justify = "Center",
    Callback = function()
        Window.CurrentConfig = ConfigManager:CreateConfig(ConfigName)
        if Window.CurrentConfig:Load() then
            WindUI:Notify({
                Title = "loaded",
                Desc = "config '" .. ConfigName .. "' loaded",
                Icon = "refresh-cw",
            })
        end
    end
})

ConfigUsageSection:Space()

ConfigUsageSection:Button({
    Title = "print auto load configs",
    Justify = "Center",
    Callback = function()
        print(HttpService:JSONDecode(ConfigManager:GetAutoLoadConfigs()))
    end
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "switch ui color",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})

end
local function legend()
local Tab = Window:Tab({
    Title = "无限闪",
    Icon = "sword",
    Locked = false,
})
local RunService = game:GetService("RunService")

local function ClearDashCooldown()
    for _, v in pairs(getgc(true)) do
        if type(v) == "table" then
            if rawget(v, "SideDash") then
                v.SideDash = 0
            end
            if rawget(v, "FrontBackDash") then
                v.FrontBackDash = 0
            end
        end
    end
end

Tab:Button({
    Title = "无限侧闪(冲刺没用)",
    Desc = "每次重生点一次功能才会生效",
    Callback = function()
        ClearDashCooldown()
    end
})
Tab:Button({
    Title = "汉化飞行",
    Desc = nil,
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/fly/main/README.md"))()
    end
})
Tab:Button({
    Title = "全部甩飞",
    Callback = function()
    loadstring(game:HttpGet("https://pastebin.com/raw/zqyDSUWX"))()
    end
    })
Tab:Button({
    Title = "m1重置",
    Callback = function()
    local Lighting = game:GetService("Lighting")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local TweenService = game:GetService("TweenService")
local camera = game.Workspace.CurrentCamera

local player = LocalPlayer
local rotationEnabled = false
local isPerformingAction = false

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "CombinedMiniUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 160, 0, 140)
frame.Position = UDim2.new(0.5, -80, 0.3, 0)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.AnchorPoint = Vector2.new(0.5, 0)

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)
local stroke = Instance.new("UIStroke", frame)
stroke.Color = Color3.fromRGB(80, 80, 80)
stroke.Thickness = 1.2

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 24)
title.BackgroundTransparency = 1
title.Text = "M1重置"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 15
title.Font = Enum.Font.GothamSemibold

local btnM1Reset = Instance.new("TextButton", frame)
btnM1Reset.Size = UDim2.new(1, -20, 0, 26)
btnM1Reset.Position = UDim2.new(0, 10, 0, 30)
btnM1Reset.Text = "M1重置"
btnM1Reset.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
btnM1Reset.TextColor3 = Color3.new(1, 1, 1)
btnM1Reset.TextSize = 14
btnM1Reset.Font = Enum.Font.Gotham
Instance.new("UICorner", btnM1Reset).CornerRadius = UDim.new(0, 6)

local btnRotateToggle = Instance.new("TextButton", frame)
btnRotateToggle.Size = UDim2.new(1, -20, 0, 26)
btnRotateToggle.Position = UDim2.new(0, 10, 0, 64)
btnRotateToggle.Text = "是否自动转向: OFF"
btnRotateToggle.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
btnRotateToggle.TextColor3 = Color3.new(1, 1, 1)
btnRotateToggle.TextSize = 14
btnRotateToggle.Font = Enum.Font.Gotham
Instance.new("UICorner", btnRotateToggle).CornerRadius = UDim.new(0, 6)

local destroyBtn = Instance.new("TextButton", frame)
destroyBtn.Size = UDim2.new(1, -20, 0, 26)
destroyBtn.Position = UDim2.new(0, 10, 0, 98)
destroyBtn.Text = "销毁界面"
destroyBtn.BackgroundColor3 = Color3.fromRGB(120, 40, 40)
destroyBtn.TextColor3 = Color3.new(1, 1, 1)
destroyBtn.TextSize = 14
destroyBtn.Font = Enum.Font.Gotham
Instance.new("UICorner", destroyBtn).CornerRadius = UDim.new(0, 6)

destroyBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

local animationCache = {}
local function getCharacter()
    local character = player.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")
    return character, humanoid
end

local function playAnimation(animationId)
    local _, humanoid = getCharacter()
    if not humanoid then return end
    local animator = humanoid:FindFirstChildOfClass("Animator")
    if not animator then
        animator = Instance.new("Animator")
        animator.Parent = humanoid
    end
    local animation = animationCache[animationId]
    if not animation then
        animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://" .. tostring(animationId)
        animationCache[animationId] = animation
    end
    local animTrack = animator:LoadAnimation(animation)
    animTrack.Priority = Enum.AnimationPriority.Action
    animTrack:Play()
    animTrack:AdjustSpeed(1.1)
    return animTrack
end

local function rotateCharacter(degrees)
    if isPerformingAction or not rotationEnabled then return end
    isPerformingAction = true
    local character, _ = getCharacter()
    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
    if rootPart then
        rootPart.CFrame = rootPart.CFrame * CFrame.Angles(0, math.rad(degrees), 0)
        local camPos = camera.CFrame.Position
        local camY = camPos.Y
        local distanceVec = camPos - rootPart.Position
        local flatVec = Vector3.new(distanceVec.X, 0, distanceVec.Z)
        local rotatedVec = CFrame.fromAxisAngle(Vector3.yAxis, math.rad(degrees)) * flatVec
        local newCamPos = rootPart.Position + rotatedVec
        camera.CFrame = CFrame.lookAt(Vector3.new(newCamPos.X, camY, newCamPos.Z), rootPart.Position)
    end
    isPerformingAction = false
end

local function sideDash(direction, distance, duration)
    if isPerformingAction then return end
    isPerformingAction = true
    local character, _ = getCharacter()
    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
    if rootPart then
        local tween = TweenService:Create(rootPart, TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {CFrame = rootPart.CFrame * CFrame.new(direction * distance, 0, 0)})
        tween:Play()
        tween.Completed:Wait()
        tween:Destroy()
    end
    isPerformingAction = false
end

local function impulseDash(direction, distance, height, power, duration)
    if isPerformingAction then return end
    isPerformingAction = true
    local character, _ = getCharacter()
    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
    if rootPart then
        local force = Instance.new("BodyVelocity")
        force.Velocity = (rootPart.CFrame.RightVector * direction * distance + Vector3.new(0, height, 0)).Unit * power
        force.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        force.Parent = rootPart
        task.delay(duration, function()
            force:Destroy()
        end)
    end
    isPerformingAction = false
end

local function Stopallanimation()
    local _, humanoid = getCharacter()
    if humanoid then
        local animator = humanoid:FindFirstChildOfClass("Animator")
        if animator then
            local success, tracks = pcall(function()
                return animator:GetPlayingAnimationTracks()
            end)
            if success and tracks then
                for _, track in ipairs(tracks) do
                    track:Stop()
                end
            end
        end
    end
end

local function updateRotationButton()
    btnRotateToggle.Text = "是否自动转向: " .. (rotationEnabled and "ON" or "OFF")
end

btnM1Reset.MouseButton1Click:Connect(function()
    task.spawn(function()
        pcall(function()
            Stopallanimation()
            playAnimation(10480793962)
            playAnimation(16128726954)
            sideDash(1, 25.5, 0.24)
            rotateCharacter(65)
            task.wait(0.004)
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Q, false, game)
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Q, false, game)
        end)
    end)
end)

btnRotateToggle.MouseButton1Click:Connect(function()
    rotationEnabled = not rotationEnabled
    updateRotationButton()
end)

updateRotationButton()

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed or UserInputService:GetFocusedTextBox() then return end
    if input.KeyCode == Enum.KeyCode.F then
        task.spawn(function()
            pcall(function()
                Stopallanimation()
                playAnimation(10480793962)
                playAnimation(16128726954)
                sideDash(1, 25.5, 0.24)
                rotateCharacter(65)
                task.wait(0.004)
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Q, false, game)
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Q, false, game)
            end)
        end)
    end
end)
end
})
Tab:Button({
    Title = "自动上勾拳接冲刺",
    Callback = function()
    local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local LOCK_RANGE = 300

LocalPlayer.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart")
end)

local function GetClosestPart()
    local closestPart, shortest = nil, LOCK_RANGE
    local hrp = Character and Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return nil end

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("Model") and obj ~= Character then
            local hum = obj:FindFirstChildOfClass("Humanoid")
            if hum and hum.Health > 0 then
                local part = obj:FindFirstChild("HumanoidRootPart") or obj:FindFirstChildWhichIsA("BasePart")
                if part then
                    local d = (hrp.Position - part.Position).Magnitude
                    if d < shortest then
                        shortest, closestPart = d, part
                    end
                end
            end
        end
    end
    return closestPart
end

local running = false
local spinConn
local buttonCooldown = false

local function PerformLoopDash()
    if running then return end
    running = true
    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
    local targetPart = GetClosestPart()

    -- 触发ShiftLock两次
    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.RightShift, false, game)
    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.RightShift, false, game)
    task.delay(0.8, function()
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.RightShift, false, game)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.RightShift, false, game)
    end)

    for i = 1, 3 do
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Q, false, game)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Q, false, game)
        task.wait(0.05)
    end

    local spinTime = 0
    local spinDuration = 0.3
    local lockStart = 0.26
    local lockDuration = 0.35

    spinConn = RunService.RenderStepped:Connect(function(dt)
        spinTime += dt

        if spinTime < spinDuration then
            local angle = math.rad(360) * (dt / spinDuration)
            HumanoidRootPart.CFrame = HumanoidRootPart.CFrame * CFrame.Angles(0, angle, 0)
        end

        if targetPart and spinTime >= lockStart and spinTime <= (lockStart + lockDuration) then
            local lookAt = Vector3.new(targetPart.Position.X, HumanoidRootPart.Position.Y, targetPart.Position.Z)
            HumanoidRootPart.CFrame = CFrame.new(HumanoidRootPart.Position, lookAt)
        end

        if spinTime >= (lockStart + lockDuration) and spinTime >= spinDuration then
            spinConn:Disconnect()
            running = false
        end
    end)
end

-- 悬浮窗
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LoopDashGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 140, 0, 50)
Frame.Position = UDim2.new(0.5, -70, 0.5, -25)
Frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui
Frame.Active = true
Frame.Draggable = true

local Button = Instance.new("TextButton")
Button.Size = UDim2.new(1, -10, 1, -10)
Button.Position = UDim2.new(0, 5, 0, 5)
Button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
Button.BorderSizePixel = 0
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.Text = "上勾拳接冲刺"
Button.Parent = Frame

Button.MouseButton1Click:Connect(function()
    if buttonCooldown then return end
    buttonCooldown = true
    PerformLoopDash()
    task.delay(2, function()
        buttonCooldown = false
    end)
end)

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 20, 0, 20)
CloseButton.Position = UDim2.new(1, -22, 0, 2)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.Text = "X"
CloseButton.TextSize = 14
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BorderSizePixel = 0
CloseButton.Parent = Frame

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)
    end
    })
local originalData = {}
local skyBackup = nil

Tab:Toggle({
    Title = "防卡顿",
    Value = false,
    Callback = function(state)
        if state then
            originalData = {}
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Explosion") then
                    originalData[v] = v.Enabled
                    v.Enabled = false
                elseif v:IsA("Decal") or v:IsA("Texture") then
                    originalData[v] = v.Transparency
                    v.Transparency = 1
                elseif v:IsA("MeshPart") or v:IsA("UnionOperation") or v:IsA("Part") then
                    if v.Name ~= "HumanoidRootPart" then
                        originalData[v] = v.Material
                        v.Material = Enum.Material.SmoothPlastic
                    end
                elseif v:IsA("SurfaceGui") or v:IsA("BillboardGui") or v:IsA("Beam") then
                    if v:IsA("Beam") then
                        originalData[v] = v.Enabled
                        v.Enabled = false
                    else
                        originalData[v] = v.Enabled ~= nil and v.Enabled or true
                        if v.Enabled ~= nil then
                            v.Enabled = false
                        end
                    end
                end
            end
            originalData["GlobalShadows"] = game.Lighting.GlobalShadows
            originalData["FogEnd"] = game.Lighting.FogEnd
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 9e9
            local sky = game.Lighting:FindFirstChildOfClass("Sky")
            if sky then
                skyBackup = sky:Clone()
                sky:Destroy()
            end
            local newSky = Instance.new("Sky")
            newSky.SkyboxBk = ""
            newSky.SkyboxDn = ""
            newSky.SkyboxFt = ""
            newSky.SkyboxLf = ""
            newSky.SkyboxRt = ""
            newSky.SkyboxUp = ""
            newSky.SunAngularSize = 0
            newSky.MoonAngularSize = 0
            newSky.Parent = game.Lighting
            game.Lighting.Ambient = Color3.fromRGB(128,128,128)
            game.Lighting.OutdoorAmbient = Color3.fromRGB(128,128,128)
        else
            for obj, value in pairs(originalData) do
                if typeof(obj) == "Instance" and obj.Parent then
                    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Explosion") then
                        obj.Enabled = value
                    elseif obj:IsA("Decal") or obj:IsA("Texture") then
                        obj.Transparency = value
                    elseif obj:IsA("MeshPart") or obj:IsA("UnionOperation") or obj:IsA("Part") then
                        obj.Material = value
                    elseif obj:IsA("SurfaceGui") or obj:IsA("BillboardGui") or obj:IsA("Beam") then
                        if obj:IsA("Beam") then
                            obj.Enabled = value
                        elseif obj.Enabled ~= nil then
                            obj.Enabled = value
                        end
                    end
                elseif obj == "GlobalShadows" then
                    game.Lighting.GlobalShadows = value
                elseif obj == "FogEnd" then
                    game.Lighting.FogEnd = value
                end
            end
            if skyBackup then
                local currentSky = game.Lighting:FindFirstChildOfClass("Sky")
                if currentSky then
                    currentSky:Destroy()
                end
                skyBackup.Parent = game.Lighting
                skyBackup = nil
            end
            originalData = {}
        end
    end
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 100

Tab:Toggle({
    Title = "速度",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Title = "速度调节",
    Value = {
        Min = 0,
        Max = 250,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})
local LockTab = Window:Tab({
    Title = "锁人",
    Icon = "target",
    Locked = false,
})

local localPlayer = Players.LocalPlayer
local BEHIND_DISTANCE = 5
local circleRadius = 6
local circleSpeed = 13
local circleAngle = 0
local followEnabled = false
local circleEnabled = false
local lookEnabled = false
local selectedTargetName = nil

local function getHRP(p)
    if p and p.Character then
        return p.Character:FindFirstChild("HumanoidRootPart")
    end
end

local function getPlayerByName(name)
    for _, plr in pairs(Players:GetPlayers()) do
        if plr.Name == name then
            return plr
        end
    end
end

local playerDropdown

RunService.RenderStepped:Connect(function(dt)
    local myHRP = getHRP(localPlayer)
    local target = getPlayerByName(selectedTargetName)
    local targetHRP = target and getHRP(target)
    if not (myHRP and targetHRP) then return end

    if followEnabled then
        local pos = targetHRP.Position - targetHRP.CFrame.LookVector * BEHIND_DISTANCE
        if lookEnabled then
            myHRP.CFrame = CFrame.new(pos, Vector3.new(targetHRP.Position.X, pos.Y, targetHRP.Position.Z))
        else
            myHRP.CFrame = CFrame.new(pos.X, targetHRP.Position.Y, pos.Z)
        end
    elseif circleEnabled then
        circleAngle = circleAngle + circleSpeed * dt
        local x = math.cos(circleAngle) * circleRadius
        local z = math.sin(circleAngle) * circleRadius
        local p = targetHRP.Position + Vector3.new(x, 0, z)
        if lookEnabled then
            myHRP.CFrame = CFrame.new(p, Vector3.new(targetHRP.Position.X, p.Y, targetHRP.Position.Z))
        else
            myHRP.CFrame = CFrame.new(p.X, targetHRP.Position.Y, p.Z)
        end
    elseif lookEnabled then
        local myPos = myHRP.Position
        local tp = targetHRP.Position
        myHRP.CFrame = CFrame.new(myPos, Vector3.new(tp.X, myPos.Y, tp.Z))
    end
end)

playerDropdown = LockTab:Dropdown({
    Title = "选择目标玩家",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = (function()
        local names = {}
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= localPlayer then
                table.insert(names, p.Name)
            end
        end
        return names
    end)(),
    Callback = function(name)
        selectedTargetName = name
    end
})

LockTab:Button({
    Title = "刷新玩家列表",
    Callback = function()
        selectedTargetName = nil
        if playerDropdown then
            playerDropdown:Destroy()
        end
        playerDropdown = LockTab:Dropdown({
            Title = "选择目标玩家",
            Multi = false,
            AllowNone = false,
            Value = nil,
            Values = (function()
                local names = {}
                for _, p in ipairs(Players:GetPlayers()) do
                    if p ~= localPlayer then
                        table.insert(names, p.Name)
                    end
                end
                return names
            end)(),
            Callback = function(name)
                selectedTargetName = name
            end
        })
    end
})

LockTab:Toggle({
    Title = "锁背",
    Value = false,
    Callback = function(state)
        followEnabled = state
        if state then circleEnabled = false end
    end
})

LockTab:Toggle({
    Title = "转圈",
    Value = false,
    Callback = function(state)
        circleEnabled = state
        if state then followEnabled = false end
    end
})

LockTab:Toggle({
    Title = "看着玩家",
    Value = false,
    Callback = function(state)
        lookEnabled = state
    end
})
local Tab = Window:Tab({
    Title = "设置",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "更改ui颜色",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function legendeng()
local Tab = Window:Tab({
    Title = "no dash cooldown",
    Icon = "sword",
    Locked = false,
})
local RunService = game:GetService("RunService")

local function ClearDashCooldown()
    for _, v in pairs(getgc(true)) do
        if type(v) == "table" then
            if rawget(v, "SideDash") then
                v.SideDash = 0
            end
            if rawget(v, "FrontBackDash") then
                v.FrontBackDash = 0
            end
        end
    end
end

Tab:Button({
    Title = "no dash cooldown(front dash is no work)",
    Desc = "Please click once every time you are reborn to have an effect",
    Callback = function()
        ClearDashCooldown()
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 100

Tab:Toggle({
    Title = "tpwalk",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Title = "tpwalk set",
    Value = {
        Min = 0,
        Max = 250,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})
local LockTab = Window:Tab({
    Title = "lock player",
    Icon = "target",
    Locked = false,
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer

local BEHIND_DISTANCE = 5
local circleRadius = 6
local circleSpeed = 13
local circleAngle = 0

local followEnabled = false
local circleEnabled = false
local lookEnabled = false
local selectedTargetName = nil

local function getHRP(p)
    if p and p.Character then
        return p.Character:FindFirstChild("HumanoidRootPart")
    end
end

local function getPlayerByName(name)
    for _, plr in pairs(Players:GetPlayers()) do
        if plr.Name == name then
            return plr
        end
    end
end

RunService.RenderStepped:Connect(function(dt)
    local myHRP = getHRP(localPlayer)
    local target = getPlayerByName(selectedTargetName)
    local targetHRP = target and getHRP(target)
    if not (myHRP and targetHRP) then return end

    if followEnabled then
        local pos = targetHRP.Position - targetHRP.CFrame.LookVector * BEHIND_DISTANCE
        if lookEnabled then
            myHRP.CFrame = CFrame.new(pos, Vector3.new(targetHRP.Position.X, pos.Y, targetHRP.Position.Z))
        else
            myHRP.CFrame = CFrame.new(pos.X, targetHRP.Position.Y, pos.Z)
        end
    elseif circleEnabled then
        circleAngle = circleAngle + circleSpeed * dt
        local x = math.cos(circleAngle) * circleRadius
        local z = math.sin(circleAngle) * circleRadius
        local p = targetHRP.Position + Vector3.new(x, 0, z)
        if lookEnabled then
            myHRP.CFrame = CFrame.new(p, Vector3.new(targetHRP.Position.X, p.Y, targetHRP.Position.Z))
        else
            myHRP.CFrame = CFrame.new(p.X, targetHRP.Position.Y, p.Z)
        end
    elseif lookEnabled then
        local myPos = myHRP.Position
        local tp = targetHRP.Position
        myHRP.CFrame = CFrame.new(myPos, Vector3.new(tp.X, myPos.Y, tp.Z))
    end
end)

local playerDropdown = LockTab:Dropdown({
    Title = "Select the target player",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = (function()
        local names = {}
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= localPlayer then
                table.insert(names, p.Name)
            end
        end
        return names
    end)(),
    Callback = function(name)
        selectedTargetName = name
    end
})

LockTab:Button({
    Title = "Refresh the player list",
    Callback = function()
        selectedTargetName = nil
        playerDropdown:Destroy()
        playerDropdown = LockTab:Dropdown({
            Title = "选择目标玩家",
            Multi = false,
            AllowNone = false,
            Value = nil,
            Values = (function()
                local names = {}
                for _, p in ipairs(Players:GetPlayers()) do
                    if p ~= localPlayer then
                        table.insert(names, p.Name)
                    end
                end
                return names
            end)(),
            Callback = function(name)
                selectedTargetName = name
            end
        })
    end
})

LockTab:Toggle({
    Title = "lock back",
    Value = false,
    Callback = function(state)
        followEnabled = state
        if state then circleEnabled = false end
    end
})

LockTab:Toggle({
    Title = "circle",
    Value = false,
    Callback = function(state)
        circleEnabled = state
        if state then followEnabled = false end
    end
})

LockTab:Toggle({
    Title = "look player",
    Value = false,
    Callback = function(state)
        lookEnabled = state
    end
})
local MusicTab = Window:Tab({
    Title = "music",
    Icon = "bird",
    Locked = false,
})

local SoundService = game:GetService("SoundService")

local music1 = Instance.new("Sound")
music1.SoundId = "rbxassetid://107990547300911"
music1.Volume = 1
music1.Looped = true
music1.Parent = SoundService
MusicTab:Toggle({
    Title = "因果",
    Value = false,
    Callback = function(state)
        if state then music1:Play() else music1:Stop() end
    end
})

local music2 = Instance.new("Sound")
music2.SoundId = "rbxassetid://76463442516219"
music2.Volume = 1
music2.Looped = true
music2.Parent = SoundService
MusicTab:Toggle({
    Title = "死亡之林(音频可能有问题)",
    Value = false,
    Callback = function(state)
        if state then music2:Play() else music2:Stop() end
    end
})

local music3 = Instance.new("Sound")
music3.SoundId = "rbxassetid://75544352326610"
music3.Volume = 1
music3.Looped = true
music3.Parent = SoundService
MusicTab:Toggle({
    Title = "后室",
    Value = false,
    Callback = function(state)
        if state then music3:Play() else music3:Stop() end
    end
})

local music4 = Instance.new("Sound")
music4.SoundId = "rbxassetid://6910191685"
music4.Volume = 1
music4.Looped = true
music4.Parent = SoundService
MusicTab:Toggle({
    Title = "？",
    Value = false,
    Callback = function(state)
        if state then music4:Play() else music4:Stop() end
    end
})
local music5 = Instance.new("Sound")
music5.SoundId = "rbxassetid://1841771337"
music5.Volume = 1
music5.Looped = true
music5.Parent = SoundService
MusicTab:Toggle({
    Title = "苏醒了",
    Value = false,
    Callback = function(state)
        if state then music5:Play() else music5:Stop() end
    end
})

local music6 = Instance.new("Sound")
music6.SoundId = "rbxassetid://115877769571526"
music6.Volume = 1
music6.Looped = true
music6.Parent = SoundService
MusicTab:Toggle({
    Title = "compass",
    Value = false,
    Callback = function(state)
        if state then music6:Play() else music6:Stop() end
    end
})
local Tab = Window:Tab({
    Title = "set",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "Change ui color",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function chaineng()
local Tab = Window:Tab({
    Title = "Features",
    Icon = "house",
    Locked = false,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local combatStaminaEnabled = false
local staminaEnabled = false

local combatLoop = nil
local staminaLoop = nil

local function setCombatStamina(value)
    local char = workspace:FindFirstChild(LocalPlayer.Name)
    if char and char:FindFirstChild("Stats") then
        local stat = char.Stats:FindFirstChild("CombatStamina")
        if stat then
            stat.Value = value
        end
    end
end

local function setStamina(value)
    local char = workspace:FindFirstChild(LocalPlayer.Name)
    if char and char:FindFirstChild("Stats") then
        local stat = char.Stats:FindFirstChild("Stamina")
        if stat then
            stat.Value = value
        end
    end
end

local RunService = game:GetService("RunService")

local function startCombatLoop()
    if combatLoop then return end
    combatLoop = RunService.Heartbeat:Connect(function()
        if combatStaminaEnabled then
            setCombatStamina(100)
        end
    end)
end

local function startStaminaLoop()
    if staminaLoop then return end
    staminaLoop = RunService.Heartbeat:Connect(function()
        if staminaEnabled then
            setStamina(100)
        end
    end)
end

local function stopCombatLoop()
    if combatLoop then
        combatLoop:Disconnect()
        combatLoop = nil
    end
end

local function stopStaminaLoop()
    if staminaLoop then
        staminaLoop:Disconnect()
        staminaLoop = nil
    end
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    if combatStaminaEnabled then
        setCombatStamina(100)
    end
    if staminaEnabled then
        setStamina(100)
    end
end)

Tab:Toggle({
    Title = "Infinite Combat Stamina",
    Value = false,
    Callback = function(state)
        combatStaminaEnabled = state
        if state then
            startCombatLoop()
        else
            stopCombatLoop()
        end
    end
})

Tab:Toggle({
    Title = "Infinite Stamina",
    Value = false,
    Callback = function(state)
        staminaEnabled = state
        if state then
            startStaminaLoop()
        else
            stopStaminaLoop()
        end
    end
})

local chainESPEnabled = false
local chainESPConnection = nil
local currentChain = nil

local function createChainESP(chain)
    if not chain:FindFirstChild("Highlight") then
        local h = Instance.new("Highlight")
        h.Name = "Highlight"
        h.Adornee = chain
        h.FillColor = Color3.fromRGB(255, 0, 0)
        h.FillTransparency = 0.8
        h.OutlineColor = Color3.fromRGB(255, 60, 60)
        h.OutlineTransparency = 0
        h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        h.Parent = chain
    end

    if not chain:FindFirstChild("NameGui") then
        local gui = Instance.new("BillboardGui")
        gui.Name = "NameGui"
        gui.Size = UDim2.new(0, 150, 0, 30)
        gui.StudsOffset = Vector3.new(0, 5, 0)
        gui.Adornee = chain
        gui.AlwaysOnTop = true
        gui.LightInfluence = 0
        gui.Parent = chain

        local titleLabel = Instance.new("TextLabel")
        titleLabel.Name = "TitleLabel"
        titleLabel.Size = UDim2.new(1, 0, 0.5, 0)
        titleLabel.Position = UDim2.new(0, 0, 0, 0)
        titleLabel.Text = "CHAIN"
        titleLabel.TextColor3 = Color3.new(1, 0, 0)
        titleLabel.TextScaled = true
        titleLabel.Font = Enum.Font.GothamBold
        titleLabel.TextSize = 10
        titleLabel.BackgroundTransparency = 1
        titleLabel.Parent = gui

        local attrLabel = Instance.new("TextLabel")
        attrLabel.Name = "AttrLabel"
        attrLabel.Size = UDim2.new(1, 0, 0.5, 0)
        attrLabel.Position = UDim2.new(0, 0, 0.5, 0)
        attrLabel.RichText = true
        attrLabel.Text = ""
        attrLabel.TextColor3 = Color3.new(1, 1, 1)
        attrLabel.TextScaled = true
        attrLabel.Font = Enum.Font.Gotham
        attrLabel.TextSize = 8
        attrLabel.BackgroundTransparency = 1
        attrLabel.Parent = gui
    end
end

local function updateChainAttributes(chain)
    local gui = chain:FindFirstChild("NameGui")
    if gui then
        local attrLabel = gui:FindFirstChild("AttrLabel")
        if attrLabel then
            local anger = chain:GetAttribute("Anger") or 0
            local burst = chain:GetAttribute("Burst") or 0
            local choke = chain:GetAttribute("ChokeMeter") or 0
            attrLabel.Text = string.format(
                '[Blood Moon: <font color="rgb(255,255,255)">%.0f%%</font>] [Ground Slam: <font color="rgb(255,255,255)">%.0f%%</font>] [Choke: <font color="rgb(255,255,255)">%.0f%%</font>]',
                anger, burst, choke
            )
        end
    end
end

local function removeChainESP(chain)
    if chain then
        local highlight = chain:FindFirstChild("Highlight")
        if highlight then highlight:Destroy() end
        local nameGui = chain:FindFirstChild("NameGui")
        if nameGui then nameGui:Destroy() end
    end
end

local function refreshChainESP()
    local chain = workspace:FindFirstChild("Misc")
        and workspace.Misc:FindFirstChild("AI")
        and workspace.Misc.AI:FindFirstChild("CHAIN")
    if chain then
        if currentChain ~= chain then
            if currentChain then removeChainESP(currentChain) end
            currentChain = chain
            createChainESP(chain)
        end
        if not chain:FindFirstChild("Highlight") or not chain:FindFirstChild("NameGui") then
            createChainESP(chain)
        end
        updateChainAttributes(chain)
    else
        if currentChain then
            removeChainESP(currentChain)
            currentChain = nil
        end
    end
end

local function startChainESP()
    if chainESPEnabled then return end
    chainESPEnabled = true
    chainESPConnection = RunService.Heartbeat:Connect(refreshChainESP)
end

local function stopChainESP()
    chainESPEnabled = false
    if chainESPConnection then
        chainESPConnection:Disconnect()
        chainESPConnection = nil
    end
    if currentChain then
        removeChainESP(currentChain)
        currentChain = nil
    end
end

Tab:Toggle({
    Title = "Chain ESP",
    Value = false,
    Callback = function(state)
        if state then
            startChainESP()
        else
            stopChainESP()
        end
    end
})

-- Player ESP
local playerESPEnabled = false
local playerESPConnections = {}
local trackedCharacters = {}

local function addESP(character, player)
    if not character or not player then return end

    if not character:FindFirstChild("Highlight") then
        local h = Instance.new("Highlight")
        h.Name = "Highlight"
        h.Adornee = character
        h.FillColor = Color3.fromRGB(0, 255, 0)
        h.FillTransparency = 0.7
        h.OutlineColor = Color3.fromRGB(0, 200, 0)
        h.OutlineTransparency = 0.1
        h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        h.Parent = character
    end

    if not character:FindFirstChild("NameGui") then
        local gui = Instance.new("BillboardGui")
        gui.Name = "NameGui"
        gui.Size = UDim2.new(0, 50, 0, 10)
        gui.StudsOffset = Vector3.new(0, 3.5, 0)
        local adornee = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChildWhichIsA("BasePart")
        gui.Adornee = adornee
        gui.AlwaysOnTop = true
        gui.LightInfluence = 0
        gui.Parent = character

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 1, 0)
        label.Text = player.Name
        label.TextColor3 = Color3.new(0, 1, 0)
        label.TextScaled = true
        label.Font = Enum.Font.Gotham
        label.BackgroundTransparency = 1
        label.TextSize = 10
        label.Parent = gui
    end
end

local function removeESP(character)
    if not character then return end
    local highlight = character:FindFirstChild("Highlight")
    if highlight then highlight:Destroy() end

    local nameGui = character:FindFirstChild("NameGui")
    if nameGui then nameGui:Destroy() end
end

local function onCharacterAdded(player, character)
    if not playerESPEnabled then return end
    task.delay(0.3, function()
        if playerESPEnabled and character and character.Parent then
            addESP(character, player)
        end
    end)
end

local function trackPlayer(player)
    if player == LocalPlayer then return end
    if trackedCharacters[player] then return end
    trackedCharacters[player] = true

    if player.Character then
        onCharacterAdded(player, player.Character)
    end

    local conn = player.CharacterAdded:Connect(function(character)
        onCharacterAdded(player, character)
    end)
    table.insert(playerESPConnections, conn)

    local removeConn = player.AncestryChanged:Connect(function()
        if not player:IsDescendantOf(game) then
            trackedCharacters[player] = nil
        end
    end)
    table.insert(playerESPConnections, removeConn)
end

local function startPlayerESP()
    if playerESPEnabled then return end
    playerESPEnabled = true

    for _, player in ipairs(Players:GetPlayers()) do
        trackPlayer(player)
    end

    local conn = Players.PlayerAdded:Connect(trackPlayer)
    table.insert(playerESPConnections, conn)
end

local function stopPlayerESP()
    playerESPEnabled = false

    for _, conn in ipairs(playerESPConnections) do
        pcall(function() conn:Disconnect() end)
    end
    table.clear(playerESPConnections)
    table.clear(trackedCharacters)

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            removeESP(player.Character)
        end
    end
end

Tab:Toggle({
    Title = "Player ESP",
    Default = false,
    Callback = function(state)
        if state then
            startPlayerESP()
        else
            stopPlayerESP()
        end
    end
})

-- Lighting ESP
local Lighting = game:GetService("Lighting")

local originalLighting = {
    Brightness = Lighting.Brightness,
    ClockTime = Lighting.ClockTime,
    Ambient = Lighting.Ambient,
    OutdoorAmbient = Lighting.OutdoorAmbient,
    ExposureCompensation = Lighting.ExposureCompensation,
    FogEnd = Lighting.FogEnd,
    FogStart = Lighting.FogStart,
    GlobalShadows = Lighting.GlobalShadows,
}

local highlightLoop

Tab:Toggle({
    Title = "Highlight Mode",
    Default = false,
    Callback = function(state)
        if state then
            highlightLoop = task.spawn(function()
                while task.wait(0.5) do
                    Lighting.Brightness = 2
                    Lighting.ClockTime = 13.5
                    Lighting.Ambient = Color3.new(0.6, 0.6, 0.6)
                    Lighting.OutdoorAmbient = Color3.new(0.6, 0.6, 0.6)
                    Lighting.ExposureCompensation = 0.5
                    Lighting.FogEnd = 100000
                    Lighting.FogStart = 0
                    Lighting.GlobalShadows = false
                end
            end)
        else
            if highlightLoop then
                task.cancel(highlightLoop)
                highlightLoop = nil
            end
            for k, v in pairs(originalLighting) do
                Lighting[k] = v
            end
        end
    end
})

-- Scrap Collector
local ScrapFolder = workspace:WaitForChild("Misc"):WaitForChild("Zones"):WaitForChild("LootingItems"):WaitForChild("Scrap")

local running = false
local collectThread
local teleportThread

local targetPositions = {
    Vector3.new(-26.879013061523438, -107.01750183105469, -204.7770538330078),
    Vector3.new(-110.85892486572266, -86.33830261230469, 211.8588409423828),
    Vector3.new(43.30422592163086, -97.9687728881836, 349.1531982421875),
    Vector3.new(164.49859619140625, -103.65132141113281, -35.76066207885742),
    Vector3.new(308.97198486328125, -113.4938735961914, -250.46066284179688),
    Vector3.new(-203.81826782226562, -110.8906478881836, -108.90457916259766),
    Vector3.new(-381.873046875, -115.02182006835938, 42.071022033691406),
}

local function getRootPart()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local function firePrompt(prompt)
    if prompt and prompt:IsA("ProximityPrompt") then
        pcall(function()
            fireproximityprompt(prompt)
        end)
    end
end

local function getAllPrompts(root)
    local prompts = {}
    local function recurse(obj)
        for _, child in ipairs(obj:GetChildren()) do
            recurse(child)
            if child:IsA("ProximityPrompt") then
                table.insert(prompts, child)
            end
        end
    end
    recurse(root)
    return prompts
end

local function collectLoop()
    local playerRoot = getRootPart()
    while running do
        local prompts = getAllPrompts(ScrapFolder)
        for _, prompt in ipairs(prompts) do
            if not running then break end
            local part = prompt.Parent
            while part and not part:IsA("BasePart") do
                part = part.Parent
            end
            if part then
                playerRoot.CFrame = part.CFrame + Vector3.new(0, 2, 0)
                task.wait(0.2)
                firePrompt(prompt)
                task.wait(0.6)
            end
        end
        task.wait(0.3)
    end
end

local function teleportLoop()
    local playerRoot = getRootPart()
    while running do
        for _, pos in ipairs(targetPositions) do
            if not running then break end
            playerRoot.CFrame = CFrame.new(pos + Vector3.new(0, 3, 0))
            task.wait(3)
        end
    end
end

Tab:Toggle({
    Title = "Auto Collect & Teleport",
    Value = false,
    Callback = function(state)
        running = state
        if running then
            collectThread = task.spawn(collectLoop)
            teleportThread = task.spawn(teleportLoop)
        else
            if collectThread then task.cancel(collectThread) collectThread = nil end
            if teleportThread then task.cancel(teleportThread) teleportThread = nil end
        end
    end,
})

-- Chat
local enabled = false

local function setChatVisible(state)
	enabled = state
	local config = game:GetService("TextChatService"):FindFirstChild("ChatWindowConfiguration")
	if config and config:IsA("ChatWindowConfiguration") then
		config.Enabled = state
	end
end

game.Players.LocalPlayer.CharacterAdded:Connect(function()
	task.wait(1)
	if enabled then
		setChatVisible(true)
	end
end)

Tab:Toggle({
	Title = "Show Chat",
	Value = false,
	Callback = function(state)
		setChatVisible(state)
	end,
})

-- Camera
local toggleState = false

local function applyCameraMode(state)
	if state then
		LocalPlayer.CameraMaxZoomDistance = 99999
		LocalPlayer.CameraMode = Enum.CameraMode.Classic
	else
		LocalPlayer.CameraMaxZoomDistance = 16
		LocalPlayer.CameraMode = Enum.CameraMode.LockFirstPerson
	end
end

LocalPlayer.CharacterAdded:Connect(function()
	wait(1)
	if not toggleState then
		applyCameraMode(false)
	else
		applyCameraMode(true)
	end
end)

Tab:Toggle({
	Title = "Force Third Person",
	Value = false,
	Callback = function(state)
		toggleState = state
		applyCameraMode(state)
	end
})

-- Remove Fog
Tab:Button({
    Title = "Remove Fog",
    Desc = nil,
    Locked = false,
    Callback = function()
        local lighting = game:GetService("Lighting")
        if lighting:FindFirstChild("Rainy") then
            lighting.Rainy:Destroy()
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local tpwalking = false
local tpwalkSpeed = 5

Tab:Toggle({
    Title = "speed",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Title = "set speed",
    Value = {
        Min = 0,
        Max = 10,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})
-- Combat Features
local Tab = Window:Tab({
    Title = "Combat Features",
    Icon = "hand",
    Locked = false,
})

Tab:Paragraph({
    Title = "Important Notes",
    Desc = "Mom and dad who don't watch are all dead. When you turn on infinite dodge and automatic knife abuse, you can click the button to be effective",
    Image = "file-warning",
    Color = "Red",
    ImageSize = 40, 
    ThumbnailSize = 120
})
Tab:Button({
		Title = "bypass adonis",
		Desc = ":/",
		Locked = false,
		Callback = function()
			loadstring(game:HttpGet("https://raw.githubusercontent.com/Pixeluted/adoniscries/main/Source.lua", true))()
		end
	})
	Tab:Toggle({
    Title = "Detect Admins/Reporters",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local targetUsers = {
            "Mylezeezz","Sir_Mason13","jasper_creations","ItzRoboMaggot","CyroTr00per",
            "JankCorp","JakeDravioli","1Boomah",
            "MikoSfx","Lgl_frijol","xF_alse","FluxedThoughts","Blackcoolia","Crinsikle",
            "HolyBlanks","mightyasher","ROV3RRO","Oce1rosTheConsum3d","Tsunantt",
            "Shark_bossx007","AgentCatto","ashinvy","roblox_user_841257226",
            "As3tra1","GetRightDawg","N0XMANIAC","Benthesoccerone","Megamind184",
            "OrekLus1","maravilye2312","euphoria4830","XHttpkeVin","ddelus1",
            "Chromixx_WasTaken","fraudTheSecond","IAmUnderAMask",
            "Yurixzaaa","SSpreezzy"
        }

        local targetSet = {}
        for _, userName in ipairs(targetUsers) do
            targetSet[userName] = true
        end

        if WindUI and type(WindUI.Notify) ~= "function" then
            local oldNotify = WindUI.Notify
            WindUI.Notify = function(_, data)
                if type(oldNotify) == "table" and type(oldNotify.Notify) == "function" then
                    oldNotify:Notify(data)
                elseif typeof(WindUI) == "table" and type(WindUI.Notify) == "function" then
                    WindUI:Notify(data)
                end
            end
        end

        local notified = {}

        local function notify(playerName)
            if not notified[playerName] then
                notified[playerName] = true
                WindUI:Notify({
                    Title = "Warning",
                    Content = "An admin or frequent reporter has joined this server: " .. playerName,
                    Duration = 17.5
                })
            end
        end

        local function onPlayerAdded(player)
            if targetSet[player.Name] then
                notify(player.Name)
            end
        end

        Players.PlayerAdded:Connect(onPlayerAdded)

        for _, player in Players:GetPlayers() do
            if targetSet[player.Name] then
                notify(player.Name)
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local camera = workspace.CurrentCamera

local aimLoop
local targetModel
local targetHumanoidRootPart

local function updateTarget()
    local misc = workspace:FindFirstChild("Misc")
    if misc and misc:FindFirstChild("AI") and misc.AI:FindFirstChild("CHAIN") then
        targetModel = misc.AI.CHAIN
        targetHumanoidRootPart = targetModel:FindFirstChild("HumanoidRootPart") or targetModel:FindFirstChildWhichIsA("BasePart")
    else
        targetModel = nil
        targetHumanoidRootPart = nil
    end
end

local function smoothLookAt(currentCFrame, targetPos, speed)
    local direction = (targetPos - currentCFrame.Position).Unit
    local currentLook = currentCFrame.LookVector
    local lerpedLook = currentLook:Lerp(direction, speed)
    return CFrame.new(currentCFrame.Position, currentCFrame.Position + lerpedLook)
end

local descendantAddedConn
local descendantRemovingConn

Tab:Toggle({
    Title = "aim chain",
    Default = false,
    Callback = function(state)
        if state then
            updateTarget()

            if not descendantAddedConn then
                descendantAddedConn = workspace.DescendantAdded:Connect(function(obj)
                    if obj.Name == "CHAIN" then
                        task.wait(0.1)
                        updateTarget()
                    end
                end)
            end

            if not descendantRemovingConn then
                descendantRemovingConn = workspace.DescendantRemoving:Connect(function(obj)
                    if obj == targetModel then
                        targetModel = nil
                        targetHumanoidRootPart = nil
                    end
                end)
            end

            local speed = 0.3

            aimLoop = RunService.RenderStepped:Connect(function()
                if targetHumanoidRootPart and camera then
                    local desiredCFrame = smoothLookAt(camera.CFrame, targetHumanoidRootPart.Position, speed)
                    camera.CFrame = desiredCFrame
                else
                    updateTarget()
                end
            end)
        else
            if aimLoop then
                aimLoop:Disconnect()
                aimLoop = nil
            end
            if descendantAddedConn then
                descendantAddedConn:Disconnect()
                descendantAddedConn = nil
            end
            if descendantRemovingConn then
                descendantRemovingConn:Disconnect()
                descendantRemovingConn = nil
            end
        end
    end
})
Tab:Toggle({
    Title = "chain aoe skill auto dodge v1",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer
        local animationIdToCheck = "rbxassetid://14875631059"
        local TELEPORT_DISTANCE = 100
        local DETECT_RANGE = 12
        local RETURN_DISTANCE = 30
        local AIR_ANGLE = math.rad(45)
        local AIR_DURATION = 4

        local targetModel
        local animationAOE
        local originalCFrame
        local teleporting = false

        local function updateTarget()
            local misc = workspace:FindFirstChild("Misc")
            if misc and misc:FindFirstChild("AI") and misc.AI:FindFirstChild("CHAIN") then
                targetModel = misc.AI.CHAIN
                local aiFolder = targetModel:FindFirstChild("AI")
                if aiFolder and aiFolder:FindFirstChild("Animations") and aiFolder.Animations:FindFirstChild("AOE") then
                    animationAOE = aiFolder.Animations.AOE
                else
                    animationAOE = nil
                end
            else
                targetModel = nil
                animationAOE = nil
            end
        end

        local function getRoot()
            local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            return char:WaitForChild("HumanoidRootPart")
        end

        local function isAnimationPlaying()
            if not targetModel then return false end
            local humanoid = targetModel:FindFirstChildWhichIsA("Humanoid", true)
            if humanoid then
                local animator = humanoid:FindFirstChildOfClass("Animator")
                if animator then
                    for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
                        local animId = track.Animation.AnimationId
                        if animationAOE and (animId == animationAOE.AnimationId or animId == animationIdToCheck) then
                            return true
                        end
                    end
                end
            end
            return false
        end

        local function teleportAboveTarget()
            if not targetModel or teleporting then return end
            local root = getRoot()
            local distance = (root.Position - targetModel:GetPivot().Position).Magnitude
            if distance > DETECT_RANGE then return end
            teleporting = true
            originalCFrame = root.CFrame

            local targetPos = targetModel:GetPivot().Position + Vector3.new(0, TELEPORT_DISTANCE * math.sin(AIR_ANGLE), 0)
            local lookVector = targetModel:GetPivot().LookVector
            root.CFrame = CFrame.new(targetPos, targetPos + lookVector)

            local startTime = tick()
            while tick() - startTime < AIR_DURATION do
                root.CFrame = CFrame.new(targetPos, targetPos + lookVector)
                task.wait(0.03)
            end

            local returnPos = targetModel:GetPivot().Position + Vector3.new(0, 3, 0) + (lookVector * RETURN_DISTANCE)
            root.CFrame = CFrame.new(returnPos, targetModel:GetPivot().Position)
            teleporting = false
        end

        local lastPlaying = false

        if state then
            updateTarget()

            if not _G.chainDodgeAutoUpdate then
                _G.chainDodgeAutoUpdate = workspace.DescendantAdded:Connect(function(obj)
                    if obj.Name == "CHAIN" or obj.Name == "AOE" then
                        task.wait(0.1)
                        updateTarget()
                    end
                end)
            end

            if not _G.chainDodgeCharAdded then
                _G.chainDodgeCharAdded = LocalPlayer.CharacterAdded:Connect(function()
                    task.wait(1)
                    updateTarget()
                end)
            end

            _G.chainDodgeConn = RunService.Heartbeat:Connect(function()
                if not targetModel then
                    updateTarget()
                end
                local playing = isAnimationPlaying()
                if playing and not lastPlaying then
                    task.spawn(teleportAboveTarget)
                end
                lastPlaying = playing
            end)
        else
            if _G.chainDodgeConn then
                _G.chainDodgeConn:Disconnect()
                _G.chainDodgeConn = nil
            end
            if _G.chainDodgeAutoUpdate then
                _G.chainDodgeAutoUpdate:Disconnect()
                _G.chainDodgeAutoUpdate = nil
            end
            if _G.chainDodgeCharAdded then
                _G.chainDodgeCharAdded:Disconnect()
                _G.chainDodgeCharAdded = nil
            end
        end
    end
})
Tab:Toggle({
    Title = "chain aoe skill auto dodgev2",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer
        local animationIdToCheck = "rbxassetid://14875631059"
        local DETECT_RANGE = 12
        local TELEPORT_DISTANCE = 70

        local targetModel
        local animationAOE
        local teleporting = false

        local function updateTarget()
            local misc = workspace:FindFirstChild("Misc")
            if misc and misc:FindFirstChild("AI") and misc.AI:FindFirstChild("CHAIN") then
                targetModel = misc.AI.CHAIN
                local aiFolder = targetModel:FindFirstChild("AI")
                if aiFolder and aiFolder:FindFirstChild("Animations") and aiFolder.Animations:FindFirstChild("AOE") then
                    animationAOE = aiFolder.Animations.AOE
                else
                    animationAOE = nil
                end
            else
                targetModel = nil
                animationAOE = nil
            end
        end

        local function getRoot()
            local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            return char:WaitForChild("HumanoidRootPart")
        end

        local function isAnimationPlaying()
            if not targetModel then return false end
            local humanoid = targetModel:FindFirstChildWhichIsA("Humanoid", true)
            if humanoid then
                local animator = humanoid:FindFirstChildOfClass("Animator")
                if animator then
                    for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
                        local animId = track.Animation.AnimationId
                        if animationAOE and (animId == animationAOE.AnimationId or animId == animationIdToCheck) then
                            return true
                        end
                    end
                end
            end
            return false
        end

        local function teleportFront()
            if not targetModel or teleporting then return end
            local root = getRoot()
            local distance = (root.Position - targetModel:GetPivot().Position).Magnitude
            if distance > DETECT_RANGE then return end
            teleporting = true
            local lookVector = targetModel:GetPivot().LookVector
            local frontPos = targetModel:GetPivot().Position + (lookVector * TELEPORT_DISTANCE) + Vector3.new(0, 10, 0)
            root.CFrame = CFrame.new(frontPos, targetModel:GetPivot().Position + Vector3.new(0, 10, 0))
            teleporting = false
        end

        local lastPlaying = false

        if state then
            updateTarget()

            if not _G.chainDodgeAutoUpdateV2 then
                _G.chainDodgeAutoUpdateV2 = workspace.DescendantAdded:Connect(function(obj)
                    if obj.Name == "CHAIN" or obj.Name == "AOE" then
                        task.wait(0.1)
                        updateTarget()
                    end
                end)
            end

            if not _G.chainDodgeCharAddedV2 then
                _G.chainDodgeCharAddedV2 = LocalPlayer.CharacterAdded:Connect(function()
                    task.wait(1)
                    updateTarget()
                end)
            end

            _G.chainDodgeConnV2 = RunService.Heartbeat:Connect(function()
                if not targetModel then
                    updateTarget()
                end
                local playing = isAnimationPlaying()
                if playing and not lastPlaying then
                    task.spawn(teleportFront)
                end
                lastPlaying = playing
            end)
        else
            if _G.chainDodgeConnV2 then
                _G.chainDodgeConnV2:Disconnect()
                _G.chainDodgeConnV2 = nil
            end
            if _G.chainDodgeAutoUpdateV2 then
                _G.chainDodgeAutoUpdateV2:Disconnect()
                _G.chainDodgeAutoUpdateV2 = nil
            end
            if _G.chainDodgeCharAddedV2 then
                _G.chainDodgeCharAddedV2:Disconnect()
                _G.chainDodgeCharAddedV2 = nil
            end
        end
    end
})
Tab:Toggle({
    Title = "infinite gas",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer
        local running = false
        local taskConnection

        if state then
            running = true
            taskConnection = task.spawn(function()
                while running do
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("Items") and char.Items:FindFirstChild("XSaw") then
                        char.Items.XSaw:SetAttribute("Gas", 100)
                    end
                    task.wait(0.01)
                end
            end)
        else
            running = false
            if taskConnection then
                taskConnection = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local CTS
local capturingCTS = false
local LastCTSArgs
local loop

local function refreshCTS()
    local char = LocalPlayer.Character
    if not char then return end
    CTS = char:WaitForChild("CharacterMobility"):WaitForChild("CTS")
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    refreshCTS()
    LastCTSArgs = nil
    if capturingCTS then
        capturingCTS = true
    end
end)

refreshCTS()

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self == CTS then
        local args = {...}
        if capturingCTS and not LastCTSArgs then
            LastCTSArgs = args
        end
    end
    return old(self, ...)
end
setreadonly(mt, true)

Tab:Toggle({
    Title = "Infinite dodge",
    Value = false,
    Callback = function(state)
        if state then
            capturingCTS = true
            LastCTSArgs = nil
            if loop then
                loop:Disconnect()
                loop = nil
            end
            loop = RunService.Heartbeat:Connect(function(dt)
                if not CTS or not CTS.Parent then
                    refreshCTS()
                end
                if CTS and LastCTSArgs then
                    if tick() % 0.7 < dt then
                        CTS:FireServer(unpack(LastCTSArgs))
                    end
                end
            end)
        else
            capturingCTS = false
            if loop then
                loop:Disconnect()
                loop = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local Interact
local capturingInteract = false
local LastInteractArgs
local loop
local swingDelay = 0.7

local function refreshInteract()
    local char = LocalPlayer.Character
    if not char then return end
    Interact = char:WaitForChild("CharacterHandler"):WaitForChild("Contents"):WaitForChild("Remotes"):WaitForChild("Interact")
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    refreshInteract()
    LastInteractArgs = nil
    if capturingInteract then
        capturingInteract = true
    end
end)

refreshInteract()

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self == Interact then
        local args = {...}
        if capturingInteract and not LastInteractArgs then
            LastInteractArgs = args
        end
    end
    return old(self, ...)
end
setreadonly(mt, true)

Tab:Input({
    Title = "Set interval(0.7-1 better)",
    Value = "0.7",
    Placeholder = "0.7 - 1",
    Callback = function(input)
        local num = tonumber(input)
        if num then
            if num > 1 then
                num = 1
            elseif num < 0.01 then
                num = 0.01
            end
            swingDelay = num
        end
    end
})

Tab:Toggle({
    Title = "Abuse of automatic knife wielding",
    Value = false,
    Callback = function(state)
        if state then
            capturingInteract = true
            LastInteractArgs = nil
            if loop then
                loop:Disconnect()
                loop = nil
            end
            loop = RunService.Heartbeat:Connect(function(dt)
                if not Interact or not Interact.Parent then
                    refreshInteract()
                end
                if Interact and LastInteractArgs then
                    if tick() % swingDelay < dt then
                        Interact:FireServer(unpack(LastInteractArgs))
                    end
                end
            end)
        else
            capturingInteract = false
            if loop then
                loop:Disconnect()
                loop = nil
            end
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local Interact
local capturingInteract = false
local LastInteractArgs
local loop
local swingDelay = 1
local lastFire = 0

local function refreshInteract()
    local char = LocalPlayer.Character
    if not char then return end
    Interact = char:WaitForChild("CharacterHandler"):WaitForChild("Contents"):WaitForChild("Remotes"):WaitForChild("Interact")
end

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    refreshInteract()
    LastInteractArgs = nil
    if capturingInteract then
        capturingInteract = true
    end
end)

refreshInteract()

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    if method == "FireServer" and self == Interact then
        local args = {...}
        if capturingInteract and not LastInteractArgs then
            LastInteractArgs = args
        end
    end
    return old(self, ...)
end
setreadonly(mt, true)

Tab:Toggle({
    Title = "godmod",
    Desc = "need click qte button",
    Value = false,
    Callback = function(state)
        if state then
            capturingInteract = true
            LastInteractArgs = nil
            if loop then
                loop:Disconnect()
                loop = nil
            end
            loop = RunService.Heartbeat:Connect(function(dt)
                if not Interact or not Interact.Parent then
                    refreshInteract()
                end
                if Interact and LastInteractArgs and (tick() - lastFire >= 1) then
                    lastFire = tick()
                    Interact:FireServer(unpack(LastInteractArgs))
                end
            end)
        else
            capturingInteract = false
            if loop then
                loop:Disconnect()
                loop = nil
            end
        end
    end
})
local autoWinXSawClashEnabled = false
local xSawClashLoopConnection = nil

Tab:Toggle({
    Title = "Automatic qte",
    Value = false,
    Callback = function(state)
        autoWinXSawClashEnabled = state
        if autoWinXSawClashEnabled then
            xSawClashLoopConnection = game:GetService("RunService").Heartbeat:Connect(function()
                local lp = game.Players.LocalPlayer
                if lp and lp.Character and lp.Character:FindFirstChild("Stats") and lp.Character.Stats:FindFirstChild("ClashStrength") then
                    lp.Character.Stats.ClashStrength.Value = 100
                end
            end)
        else
            if xSawClashLoopConnection then
                xSawClashLoopConnection:Disconnect()
                xSawClashLoopConnection = nil
            end
        end
    end
})

local BlueprintTab = Window:Tab({
    Title = "Blueprint Unlock",
    Icon = "file-check",
    Locked = false,
})
BlueprintTab:Button({
    Title = "unclock CombatKnife",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "CombatKnife"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})

BlueprintTab:Button({
    Title = "unclock DoubleBarrel",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "DoubleBarrel"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})

BlueprintTab:Button({
    Title = "unclock m1911",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "M1911"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})

BlueprintTab:Button({
    Title = "unclock Machete",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "Machete"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})
BlueprintTab:Button({
    Title = "Unlock SpellBook",
    Callback = function()
        local player = game.Players.LocalPlayer
        local blueprints = player:WaitForChild("PlayerStats"):WaitForChild("Blueprints")
        local attributeName = "SpellBook"
        if blueprints:GetAttribute(attributeName) ~= nil then
            blueprints:SetAttribute(attributeName, true)
            print("Attribute '" .. attributeName .. "' set to true.")
        else
            print("Attribute '" .. attributeName .. "' not found in Blueprints.")
        end
    end,
})
BlueprintTab:Button({
    Title = "Unlock Artifact Quest",
    Callback = function()
        local playerStats = game.Players.LocalPlayer:WaitForChild("PlayerStats")
        local quests = playerStats:WaitForChild("Quests")
        quests:SetAttribute("ArtifactQuest", true)
    end,
})
local Tab = Window:Tab({
    Title = "Teleport",
    Icon = "zap",
    Locked = false,
})
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function getRootPart()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local target1 = Vector3.new(-26.879013061523438, -107.01750183105469, -204.7770538330078)
local target2 = Vector3.new(-110.85892486572266, -86.33830261230469, 211.8588409423828)
local target3 = Vector3.new(43.30422592163086, -97.9687728881836, 349.1531982421875)
local target4 = Vector3.new(164.49859619140625, -103.65132141113281, -35.76066207885742)
local target5 = Vector3.new(308.97198486328125, -113.4938735961914, -250.46066284179688)
local target6 = Vector3.new(-203.81826782226562, -110.8906478881836, -108.90457916259766)
local target7 = Vector3.new(-381.873046875, -115.02182006835938, 42.071022033691406)

Tab:Button({
    Title = "tp chain rebirth site",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target1 + Vector3.new(0, 3, 0))
                print("传送到传送点 1")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "shop",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target2 + Vector3.new(0, 3, 0))
                print("传送到传送点 2")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "ranking",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target3 + Vector3.new(0, 3, 0))
                print("传送到传送点 3")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "workspace",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target4 + Vector3.new(0, 3, 0))
                print("传送到传送点 4")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "storehouse",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target5 + Vector3.new(0, 3, 0))
                print("传送到传送点 5")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "power station",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target6 + Vector3.new(0, 3, 0))
                print("传送到传送点 6")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})

Tab:Button({
    Title = "Radio station",
    Callback = function()
        local ok, err = pcall(function()
            local root = getRootPart()
            if root then
                root.CFrame = CFrame.new(target7 + Vector3.new(0, 3, 0))
                print("传送到传送点 7")
            end
        end)
        if not ok then
            warn("传送失败:", err)
        end
    end
})
local Tab = Window:Tab({
    Title = "Shop",
    Icon = "store",
    Locked = false,
})

Tab:Button({
    Title = "Open Shop UI",
    Description = "Show PlayerGui.Ingame.Shop",
    Callback = function()
        local success, err = pcall(function()
            local shopGui = Players.LocalPlayer:WaitForChild("PlayerGui"):WaitForChild("Ingame"):WaitForChild("Shop")
            shopGui.Visible = true
        end)
        if not success then
            warn("Shop UI not found:", err)
        end
    end
})
local Tab = Window:Tab({
    Title = "Settings",
    Icon = "settings",
    Locked = false,
})

local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

Tab:Dropdown({
    Title = "Change UI Theme",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function blackouteng()
local Tab = Window:Tab({
    Title = "Functions",
    Icon = "sword",
    Locked = false,
})
Tab:Button({
    Title = "Fly",
    Desc = nil,
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/dream77239/fly/main/README.md"))()
    end
})
Tab:Toggle({
    Title = "Kill Aura",
    Value = false,
    Callback = function(state)
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local LocalPlayer = Players.LocalPlayer

        local swingRemote = ReplicatedStorage:WaitForChild("MeleeStorage").Events:WaitForChild("Swing")
        local hitRemote = ReplicatedStorage:WaitForChild("MeleeStorage").Events:WaitForChild("Hit")
        if not swingRemote or not hitRemote then return end

        local running = state
        local interval = 0.1
        local rangeLimit = 40
        local loopThread

        local function isValidTarget(model)
            if not model or model == LocalPlayer.Character then return false end
            local hrp = model:FindFirstChild("HumanoidRootPart")
            local head = model:FindFirstChild("Head")
            local hum = model:FindFirstChildOfClass("Humanoid")
            if not hrp or not head or not hum then return false end
            if hum.Health <= 0 then return false end
            local lpHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if not lpHRP then return false end
            local dist = (hrp.Position - lpHRP.Position).Magnitude
            if dist > rangeLimit then return false end
            return true, dist
        end

        local function getNearestTarget()
            local customNPCs = workspace:FindFirstChild("NPCs") and workspace.NPCs:FindFirstChild("Custom")
            if not customNPCs then return nil end
            local nearest = nil
            local shortest = math.huge
            for _, npc in pairs(customNPCs:GetChildren()) do
                if npc:IsA("Model") then
                    local valid, dist = isValidTarget(npc)
                    if valid and dist < shortest then
                        nearest = npc
                        shortest = dist
                    end
                end
            end
            return nearest
        end

        local function startAura()
            if loopThread then return end
            loopThread = task.spawn(function()
                while running do
                    local target = getNearestTarget()
                    if target then
                        local head = target:FindFirstChild("Head")
                        local hrp = target:FindFirstChild("HumanoidRootPart")
                        if head and hrp then
                            local args = {[1]=head, [2]=hrp.Position}
                            pcall(function() swingRemote:InvokeServer() end)
                            pcall(function() hitRemote:FireServer(unpack(args)) end)
                        end
                    end
                    task.wait(interval)
                end
                loopThread = nil
            end)
        end

        local function stopAura()
            running = false
            loopThread = nil
        end

        if running then
            startAura()
        else
            stopAura()
        end
    end
})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

local LootEvent = ReplicatedStorage:WaitForChild("Events").Loot.LootObject
local MinigameEvent = ReplicatedStorage:WaitForChild("Events").Loot.MinigameResult
local UpdateStates = ReplicatedStorage:WaitForChild("Events").Player.UpdateStates
local StaminaRemote = ReplicatedStorage:WaitForChild("Events").Player.Stamina

local lootFolder = workspace:WaitForChild("Map").Loot
local NPCFolder = workspace:WaitForChild("NPCs").Custom

local validContainers = {
    ["DuffelBag"] = true,
    ["Case"] = true,
    ["BunkerCrate"] = true,
    ["CashRegister"] = true,
    ["Locker"] = true,
    ["MedBox"] = true,
    ["Safe"] = true
}

local lastPromptedContainer = nil
local autoLootEnabled, hitboxEnabled = false, false
local noRagdollEnabled, noFallDamageEnabled, spoofStatesEnabled = false, false, false
local gunModEnabled = false
local rpmValue, rpmSetByUser = 9999, false

Tab:Toggle({
    Title = "No Ragdoll",
    Value = false,
    Callback = function(state)
        noRagdollEnabled = state
        if state and not _G.noRagdollHook then
            _G.noRagdollHook = hookmetamethod(game, "__namecall", function(self, ...)
                if getnamecallmethod() == "FireServer" and tostring(self) == "Ragdoll" then return end
                return _G.noRagdollHook(self, ...)
            end)
        end
    end
})

Tab:Toggle({
    Title = "No Fall Damage",
    Value = false,
    Callback = function(state)
        noFallDamageEnabled = state
        if state and not _G.noFallDamageHook then
            _G.noFallDamageHook = hookmetamethod(game, "__namecall", function(self, ...)
                if getnamecallmethod() == "FireServer" and tostring(self) == "Damage" then return end
                return _G.noFallDamageHook(self, ...)
            end)
        end
    end
})

Tab:Toggle({
    Title = "Infinite Stamina",
    Value = false,
    Callback = function(state)
        spoofStatesEnabled = state
        if state then
            if not _G.spoofStatesConn then
                _G.spoofStatesConn = RunService.RenderStepped:Connect(function()
                    if not spoofStatesEnabled then return end
                    local char = player.Character
                    local root = char and char:FindFirstChild("HumanoidRootPart")
                    if root then
                        UpdateStates:FireServer(root.Position, root.Velocity, root.CFrame.LookVector, {
                            Crouching = false,
                            Sprinting = false,
                            Aiming = false
                        })
                    end
                end)
            end
        else
            if _G.spoofStatesConn then
                _G.spoofStatesConn:Disconnect()
                _G.spoofStatesConn = nil
            end
        end
    end
})

Tab:Toggle({
    Title = "Expand Hitbox",
    Value = false,
    Callback = function(state)
        hitboxEnabled = state
        if state then
            if not _G.hitboxConn then
                _G.hitboxConn = RunService.Heartbeat:Connect(function()
                    if not hitboxEnabled then return end
                    for _, target in pairs(workspace:GetDescendants()) do
                        if target:IsA("Model") and target:FindFirstChild("HumanoidRootPart") and target:FindFirstChild("Head") then
                            local humanoid = target:FindFirstChildOfClass("Humanoid")
                            local playerCheck = Players:GetPlayerFromCharacter(target)
                            if humanoid and target ~= player.Character then
                                local head = target:FindFirstChild("Head")
                                if head then
                                    head.Size = Vector3.new(6, 6, 6)
                                    head.Transparency = 0.5
                                    head.Material = Enum.Material.Neon
                                    head.Color = Color3.fromRGB(255, 0, 0)
                                    head.CanCollide = false
                                end
                            end
                        end
                    end
                end)
            end
        else
            if _G.hitboxConn then
                _G.hitboxConn:Disconnect()
                _G.hitboxConn = nil
            end
            for _, target in pairs(workspace:GetDescendants()) do
                if target:IsA("Model") and target:FindFirstChild("HumanoidRootPart") and target:FindFirstChild("Head") then
                    local humanoid = target:FindFirstChildOfClass("Humanoid")
                    local playerCheck = Players:GetPlayerFromCharacter(target)
                    if humanoid and target ~= player.Character then
                        local head = target:FindFirstChild("Head")
                        if head then
                            head.Size = Vector3.new(2, 1, 1)
                            head.Transparency = 0
                            head.Material = Enum.Material.Plastic
                            head.Color = Color3.fromRGB(255, 255, 255)
                            head.CanCollide = true
                        end
                    end
                end
            end
        end
    end
})

Tab:Toggle({
    Title = "Instant Interact",
    Value = false,
    Callback = function(state)
        if state then
            for _, prompt in pairs(workspace:GetDescendants()) do
                if prompt:IsA("ProximityPrompt") then
                    if not OriginalHoldTimes[prompt] then
                        OriginalHoldTimes[prompt] = prompt.HoldDuration
                    end
                    prompt.HoldDuration = 0
                end
            end

            promptConnection = workspace.DescendantAdded:Connect(function(obj)
                if obj:IsA("ProximityPrompt") then
                    if not OriginalHoldTimes[obj] then
                        OriginalHoldTimes[obj] = obj.HoldDuration
                    end
                    obj.HoldDuration = 0
                end
            end)
        else
            for prompt, original in pairs(OriginalHoldTimes) do
                if prompt and prompt.Parent then
                    prompt.HoldDuration = original
                end
            end
            OriginalHoldTimes = {}

            if promptConnection then
                promptConnection:Disconnect()
                promptConnection = nil
            end
        end
    end
})

Tab:Toggle({
    Title = "Player ESP",
    Default = false,
    Callback = function(state)
        if state then
            startPlayerESP()
        else
            stopPlayerESP()
        end
    end
})

Tab:Toggle({
    Title = "Speed",
    Value = false,
    Callback = function(state)
        tpwalking = state
        if state then
            spawn(function()
                while tpwalking do
                    local chr = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local hrp = chr:FindFirstChild("HumanoidRootPart")
                    local hum = chr:FindFirstChildWhichIsA("Humanoid")
                    local delta = RunService.Heartbeat:Wait()
                    if hrp and hum and hum.MoveDirection.Magnitude > 0 then
                        hrp.CFrame = hrp.CFrame + (hum.MoveDirection * tpwalkSpeed * delta)
                    end
                end
            end)
        end
    end
})

Tab:Slider({
    Title = "Speed Adjust",
    Value = {
        Min = 0,
        Max = 250,
        Default = tpwalkSpeed,
    },
    Callback = function(value)
        tpwalkSpeed = value
    end
})

local Tab = Window:Tab({  
    Title = "Weapon Settings",  
    Icon = "crosshair",  
    Locked = false,
})

Tab:Toggle({
	Title = "No Recoil",
	Value = false,
	Callback = function(state)
		recoilEnabled = state
	end
})

Tab:Toggle({
	Title = "No Spread",
	Value = false,
	Callback = function(state)
		spreadEnabled = state
	end
})

Tab:Toggle({
	Title = "High RPM",
	Value = false,
	Callback = function(state)
		rpmEnabled = state
	end
})

Tab:Input({
	Title = "Set RPM",
	Value = tostring(rpmValue),
	Placeholder = "Enter RPM Value",
	Callback = function(input)
		local num = tonumber(input)
		if num then
			rpmValue = num
		end
	end
})

local Tab = Window:Tab({    
    Title = "Character Appearance",    
    Icon = "hand-platter",    
    Locked = false,  
})  

local bodyMaterial = "ForceField"  
local bodyColor = Color3.fromRGB(0, 200, 255)  
local bodyCharmsEnabled = false  

Tab:Dropdown({  
    Title = "Body Material",  
    Multi = false,  
    AllowNone = false,  
    Value = bodyMaterial,  
    Values = {"Plastic", "ForceField", "Wood", "Grass", "Neon", "Glass"},  
    Callback = function(value)  
        bodyMaterial = value  
    end  
})  

Tab:Colorpicker({  
    Title = "Body Color",  
    Default = Color3.fromRGB(0, 200, 255),  
    Callback = function(color)  
        bodyColor = color  
    end  
})  

Tab:Toggle({  
    Title = "Enable Body Visual",  
    Value = false,  
    Callback = function(state)  
        bodyCharmsEnabled = state  
        if bodyCharmsEnabled then  
            spawn(function()  
                while bodyCharmsEnabled do  
                    task.wait(0.05)  
                    local player = game:GetService("Players").LocalPlayer  
                    if player and player.Character then  
                        for _, part in pairs(player.Character:GetDescendants()) do  
                            if part:IsA("BasePart") then  
                                part.Material = Enum.Material[bodyMaterial]  
                                part.Color = bodyColor  
                            end  
                        end  
                    end  
                end  
            end)  
        end  
    end  
})

local SetTab = Window:Tab({
    Title = "Settings",
    Icon = "settings",
    Locked = false,
})
local themeValues = {}
for name, _ in pairs(WindUI:GetThemes()) do
    table.insert(themeValues, name)
end

SetTab:Dropdown({
    Title = "Change UI Theme",
    Multi = false,
    AllowNone = false,
    Value = nil,
    Values = themeValues,
    Callback = function(theme)
        WindUI:SetTheme(theme)
    end
})
end
local function ylxxeng()
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local mt = getrawmetatable(game)
local oldNamecall = mt.__namecall
local fallImmuneEnabled = false

local gunStatsModule = require(ReplicatedStorage.GunScripts.GunStats)
local backup = {}
for i, stat in pairs(gunStatsModule) do
    backup[i] = {}
    for k, v in pairs(stat) do
        backup[i][k] = v
    end
end

local function restoreStats()
    for i, stat in pairs(gunStatsModule) do
        for k, v in pairs(backup[i]) do
            stat[k] = v
        end
    end
end

Tab:Toggle({
    Title = "fall damage immunity",
    Value = false,
    Callback = function(state)
        fallImmuneEnabled = state
        setreadonly(mt, false)
        mt.__namecall = newcclosure(function(remote, ...)
            if fallImmuneEnabled and getnamecallmethod() == "FireServer" and remote.Name == "ChangeCharacter" then
                local args = {...}
                if args[1] == "Damage" then
                    return nil
                end
            end
            return oldNamecall(remote, ...)
        end)
        setreadonly(mt, true)
    end
})

Tab:Toggle({
    Title = "no recoil",
    Value = false,
    Callback = function(state)
        restoreStats()
        if state then
            for _, gunStat in pairs(gunStatsModule) do
                if gunStat.FanFire ~= nil then gunStat.FanFire = true end
                if gunStat.camShakeResist ~= nil then gunStat.camShakeResist = 0 end
                if gunStat.prepTime ~= nil then gunStat.prepTime = 0 end
                if gunStat.equipTime ~= nil then gunStat.equipTime = 0 end
                if gunStat.Spread ~= nil then gunStat.Spread = 0 end
                if gunStat.InstantFireAnimation ~= nil then gunStat.InstantFireAnimation = true end
            end
        end
    end
})

Tab:Toggle({
    Title = "instant reload",
    Value = false,
    Callback = function(state)
        restoreStats()
        if state then
            for _, gunStat in pairs(gunStatsModule) do
                if gunStat.FanFire ~= nil then gunStat.FanFire = true end
                if gunStat.prepTime ~= nil then gunStat.prepTime = 0 end
                if gunStat.equipTime ~= nil then gunStat.equipTime = 0 end
                if gunStat.camShakeResist ~= nil then gunStat.camShakeResist = 0 end
                if gunStat.ReloadAnimationSpeed ~= nil then gunStat.ReloadAnimationSpeed = 10 end
                if gunStat.ReloadSpeed ~= nil then gunStat.ReloadSpeed = 0 end
                if gunStat.Spread ~= nil then gunStat.Spread = 0 end
                if gunStat.InstantFireAnimation ~= nil then gunStat.InstantFireAnimation = true end
            end
        end
    end
})

Tab:Toggle({
    Title = "no spread",
    Value = false,
    Callback = function(state)
        restoreStats()
        if state then
            for _, gunStat in pairs(gunStatsModule) do
                if gunStat.FanFire ~= nil then gunStat.FanFire = true end
                if gunStat.prepTime ~= nil then gunStat.prepTime = 0 end
                if gunStat.equipTime ~= nil then gunStat.equipTime = 0 end
                if gunStat.camShakeResist ~= nil then gunStat.camShakeResist = 0 end
                if gunStat.ReloadAnimationSpeed ~= nil then gunStat.ReloadAnimationSpeed = 10 end
                if gunStat.ReloadSpeed ~= nil then gunStat.ReloadSpeed = 0 end
                if gunStat.Spread ~= nil then gunStat.Spread = 0 end
                if gunStat.HipFireAccuracy ~= nil then gunStat.HipFireAccuracy = 0 end
                if gunStat.ZoomAccuracy ~= nil then gunStat.ZoomAccuracy = 0 end
                if gunStat.InstantFireAnimation ~= nil then gunStat.InstantFireAnimation = true end
            end
        end
    end
})

end
local function jscqeng()
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

Interstellar = Interstellar or {}
Interstellar.autobirth = false
Interstellar.hoop = false
Interstellar.mainexe = false
Interstellar.autochest = false

Tab:Toggle({
    Title = "auto rebirth",
    Value = false,
    Callback = function(state)
        Interstellar.autobirth = state
        if state then
            task.spawn(function()
                while Interstellar.autobirth do
                    if LocalPlayer.leaderstats.Rebirths.Value >= Interstellar.birth then
                        LocalPlayer:Kick("automatically rebirthed to "..Interstellar.birth)
                        break
                    end
                    ReplicatedStorage.rEvents.rebirthEvent:FireServer("rebirthRequest")
                    task.wait()
                end
            end)
        end
    end
})

Tab:Toggle({
    Title = "collect all hoops",
    Value = false,
    Callback = function(state)
        Interstellar.hoop = state
        if state then
            task.spawn(function()
                while Interstellar.hoop do
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        for _, hoop in ipairs(workspace.Hoops:GetChildren()) do
                            if hoop.Name == "Hoop" then
                                hoop.CFrame = char.HumanoidRootPart.CFrame
                            end
                        end
                    end
                    task.wait()
                end
            end)
        end
    end
})

Tab:Toggle({
    Title = "auto race",
    Value = false,
    Callback = function(state)
        Interstellar.mainexe = state
        if state then
            task.spawn(function()
                while Interstellar.mainexe do
                    ReplicatedStorage.rEvents.raceEvent:FireServer("joinRace")
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        if game.PlaceId == 3101667897 then
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Grassland.finishPart.CFrame
                            task.wait(0.1)
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Magma.finishPart.CFrame
                            task.wait(0.1)
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Desert.finishPart.CFrame
                        elseif game.PlaceId == 3276265788 then
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Speedway.finishPart.CFrame
                        elseif game.PlaceId == 3232996272 then
                            char.HumanoidRootPart.CFrame = workspace.raceMaps.Starway.finishPart.CFrame
                        end
                    end
                    task.wait(0.3)
                end
            end)
        end
    end
})

Tab:Toggle({
    Title = "auto chest",
    Value = false,
    Callback = function(state)
        Interstellar.autochest = state
        if state then
            task.spawn(function()
                while Interstellar.autochest do
                    for _, v in pairs(ReplicatedStorage.chestRewards:GetChildren()) do
                        ReplicatedStorage.rEvents.checkChestRemote:InvokeServer(v.Name)
                    end
                    task.wait(5)
                end
            end)
        end
    end
})

end
local function lcsdheng()
local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local MainTab = Window:Tab({
        Title = "home",
        Icon = "zap",
        Locked = false,
    })
    
    MainTab:Paragraph({
        Title = "welcome to 3am script",
        Desc = "thanks for using",
        Image = "rbxassetid://77151669177766",
        ImageSize = 42,
        Thumbnail = "rbxassetid://100291624074476",
        ThumbnailSize = 120
    })
    
    MainTab:Paragraph({
        Title = "by moon-wbthx",
        Desc = "current server id: " .. game.PlaceId, 
    })
    
    local executorName = getExecutorName()
    
    MainTab:Paragraph({
        Title = "executor",
        Desc = ": " .. executorName, 
    })
    
    local GeneralTab = Window:Tab({
        Title = "esp section",
        Icon = "zap",
        Locked = false,
    })

    local shadowManEspEnabled = false
    local shadowManEspLoop = nil
    GeneralTab:Toggle({
        Title = "monster esp",
        Callback = function(state)
            shadowManEspEnabled = state
            
            if state then
                if not _G.ShadowManEspLoop then _G.ShadowManEspLoop = {} end

                local EspList = {
                    FillTransparency = 0.5,
                    OutlineTransparency = 0
                }

                local Players = game:GetService("Players")
                local localPlayer = Players.LocalPlayer

                local function checkShadowMan()
                    local shadowMan = workspace.CurrentMonsters:FindFirstChild("ShadowMan")
                    if shadowMan and not shadowMan:FindFirstChild('ShadowManEspHighlight') then
                        local h = Instance.new('Highlight')
                        h.FillColor = Color3.new(0.2, 0.2, 0.2)
                        h.FillTransparency = EspList.FillTransparency
                        h.OutlineTransparency = EspList.OutlineTransparency
                        h.OutlineColor = Color3.new(1, 0, 0)
                        h.Name = 'ShadowManEspHighlight'
                        h.Parent = shadowMan

                        local biliGui = Instance.new("BillboardGui")
                        biliGui.Name = "ShadowManEspBillboardGui"
                        biliGui.AlwaysOnTop = true
                        biliGui.Size = UDim2.new(0, 200, 0, 50)
                        biliGui.StudsOffset = Vector3.new(0, 3, 0)
                        
                        if shadowMan:FindFirstChild("HumanoidRootPart") then
                            biliGui.Adornee = shadowMan.HumanoidRootPart
                        else
                            biliGui.Adornee = shadowMan
                        end
                        
                        biliGui.Parent = shadowMan
                        
                        local nameLabel = Instance.new("TextLabel")
                        nameLabel.Name = "NameLabel"
                        nameLabel.Size = UDim2.new(1, 0, 0.4, 0)
                        nameLabel.Position = UDim2.new(0.5, 0, 0.2, 0)
                        nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                        nameLabel.BackgroundTransparency = 1
                        nameLabel.TextColor3 = Color3.new(1, 1, 1)
                        nameLabel.Text = "monster"
                        nameLabel.TextScaled = true
                        nameLabel.Font = Enum.Font.SourceSansBold
                        
                        local nameStroke = Instance.new("UIStroke")
                        nameStroke.Color = Color3.new(0, 0, 0)
                        nameStroke.Thickness = 2
                        nameStroke.Parent = nameLabel
                        
                        local distanceLabel = Instance.new("TextLabel")
                        distanceLabel.Name = "DistanceLabel"
                        distanceLabel.Size = UDim2.new(1, 0, 0.3, 0)
                        distanceLabel.Position = UDim2.new(0.5, 0, 0.6, 0)
                        distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                        distanceLabel.BackgroundTransparency = 1
                        distanceLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
                        distanceLabel.TextScaled = true
                        distanceLabel.Font = Enum.Font.SourceSans
                        
                        local distanceStroke = Instance.new("UIStroke")
                        distanceStroke.Color = Color3.new(0, 0, 0)
                        distanceStroke.Thickness = 1
                        distanceStroke.Parent = distanceLabel
                        
                        local healthLabel = Instance.new("TextLabel")
                        healthLabel.Name = "HealthLabel"
                        healthLabel.Size = UDim2.new(1, 0, 0.3, 0)
                        healthLabel.Position = UDim2.new(0.5, 0, 0.9, 0)
                        healthLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                        healthLabel.BackgroundTransparency = 1
                        healthLabel.TextColor3 = Color3.new(0.5, 1, 0.5)
                        healthLabel.TextScaled = true
                        healthLabel.Font = Enum.Font.SourceSans
                        
                        local healthStroke = Instance.new("UIStroke")
                        healthStroke.Color = Color3.new(0, 0, 0)
                        healthStroke.Thickness = 1
                        healthStroke.Parent = healthLabel
                        
                        nameLabel.Parent = biliGui
                        distanceLabel.Parent = biliGui
                        healthLabel.Parent = biliGui
                        
                        _G.ShadowManEspLoop.updateConnection = game:GetService('RunService').RenderStepped:Connect(function()
                            if not shadowManEspEnabled then
                                if _G.ShadowManEspLoop.updateConnection then
                                    _G.ShadowManEspLoop.updateConnection:Disconnect()
                                end
                                return
                            end
                            
                            local character = localPlayer.Character
                            local currentHumanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
                            
                            if shadowMan and shadowMan.Parent and currentHumanoidRootPart then
                                local shadowManRoot = shadowMan:FindFirstChild('HumanoidRootPart') or shadowMan:GetPivot().Position
                                local distance = (currentHumanoidRootPart.Position - shadowManRoot.Position).Magnitude
                                distanceLabel.Text = "distance: " .. string.format('%.1f', distance) .. "m"
                                
                                local humanoid = shadowMan:FindFirstChildOfClass("Humanoid")
                                if humanoid then
                                    healthLabel.Text = "health: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)
                                    
                                    local healthPercent = humanoid.Health / humanoid.MaxHealth
                                    if healthPercent > 0.7 then
                                        healthLabel.TextColor3 = Color3.new(0.5, 1, 0.5)
                                    elseif healthPercent > 0.3 then
                                        healthLabel.TextColor3 = Color3.new(1, 1, 0.5)
                                    else
                                        healthLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
                                    end
                                else
                                    healthLabel.Text = "health: unknown"
                                end
                            else
                                if _G.ShadowManEspLoop.updateConnection then
                                    _G.ShadowManEspLoop.updateConnection:Disconnect()
                                end
                            end
                        end)
                    end
                end
                
                checkShadowMan()
            else
                if _G.ShadowManEspLoop and _G.ShadowManEspLoop.updateConnection then
                    _G.ShadowManEspLoop.updateConnection:Disconnect()
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name == "ShadowManEspHighlight" or obj.Name == "ShadowManEspBillboardGui" then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local brassKeyEspEnabled = false
    local brassKeyEspLoop = nil
    GeneralTab:Toggle({
        Title = "brass key esp",
        Callback = function(state)
            brassKeyEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local brassKeyEspObjects = {}

                local EspSettings = {
                    FillColor = Color3.fromRGB(181, 166, 66),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0,
                    Enabled = true
                }

                local function createBrassKeyEsp(keyModel)
                    if not keyModel or not keyModel.Parent then return end
                    if brassKeyEspObjects[keyModel] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "BrassKeyESP_Highlight"
                    highlight.Adornee = keyModel
                    highlight.FillColor = EspSettings.FillColor
                    highlight.FillTransparency = EspSettings.FillTransparency
                    highlight.OutlineColor = EspSettings.OutlineColor
                    highlight.OutlineTransparency = EspSettings.OutlineTransparency
                    highlight.Parent = keyModel
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "BrassKeyESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = keyModel:FindFirstChild("Handle") or keyModel:FindFirstChild("PrimaryPart") or keyModel
                    billboard.Parent = keyModel
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
                    nameLabel.Text = "brass key"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    for _, child in ipairs(keyModel:GetDescendants()) do
                        if child:IsA("BasePart") then
                            local partHighlight = Instance.new("Highlight")
                            partHighlight.Name = "BrassKeyESP_PartHighlight"
                            partHighlight.Adornee = child
                            partHighlight.FillColor = EspSettings.FillColor
                            partHighlight.FillTransparency = EspSettings.FillTransparency + 0.1
                            partHighlight.OutlineColor = EspSettings.OutlineColor
                            partHighlight.OutlineTransparency = EspSettings.OutlineTransparency
                            partHighlight.Parent = child
                        end
                    end
                    
                    brassKeyEspObjects[keyModel] = {Highlight = highlight, Billboard = billboard, Model = keyModel}
                end

                local function removeBrassKeyEsp(keyModel)
                    if brassKeyEspObjects[keyModel] then
                        local esp = brassKeyEspObjects[keyModel]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        
                        for _, child in ipairs(keyModel:GetDescendants()) do
                            if child:IsA("BasePart") and child:FindFirstChild("BrassKeyESP_PartHighlight") then
                                child.BrassKeyESP_PartHighlight:Destroy()
                            end
                        end
                        
                        brassKeyEspObjects[keyModel] = nil
                    end
                end

                local function cleanupAllBrassKeyESP()
                    for keyModel, _ in pairs(brassKeyEspObjects) do
                        removeBrassKeyEsp(keyModel)
                    end
                    brassKeyEspObjects = {}
                end

                local function scanForBrassKeys()
                    if not brassKeyEspEnabled then return end
                    
                    for _, obj in pairs(Workspace:GetDescendants()) do
                        if obj:IsA("Model") then
                            local lowerName = obj.Name:lower()
                            if lowerName:find("brass") and (lowerName:find("key") or lowerName:find("keys")) then
                                createBrassKeyEsp(obj)
                            end
                        end
                    end
                end

                local function updateBrassKeyDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    
                    if not rootPart then return end
                    
                    for keyModel, esp in pairs(brassKeyEspObjects) do
                        if keyModel and keyModel.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - keyModel.Position).Magnitude
                                distanceTextLabel.Text = "distance: " .. string.format("%.1f", distance) .. "m"
                            end
                        else
                            removeBrassKeyEsp(keyModel)
                        end
                    end
                end

                local function startBrassKeyEspLoop()
                    if brassKeyEspLoop then return end
                    
                    scanForBrassKeys()
                    
                    local scanTimer = 0
                    brassKeyEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not brassKeyEspEnabled then
                            if brassKeyEspLoop then
                                brassKeyEspLoop:Disconnect()
                                brassKeyEspLoop = nil
                            end
                            cleanupAllBrassKeyESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForBrassKeys()
                        end
                        updateBrassKeyDistances()
                    end)
                end

                startBrassKeyEspLoop()
            else
                if brassKeyEspLoop then
                    brassKeyEspLoop:Disconnect()
                    brassKeyEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("BrassKeyESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local flashlightEspEnabled = false
    local flashlightEspLoop = nil
    GeneralTab:Toggle({
        Title = "flashlight esp",
        Callback = function(state)
            flashlightEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local flashlightEspObjects = {}

                local FlashlightSettings = {
                    FillColor = Color3.fromRGB(255, 255, 0),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0
                }

                local function createFlashlightEsp(flashlightModel)
                    if not flashlightModel or not flashlightModel.Parent then return end
                    if flashlightEspObjects[flashlightModel] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "FlashlightESP_Highlight"
                    highlight.Adornee = flashlightModel
                    highlight.FillColor = FlashlightSettings.FillColor
                    highlight.FillTransparency = FlashlightSettings.FillTransparency
                    highlight.OutlineColor = FlashlightSettings.OutlineColor
                    highlight.OutlineTransparency = FlashlightSettings.OutlineTransparency
                    highlight.Parent = flashlightModel
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "FlashlightESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = flashlightModel
                    billboard.Parent = flashlightModel
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
                    nameLabel.Text = "flashlight"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    flashlightEspObjects[flashlightModel] = {Highlight = highlight, Billboard = billboard}
                end

                local function removeFlashlightEsp(flashlightModel)
                    if flashlightEspObjects[flashlightModel] then
                        local esp = flashlightEspObjects[flashlightModel]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        flashlightEspObjects[flashlightModel] = nil
                    end
                end

                local function cleanupAllFlashlightESP()
                    for flashlightModel, _ in pairs(flashlightEspObjects) do
                        removeFlashlightEsp(flashlightModel)
                    end
                    flashlightEspObjects = {}
                end

                local function scanForFlashlights()
                    if not flashlightEspEnabled then return end
                    
                    local pickups = Workspace:FindFirstChild("Pickups")
                    if pickups then
                        local flashlight = pickups:FindFirstChild("Flashlight")
                        if flashlight then
                            if flashlight:IsA("Model") then
                                createFlashlightEsp(flashlight)
                            else
                                for _, flashlightItem in ipairs(flashlight:GetChildren()) do
                                    if flashlightItem:IsA("Model") or flashlightItem:IsA("BasePart") then
                                        createFlashlightEsp(flashlightItem)
                                    end
                                end
                            end
                        end
                    end
                    
                    for flashlightModel, esp in pairs(flashlightEspObjects) do
                        if not flashlightModel or not flashlightModel.Parent then
                            removeFlashlightEsp(flashlightModel)
                        end
                    end
                end

                local function updateFlashlightDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    for flashlightModel, esp in pairs(flashlightEspObjects) do
                        if flashlightModel and flashlightModel.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - flashlightModel.Position).Magnitude
                                distanceTextLabel.Text = "distance: " .. string.format("%.1f", distance) .. "m"
                            end
                        end
                    end
                end

                local function startFlashlightEspLoop()
                    if flashlightEspLoop then return end
                    
                    scanForFlashlights()
                    
                    local scanTimer = 0
                    flashlightEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not flashlightEspEnabled then
                            if flashlightEspLoop then
                                flashlightEspLoop:Disconnect()
                                flashlightEspLoop = nil
                            end
                            cleanupAllFlashlightESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForFlashlights()
                        end
                        updateFlashlightDistances()
                    end)
                end

                startFlashlightEspLoop()
            else
                if flashlightEspLoop then
                    flashlightEspLoop:Disconnect()
                    flashlightEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("FlashlightESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local fuelEspEnabled = false
    local fuelEspLoop = nil
    GeneralTab:Toggle({
        Title = "fuel esp",
        Callback = function(state)
            fuelEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local fuelEspObjects = {}

                local FuelSettings = {
                    FillColor = Color3.fromRGB(255, 100, 0),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0
                }

                local function createFuelEsp(fuelModel)
                    if not fuelModel or not fuelModel.Parent then return end
                    if fuelEspObjects[fuelModel] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "FuelESP_Highlight"
                    highlight.Adornee = fuelModel
                    highlight.FillColor = FuelSettings.FillColor
                    highlight.FillTransparency = FuelSettings.FillTransparency
                    highlight.OutlineColor = FuelSettings.OutlineColor
                    highlight.OutlineTransparency = FuelSettings.OutlineTransparency
                    highlight.Parent = fuelModel
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "FuelESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = fuelModel
                    billboard.Parent = fuelModel
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(255, 150, 0)
                    nameLabel.Text = "fuel"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    fuelEspObjects[fuelModel] = {Highlight = highlight, Billboard = billboard}
                end

                local function removeFuelEsp(fuelModel)
                    if fuelEspObjects[fuelModel] then
                        local esp = fuelEspObjects[fuelModel]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        fuelEspObjects[fuelModel] = nil
                    end
                end

                local function cleanupAllFuelESP()
                    for fuelModel, _ in pairs(fuelEspObjects) do
                        removeFuelEsp(fuelModel)
                    end
                    fuelEspObjects = {}
                end

                local function scanForFuel()
                    if not fuelEspEnabled then return end
                    
                    local pickups = Workspace:FindFirstChild("Pickups")
                    if pickups then
                        local fuel = pickups:FindFirstChild("Fuel")
                        if fuel then
                            if fuel:IsA("Model") then
                                createFuelEsp(fuel)
                            else
                                for _, fuelItem in ipairs(fuel:GetChildren()) do
                                    if fuelItem:IsA("Model") or fuelItem:IsA("BasePart") then
                                        createFuelEsp(fuelItem)
                                    end
                                end
                            end
                        end
                    end
                    
                    for fuelModel, esp in pairs(fuelEspObjects) do
                        if not fuelModel or not fuelModel.Parent then
                            removeFuelEsp(fuelModel)
                        end
                    end
                end

                local function updateFuelDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    for fuelModel, esp in pairs(fuelEspObjects) do
                        if fuelModel and fuelModel.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - fuelModel.Position).Magnitude
                                distanceTextLabel.Text = "distance: " .. string.format("%.1f", distance) .. "m"
                            end
                        end
                    end
                end

                local function startFuelEspLoop()
                    if fuelEspLoop then return end
                    
                    scanForFuel()
                    
                    local scanTimer = 0
                    fuelEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not fuelEspEnabled then
                            if fuelEspLoop then
                                fuelEspLoop:Disconnect()
                                fuelEspLoop = nil
                            end
                            cleanupAllFuelESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForFuel()
                        end
                        updateFuelDistances()
                    end)
                end

                startFuelEspLoop()
            else
                if fuelEspLoop then
                    fuelEspLoop:Disconnect()
                    fuelEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("FuelESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local vehicleEspEnabled = false
    local vehicleEspLoop = nil
    GeneralTab:Toggle({
        Title = "car esp",
        Callback = function(state)
            vehicleEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local vehicleEspObjects = {}

                local VehicleSettings = {
                    FillColor = Color3.fromRGB(0, 100, 255),
                    FillTransparency = 0.7,
                    OutlineColor = Color3.new(1, 1, 1),
                    OutlineTransparency = 0
                }

                local function createVehicleEsp(vehiclePart)
                    if not vehiclePart or not vehiclePart.Parent then return end
                    if vehicleEspObjects[vehiclePart] then return end
                    
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "VehicleESP_Highlight"
                    highlight.Adornee = vehiclePart
                    highlight.FillColor = VehicleSettings.FillColor
                    highlight.FillTransparency = VehicleSettings.FillTransparency
                    highlight.OutlineColor = VehicleSettings.OutlineColor
                    highlight.OutlineTransparency = VehicleSettings.OutlineTransparency
                    highlight.Parent = vehiclePart
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "VehicleESP_Billboard"
                    billboard.AlwaysOnTop = true
                    billboard.Size = UDim2.new(0, 150, 0, 60)
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = vehiclePart
                    billboard.Parent = vehiclePart
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.25, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
                    nameLabel.Text = "car"
                    nameLabel.TextSize = 16
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 2
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.75, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.TextSize = 14
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    vehicleEspObjects[vehiclePart] = {Highlight = highlight, Billboard = billboard}
                end

                local function removeVehicleEsp(vehiclePart)
                    if vehicleEspObjects[vehiclePart] then
                        local esp = vehicleEspObjects[vehiclePart]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        vehicleEspObjects[vehiclePart] = nil
                    end
                end

                local function cleanupAllVehicleESP()
                    for vehiclePart, _ in pairs(vehicleEspObjects) do
                        removeVehicleEsp(vehiclePart)
                    end
                    vehicleEspObjects = {}
                end

                local function scanForVehicles()
                    if not vehicleEspEnabled then return end
                    
                    local vehicles = Workspace:FindFirstChild("Vehicles")
                    if vehicles then
                        local chryslerValiant = vehicles:FindFirstChild("ChryslerValiant")
                        if chryslerValiant then
                            local bodyWork = chryslerValiant:FindFirstChild("BodyWork")
                            if bodyWork then
                                createVehicleEsp(bodyWork)
                            end
                        end
                    end
                    
                    for vehiclePart, esp in pairs(vehicleEspObjects) do
                        if not vehiclePart or not vehiclePart.Parent then
                            removeVehicleEsp(vehiclePart)
                        end
                    end
                end

                local function updateVehicleDistances()
                    local character = localPlayer.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    for vehiclePart, esp in pairs(vehicleEspObjects) do
                        if vehiclePart and vehiclePart.Parent then
                            local distanceTextLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceTextLabel then
                                local distance = (rootPart.Position - vehiclePart.Position).Magnitude
                                distanceTextLabel.Text = "distance: " .. string.format("%.1f", distance) .. "m"
                            end
                        end
                    end
                end

                local function startVehicleEspLoop()
                    if vehicleEspLoop then return end
                    
                    scanForVehicles()
                    
                    local scanTimer = 0
                    vehicleEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not vehicleEspEnabled then
                            if vehicleEspLoop then
                                vehicleEspLoop:Disconnect()
                                vehicleEspLoop = nil
                            end
                            cleanupAllVehicleESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        if scanTimer >= 0.5 then
                            scanTimer = 0
                            scanForVehicles()
                        end
                        updateVehicleDistances()
                    end)
                end

                startVehicleEspLoop()
            else
                if vehicleEspLoop then
                    vehicleEspLoop:Disconnect()
                    vehicleEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("VehicleESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local allEspEnabled = false
    local mainEspLoop = nil
    GeneralTab:Toggle({
        Title = "master esp",
        Callback = function(state)
            allEspEnabled = state
            
            if state then
                local Players = game:GetService("Players")
                local RunService = game:GetService("RunService")
                local Workspace = game:GetService("Workspace")
                local localPlayer = Players.LocalPlayer

                local espObjects = {}

                local EspConfig = {
                    Pickups = {
                        Enabled = true,
                        Color = Color3.fromRGB(0, 255, 0),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 1, 1),
                        TextColor = Color3.fromRGB(100, 255, 100),
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    },
                    ShadowMan = {
                        Enabled = true,
                        Color = Color3.fromRGB(128, 0, 128),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 0, 0),
                        TextColor = Color3.fromRGB(255, 0, 255),
                        DisplayName = "shadow monster",
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    },
                    FrontFenceGate = {
                        Enabled = true,
                        Color = Color3.fromRGB(255, 165, 0),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 1, 0),
                        TextColor = Color3.fromRGB(255, 200, 0),
                        DisplayName = "warehouse gate",
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop,
                        NoHighlight = true,
                        LabelOnly = true
                    },
                    ChryslerValiant = {
                        Enabled = true,
                        Color = Color3.fromRGB(0, 100, 255),
                        Transparency = 0.7,
                        OutlineColor = Color3.new(1, 1, 1),
                        TextColor = Color3.fromRGB(100, 200, 255),
                        DisplayName = "car",
                        AlwaysOnTop = true,
                        DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    },
                    General = {
                        UpdateInterval = 2,
                        BillboardSize = UDim2.new(0, 120, 0, 50),
                        NameFontSize = 14,
                        DistanceFontSize = 12,
                        AlwaysOnTop = true
                    }
                }

                local function createESP(target, config, customName)
                    if not target or not target.Parent then return nil end
                    if espObjects[target] then return espObjects[target] end
                    
                    local adornee = target
                    local position = Vector3.new(0, 0, 0)
                    
                    if target:IsA("Model") then
                        local primaryPart = target.PrimaryPart or target:FindFirstChildWhichIsA("BasePart")
                        if primaryPart then
                            adornee = primaryPart
                            position = primaryPart.Position
                        else
                            position = target:GetPivot().Position
                        end
                    else
                        position = target.Position
                    end
                    
                    local highlight = nil
                    
                    if not config.NoHighlight then
                        highlight = Instance.new("Highlight")
                        highlight.Name = "ESP_Highlight"
                        highlight.Adornee = adornee
                        highlight.FillColor = config.Color
                        highlight.FillTransparency = config.Transparency
                        highlight.OutlineColor = config.OutlineColor
                        highlight.OutlineTransparency = 0
                        highlight.Enabled = true
                        highlight.DepthMode = config.DepthMode or Enum.HighlightDepthMode.AlwaysOnTop
                        highlight.Parent = target
                    end
                    
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name = "ESP_Billboard"
                    billboard.AlwaysOnTop = config.AlwaysOnTop
                    billboard.Size = EspConfig.General.BillboardSize
                    billboard.StudsOffset = Vector3.new(0, 3, 0)
                    billboard.Adornee = adornee
                    billboard.Enabled = true
                    billboard.Parent = target
                    
                    local nameLabel = Instance.new("TextLabel")
                    nameLabel.Name = "NameLabel"
                    nameLabel.Size = UDim2.new(1, 0, 0.6, 0)
                    nameLabel.Position = UDim2.new(0.5, 0, 0.3, 0)
                    nameLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    nameLabel.BackgroundTransparency = 1
                    nameLabel.TextColor3 = config.TextColor
                    nameLabel.Text = customName or config.DisplayName or target.Name
                    nameLabel.TextSize = EspConfig.General.NameFontSize
                    nameLabel.Font = Enum.Font.SourceSansBold
                    
                    local nameStroke = Instance.new("UIStroke")
                    nameStroke.Color = Color3.new(0, 0, 0)
                    nameStroke.Thickness = 1.5
                    nameStroke.Parent = nameLabel
                    
                    local distanceLabel = Instance.new("TextLabel")
                    distanceLabel.Name = "DistanceLabel"
                    distanceLabel.Size = UDim2.new(1, 0, 0.4, 0)
                    distanceLabel.Position = UDim2.new(0.5, 0, 0.8, 0)
                    distanceLabel.AnchorPoint = Vector2.new(0.5, 0.5)
                    distanceLabel.BackgroundTransparency = 1
                    distanceLabel.TextColor3 = Color3.new(1, 1, 1)
                    distanceLabel.Text = "calculating..."
                    distanceLabel.TextSize = EspConfig.General.DistanceFontSize
                    distanceLabel.Font = Enum.Font.SourceSans
                    
                    local distanceStroke = Instance.new("UIStroke")
                    distanceStroke.Color = Color3.new(0, 0, 0)
                    distanceStroke.Thickness = 1
                    distanceStroke.Parent = distanceLabel
                    
                    nameLabel.Parent = billboard
                    distanceLabel.Parent = billboard
                    
                    espObjects[target] = {
                        Highlight = highlight,
                        Billboard = billboard,
                        Target = target,
                        Position = position,
                        Config = config,
                        Name = customName or config.DisplayName or target.Name
                    }
                    
                    return espObjects[target]
                end

                local function removeESP(target)
                    if espObjects[target] then
                        local esp = espObjects[target]
                        if esp.Highlight and esp.Highlight.Parent then esp.Highlight:Destroy() end
                        if esp.Billboard and esp.Billboard.Parent then esp.Billboard:Destroy() end
                        espObjects[target] = nil
                    end
                end

                local function cleanupAllESP()
                    for target, esp in pairs(espObjects) do
                        removeESP(target)
                    end
                    espObjects = {}
                end

                local function scanPickups()
                    if not allEspEnabled then return end
                    
                    local pickups = Workspace:FindFirstChild("Pickups")
                    if not pickups then return end
                    
                    for _, item in ipairs(pickups:GetChildren()) do
                        if (item:IsA("Model") or item:IsA("BasePart")) and not espObjects[item] then
                            createESP(item, EspConfig.Pickups)
                        end
                    end
                end

                local function scanShadowMan()
                    if not allEspEnabled then return end
                    
                    local currentMonsters = Workspace:FindFirstChild("CurrentMonsters")
                    if currentMonsters then
                        local shadowMan = currentMonsters:FindFirstChild("ShadowMan")
                        if shadowMan and not espObjects[shadowMan] then
                            createESP(shadowMan, EspConfig.ShadowMan)
                        end
                    end
                    
                    for _, model in pairs(Workspace:GetDescendants()) do
                        if model:IsA("Model") and (model.Name:lower():find("shadow") or model.Name == "ShadowMan") then
                            if not espObjects[model] then
                                createESP(model, EspConfig.ShadowMan)
                            end
                        end
                    end
                end

                local function scanFrontFenceGate()
                    if not allEspEnabled then return end
                    
                    local frontFenceGate = Workspace:FindFirstChild("FrontFenceGate")
                    if frontFenceGate and not espObjects[frontFenceGate] then
                        createESP(frontFenceGate, EspConfig.FrontFenceGate)
                    end
                end

                local function scanChryslerValiant()
                    if not allEspEnabled then return end
                    
                    local vehicles = Workspace:FindFirstChild("Vehicles")
                    if vehicles then
                        local chryslerValiant = vehicles:FindFirstChild("ChryslerValiant")
                        if chryslerValiant then
                            local bodyWork = chryslerValiant:FindFirstChild("BodyWork")
                            if bodyWork and not espObjects[bodyWork] then
                                createESP(bodyWork, EspConfig.ChryslerValiant)
                            end
                        end
                    end
                    
                    for _, model in pairs(Workspace:GetDescendants()) do
                        if model:IsA("Model") and (model.Name:lower():find("chrysler") or model.Name:lower():find("valiant")) then
                            if not espObjects[model] then
                                createESP(model, EspConfig.ChryslerValiant)
                            end
                        end
                    end
                end

                local function updateESPDistances()
                    if not allEspEnabled then return end
                    
                    local character = localPlayer.Character
                    if not character then return end
                    
                    local rootPart = character:FindFirstChild("HumanoidRootPart")
                    if not rootPart then return end
                    
                    local playerPos = rootPart.Position
                    
                    for target, esp in pairs(espObjects) do
                        if target and target.Parent then
                            if esp.Target:IsA("Model") then
                                local primaryPart = esp.Target.PrimaryPart or esp.Target:FindFirstChildWhichIsA("BasePart")
                                if primaryPart then
                                    esp.Position = primaryPart.Position
                                else
                                    esp.Position = esp.Target:GetPivot().Position
                                end
                            else
                                esp.Position = esp.Target.Position
                            end
                            
                            local distance = (playerPos - esp.Position).Magnitude
                            
                            if esp.Billboard then
                                esp.Billboard.Enabled = true
                            end
                            
                            if esp.Highlight then
                                esp.Highlight.Enabled = true
                            end
                            
                            local distanceLabel = esp.Billboard and esp.Billboard:FindFirstChild("DistanceLabel")
                            if distanceLabel then
                                if distance < 1000 then
                                    distanceLabel.Text = string.format("%.1f meters", distance)
                                else
                                    distanceLabel.Text = string.format("%.1f kilometers", distance / 1000)
                                end
                                
                                if distance < 500 then
                                    distanceLabel.TextColor3 = Color3.new(0, 1, 0)
                                elseif distance < 250 then
                                    distanceLabel.TextColor3 = Color3.new(1, 1, 0)
                                else
                                    distanceLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
                                end
                            end
                        else
                            removeESP(target)
                        end
                    end
                end

                local function performScan()
                    if not allEspEnabled then return end
                    
                    scanPickups()
                    scanShadowMan()
                    scanFrontFenceGate()
                    scanChryslerValiant()
                end

                local function startMainLoop()
                    if mainEspLoop then return end
                    
                    performScan()
                    
                    local scanTimer = 0
                    local updateTimer = 0
                    local scanInterval = 1.0
                    local updateInterval = 0.1
                    
                    mainEspLoop = RunService.Heartbeat:Connect(function(deltaTime)
                        if not allEspEnabled then
                            if mainEspLoop then
                                mainEspLoop:Disconnect()
                                mainEspLoop = nil
                            end
                            cleanupAllESP()
                            return
                        end
                        
                        scanTimer = scanTimer + deltaTime
                        updateTimer = updateTimer + deltaTime
                        
                        if scanTimer >= scanInterval then
                            scanTimer = 0
                            performScan()
                        end
                        
                        if updateTimer >= updateInterval then
                            updateTimer = 0
                            updateESPDistances()
                        end
                    end)
                end

                startMainLoop()
            else
                if mainEspLoop then
                    mainEspLoop:Disconnect()
                    mainEspLoop = nil
                end
                
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name:find("ESP_") or obj.Name:find("_ESP") then
                        obj:Destroy()
                    end
                end
            end
        end
    })

    local WeaponsTab = Window:Tab({
        Title = "weapon features",
        Icon = "gun",
        Locked = false,
    })
    
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local RunService = game:GetService("RunService")

    local weaponSettings = {
        enabled = false,
        noRecoilEnabled = false,
        infiniteAmmoEnabled = false,
        rapidFireEnabled = false,
        fireRateMultiplier = 2.0,
        recoilMultiplier = 0.0,
        ammoValue = 9999999,
        originalValues = {}
    }

    local weaponConnections = {}

    local function modifyWeaponProperties()
        if not weaponSettings.enabled then
            return false
        end
        
        if not player.Character then
            return false
        end
        
        local backpack = player:FindFirstChild("Backpack")
        if not backpack then
            return false
        end
        
        local tools = {}
        
        for _, item in ipairs(backpack:GetChildren()) do
            if item:IsA("Tool") then
                table.insert(tools, item)
            end
        end
        
        local character = player.Character
        for _, item in ipairs(character:GetChildren()) do
            if item:IsA("Tool") then
                table.insert(tools, item)
            end
        end
        
        for _, tool in ipairs(tools) do
            if not weaponSettings.originalValues[tool] then
                weaponSettings.originalValues[tool] = {}
            end
            
            if weaponSettings.noRecoilEnabled then
                local recoilValue = tool:FindFirstChild("Recoil")
                if recoilValue and (recoilValue:IsA("NumberValue") or recoilValue:IsA("IntValue")) then
                    if weaponSettings.originalValues[tool].recoil == nil then
                        weaponSettings.originalValues[tool].recoil = recoilValue.Value
                    end
                    recoilValue.Value = weaponSettings.originalValues[tool].recoil * weaponSettings.recoilMultiplier
                end
                
                for _, descendant in ipairs(tool:GetDescendants()) do
                    local descendantName = descendant.Name:lower()
                    if descendant:IsA("NumberValue") or descendant:IsA("IntValue") then
                        if descendantName:find("recoil") or descendantName:find("kick") or descendantName:find("spread") then
                            if weaponSettings.originalValues[tool][descendantName] == nil then
                                weaponSettings.originalValues[tool][descendantName] = descendant.Value
                            end
                            descendant.Value = 0
                        end
                    end
                end
            end
            
            if weaponSettings.infiniteAmmoEnabled then
                local ammoValue = tool:FindFirstChild("Ammo")
                if ammoValue and (ammoValue:IsA("IntValue") or ammoValue:IsA("NumberValue")) then
                    if weaponSettings.originalValues[tool].ammo == nil then
                        weaponSettings.originalValues[tool].ammo = ammoValue.Value
                    end
                    ammoValue.Value = weaponSettings.ammoValue
                end
                
                for _, descendant in ipairs(tool:GetDescendants()) do
                    local descendantName = descendant.Name:lower()
                    if descendant:IsA("NumberValue") or descendant:IsA("IntValue") then
                        if descendantName:find("ammo") or descendantName:find("bullets") or descendantName:find("rounds") then
                            if weaponSettings.originalValues[tool][descendantName] == nil then
                                weaponSettings.originalValues[tool][descendantName] = descendant.Value
                            end
                            descendant.Value = weaponSettings.ammoValue
                        end
                    end
                end
            end
            
            if weaponSettings.rapidFireEnabled then
                local fireRateValue = tool:FindFirstChild("FireRate")
                if fireRateValue and (fireRateValue:IsA("NumberValue") or fireRateValue:IsA("IntValue")) then
                    if weaponSettings.originalValues[tool].fireRate == nil then
                        weaponSettings.originalValues[tool].fireRate = fireRateValue.Value
                    end
                    fireRateValue.Value = weaponSettings.originalValues[tool].fireRate * weaponSettings.fireRateMultiplier
                end
                
                for _, descendant in ipairs(tool:GetDescendants()) do
                    local descendantName = descendant.Name:lower()
                    if descendant:IsA("NumberValue") or descendant:IsA("IntValue") then
                        if descendantName:find("firerate") or descendantName:find("cooldown") or descendantName:find("delay") then
                            if weaponSettings.originalValues[tool][descendantName] == nil then
                                weaponSettings.originalValues[tool][descendantName] = descendant.Value
                            end
                            descendant.Value = weaponSettings.originalValues[tool][descendantName] / weaponSettings.fireRateMultiplier
                        end
                    end
                end
            end
        end
        
        return true
    end

    local function restoreOriginalProperties()
        for tool, values in pairs(weaponSettings.originalValues) do
            if tool and tool.Parent then
                for propertyName, originalValue in pairs(values) do
                    if propertyName == "recoil" then
                        local recoilValue = tool:FindFirstChild("Recoil")
                        if recoilValue then
                            recoilValue.Value = originalValue
                        end
                    elseif propertyName == "ammo" then
                        local ammoValue = tool:FindFirstChild("Ammo")
                        if ammoValue then
                            ammoValue.Value = originalValue
                        end
                    elseif propertyName == "fireRate" then
                        local fireRateValue = tool:FindFirstChild("FireRate")
                        if fireRateValue then
                            fireRateValue.Value = originalValue
                        end
                    else
                        for _, descendant in ipairs(tool:GetDescendants()) do
                            if descendant.Name:lower() == propertyName then
                                descendant.Value = originalValue
                            end
                        end
                    end
                end
            end
        end
    end

    local function initWeaponModifier()
        for _, connection in pairs(weaponConnections) do
            if connection then
                connection:Disconnect()
            end
        end
        weaponConnections = {}
        
        if weaponSettings.enabled then
            local success = modifyWeaponProperties()
            
            weaponConnections.characterAdded = player.CharacterAdded:Connect(function(character)
                task.wait(0.5)
                modifyWeaponProperties()
            end)
            
            weaponConnections.heartbeat = RunService.Heartbeat:Connect(function()
                modifyWeaponProperties()
            end)
        else
            restoreOriginalProperties()
        end
    end

    WeaponsTab:Toggle({
        Title = "enable weapon modification",
        Default = false,
        Callback = function(state)
            weaponSettings.enabled = state
            initWeaponModifier()
        end
    })

    WeaponsTab:Toggle({
        Title = "no recoil",
        Default = false,
        Callback = function(state)
            weaponSettings.noRecoilEnabled = state
            if weaponSettings.enabled then
                modifyWeaponProperties()
            end
        end
    })

    WeaponsTab:Toggle({
        Title = "infinite ammo",
        Default = false,
        Callback = function(state)
            weaponSettings.infiniteAmmoEnabled = state
            if weaponSettings.enabled then
                modifyWeaponProperties()
            end
        end
    })

    WeaponsTab:Toggle({
        Title = "rapid fire",
        Default = false,
        Callback = function(state)
            weaponSettings.rapidFireEnabled = state
            if weaponSettings.enabled then
                modifyWeaponProperties()
            end
        end
    })

    WeaponsTab:Slider({
        Title = "fire rate multiplier",
        Default = 2.0,
        Min = 1.0,
        Max = 10.0,
        Callback = function(value)
            weaponSettings.fireRateMultiplier = value
            if weaponSettings.enabled and weaponSettings.rapidFireEnabled then
                modifyWeaponProperties()
            end
        end
    })

    initWeaponModifier()

    local MonstersTab = Window:Tab({
        Title = "monster features",
        Icon = "ghost",
        Locked = false,
    })
    
    MonstersTab:Toggle({
        Title = "evade monsters",
        Default = false,
        Callback = function(state)
            local Players = game:GetService("Players")
            local RunService = game:GetService("RunService")

            local player = Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

            local lastTeleportTime = 0
            local teleportCooldown = 0.01
            
            local heartbeatConnection
            local characterAddedConnection
            
            if state then
                heartbeatConnection = RunService.Heartbeat:Connect(function()
                    if not player.Character then return end
                    
                    character = player.Character
                    humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
                    if not humanoidRootPart then return end
                    
                    local shadowman
                    local currentMonsters = workspace:FindFirstChild("CurrentMonsters")
                    if currentMonsters then
                        shadowman = currentMonsters:FindFirstChild("Shadowman")
                    end
                    
                    if not shadowman then
                        local debriObjects = workspace:FindFirstChild("DebriObjects")
                        if debriObjects then
                            shadowman = debriObjects:FindFirstChild("Shadowman")
                        end
                    end
                    
                    if not shadowman then
                        for _, obj in pairs(workspace:GetDescendants()) do
                            if obj.Name:lower():find("shadowman") then
                                if obj:IsA("Model") or obj:IsA("BasePart") then
                                    shadowman = obj
                                    break
                                end
                            end
                        end
                    end
                    
                    if shadowman then
                        local shadowmanPart
                        if shadowman:IsA("Model") then
                            shadowmanPart = shadowman.PrimaryPart or shadowman:FindFirstChild("HumanoidRootPart") or shadowman:FindFirstChild("Torso") or shadowman:FindFirstChildWhichIsA("BasePart")
                        elseif shadowman:IsA("BasePart") then
                            shadowmanPart = shadowman
                        end
                        
                        if shadowmanPart and humanoidRootPart then
                            local distance = (shadowmanPart.Position - humanoidRootPart.Position).Magnitude
                            local currentTime = tick()
                            
                            if distance <= 20 and (currentTime - lastTeleportTime) >= teleportCooldown then
                                local currentPosition = humanoidRootPart.Position
                                local direction = (humanoidRootPart.Position - shadowmanPart.Position).Unit
                                direction = Vector3.new(direction.X, 0, direction.Z).Unit
                                local newPosition = currentPosition + (direction * 40) + Vector3.new(0, 10, 0)
                                humanoidRootPart.CFrame = CFrame.new(newPosition)
                                lastTeleportTime = currentTime
                            end
                        end
                    end
                end)

                characterAddedConnection = player.CharacterAdded:Connect(function(newCharacter)
                    character = newCharacter
                    humanoidRootPart = newCharacter:WaitForChild("HumanoidRootPart")
                end)
            else
                if heartbeatConnection then
                    heartbeatConnection:Disconnect()
                end
                if characterAddedConnection then
                    characterAddedConnection:Disconnect()
                end
            end
        end
    })
    
    local UtilityTab = Window:Tab({
        Title = "utility section",
        Icon = "settings",
        Locked = false,
    })
    
    UtilityTab:Button({
        Title = "night vision",
        Callback = function()
            local Lighting = game:GetService("Lighting")
            Lighting.Ambient = Color3.new(1, 1, 1)
            Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
        end
    })
    
    UtilityTab:Button({
        Title = "god mode",
        Callback = function()
            local player = game.Players.LocalPlayer
            if player.Character then
                local humanoid = player.Character:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid.Health = math.huge
                end
            end
        end
    })
    
    local flyToggle = false
    local flySpeed = 1
    local FLYING = false
    local flyKeyDown, flyKeyUp, mfly1, mfly2
    local IYMouse = game:GetService("UserInputService")

    local function sFLY()
        repeat task.wait() until Players.LocalPlayer and Players.LocalPlayer.Character and Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart") and Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        repeat task.wait() until IYMouse
        if flyKeyDown or flyKeyUp then flyKeyDown:Disconnect(); flyKeyUp:Disconnect() end

        local T = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        local CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
        local lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
        local SPEED = flySpeed

        local function FLY()
            FLYING = true
            local BG = Instance.new('BodyGyro')
            local BV = Instance.new('BodyVelocity')
            BG.P = 9e4
            BG.Parent = T
            BV.Parent = T
            BG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
            BG.CFrame = T.CFrame
            BV.Velocity = Vector3.new(0, 0, 0)
            BV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
            task.spawn(function()
                while FLYING do
                    task.wait()
                    if not flyToggle and Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
                        Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = true
                    end
                    if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0 then
                        SPEED = flySpeed
                    elseif not (CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0) and SPEED ~= 0 then
                        SPEED = 0
                    end
                    if (CONTROL.L + CONTROL.R) ~= 0 or (CONTROL.F + CONTROL.B) ~= 0 or (CONTROL.Q + CONTROL.E) ~= 0 then
                        BV.Velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROL.F + CONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                        lCONTROL = {F = CONTROL.F, B = CONTROL.B, L = CONTROL.L, R = CONTROL.R}
                    elseif (CONTROL.L + CONTROL.R) == 0 and (CONTROL.F + CONTROL.B) == 0 and (CONTROL.Q + CONTROL.E) == 0 and SPEED ~= 0 then
                        BV.Velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (lCONTROL.F + lCONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(lCONTROL.L + lCONTROL.R, (lCONTROL.F + lCONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                    else
                        BV.Velocity = Vector3.new(0, 0, 0)
                    end
                    BG.CFrame = workspace.CurrentCamera.CoordinateFrame
                end
                CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
                lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
                SPEED = 0
                BG:Destroy()
                BV:Destroy()
                if Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
                    Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
                end
            end)
        end
        flyKeyDown = IYMouse.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Keyboard then
                local KEY = input.KeyCode.Name
                if KEY == "W" then
                    CONTROL.F = flySpeed
                elseif KEY == "S" then
                    CONTROL.B = -flySpeed
                elseif KEY == "A" then
                    CONTROL.L = -flySpeed
                elseif KEY == "D" then 
                    CONTROL.R = flySpeed
                elseif KEY == "E" then
                    CONTROL.Q = flySpeed * 2
                elseif KEY == "Q" then
                    CONTROL.E = -flySpeed * 2
                end
                pcall(function() workspace.CurrentCamera.CameraType = Enum.CameraType.Track end)
            end
        end)
        flyKeyUp = IYMouse.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Keyboard then
                local KEY = input.KeyCode.Name
                if KEY == "W" then
                    CONTROL.F = 0
                elseif KEY == "S" then
                    CONTROL.B = 0
                elseif KEY == "A" then
                    CONTROL.L = 0
                elseif KEY == "D" then
                    CONTROL.R = 0
                elseif KEY == "E" then
                    CONTROL.Q = 0
                elseif KEY == "Q" then
                    CONTROL.E = 0
                end
            end
        end)
        FLY()
    end

    local function NOFLY()
        FLYING = false
        if flyKeyDown then flyKeyDown:Disconnect() end
        if flyKeyUp then flyKeyUp:Disconnect() end
        if mfly1 then mfly1:Disconnect() end
        if mfly2 then mfly2:Disconnect() end
        if Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
            Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
        end
        pcall(function() workspace.CurrentCamera.CameraType = Enum.CameraType.Custom end)
    end

    local function UnMobileFly()
        pcall(function()
            FLYING = false
            local root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            if root:FindFirstChild("BodyVelocity") then root:FindFirstChild("BodyVelocity"):Destroy() end
            if root:FindFirstChild("BodyGyro") then root:FindFirstChild("BodyGyro"):Destroy() end
            if Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid") then
                Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid").PlatformStand = false
            end
            if mfly1 then mfly1:Disconnect() end
            if mfly2 then mfly2:Disconnect() end
        end)
    end

    local function MobileFly()
        UnMobileFly()
        FLYING = true

        local root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        local camera = workspace.CurrentCamera
        local v3none = Vector3.new()
        local v3zero = Vector3.new(0, 0, 0)
        local v3inf = Vector3.new(9e9, 9e9, 9e9)

        local controlModule = require(Players.LocalPlayer.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
        local bv = Instance.new("BodyVelocity")
        bv.Name = "BodyVelocity"
        bv.Parent = root
        bv.MaxForce = v3zero
        bv.Velocity = v3zero

        local bg = Instance.new("BodyGyro")
        bg.Name = "BodyGyro"
        bg.Parent = root
        bg.MaxTorque = v3inf
        bg.P = 1000
        bg.D = 50

        mfly1 = Players.LocalPlayer.CharacterAdded:Connect(function()
            local newRoot = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            local newBv = Instance.new("BodyVelocity")
            newBv.Name = "BodyVelocity"
            newBv.Parent = newRoot
            newBv.MaxForce = v3zero
            newBv.Velocity = v3zero

            local newBg = Instance.new("BodyGyro")
            newBg.Name = "BodyGyro"
            newBg.Parent = newRoot
            newBg.MaxTorque = v3inf
            newBg.P = 1000
            newBg.D = 50
        end)

        mfly2 = game:GetService("RunService").RenderStepped:Connect(function()
            root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            camera = workspace.CurrentCamera
            if Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid") and root and root:FindFirstChild("BodyVelocity") and root:FindFirstChild("BodyGyro") then
                local humanoid = Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
                local VelocityHandler = root:FindFirstChild("BodyVelocity")
                local GyroHandler = root:FindFirstChild("BodyGyro")

                VelocityHandler.MaxForce = v3inf
                GyroHandler.MaxTorque = v3inf
                humanoid.PlatformStand = true
                GyroHandler.CFrame = camera.CoordinateFrame
                VelocityHandler.Velocity = v3none

                local direction = controlModule:GetMoveVector()
                if direction.X > 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity + camera.CFrame.RightVector * (direction.X * (flySpeed * 50))
                end
                if direction.X < 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity + camera.CFrame.RightVector * (direction.X * (flySpeed * 50))
                end
                if direction.Z > 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity - camera.CFrame.LookVector * (direction.Z * (flySpeed * 50))
                end
                if direction.Z < 0 then
                    VelocityHandler.Velocity = VelocityHandler.Velocity - camera.CFrame.LookVector * (direction.Z * (flySpeed * 50))
                end
            end
        end)
    end

    UtilityTab:Slider({
        Title = "speed settings",
        Desc = "slide to adjust",
        Value = {
            Min = 1,
            Max = 150,
            Default = 1,
        },
        Callback = function(Value)
            flySpeed = Value
            if FLYING then
                task.spawn(function()
                    while FLYING do
                        task.wait(0.1)
                        if game:GetService("UserInputService").TouchEnabled then
                            local root = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                            if root and root:FindFirstChild("BodyVelocity") then
                                local bv = root:FindFirstChild("BodyVelocity")
                                bv.Velocity = bv.Velocity.Unit * (flySpeed * 50)
                            end
                        end
                    end
                end)
            end
        end
    })

    UtilityTab:Toggle({
        Title = "flight",
        Default = false,
        Callback = function(state)
            flyToggle = state
            if flyToggle then
                if game:GetService("UserInputService").TouchEnabled then
                    MobileFly()
                else
                    sFLY()
                end
            else
                NOFLY()
                UnMobileFly()
            end
        end
    })

end
local function ccnbutton()
local severcnTab = Window:Tab({  
    Title = "选择服务器",  
    Icon = "house",  
    Locked = false,
})
severcnTab:Button({
    Title = "终极战场",
    Callback = function()
    ubgcn()
    end
})
severcnTab:Button({
    Title = "99夜",
    Callback = function()
    night99()
    end
})
severcnTab:Button({
    Title = "chain",
    Callback = function()
    chain()
    end
})
severcnTab:Button({
    Title = "兵工厂",
    Callback = function()
    bgc()
    end
})
severcnTab:Button({
    Title = "停电(僵尸模式)",
    Callback = function()
    blackout()
    end
})
severcnTab:Button({
    Title = "格蕾丝",
    Callback = function()
    geleisi()
    end
})
severcnTab:Button({
    Title = "传奇战场",
    Callback = function()
    legend()
    end
})
severcnTab:Button({
    Title = "餐厅大亨3",
    Callback = function()
    ctdh()
    end
})
severcnTab:Button({
    Title = "伐木大亨",
    Callback = function()
    fmdh()
    end
})
severcnTab:Button({
    Title = "彩虹朋友2",
    Callback = function()
    chpy()
    end
})
severcnTab:Button({
    Title = "被遗忘",
    Callback = function()
    forsake()
    end
})
severcnTab:Button({
    Title = "鲨口逃生",
    Callback = function()
    skts()
    end
})
severcnTab:Button({
    Title = "摧毁师",
    Callback = function()
    chs()
    end
})
severcnTab:Button({
    Title = "亡命速递",
    Callback = function()
    wmsd()
    end
})
severcnTab:Button({
    Title = "英雄战场",
    Callback = function()
    yxcz()
    end
})
severcnTab:Button({
    Title = "doors",
    Callback = function()
    doors()
    end
})
severcnTab:Button({
    Title = "一路向西",
    Callback = function()
    ylxx()
    end
})
severcnTab:Button({
    Title = "极速传奇",
    Callback = function()
    jscq()
    end
})
severcnTab:Button({
    Title = "凌晨三点后",
    Callback = function()
    lcsdh()
    end
})
severcnTab:Button({
    Title = "自然灾害",
    Callback = function()
    zrzh()
    end
})
severcnTab:Button({
    Title = "莱克星顿",
    Callback = function()
    lkxd()
    end
})
severcnTab:Button({
    Title = "紧急汉堡",
    Callback = function()
    jjhb()
    end
})
end
local function engbutton()
local severTab = Window:Tab({  
    Title = "choose you game",  
    Icon = "house",  
    Locked = false,
})
severTab:Button({
    Title = "ultimate battleground",
    Callback = function()
    ubgeng()
end
})
severTab:Button({
    Title = "99night",
    Callback = function()
    engnight99()
end
})
severTab:Button({
    Title = "chain",
    Callback = function()
    chaineng()
end
})
severTab:Button({
    Title = "Arsenal",
    Callback = function()
    bgceng()
end
})
severTab:Button({
    Title = "blackout(zombie mod)",
    Callback = function()
    blackouteng()
end
})
severTab:Button({
    Title = "Grace",
    Callback = function()
    geleisieng()
end
})
severTab:Button({
    Title = "legends battleground",
    Callback = function()
    legendeng()
end
})
severTab:Button({
    Title = "Restaurant tycoon 3",
    Callback = function()
    ctdheng()
end
})
severTab:Button({
    Title = "Rainbow friends2",
    Callback = function()
    chpyeng()
end
})
severTab:Button({
    Title = "defuse division",
    Callback = function()
    chseng()
end
})
severTab:Button({
    Title = "Deadly Delivery",
    Callback = function()
    wmsdeng()
end
})
severTab:Button({
    Title = "heroes battleground",
    Callback = function()
    yxczeng()
end
})
severTab:Button({
    Title = "WESTBOUND",
    Callback = function()
    ylxxeng()
end
})
severTab:Button({
    Title = "Legends Of Speed",
    Callback = function()
    jscqeng()
end
})
severTab:Button({
    Title = "After 3 AM",
    Callback = function()
    lcsdheng()
end
})
severTab:Button({
    Title = "doors",
    Callback = function()
    doorseng()
end
})
severTab:Button({
    Title = "Natural Disaster Survival",
    Callback = function()
    zrzheng()
end
})
severTab:Button({
    Title = "Lexington & Concord",
    Callback = function()
    lkxdeng()
end
})
severTab:Button({
    Title = "Emergency Hamburger",
    Callback = function()
    jjhbeng()
end
})
end
Tab:Button({
    Title = "中文",
    Callback = function()
    ccnbutton()
end
})
Tab:Button({
    Title = "English",
    Callback = function()
    engbutton()
end
})
Tab:Button({
    Title = "音乐music",
    Callback = function()
    createMusicUI()
end
})
Tab:Input({
    Title = "自定义ui开关键/custom ui switch",
    Value = "K",
    Placeholder = "请输入文本",
    Callback = function(input)
        local key = string.upper(input)
        if Enum.KeyCode[key] then
            Window:SetToggleKey(Enum.KeyCode[key])
        end
    end
})